<!DOCTYPE html>
<!-- saved from url=(0044)http://localhost:1880/#flow/38240a5a23fafee4 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style id="autocompletion.css">.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #3a674e;}.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);    position: absolute;    z-index: 2;}.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid rgba(109, 150, 13, 0.8);    background: rgba(58, 103, 78, 0.62);}.ace_completion-meta {    opacity: 0.5;    margin: 0.9em;}.ace_completion-message {    color: blue;}.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #2d69c7;}.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #93ca12;}.ace_editor.ace_autocomplete {    width: 300px;    z-index: 200000;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;    background: #fefefe;    color: #111;}.ace_dark.ace_editor.ace_autocomplete {    border: 1px #484747 solid;    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);    line-height: 1.4;    background: #25282c;    color: #c1c1c1;}
/*# sourceURL=ace/css/autocompletion.css */</style><style>.ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}</style><style>    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }</style><style id="ace-tm">.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}
/*# sourceURL=ace/css/ace-tm */</style><style id="ace_editor.css">.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;padding: 0;font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;font-variant-ligatures: no-common-ligatures;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: '';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {opacity: 0;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_error_bracket {position: absolute;border-bottom: 1px solid #DE5555;border-radius: 0;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_mobile-menu {position: absolute;line-height: 1.5;border-radius: 4px;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;background: white;box-shadow: 1px 3px 2px grey;border: 1px solid #dcdcdc;color: black;}.ace_dark > .ace_mobile-menu {background: #333;color: #ccc;box-shadow: 1px 3px 2px grey;border: 1px solid #444;}.ace_mobile-button {padding: 2px;cursor: pointer;overflow: hidden;}.ace_mobile-button:hover {background-color: #eee;opacity:1;}.ace_mobile-button:active {background-color: #ddd;}.ace_placeholder {font-family: arial;transform: scale(0.9);transform-origin: left;white-space: pre;opacity: 0.7;margin: 0 10px;}
/*# sourceURL=ace/css/ace_editor.css */</style>

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<!--
  Copyright OpenJS Foundation and other contributors, https://openjsf.org/

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<title>Node-RED : maindashboard</title>
<link rel="icon" type="image/png" href="http://localhost:1880/favicon.ico">
<link rel="mask-icon" href="http://localhost:1880/red/images/node-red-icon-black.svg" color="#8f0000">
<link rel="stylesheet" href="./Node-RED _ maindashboard_files/jquery-ui.min.css">
<link rel="stylesheet" href="./Node-RED _ maindashboard_files/font-awesome.min.css">
<link rel="stylesheet" href="./Node-RED _ maindashboard_files/style.min.css">
<link rel="stylesheet" href="./Node-RED _ maindashboard_files/style.css">
<style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .accessibilityHelpWidget {
	padding: 10px;
	vertical-align: middle;
	overflow: scroll;
	color: var(--vscode-editorWidget-foreground);
	background-color: var(--vscode-editorWidget-background);
	box-shadow: 0 2px 8px var(--vscode-widget-shadow);
	border: 2px solid var(--vscode-contrastBorder);
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-aria-container {
	position: absolute; /* try to hide from window but not from screen readers */
	left:-999em;
}</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .selection-anchor {
	background-color: #007ACC;
	width: 2px !important;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .bracket-match {
	box-sizing: border-box;
	background-color: var(--vscode-editorBracketMatch-background);
	border: 1px solid var(--vscode-editorBracketMatch-border);
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

@font-face {
	font-family: "codicon";
	font-display: block;
	src: url(http://localhost:1880/vendor/monaco/dist/fa2cc0ab9f0bec2b3365.ttf) format("truetype");
}

.codicon[class*='codicon-'] {
	font: normal normal normal 16px/1 codicon;
	display: inline-block;
	text-decoration: none;
	text-rendering: auto;
	text-align: center;
	text-transform: none;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	user-select: none;
	-webkit-user-select: none;
}

/* icon rules are dynamically created by the platform theme service (see iconsStyleSheet.ts) */
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.codicon-wrench-subaction {
	opacity: 0.5;
}

@keyframes codicon-spin {
	100% {
		transform:rotate(360deg);
	}
}

.codicon-sync.codicon-modifier-spin,
.codicon-loading.codicon-modifier-spin,
.codicon-gear.codicon-modifier-spin,
.codicon-notebook-state-executing.codicon-modifier-spin {
	/* Use steps to throttle FPS to reduce CPU usage */
	animation: codicon-spin 1.5s steps(30) infinite;
}

.codicon-modifier-disabled {
	opacity: 0.4;
}

/* custom speed & easing for loading icon */
.codicon-loading,
.codicon-tree-item-loading::before {
	animation-duration: 1s !important;
	animation-timing-function: cubic-bezier(0.53, 0.21, 0.29, 0.67) !important;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .codicon.codicon-symbol-array,
.monaco-workbench .codicon.codicon-symbol-array { color: var(--vscode-symbolIcon-arrayForeground); }
.monaco-editor .codicon.codicon-symbol-boolean,
.monaco-workbench .codicon.codicon-symbol-boolean { color: var(--vscode-symbolIcon-booleanForeground); }
.monaco-editor .codicon.codicon-symbol-class,
.monaco-workbench .codicon.codicon-symbol-class { color: var(--vscode-symbolIcon-classForeground); }
.monaco-editor .codicon.codicon-symbol-method,
.monaco-workbench .codicon.codicon-symbol-method { color: var(--vscode-symbolIcon-methodForeground); }
.monaco-editor .codicon.codicon-symbol-color,
.monaco-workbench .codicon.codicon-symbol-color { color: var(--vscode-symbolIcon-colorForeground); }
.monaco-editor .codicon.codicon-symbol-constant,
.monaco-workbench .codicon.codicon-symbol-constant { color: var(--vscode-symbolIcon-constantForeground); }
.monaco-editor .codicon.codicon-symbol-constructor,
.monaco-workbench .codicon.codicon-symbol-constructor { color: var(--vscode-symbolIcon-constructorForeground); }
.monaco-editor .codicon.codicon-symbol-value,
.monaco-workbench .codicon.codicon-symbol-value,
.monaco-editor .codicon.codicon-symbol-enum,
.monaco-workbench .codicon.codicon-symbol-enum { color: var(--vscode-symbolIcon-enumeratorForeground); }
.monaco-editor .codicon.codicon-symbol-enum-member,
.monaco-workbench .codicon.codicon-symbol-enum-member { color: var(--vscode-symbolIcon-enumeratorMemberForeground); }
.monaco-editor .codicon.codicon-symbol-event,
.monaco-workbench .codicon.codicon-symbol-event { color: var(--vscode-symbolIcon-eventForeground); }
.monaco-editor .codicon.codicon-symbol-field,
.monaco-workbench .codicon.codicon-symbol-field { color: var(--vscode-symbolIcon-fieldForeground); }
.monaco-editor .codicon.codicon-symbol-file,
.monaco-workbench .codicon.codicon-symbol-file { color: var(--vscode-symbolIcon-fileForeground); }
.monaco-editor .codicon.codicon-symbol-folder,
.monaco-workbench .codicon.codicon-symbol-folder { color: var(--vscode-symbolIcon-folderForeground); }
.monaco-editor .codicon.codicon-symbol-function,
.monaco-workbench .codicon.codicon-symbol-function { color: var(--vscode-symbolIcon-functionForeground); }
.monaco-editor .codicon.codicon-symbol-interface,
.monaco-workbench .codicon.codicon-symbol-interface { color: var(--vscode-symbolIcon-interfaceForeground); }
.monaco-editor .codicon.codicon-symbol-key,
.monaco-workbench .codicon.codicon-symbol-key { color: var(--vscode-symbolIcon-keyForeground); }
.monaco-editor .codicon.codicon-symbol-keyword,
.monaco-workbench .codicon.codicon-symbol-keyword { color: var(--vscode-symbolIcon-keywordForeground); }
.monaco-editor .codicon.codicon-symbol-module,
.monaco-workbench .codicon.codicon-symbol-module { color: var(--vscode-symbolIcon-moduleForeground); }
.monaco-editor .codicon.codicon-symbol-namespace,
.monaco-workbench .codicon.codicon-symbol-namespace { color: var(--vscode-symbolIcon-namespaceForeground); }
.monaco-editor .codicon.codicon-symbol-null,
.monaco-workbench .codicon.codicon-symbol-null { color: var(--vscode-symbolIcon-nullForeground); }
.monaco-editor .codicon.codicon-symbol-number,
.monaco-workbench .codicon.codicon-symbol-number { color: var(--vscode-symbolIcon-numberForeground); }
.monaco-editor .codicon.codicon-symbol-object,
.monaco-workbench .codicon.codicon-symbol-object { color: var(--vscode-symbolIcon-objectForeground); }
.monaco-editor .codicon.codicon-symbol-operator,
.monaco-workbench .codicon.codicon-symbol-operator { color: var(--vscode-symbolIcon-operatorForeground); }
.monaco-editor .codicon.codicon-symbol-package,
.monaco-workbench .codicon.codicon-symbol-package { color: var(--vscode-symbolIcon-packageForeground); }
.monaco-editor .codicon.codicon-symbol-property,
.monaco-workbench .codicon.codicon-symbol-property { color: var(--vscode-symbolIcon-propertyForeground); }
.monaco-editor .codicon.codicon-symbol-reference,
.monaco-workbench .codicon.codicon-symbol-reference { color: var(--vscode-symbolIcon-referenceForeground); }
.monaco-editor .codicon.codicon-symbol-snippet,
.monaco-workbench .codicon.codicon-symbol-snippet { color: var(--vscode-symbolIcon-snippetForeground); }
.monaco-editor .codicon.codicon-symbol-string,
.monaco-workbench .codicon.codicon-symbol-string { color: var(--vscode-symbolIcon-stringForeground); }
.monaco-editor .codicon.codicon-symbol-struct,
.monaco-workbench .codicon.codicon-symbol-struct { color: var(--vscode-symbolIcon-structForeground); }
.monaco-editor .codicon.codicon-symbol-text,
.monaco-workbench .codicon.codicon-symbol-text { color: var(--vscode-symbolIcon-textForeground); }
.monaco-editor .codicon.codicon-symbol-type-parameter,
.monaco-workbench .codicon.codicon-symbol-type-parameter { color: var(--vscode-symbolIcon-typeParameterForeground); }
.monaco-editor .codicon.codicon-symbol-unit,
.monaco-workbench .codicon.codicon-symbol-unit { color: var(--vscode-symbolIcon-unitForeground); }
.monaco-editor .codicon.codicon-symbol-variable,
.monaco-workbench .codicon.codicon-symbol-variable { color: var(--vscode-symbolIcon-variableForeground); }
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .monaco-editor-overlaymessage {
	padding-bottom: 8px;
	z-index: 10000;
}

.monaco-editor .monaco-editor-overlaymessage.below {
	padding-bottom: 0;
	padding-top: 8px;
	z-index: 10000;
}

@keyframes fadeIn {
	from { opacity: 0; }
	to { opacity: 1; }
}
.monaco-editor .monaco-editor-overlaymessage.fadeIn {
	animation: fadeIn 150ms ease-out;
}

@keyframes fadeOut {
	from { opacity: 1; }
	to { opacity: 0; }
}
.monaco-editor .monaco-editor-overlaymessage.fadeOut {
	animation: fadeOut 100ms ease-out;
}

.monaco-editor .monaco-editor-overlaymessage .message {
	padding: 1px 4px;
	color: var(--vscode-inputValidation-infoForeground);
	background-color: var(--vscode-inputValidation-infoBackground);
	border: 1px solid var(--vscode-inputValidation-infoBorder);
}

.monaco-editor.hc-black .monaco-editor-overlaymessage .message,
.monaco-editor.hc-light .monaco-editor-overlaymessage .message {
	border-width: 2px;
}

.monaco-editor .monaco-editor-overlaymessage .anchor {
	width: 0 !important;
	height: 0 !important;
	border-color: transparent;
	border-style: solid;
	z-index: 1000;
	border-width: 8px;
	position: absolute;
}

.monaco-editor .monaco-editor-overlaymessage .anchor.top {
	border-bottom-color: var(--vscode-inputValidation-infoBorder);
}

.monaco-editor .monaco-editor-overlaymessage .anchor.below {
	border-top-color: var(--vscode-inputValidation-infoBorder);
}

.monaco-editor .monaco-editor-overlaymessage:not(.below) .anchor.top,
.monaco-editor .monaco-editor-overlaymessage.below .anchor.below {
	display: none;
}

.monaco-editor .monaco-editor-overlaymessage.below .anchor.top {
	display: inherit;
	top: -8px;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-list {
	position: relative;
	height: 100%;
	width: 100%;
	white-space: nowrap;
}

.monaco-list.mouse-support {
	user-select: none;
	-webkit-user-select: none;
}

.monaco-list > .monaco-scrollable-element {
	height: 100%;
}

.monaco-list-rows {
	position: relative;
	width: 100%;
	height: 100%;
}

.monaco-list.horizontal-scrolling .monaco-list-rows {
	width: auto;
	min-width: 100%;
}

.monaco-list-row {
	position: absolute;
	box-sizing: border-box;
	overflow: hidden;
	width: 100%;
}

.monaco-list.mouse-support .monaco-list-row {
	cursor: pointer;
	touch-action: none;
}

/* for OS X ballistic scrolling */
.monaco-list-row.scrolling {
	display: none !important;
}

/* Focus */
.monaco-list.element-focused,
.monaco-list.selection-single,
.monaco-list.selection-multiple {
	outline: 0 !important;
}

/* Dnd */
.monaco-drag-image {
	display: inline-block;
	padding: 1px 7px;
	border-radius: 10px;
	font-size: 12px;
	position: absolute;
	z-index: 1000;
}

/* Filter */

.monaco-list-type-filter-message {
	position: absolute;
	box-sizing: border-box;
	width: 100%;
	height: 100%;
	top: 0;
	left: 0;
	padding: 40px 1em 1em 1em;
	text-align: center;
	white-space: normal;
	opacity: 0.7;
	pointer-events: none;
}

.monaco-list-type-filter-message:empty {
	display: none;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

/* Arrows */
.monaco-scrollable-element > .scrollbar > .scra {
	cursor: pointer;
	font-size: 11px !important;
}

.monaco-scrollable-element > .visible {
	opacity: 1;

	/* Background rule added for IE9 - to allow clicks on dom node */
	background:rgba(0,0,0,0);

	transition: opacity 100ms linear;
	/* In front of peek view */
	z-index: 11;
}
.monaco-scrollable-element > .invisible {
	opacity: 0;
	pointer-events: none;
}
.monaco-scrollable-element > .invisible.fade {
	transition: opacity 800ms linear;
}

/* Scrollable Content Inset Shadow */
.monaco-scrollable-element > .shadow {
	position: absolute;
	display: none;
}
.monaco-scrollable-element > .shadow.top {
	display: block;
	top: 0;
	left: 3px;
	height: 3px;
	width: 100%;
	box-shadow: var(--vscode-scrollbar-shadow) 0 6px 6px -6px inset;
}
.monaco-scrollable-element > .shadow.left {
	display: block;
	top: 3px;
	left: 0;
	height: 100%;
	width: 3px;
	box-shadow: var(--vscode-scrollbar-shadow) 6px 0 6px -6px inset;
}
.monaco-scrollable-element > .shadow.top-left-corner {
	display: block;
	top: 0;
	left: 0;
	height: 3px;
	width: 3px;
}
.monaco-scrollable-element > .shadow.top.left {
	box-shadow: var(--vscode-scrollbar-shadow) 6px 0 6px -6px inset;
}

.monaco-scrollable-element > .scrollbar > .slider {
	background: var(--vscode-scrollbarSlider-background);
}

.monaco-scrollable-element > .scrollbar > .slider:hover {
	background: var(--vscode-scrollbarSlider-hoverBackground);
}

.monaco-scrollable-element > .scrollbar > .slider.active {
	background: var(--vscode-scrollbarSlider-activeBackground);
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

/* Use custom CSS vars to expose padding into parent select for padding calculation */
.monaco-select-box-dropdown-padding {
	--dropdown-padding-top: 1px;
	--dropdown-padding-bottom: 1px;
}

.hc-black .monaco-select-box-dropdown-padding,
.hc-light .monaco-select-box-dropdown-padding {
	--dropdown-padding-top: 3px;
	--dropdown-padding-bottom: 4px;
}

.monaco-select-box-dropdown-container {
	display: none;
	box-sizing:	border-box;
}

.monaco-select-box-dropdown-container > .select-box-details-pane > .select-box-description-markdown * {
	margin: 0;
}

.monaco-select-box-dropdown-container > .select-box-details-pane > .select-box-description-markdown a:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

.monaco-select-box-dropdown-container > .select-box-details-pane > .select-box-description-markdown code {
	line-height: 15px; /** For some reason, this is needed, otherwise <code> will take up 20px height */
	font-family: var(--monaco-monospace-font);
}


.monaco-select-box-dropdown-container.visible {
	display: flex;
	flex-direction: column;
	text-align: left;
	width: 1px;
	overflow: hidden;
	border-bottom-left-radius: 3px;
	border-bottom-right-radius: 3px;
}

.monaco-select-box-dropdown-container > .select-box-dropdown-list-container {
	flex: 0 0 auto;
	align-self: flex-start;
	padding-top: var(--dropdown-padding-top);
	padding-bottom: var(--dropdown-padding-bottom);
	padding-left: 1px;
	padding-right: 1px;
	width: 100%;
	overflow: hidden;
	box-sizing:	border-box;
}

.monaco-select-box-dropdown-container > .select-box-details-pane {
	padding: 5px;
}

.hc-black .monaco-select-box-dropdown-container > .select-box-dropdown-list-container {
	padding-top: var(--dropdown-padding-top);
	padding-bottom: var(--dropdown-padding-bottom);
}

.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row {
	cursor: pointer;
}

.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row > .option-text {
	text-overflow: ellipsis;
	overflow: hidden;
	padding-left: 3.5px;
	white-space: nowrap;
	float: left;
}

.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row > .option-detail {
	text-overflow: ellipsis;
	overflow: hidden;
	padding-left: 3.5px;
	white-space: nowrap;
	float: left;
	opacity: 0.7;
}

.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row > .option-decorator-right {
	text-overflow: ellipsis;
	overflow: hidden;
	padding-right: 10px;
	white-space: nowrap;
	float: right;
}


/* Accepted CSS hiding technique for accessibility reader text  */
/* https://webaim.org/techniques/css/invisiblecontent/ */

.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row > .visually-hidden {
		position: absolute;
		left: -10000px;
		top: auto;
		width: 1px;
		height: 1px;
		overflow: hidden;
}

.monaco-select-box-dropdown-container > .select-box-dropdown-container-width-control {
	flex: 1 1 auto;
	align-self: flex-start;
	opacity: 0;
}

.monaco-select-box-dropdown-container > .select-box-dropdown-container-width-control > .width-control-div {
	overflow: hidden;
	max-height: 0px;
}

.monaco-select-box-dropdown-container > .select-box-dropdown-container-width-control > .width-control-div > .option-text-width-control {
	padding-left: 4px;
	padding-right: 8px;
	white-space: nowrap;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-select-box {
	width: 100%;
	cursor: pointer;
	border-radius: 2px;
}

.monaco-select-box-dropdown-container {
	font-size: 13px;
	font-weight: normal;
	text-transform: none;
}

/** Actions */

.monaco-action-bar .action-item.select-container {
	cursor: default;
}

.monaco-action-bar .action-item .monaco-select-box {
	cursor: pointer;
	min-width: 100px;
	min-height: 18px;
	padding: 2px 23px 2px 8px;
}

.mac .monaco-action-bar .action-item .monaco-select-box {
	font-size: 11px;
	border-radius: 5px;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-action-bar {
	white-space: nowrap;
	height: 100%;
}

.monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	height: 100%;
	width: 100%;
	align-items: center;
}

.monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-action-bar .action-item {
	display: block;
	align-items: center;
	justify-content: center;
	cursor: pointer;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-action-bar .action-item .icon,
.monaco-action-bar .action-item .codicon {
	display: block;
}

.monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
	width: 16px;
	height: 16px;
}

.monaco-action-bar .action-label {
	display: flex;
	font-size: 11px;
	padding: 3px;
	border-radius: 5px;
}

.monaco-action-bar .action-item.disabled .action-label,
.monaco-action-bar .action-item.disabled .action-label::before,
.monaco-action-bar .action-item.disabled .action-label:hover {
	opacity: 0.6;
}

/* Vertical actions */

.monaco-action-bar.vertical {
	text-align: left;
}

.monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid #bbb;
	padding-top: 1px;
	margin-left: .8em;
	margin-right: .8em;
}

.monaco-action-bar .action-item .action-label.separator {
	width: 1px;
	height: 16px;
	margin: 5px 4px !important;
	cursor: default;
	min-width: 1px;
	padding: 0;
	background-color: #bbb;
}

.secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-action-bar .action-item.action-dropdown-item {
	display: flex;
}

.monaco-action-bar .action-item.action-dropdown-item > .action-dropdown-item-separator {
	display: flex;
	align-items: center;
	cursor: default;
}

.monaco-action-bar .action-item.action-dropdown-item > .action-dropdown-item-separator > div {
	width: 1px;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.action-widget {
	font-size: 13px;
	border-radius: 0;
	min-width: 160px;
	max-width: 500px;
	z-index: 40;
	display: block;
	width: 100%;
	border: 1px solid var(--vscode-editorWidget-border) !important;
	background-color: var(--vscode-editorWidget-background);
	color: var(--vscode-editorWidget-foreground);
}

.context-view-block {
	position: fixed;
	cursor: initial;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	z-index: -1;
}

.context-view-pointerBlock {
	position: fixed;
	cursor: initial;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	z-index: 2;
}

.action-widget .monaco-list {
	user-select: none;
	-webkit-user-select: none;
	border: none !important;
	border-width: 0 !important;
}

.action-widget .monaco-list:focus:before {
	outline: 0 !important;
}

.action-widget .monaco-list .monaco-scrollable-element {
	overflow: visible;
}

/** Styles for each row in the list element **/
.action-widget .monaco-list .monaco-list-row {
	padding: 0 10px;
	white-space: nowrap;
	cursor: pointer;
	touch-action: none;
	width: 100%;
}

.action-widget .monaco-list .monaco-list-row.action.focused:not(.option-disabled) {
	background-color: var(--vscode-quickInputList-focusBackground) !important;
	color: var(--vscode-quickInputList-focusForeground);
	outline: 1px solid var(--vscode-menu-selectionBorder, transparent);
	outline-offset: -1px;
}

.action-widget .monaco-list-row.group-header {
	color: var(--vscode-pickerGroup-foreground) !important;
	font-weight: 600;
}

.action-widget .monaco-list .group-header,
.action-widget .monaco-list .option-disabled,
.action-widget .monaco-list .option-disabled:before,
.action-widget .monaco-list .option-disabled .focused,
.action-widget .monaco-list .option-disabled .focused:before {
	cursor: default !important;
	-webkit-touch-callout: none;
	-webkit-user-select: none;
	user-select: none;
	background-color: transparent !important;
	outline: 0 solid !important;
}

.action-widget .monaco-list-row.action {
	display: flex;
	gap: 6px;
	align-items: center;
}

.action-widget .monaco-list-row.action.option-disabled {
	color: var(--vscode-disabledForeground);
}

.action-widget .monaco-list-row.action.option-disabled .codicon {
	opacity: 0.4;
}

.action-widget .monaco-list-row.action:not(.option-disabled) .codicon {
	color: inherit;
}

.action-widget .monaco-list-row.action .title {
	flex: 1;
	overflow: hidden;
	text-overflow: ellipsis;
}

/* Action bar */

.action-widget .action-widget-action-bar {
	background-color: var(--vscode-editorHoverWidget-statusBarBackground);
	border-top: 1px solid var(--vscode-editorHoverWidget-border);
}

.action-widget .action-widget-action-bar::before {
	display: block;
	content: "";
	width: 100%;
}

.action-widget .action-widget-action-bar .actions-container {
	padding: 0 8px;
}

.action-widget-action-bar .action-label {
	color: var(--vscode-textLink-activeForeground);
	font-size: 12px;
	line-height: 22px;
	padding: 0;
	pointer-events: all;
}

.action-widget-action-bar .action-item {
	margin-right: 16px;
	pointer-events: none;
}

.action-widget-action-bar .action-label:hover {
	background-color: transparent !important;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-keybinding {
	display: flex;
	align-items: center;
	line-height: 10px;
}

.monaco-keybinding > .monaco-keybinding-key {
	display: inline-block;
	border-style: solid;
	border-width: 1px;
	border-radius: 3px;
	vertical-align: middle;
	font-size: 11px;
	padding: 3px 5px;
	margin: 0 2px;
}

.monaco-keybinding > .monaco-keybinding-key:first-child {
	margin-left: 0;
}

.monaco-keybinding > .monaco-keybinding-key:last-child {
	margin-right: 0;
}

.monaco-keybinding > .monaco-keybinding-key-separator {
	display: inline-block;
}

.monaco-keybinding > .monaco-keybinding-key-chord-separator {
	width: 6px;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .lightBulbWidget {
	display: flex;
	align-items: center;
	justify-content: center;
}

.monaco-editor .lightBulbWidget:hover{
	cursor: pointer;
}

.monaco-editor .lightBulbWidget.codicon-light-bulb {
	color: var(--vscode-editorLightBulb-foreground);
}

.monaco-editor .lightBulbWidget.codicon-lightbulb-autofix {
	color: var(--vscode-editorLightBulbAutoFix-foreground, var(--vscode-editorLightBulb-foreground));
}

.monaco-editor .lightBulbWidget:before {
	position: relative;
	z-index: 2;
}

.monaco-editor .lightBulbWidget:after {
	position: absolute;
	top: 0;
	left: 0;
	content: '';
	display: block;
	width: 100%;
	height: 100%;
	opacity: 0.3;
	background-color: var(--vscode-editor-background);
	z-index: 1;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .codelens-decoration {
	overflow: hidden;
	display: inline-block;
	text-overflow: ellipsis;
	white-space: nowrap;
	color: var(--vscode-editorCodeLens-foreground);
	line-height: var(--vscode-editorCodeLens-lineHeight);
	font-size: var(--vscode-editorCodeLens-fontSize);
	padding-right: calc(var(--vscode-editorCodeLens-fontSize)*0.5);
	font-feature-settings: var(--vscode-editorCodeLens-fontFeatureSettings);
	font-family: var(--vscode-editorCodeLens-fontFamily), var(--vscode-editorCodeLens-fontFamilyDefault);
}

.monaco-editor .codelens-decoration>span,
.monaco-editor .codelens-decoration>a {
	user-select: none;
	-webkit-user-select: none;
	white-space: nowrap;
	vertical-align: sub;
}

.monaco-editor .codelens-decoration>a {
	text-decoration: none;
}

.monaco-editor .codelens-decoration>a:hover {
	cursor: pointer;
	color: var(--vscode-editorLink-activeForeground) !important;
}

.monaco-editor .codelens-decoration>a:hover .codicon {
	color: var(--vscode-editorLink-activeForeground) !important;
}

.monaco-editor .codelens-decoration .codicon {
	vertical-align: middle;
	color: currentColor !important;
	color: var(--vscode-editorCodeLens-foreground);
	line-height: var(--vscode-editorCodeLens-lineHeight);
	font-size: var(--vscode-editorCodeLens-fontSize);
}

.monaco-editor .codelens-decoration>a:hover .codicon::before {
	cursor: pointer;
}

@keyframes fadein {
	0% {
		opacity: 0;
		visibility: visible;
	}

	100% {
		opacity: 1;
	}
}

.monaco-editor .codelens-decoration.fadein {
	animation: fadein 0.1s linear;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.colorpicker-widget {
	height: 190px;
	user-select: none;
	-webkit-user-select: none;
}

/* Decoration */

.colorpicker-color-decoration,
.hc-light .colorpicker-color-decoration {
	border: solid 0.1em #000;
	box-sizing: border-box;
	margin: 0.1em 0.2em 0 0.2em;
	width: 0.8em;
	height: 0.8em;
	line-height: 0.8em;
	display: inline-block;
	cursor: pointer;
}

.hc-black .colorpicker-color-decoration,
.vs-dark .colorpicker-color-decoration {
	border: solid 0.1em #eee;
}

/* Header */

.colorpicker-header {
	display: flex;
	height: 24px;
	position: relative;
	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII=);
	background-size: 9px 9px;
	image-rendering: pixelated;
}

.colorpicker-header .picked-color {
	width: 240px;
	display: flex;
	align-items: center;
	justify-content: center;
	line-height: 24px;
	cursor: pointer;
	color: white;
	flex: 1;
}

.colorpicker-header .picked-color .codicon {
	color: inherit;
	font-size: 14px;
	position: absolute;
	left: 8px;
}

.colorpicker-header .picked-color.light {
	color: black;
}

.colorpicker-header .original-color {
	width: 74px;
	z-index: inherit;
	cursor: pointer;
}

.standalone-colorpicker {
	color: var(--vscode-editorHoverWidget-foreground);
	background-color: var(--vscode-editorHoverWidget-background);
	border: 1px solid var(--vscode-editorHoverWidget-border);
}

.colorpicker-header.standalone-colorpicker {
	border-bottom: none;
}

.colorpicker-header .close-button {
	cursor: pointer;
	background-color: var(--vscode-editorHoverWidget-background);
	border-left: 1px solid var(--vscode-editorHoverWidget-border);
}

.colorpicker-header .close-button-inner-div {
	width: 100%;
	height: 100%;
	text-align: center;
}

.colorpicker-header .close-button-inner-div:hover {
	background-color: var(--vscode-toolbar-hoverBackground);
}

.colorpicker-header .close-icon {
	padding: 3px;
}

/* Body */

.colorpicker-body {
	display: flex;
	padding: 8px;
	position: relative;
}

.colorpicker-body .saturation-wrap {
	overflow: hidden;
	height: 150px;
	position: relative;
	min-width: 220px;
	flex: 1;
}

.colorpicker-body .saturation-box {
	height: 150px;
	position: absolute;
}

.colorpicker-body .saturation-selection {
	width: 9px;
	height: 9px;
	margin: -5px 0 0 -5px;
	border: 1px solid rgb(255, 255, 255);
	border-radius: 100%;
	box-shadow: 0px 0px 2px rgba(0, 0, 0, 0.8);
	position: absolute;
}

.colorpicker-body .strip {
	width: 25px;
	height: 150px;
}

.colorpicker-body .standalone-strip {
	width: 25px;
	height: 122px;
}

.colorpicker-body .hue-strip {
	position: relative;
	margin-left: 8px;
	cursor: grab;
	background: linear-gradient(to bottom, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%);
}

.colorpicker-body .opacity-strip {
	position: relative;
	margin-left: 8px;
	cursor: grab;
	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII=);
	background-size: 9px 9px;
	image-rendering: pixelated;
}

.colorpicker-body .strip.grabbing {
	cursor: grabbing;
}

.colorpicker-body .slider {
	position: absolute;
	top: 0;
	left: -2px;
	width: calc(100% + 4px);
	height: 4px;
	box-sizing: border-box;
	border: 1px solid rgba(255, 255, 255, 0.71);
	box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.85);
}

.colorpicker-body .strip .overlay {
	height: 150px;
	pointer-events: none;
}

.colorpicker-body .standalone-strip .standalone-overlay {
	height: 122px;
	pointer-events: none;
}

.standalone-colorpicker-body {
	display: block;
	border: 1px solid transparent;
	border-bottom: 1px solid var(--vscode-editorHoverWidget-border);
	overflow: hidden;
}

.colorpicker-body .insert-button {
	height: 20px;
	width: 58px;
	position: absolute;
	right: 8px;
	bottom: 8px;
	background: var(--vscode-button-background);
	color: var(--vscode-button-foreground);
	border-radius: 2px;
	border: none;
	cursor: pointer;
}

.colorpicker-body .insert-button:hover{
	background: var(--vscode-button-hoverBackground);
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .goto-definition-link {
	text-decoration: underline;
	cursor: pointer;
	color: var(--vscode-editorLink-activeForeground) !important;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .peekview-widget .head {
	box-sizing: border-box;
	display: flex;
	justify-content: space-between;
	flex-wrap: nowrap;
}

.monaco-editor .peekview-widget .head .peekview-title {
	display: flex;
	align-items: baseline;
	font-size: 13px;
	margin-left: 20px;
	min-width: 0;
	text-overflow: ellipsis;
	overflow: hidden;
}

.monaco-editor .peekview-widget .head .peekview-title.clickable {
	cursor: pointer;
}

.monaco-editor .peekview-widget .head .peekview-title .dirname:not(:empty) {
	font-size: 0.9em;
	margin-left: 0.5em;
}

.monaco-editor .peekview-widget .head .peekview-title .meta {
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.monaco-editor .peekview-widget .head .peekview-title .dirname {
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.monaco-editor .peekview-widget .head .peekview-title .filename {
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.monaco-editor .peekview-widget .head .peekview-title .meta:not(:empty)::before {
	content: '-';
	padding: 0 0.3em;
}

.monaco-editor .peekview-widget .head .peekview-actions {
	flex: 1;
	text-align: right;
	padding-right: 2px;
}

.monaco-editor .peekview-widget .head .peekview-actions > .monaco-action-bar {
	display: inline-block;
}

.monaco-editor .peekview-widget .head .peekview-actions > .monaco-action-bar,
.monaco-editor .peekview-widget .head .peekview-actions > .monaco-action-bar > .actions-container {
	height: 100%;
}

.monaco-editor .peekview-widget > .body {
	border-top: 1px solid;
	position: relative;
}

.monaco-editor .peekview-widget .head .peekview-title .codicon {
	margin-right: 4px;
	align-self: center;
}

.monaco-editor .peekview-widget .monaco-list .monaco-list-row.focused .codicon {
	color: inherit !important;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

/* -------------------- IE10 remove auto clear button -------------------- */

::-ms-clear {
	display: none;
}

/* All widgets */
/* I am not a big fan of this rule */
.monaco-editor .editor-widget input {
	color: inherit;
}

/* -------------------- Editor -------------------- */

.monaco-editor {
	position: relative;
	overflow: visible;
	-webkit-text-size-adjust: 100%;
	color: var(--vscode-editor-foreground);
	background-color: var(--vscode-editor-background);
}
.monaco-editor-background {
	background-color: var(--vscode-editor-background);
}
.monaco-editor .rangeHighlight {
	background-color: var(--vscode-editor-rangeHighlightBackground);
	box-sizing: border-box;
	border: 1px solid var(--vscode-editor-rangeHighlightBorder);
}
.monaco-editor.hc-black .rangeHighlight, .monaco-editor.hc-light .rangeHighlight {
	border-style: dotted;
}
.monaco-editor .symbolHighlight {
	background-color: var(--vscode-editor-symbolHighlightBackground);
	box-sizing: border-box;
	border: 1px solid var(--vscode-editor-symbolHighlightBorder);
}
.monaco-editor.hc-black .symbolHighlight, .monaco-editor.hc-light .symbolHighlight {
	border-style: dotted;
}

/* -------------------- Misc -------------------- */

.monaco-editor .overflow-guard {
	position: relative;
	overflow: hidden;
}

.monaco-editor .view-overlays {
	position: absolute;
	top: 0;
}

/*
.monaco-editor .auto-closed-character {
	opacity: 0.3;
}
*/


.monaco-editor .squiggly-error {
	border-bottom: 4px double var(--vscode-editorError-border);
}
.monaco-editor .squiggly-error::before {
	display: block;
	content: '';
	width: 100%;
	height: 100%;
	background: var(--vscode-editorError-background);
}
.monaco-editor .squiggly-warning {
	border-bottom: 4px double var(--vscode-editorWarning-border);
}
.monaco-editor .squiggly-warning::before {
	display: block;
	content: '';
	width: 100%;
	height: 100%;
	background: var(--vscode-editorWarning-background);
}
.monaco-editor .squiggly-info {
	border-bottom: 4px double var(--vscode-editorInfo-border);
}
.monaco-editor .squiggly-info::before {
	display: block;
	content: '';
	width: 100%;
	height: 100%;
	background: var(--vscode-editorInfo-background);
}
.monaco-editor .squiggly-hint {
	border-bottom: 2px dotted var(--vscode-editorHint-border);
}
.monaco-editor.showUnused .squiggly-unnecessary {
	border-bottom: 2px dashed var(--vscode-editorUnnecessaryCode-border);
}
.monaco-editor.showDeprecated .squiggly-inline-deprecated {
	text-decoration: line-through;
	text-decoration-color: var(--vscode-editor-foreground, inherit);
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .inputarea {
	min-width: 0;
	min-height: 0;
	margin: 0;
	padding: 0;
	position: absolute;
	outline: none !important;
	resize: none;
	border: none;
	overflow: hidden;
	color: transparent;
	background-color: transparent;
	z-index: -10;
}
/*.monaco-editor .inputarea {
	position: fixed !important;
	width: 800px !important;
	height: 500px !important;
	top: initial !important;
	left: initial !important;
	bottom: 0 !important;
	right: 0 !important;
	color: black !important;
	background: white !important;
	line-height: 15px !important;
	font-size: 14px !important;
	z-index: 10 !important;
}*/
.monaco-editor .inputarea.ime-input {
	z-index: 10;
	caret-color: var(--vscode-editorCursor-foreground);
	color: var(--vscode-editor-foreground);
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .margin-view-overlays .line-numbers {
	font-variant-numeric: tabular-nums;
	position: absolute;
	text-align: right;
	display: inline-block;
	vertical-align: middle;
	box-sizing: border-box;
	cursor: default;
	height: 100%;
}

.monaco-editor .relative-current-line-number {
	text-align: left;
	display: inline-block;
	width: 100%;
}

.monaco-editor .margin-view-overlays .line-numbers.lh-odd {
	margin-top: 1px;
}

.monaco-editor .line-numbers {
	color: var(--vscode-editorLineNumber-foreground);
}

.monaco-editor .line-numbers.active-line-number {
	color: var(--vscode-editorLineNumber-activeForeground);
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .margin {
	background-color: var(--vscode-editorGutter-background);
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-mouse-cursor-text {
	cursor: text;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .view-overlays .current-line {
	display: block;
	position: absolute;
	left: 0;
	top: 0;
	box-sizing: border-box;
}

.monaco-editor .margin-view-overlays .current-line {
	display: block;
	position: absolute;
	left: 0;
	top: 0;
	box-sizing: border-box;
}

.monaco-editor .margin-view-overlays .current-line.current-line-margin.current-line-margin-both {
	border-right: 0;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

/*
	Keeping name short for faster parsing.
	cdr = core decorations rendering (div)
*/
.monaco-editor .lines-content .cdr {
	position: absolute;
}</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .glyph-margin {
	position: absolute;
	top: 0;
}

/*
	Keeping name short for faster parsing.
	cgmr = core glyph margin rendering (div)
*/
.monaco-editor .margin-view-overlays .cgmr {
	position: absolute;
	display: flex;
	align-items: center;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .lines-content .core-guide {
	position: absolute;
	box-sizing: border-box;
}

.monaco-editor .lines-content .core-guide-indent {
	box-shadow: 1px 0 0 0 var(--vscode-editorIndentGuide-background) inset;
}

.monaco-editor .lines-content .core-guide-indent-active {
	box-shadow: 1px 0 0 0 var(--vscode-editorIndentGuide-activeBackground, --vscode-editorIndentGuide-background) inset;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

/* Uncomment to see lines flashing when they're painted */
/*.monaco-editor .view-lines > .view-line {
	background-color: none;
	animation-name: flash-background;
	animation-duration: 800ms;
}
@keyframes flash-background {
	0%   { background-color: lightgreen; }
	100% { background-color: none }
}*/

.mtkcontrol {
	color: rgb(255, 255, 255) !important;
	background: rgb(150, 0, 0) !important;
}

.mtkoverflow {
	background-color: var(--vscode-button-background, --vscode-editor-background);
	color: var(--vscode-button-foreground, --vscode-editor-foreground);
	border-width: 1px;
	border-style: solid;
	border-color: var(--vscode-contrastBorder);
	border-radius: 2px;
	padding: 4px;
	cursor: pointer;
}
.mtkoverflow:hover {
	background-color: var(--vscode-button-hoverBackground);
}

.monaco-editor.no-user-select .lines-content,
.monaco-editor.no-user-select .view-line,
.monaco-editor.no-user-select .view-lines {
	user-select: none;
	-webkit-user-select: none;
}
/* Use user-select: text for lookup feature on macOS */
/* https://github.com/microsoft/vscode/issues/85632 */
.monaco-editor.mac .lines-content:hover,
.monaco-editor.mac .view-line:hover,
.monaco-editor.mac .view-lines:hover {
	user-select: text;
	-webkit-user-select: text;
	-ms-user-select: text;
}

.monaco-editor.enable-user-select {
	user-select: initial;
	-webkit-user-select: initial;
}

.monaco-editor .view-lines {
	white-space: nowrap;
}

.monaco-editor .view-line {
	position: absolute;
	width: 100%;
}

.monaco-editor .mtkw {
	color: var(--vscode-editorWhitespace-foreground) !important;
}

.monaco-editor .mtkz {
	display: inline-block;
	color: var(--vscode-editorWhitespace-foreground) !important;
}

/* TODO@tokenization bootstrap fix */
/*.monaco-editor .view-line > span > span {
	float: none;
	min-height: inherit;
	margin-left: inherit;
}*/
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
.monaco-editor .lines-decorations {
	position: absolute;
	top: 0;
	background: white;
}

/*
	Keeping name short for faster parsing.
	cldr = core lines decorations rendering (div)
*/
.monaco-editor .margin-view-overlays .cldr {
	position: absolute;
	height: 100%;
}</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

/*
	Keeping name short for faster parsing.
	cmdr = core margin decorations rendering (div)
*/
.monaco-editor .margin-view-overlays .cmdr {
	position: absolute;
	left: 0;
	width: 100%;
	height: 100%;
}</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

/* START cover the case that slider is visible on mouseover */
.monaco-editor .minimap.slider-mouseover .minimap-slider {
	opacity: 0;
	transition: opacity 100ms linear;
}
.monaco-editor .minimap.slider-mouseover:hover .minimap-slider {
	opacity: 1;
}
.monaco-editor .minimap.slider-mouseover .minimap-slider.active {
	opacity: 1;
}
/* END cover the case that slider is visible on mouseover */
.monaco-editor .minimap-slider .minimap-slider-horizontal {
	background: var(--vscode-minimapSlider-background);
}
.monaco-editor .minimap-slider:hover .minimap-slider-horizontal {
	background: var(--vscode-minimapSlider-hoverBackground);
}
.monaco-editor .minimap-slider.active .minimap-slider-horizontal {
	background: var(--vscode-minimapSlider-activeBackground);
}
.monaco-editor .minimap-shadow-visible {
	box-shadow: var(--vscode-scrollbar-shadow) -6px 0 6px -6px inset;
}
.monaco-editor .minimap-shadow-hidden {
	position: absolute;
	width: 0;
}
.monaco-editor .minimap-shadow-visible {
	position: absolute;
	left: -6px;
	width: 6px;
}
.monaco-editor.no-minimap-shadow .minimap-shadow-visible {
	position: absolute;
	left: -1px;
	width: 1px;
}

/* 0.5s fade in/out for the minimap */
.minimap.autohide {
	opacity: 0;
	transition: opacity 0.5s;
}
.minimap.autohide:hover {
	opacity: 1;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
.monaco-editor .overlayWidgets {
	position: absolute;
	top: 0;
	left:0;
}</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .view-ruler {
	position: absolute;
	top: 0;
	box-shadow: 1px 0 0 0 var(--vscode-editorRuler-foreground) inset;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .scroll-decoration {
	position: absolute;
	top: 0;
	left: 0;
	height: 6px;
	box-shadow: var(--vscode-scrollbar-shadow) 0 6px 6px -6px inset;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

/*
	Keeping name short for faster parsing.
	cslr = core selections layer rendering (div)
*/
.monaco-editor .lines-content .cslr {
	position: absolute;
}

.monaco-editor .focused .selected-text {
	background-color: var(--vscode-editor-selectionBackground);
}

.monaco-editor .selected-text {
	background-color: var(--vscode-editor-inactiveSelectionBackground);
}

.monaco-editor			.top-left-radius		{ border-top-left-radius: 3px; }
.monaco-editor			.bottom-left-radius		{ border-bottom-left-radius: 3px; }
.monaco-editor			.top-right-radius		{ border-top-right-radius: 3px; }
.monaco-editor			.bottom-right-radius	{ border-bottom-right-radius: 3px; }

.monaco-editor.hc-black .top-left-radius		{ border-top-left-radius: 0; }
.monaco-editor.hc-black .bottom-left-radius		{ border-bottom-left-radius: 0; }
.monaco-editor.hc-black .top-right-radius		{ border-top-right-radius: 0; }
.monaco-editor.hc-black .bottom-right-radius	{ border-bottom-right-radius: 0; }

.monaco-editor.hc-light .top-left-radius		{ border-top-left-radius: 0; }
.monaco-editor.hc-light .bottom-left-radius		{ border-bottom-left-radius: 0; }
.monaco-editor.hc-light .top-right-radius		{ border-top-right-radius: 0; }
.monaco-editor.hc-light .bottom-right-radius	{ border-bottom-right-radius: 0; }
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
.monaco-editor .cursors-layer {
	position: absolute;
	top: 0;
}

.monaco-editor .cursors-layer > .cursor {
	position: absolute;
	overflow: hidden;
	box-sizing: border-box;
}

/* -- smooth-caret-animation -- */
.monaco-editor .cursors-layer.cursor-smooth-caret-animation > .cursor {
	transition: all 80ms;
}

/* -- block-outline-style -- */
.monaco-editor .cursors-layer.cursor-block-outline-style > .cursor {
	background: transparent !important;
	border-style: solid;
	border-width: 1px;
}

/* -- underline-style -- */
.monaco-editor .cursors-layer.cursor-underline-style > .cursor {
	border-bottom-width: 2px;
	border-bottom-style: solid;
	background: transparent !important;
}

/* -- underline-thin-style -- */
.monaco-editor .cursors-layer.cursor-underline-thin-style > .cursor {
	border-bottom-width: 1px;
	border-bottom-style: solid;
	background: transparent !important;
}

@keyframes monaco-cursor-smooth {
	0%,
	20% {
		opacity: 1;
	}
	60%,
	100% {
		opacity: 0;
	}
}

@keyframes monaco-cursor-phase {
	0%,
	20% {
		opacity: 1;
	}
	90%,
	100% {
		opacity: 0;
	}
}

@keyframes monaco-cursor-expand {
	0%,
	20% {
		transform: scaleY(1);
	}
	80%,
	100% {
		transform: scaleY(0);
	}
}

.cursor-smooth {
	animation: monaco-cursor-smooth 0.5s ease-in-out 0s 20 alternate;
}

.cursor-phase {
	animation: monaco-cursor-phase 0.5s ease-in-out 0s 20 alternate;
}

.cursor-expand > .cursor {
	animation: monaco-cursor-expand 0.5s ease-in-out 0s 20 alternate;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .blockDecorations-container {
	position: absolute;
	top: 0;
	pointer-events: none;
}

.monaco-editor .blockDecorations-block {
	position: absolute;
	box-sizing: border-box;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .mwh {
	position: absolute;
	color: var(--vscode-editorWhitespace-foreground) !important;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

:root {
	--vscode-sash-size: 4px;
}

.monaco-sash {
	position: absolute;
	z-index: 35;
	touch-action: none;
}

.monaco-sash.disabled {
	pointer-events: none;
}

.monaco-sash.mac.vertical {
	cursor: col-resize;
}

.monaco-sash.vertical.minimum {
	cursor: e-resize;
}

.monaco-sash.vertical.maximum {
	cursor: w-resize;
}

.monaco-sash.mac.horizontal {
	cursor: row-resize;
}

.monaco-sash.horizontal.minimum {
	cursor: s-resize;
}

.monaco-sash.horizontal.maximum {
	cursor: n-resize;
}

.monaco-sash.disabled {
	cursor: default !important;
	pointer-events: none !important;
}

.monaco-sash.vertical {
	cursor: ew-resize;
	top: 0;
	width: var(--vscode-sash-size);
	height: 100%;
}

.monaco-sash.horizontal {
	cursor: ns-resize;
	left: 0;
	width: 100%;
	height: var(--vscode-sash-size);
}

.monaco-sash:not(.disabled) > .orthogonal-drag-handle {
	content: " ";
	height: calc(var(--vscode-sash-size) * 2);
	width: calc(var(--vscode-sash-size) * 2);
	z-index: 100;
	display: block;
	cursor: all-scroll;
	position: absolute;
}

.monaco-sash.horizontal.orthogonal-edge-north:not(.disabled)
	> .orthogonal-drag-handle.start,
.monaco-sash.horizontal.orthogonal-edge-south:not(.disabled)
	> .orthogonal-drag-handle.end {
	cursor: nwse-resize;
}

.monaco-sash.horizontal.orthogonal-edge-north:not(.disabled)
	> .orthogonal-drag-handle.end,
.monaco-sash.horizontal.orthogonal-edge-south:not(.disabled)
	> .orthogonal-drag-handle.start {
	cursor: nesw-resize;
}

.monaco-sash.vertical > .orthogonal-drag-handle.start {
	left: calc(var(--vscode-sash-size) * -0.5);
	top: calc(var(--vscode-sash-size) * -1);
}
.monaco-sash.vertical > .orthogonal-drag-handle.end {
	left: calc(var(--vscode-sash-size) * -0.5);
	bottom: calc(var(--vscode-sash-size) * -1);
}
.monaco-sash.horizontal > .orthogonal-drag-handle.start {
	top: calc(var(--vscode-sash-size) * -0.5);
	left: calc(var(--vscode-sash-size) * -1);
}
.monaco-sash.horizontal > .orthogonal-drag-handle.end {
	top: calc(var(--vscode-sash-size) * -0.5);
	right: calc(var(--vscode-sash-size) * -1);
}

.monaco-sash:before {
	content: '';
	pointer-events: none;
	position: absolute;
	width: 100%;
	height: 100%;
	background: transparent;
}

.monaco-workbench:not(.reduce-motion) .monaco-sash:before {
	transition: background-color 0.1s ease-out;
}

.monaco-sash.hover:before,
.monaco-sash.active:before {
	background: var(--vscode-sash-hoverBorder);
}

.monaco-sash.vertical:before {
	width: var(--vscode-sash-hover-size);
	left: calc(50% - (var(--vscode-sash-hover-size) / 2));
}

.monaco-sash.horizontal:before {
	height: var(--vscode-sash-hover-size);
	top: calc(50% - (var(--vscode-sash-hover-size) / 2));
}

.pointer-events-disabled {
	pointer-events: none !important;
}

/** Debug **/

.monaco-sash.debug {
	background: cyan;
}

.monaco-sash.debug.disabled {
	background: rgba(0, 255, 255, 0.2);
}

.monaco-sash.debug:not(.disabled) > .orthogonal-drag-handle {
	background: red;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
.monaco-editor .zone-widget {
	position: absolute;
	z-index: 10;
}


.monaco-editor .zone-widget .zone-widget-container {
	border-top-style: solid;
	border-bottom-style: solid;
	border-top-width: 0;
	border-bottom-width: 0;
	position: relative;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-dropdown {
	height: 100%;
	padding: 0;
}

.monaco-dropdown > .dropdown-label {
	cursor: pointer;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
}

.monaco-dropdown > .dropdown-label > .action-label.disabled {
	cursor: default;
}

.monaco-dropdown-with-primary {
	display: flex !important;
	flex-direction: row;
	border-radius: 5px;
}

.monaco-dropdown-with-primary > .action-container > .action-label {
	margin-right: 0;
}

.monaco-dropdown-with-primary > .dropdown-action-container > .monaco-dropdown > .dropdown-label .codicon[class*='codicon-'] {
	font-size: 12px;
	padding-left: 0px;
	padding-right: 0px;
	line-height: 16px;
	margin-left: -3px;
}

.monaco-dropdown-with-primary > .dropdown-action-container > .monaco-dropdown > .dropdown-label > .action-label {
	display: block;
	background-size: 16px;
	background-position: center center;
	background-repeat: no-repeat;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-action-bar .action-item.menu-entry .action-label.icon {
	width: 16px;
	height: 16px;
	background-repeat: no-repeat;
	background-position: 50%;
	background-size: 16px;
}

.monaco-dropdown-with-default {
	display: flex !important;
	flex-direction: row;
	border-radius: 5px;
}

.monaco-dropdown-with-default > .action-container > .action-label {
	margin-right: 0;
}

.monaco-dropdown-with-default > .action-container.menu-entry > .action-label.icon {
	width: 16px;
	height: 16px;
	background-repeat: no-repeat;
	background-position: 50%;
	background-size: 16px;
}

.monaco-dropdown-with-default > .dropdown-action-container > .monaco-dropdown > .dropdown-label .codicon[class*='codicon-'] {
	font-size: 12px;
	padding-left: 0px;
	padding-right: 0px;
	line-height: 16px;
	margin-left: -3px;
}

.monaco-dropdown-with-default > .dropdown-action-container > .monaco-dropdown > .dropdown-label > .action-label {
	display: block;
	background-size: 16px;
	background-position: center center;
	background-repeat: no-repeat;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-split-view2 {
	position: relative;
	width: 100%;
	height: 100%;
}

.monaco-split-view2 > .sash-container {
	position: absolute;
	width: 100%;
	height: 100%;
	pointer-events: none;
}

.monaco-split-view2 > .sash-container > .monaco-sash {
	pointer-events: initial;
}

.monaco-split-view2 > .monaco-scrollable-element {
	width: 100%;
	height: 100%;
}

.monaco-split-view2 > .monaco-scrollable-element > .split-view-container {
	width: 100%;
	height: 100%;
	white-space: nowrap;
	position: relative;
}

.monaco-split-view2 > .monaco-scrollable-element > .split-view-container > .split-view-view {
	white-space: initial;
	position: absolute;
}

.monaco-split-view2 > .monaco-scrollable-element > .split-view-container > .split-view-view:not(.visible) {
	display: none;
}

.monaco-split-view2.vertical > .monaco-scrollable-element > .split-view-container > .split-view-view {
	width: 100%;
}

.monaco-split-view2.horizontal > .monaco-scrollable-element > .split-view-container > .split-view-view {
	height: 100%;
}

.monaco-split-view2.separator-border > .monaco-scrollable-element > .split-view-container > .split-view-view:not(:first-child)::before {
	content: ' ';
	position: absolute;
	top: 0;
	left: 0;
	z-index: 5;
	pointer-events: none;
	background-color: var(--separator-border);
}

.monaco-split-view2.separator-border.horizontal > .monaco-scrollable-element > .split-view-container > .split-view-view:not(:first-child)::before {
	height: 100%;
	width: 1px;
}

.monaco-split-view2.separator-border.vertical > .monaco-scrollable-element > .split-view-container > .split-view-view:not(:first-child)::before {
	height: 1px;
	width: 100%;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-table {
	display: flex;
	flex-direction: column;
	position: relative;
	height: 100%;
	width: 100%;
	white-space: nowrap;
	overflow: hidden;
}

.monaco-table > .monaco-split-view2 {
	border-bottom: 1px solid transparent;
}

.monaco-table > .monaco-list {
	flex: 1;
}

.monaco-table-tr {
	display: flex;
	height: 100%;
}

.monaco-table-th {
	width: 100%;
	height: 100%;
	font-weight: bold;
	overflow: hidden;
	text-overflow: ellipsis;
}

.monaco-table-th,
.monaco-table-td {
	box-sizing: border-box;
	flex-shrink: 0;
	overflow: hidden;
	white-space: nowrap;
	text-overflow: ellipsis;
}

.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
	content: "";
	position: absolute;
	left: calc(var(--vscode-sash-size) / 2);
	width: 0;
	border-left: 1px solid transparent;
}

.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
	transition: border-color 0.2s ease-out;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-custom-toggle {
	margin-left: 2px;
	float: left;
	cursor: pointer;
	overflow: hidden;
	width: 20px;
	height: 20px;
	border-radius: 3px;
	border: 1px solid transparent;
	padding: 1px;
	box-sizing:	border-box;
	user-select: none;
	-webkit-user-select: none;
}

.monaco-custom-toggle:hover {
	background-color: var(--vscode-inputOption-hoverBackground);
}

.hc-black .monaco-custom-toggle:hover,
.hc-light .monaco-custom-toggle:hover {
	border: 1px dashed var(--vscode-focusBorder);
}

.hc-black .monaco-custom-toggle,
.hc-light .monaco-custom-toggle {
	background: none;
}

.hc-black .monaco-custom-toggle:hover,
.hc-light .monaco-custom-toggle:hover {
	background: none;
}

.monaco-custom-toggle.monaco-checkbox {
	height: 18px;
	width: 18px;
	border: 1px solid transparent;
	border-radius: 3px;
	margin-right: 9px;
	margin-left: 0px;
	padding: 0px;
	opacity: 1;
	background-size: 16px !important;
}

/* hide check when unchecked */
.monaco-custom-toggle.monaco-checkbox:not(.checked)::before {
	visibility: hidden;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-inputbox {
	position: relative;
	display: block;
	padding: 0;
	box-sizing:	border-box;
	border-radius: 2px;

	/* Customizable */
	font-size: inherit;
}

.monaco-inputbox > .ibwrapper > .input,
.monaco-inputbox > .ibwrapper > .mirror {

	/* Customizable */
	padding: 4px 6px;
}

.monaco-inputbox > .ibwrapper {
	position: relative;
	width: 100%;
	height: 100%;
}

.monaco-inputbox > .ibwrapper > .input {
	display: inline-block;
	box-sizing:	border-box;
	width: 100%;
	height: 100%;
	line-height: inherit;
	border: none;
	font-family: inherit;
	font-size: inherit;
	resize: none;
	color: inherit;
}

.monaco-inputbox > .ibwrapper > input {
	text-overflow: ellipsis;
}

.monaco-inputbox > .ibwrapper > textarea.input {
	display: block;
	scrollbar-width: none; /* Firefox: hide scrollbars */
	outline: none;
}

.monaco-inputbox > .ibwrapper > textarea.input::-webkit-scrollbar {
	display: none; /* Chrome + Safari: hide scrollbar */
}

.monaco-inputbox > .ibwrapper > textarea.input.empty {
	white-space: nowrap;
}

.monaco-inputbox > .ibwrapper > .mirror {
	position: absolute;
	display: inline-block;
	width: 100%;
	top: 0;
	left: 0;
	box-sizing: border-box;
	white-space: pre-wrap;
	visibility: hidden;
	word-wrap: break-word;
}

/* Context view */

.monaco-inputbox-container {
	text-align: right;
}

.monaco-inputbox-container .monaco-inputbox-message {
	display: inline-block;
	overflow: hidden;
	text-align: left;
	width: 100%;
	box-sizing:	border-box;
	padding: 0.4em;
	font-size: 12px;
	line-height: 17px;
	margin-top: -1px;
	word-wrap: break-word;
}

/* Action bar support */
.monaco-inputbox .monaco-action-bar {
	position: absolute;
	right: 2px;
	top: 4px;
}

.monaco-inputbox .monaco-action-bar .action-item {
	margin-left: 2px;
}

.monaco-inputbox .monaco-action-bar .action-item .codicon {
	background-repeat: no-repeat;
	width: 16px;
	height: 16px;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
/* ---------- Find input ---------- */

.monaco-findInput {
	position: relative;
}

.monaco-findInput .monaco-inputbox {
	font-size: 13px;
	width: 100%;
}

.monaco-findInput > .controls {
	position: absolute;
	top: 3px;
	right: 2px;
}

.vs .monaco-findInput.disabled {
	background-color: #E1E1E1;
}

/* Theming */
.vs-dark .monaco-findInput.disabled {
	background-color: #333;
}

/* Highlighting */
.monaco-findInput.highlight-0 .controls,
.hc-light .monaco-findInput.highlight-0 .controls {
	animation: monaco-findInput-highlight-0 100ms linear 0s;
}

.monaco-findInput.highlight-1 .controls,
.hc-light .monaco-findInput.highlight-1 .controls {
	animation: monaco-findInput-highlight-1 100ms linear 0s;
}

.hc-black .monaco-findInput.highlight-0 .controls,
.vs-dark  .monaco-findInput.highlight-0 .controls {
	animation: monaco-findInput-highlight-dark-0 100ms linear 0s;
}

.hc-black .monaco-findInput.highlight-1 .controls,
.vs-dark  .monaco-findInput.highlight-1 .controls {
	animation: monaco-findInput-highlight-dark-1 100ms linear 0s;
}

@keyframes monaco-findInput-highlight-0 {
	0% { background: rgba(253, 255, 0, 0.8); }
	100% { background: transparent; }
}
@keyframes monaco-findInput-highlight-1 {
	0% { background: rgba(253, 255, 0, 0.8); }
	/* Made intentionally different such that the CSS minifier does not collapse the two animations into a single one*/
	99% { background: transparent; }
}

@keyframes monaco-findInput-highlight-dark-0 {
	0% { background: rgba(255, 255, 255, 0.44); }
	100% { background: transparent; }
}
@keyframes monaco-findInput-highlight-dark-1 {
	0% { background: rgba(255, 255, 255, 0.44); }
	/* Made intentionally different such that the CSS minifier does not collapse the two animations into a single one*/
	99% { background: transparent; }
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-tl-row {
	display: flex;
	height: 100%;
	align-items: center;
	position: relative;
}

.monaco-tl-row.disabled {
	cursor: default;
}
.monaco-tl-indent {
	height: 100%;
	position: absolute;
	top: 0;
	left: 16px;
	pointer-events: none;
}

.hide-arrows .monaco-tl-indent {
	left: 12px;
}

.monaco-tl-indent > .indent-guide {
	display: inline-block;
	box-sizing: border-box;
	height: 100%;
	border-left: 1px solid transparent;
}

.monaco-workbench:not(.reduce-motion) .monaco-tl-indent > .indent-guide {
	transition: border-color 0.1s linear;
}

.monaco-tl-twistie,
.monaco-tl-contents {
	height: 100%;
}

.monaco-tl-twistie {
	font-size: 10px;
	text-align: right;
	padding-right: 6px;
	flex-shrink: 0;
	width: 16px;
	display: flex !important;
	align-items: center;
	justify-content: center;
	transform: translateX(3px);
}

.monaco-tl-contents {
	flex: 1;
	overflow: hidden;
}

.monaco-tl-twistie::before {
	border-radius: 20px;
}

.monaco-tl-twistie.collapsed::before {
	transform: rotate(-90deg);
}

.monaco-tl-twistie.codicon-tree-item-loading::before {
	/* Use steps to throttle FPS to reduce CPU usage */
	animation: codicon-spin 1.25s steps(30) infinite;
}

.monaco-tree-type-filter {
	position: absolute;
	top: 0;
	display: flex;
	padding: 3px;
	max-width: 200px;
	z-index: 100;
	margin: 0 6px;
	border: 1px solid var(--vscode-widget-border);
	border-bottom-left-radius: 4px;
	border-bottom-right-radius: 4px;
}

.monaco-workbench:not(.reduce-motion) .monaco-tree-type-filter {
	transition: top 0.3s;
}

.monaco-tree-type-filter.disabled {
	top: -40px !important;
}

.monaco-tree-type-filter-grab {
	display: flex !important;
	align-items: center;
	justify-content: center;
	cursor: grab;
	margin-right: 2px;
}

.monaco-tree-type-filter-grab.grabbing {
	cursor: grabbing;
}

.monaco-tree-type-filter-input {
	flex: 1;
}

.monaco-tree-type-filter-input .monaco-inputbox {
	height: 23px;
}

.monaco-tree-type-filter-input .monaco-inputbox > .ibwrapper > .input,
.monaco-tree-type-filter-input .monaco-inputbox > .ibwrapper > .mirror {
	padding: 2px 4px;
}

.monaco-tree-type-filter-input .monaco-findInput > .controls {
	top: 2px;
}

.monaco-tree-type-filter-actionbar {
	margin-left: 4px;
}

.monaco-tree-type-filter-actionbar .monaco-action-bar .action-label {
	padding: 2px;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

/* -- zone widget */
.monaco-editor .zone-widget .zone-widget-container.reference-zone-widget {
	border-top-width: 1px;
	border-bottom-width: 1px;
}

.monaco-editor .reference-zone-widget .inline {
	display: inline-block;
	vertical-align: top;
}

.monaco-editor .reference-zone-widget .messages {
	height: 100%;
	width: 100%;
	text-align: center;
	padding: 3em 0;
}

.monaco-editor .reference-zone-widget .ref-tree {
	line-height: 23px;
	background-color: var(--vscode-peekViewResult-background);
	color: var(--vscode-peekViewResult-lineForeground);
}

.monaco-editor .reference-zone-widget .ref-tree .reference {
	text-overflow: ellipsis;
	overflow: hidden;
}

.monaco-editor .reference-zone-widget .ref-tree .reference-file {
	display: inline-flex;
	width: 100%;
	height: 100%;
	color: var(--vscode-peekViewResult-fileForeground);
}

.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .selected .reference-file {
	color: inherit !important;
}

.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) {
	background-color: var(--vscode-peekViewResult-selectionBackground);
	color: var(--vscode-peekViewResult-selectionForeground) !important;
}

.monaco-editor .reference-zone-widget .ref-tree .reference-file .count {
	margin-right: 12px;
	margin-left: auto;
}

.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight {
	background-color: var(--vscode-peekViewResult-matchHighlightBackground);
}

.monaco-editor .reference-zone-widget .preview .reference-decoration {
	background-color: var(--vscode-peekViewEditor-matchHighlightBackground);
	border: 2px solid var(--vscode-peekViewEditor-matchHighlightBorder);
	box-sizing: border-box;
}

.monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,
.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {
	background-color: var(--vscode-peekViewEditor-background);
}

.monaco-editor .reference-zone-widget .preview .monaco-editor .margin {
	background-color: var(--vscode-peekViewEditorGutter-background);
}

/* High Contrast Theming */

.monaco-editor.hc-black .reference-zone-widget .ref-tree .reference-file,
.monaco-editor.hc-light .reference-zone-widget .ref-tree .reference-file {
	font-weight: bold;
}

.monaco-editor.hc-black .reference-zone-widget .ref-tree .referenceMatch .highlight,
.monaco-editor.hc-light .reference-zone-widget .ref-tree .referenceMatch .highlight {
	border: 1px dotted var(--vscode-contrastActiveBorder, transparent);
	box-sizing: border-box;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-count-badge {
	padding: 3px 6px;
	border-radius: 11px;
	font-size: 11px;
	min-width: 18px;
	min-height: 18px;
	line-height: 11px;
	font-weight: normal;
	text-align: center;
	display: inline-block;
	box-sizing: border-box;
}

.monaco-count-badge.long {
	padding: 2px 3px;
	border-radius: 2px;
	min-height: auto;
	line-height: normal;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

/* ---------- Icon label ---------- */

.monaco-icon-label {
	display: flex; /* required for icons support :before rule */
	overflow: hidden;
	text-overflow: ellipsis;
}

.monaco-icon-label::before {

	/* svg icons rendered as background image */
	background-size: 16px;
	background-position: left center;
	background-repeat: no-repeat;
	padding-right: 6px;
	width: 16px;
	height: 22px;
	line-height: inherit !important;
	display: inline-block;

	/* fonts icons */
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	vertical-align: top;

	flex-shrink: 0; /* fix for https://github.com/microsoft/vscode/issues/13787 */
}

.monaco-icon-label-container.disabled {
	color: var(--vscode-disabledForeground);
}
.monaco-icon-label > .monaco-icon-label-container {
	min-width: 0;
	overflow: hidden;
	text-overflow: ellipsis;
	flex: 1;
}

.monaco-icon-label > .monaco-icon-label-container > .monaco-icon-name-container > .label-name {
	color: inherit;
	white-space: pre; /* enable to show labels that include multiple whitespaces */
}

.monaco-icon-label > .monaco-icon-label-container > .monaco-icon-name-container > .label-name > .label-separator {
	margin: 0 2px;
	opacity: 0.5;
}

.monaco-icon-label > .monaco-icon-label-container > .monaco-icon-description-container > .label-description {
	opacity: .7;
	margin-left: 0.5em;
	font-size: 0.9em;
	white-space: pre; /* enable to show labels that include multiple whitespaces */
}

.monaco-icon-label.nowrap > .monaco-icon-label-container > .monaco-icon-description-container > .label-description{
	white-space: nowrap
}

.vs .monaco-icon-label > .monaco-icon-label-container > .monaco-icon-description-container > .label-description {
	opacity: .95;
}

.monaco-icon-label.italic > .monaco-icon-label-container > .monaco-icon-name-container > .label-name,
.monaco-icon-label.italic > .monaco-icon-label-container > .monaco-icon-description-container > .label-description {
	font-style: italic;
}

.monaco-icon-label.deprecated {
	text-decoration: line-through;
	opacity: 0.66;
}

/* make sure apply italic font style to decorations as well */
.monaco-icon-label.italic::after {
	font-style: italic;
}

.monaco-icon-label.strikethrough > .monaco-icon-label-container > .monaco-icon-name-container > .label-name,
.monaco-icon-label.strikethrough > .monaco-icon-label-container > .monaco-icon-description-container > .label-description {
	text-decoration: line-through;
}

.monaco-icon-label::after {
	opacity: 0.75;
	font-size: 90%;
	font-weight: 600;
	margin: auto 16px 0 5px; /* https://github.com/microsoft/vscode/issues/113223 */
	text-align: center;
}

/* make sure selection color wins when a label is being selected */
.monaco-list:focus .selected .monaco-icon-label, /* list */
.monaco-list:focus .selected .monaco-icon-label::after
{
	color: inherit !important;
}

.monaco-list-row.focused.selected .label-description,
.monaco-list-row.selected .label-description {
	opacity: .8;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-hover {
	cursor: default;
	position: absolute;
	overflow: hidden;
	z-index: 50;
	user-select: text;
	-webkit-user-select: text;
	box-sizing: initial;
	animation: fadein 100ms linear;
	line-height: 1.5em;
}

.monaco-hover.hidden {
	display: none;
}

.monaco-hover a:hover:not(.disabled) {
	cursor: pointer;
}

.monaco-hover .hover-contents:not(.html-hover-contents) {
	padding: 4px 8px;
}

.monaco-hover .markdown-hover > .hover-contents:not(.code-hover-contents) {
	max-width: 500px;
	word-wrap: break-word;
}

.monaco-hover .markdown-hover > .hover-contents:not(.code-hover-contents) hr {
	min-width: 100%;
}

.monaco-hover p,
.monaco-hover .code,
.monaco-hover ul,
.monaco-hover h1,
.monaco-hover h2,
.monaco-hover h3,
.monaco-hover h4,
.monaco-hover h5,
.monaco-hover h6 {
	margin: 8px 0;
}

.monaco-hover h1,
.monaco-hover h2,
.monaco-hover h3,
.monaco-hover h4,
.monaco-hover h5,
.monaco-hover h6 {
	line-height: 1.1;
}

.monaco-hover code {
	font-family: var(--monaco-monospace-font);
}

.monaco-hover hr {
	box-sizing: border-box;
	border-left: 0px;
	border-right: 0px;
	margin-top: 4px;
	margin-bottom: -4px;
	margin-left: -8px;
	margin-right: -8px;
	height: 1px;
}

.monaco-hover p:first-child,
.monaco-hover .code:first-child,
.monaco-hover ul:first-child {
	margin-top: 0;
}

.monaco-hover p:last-child,
.monaco-hover .code:last-child,
.monaco-hover ul:last-child {
	margin-bottom: 0;
}

/* MarkupContent Layout */
.monaco-hover ul {
	padding-left: 20px;
}
.monaco-hover ol {
	padding-left: 20px;
}

.monaco-hover li > p {
	margin-bottom: 0;
}

.monaco-hover li > ul {
	margin-top: 0;
}

.monaco-hover code {
	border-radius: 3px;
	padding: 0 0.4em;
}

.monaco-hover .monaco-tokenized-source {
	white-space: pre-wrap;
}

.monaco-hover .hover-row.status-bar {
	font-size: 12px;
	line-height: 22px;
}

.monaco-hover .hover-row.status-bar .info {
	font-style: italic;
	padding: 0px 8px;
}

.monaco-hover .hover-row.status-bar .actions {
	display: flex;
	padding: 0px 8px;
}

.monaco-hover .hover-row.status-bar .actions .action-container {
	margin-right: 16px;
	cursor: pointer;
}

.monaco-hover .hover-row.status-bar .actions .action-container .action .icon {
	padding-right: 4px;
}

.monaco-hover .markdown-hover .hover-contents .codicon {
	color: inherit;
	font-size: inherit;
	vertical-align: middle;
}

.monaco-hover .hover-contents a.code-link:hover,
.monaco-hover .hover-contents a.code-link {
	color: inherit;
}

.monaco-hover .hover-contents a.code-link:before {
	content: '(';
}

.monaco-hover .hover-contents a.code-link:after {
	content: ')';
}

.monaco-hover .hover-contents a.code-link > span {
	text-decoration: underline;
	/** Hack to force underline to show **/
	border-bottom: 1px solid transparent;
	text-underline-position: under;
	color: var(--vscode-textLink-foreground);
}

.monaco-hover .hover-contents a.code-link > span:hover {
	color: var(--vscode-textLink-activeForeground);
}

/** Spans in markdown hovers need a margin-bottom to avoid looking cramped: https://github.com/microsoft/vscode/issues/101496 **/
.monaco-hover .markdown-hover .hover-contents:not(.code-hover-contents):not(.html-hover-contents) span {
	margin-bottom: 4px;
	display: inline-block;
}

.monaco-hover-content .action-container a {
	-webkit-user-select: none;
	user-select: none;
}

.monaco-hover-content .action-container.disabled {
	pointer-events: none;
	opacity: 0.4;
	cursor: default;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .rendered-markdown kbd {
	background-color: var(--vscode-keybindingLabel-background);
	color: var(--vscode-keybindingLabel-foreground);
	border-style: solid;
	border-width: 1px;
	border-radius: 3px;
	border-color: var(--vscode-keybindingLabel-border);
	border-bottom-color: var(--vscode-keybindingLabel-bottomBorder);
	box-shadow: inset 0 -1px 0 var(--vscode-widget-shadow);
	vertical-align: middle;
	padding: 1px 3px;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

/* marker zone */

.monaco-editor .peekview-widget .head .peekview-title .severity-icon {
	display: inline-block;
	vertical-align: text-top;
	margin-right: 4px;
}

.monaco-editor .marker-widget {
	text-overflow: ellipsis;
	white-space: nowrap;
}

.monaco-editor .marker-widget > .stale {
	opacity: 0.6;
	font-style: italic;
}

.monaco-editor .marker-widget .title {
	display: inline-block;
	padding-right: 5px;
}

.monaco-editor .marker-widget .descriptioncontainer {
	position: absolute;
	white-space: pre;
	user-select: text;
	-webkit-user-select: text;
	padding: 8px 12px 0 20px;
}

.monaco-editor .marker-widget .descriptioncontainer .message {
	display: flex;
	flex-direction: column;
}

.monaco-editor .marker-widget .descriptioncontainer .message .details {
	padding-left: 6px;
}

.monaco-editor .marker-widget .descriptioncontainer .message .source,
.monaco-editor .marker-widget .descriptioncontainer .message span.code {
	opacity: 0.6;
}

.monaco-editor .marker-widget .descriptioncontainer .message a.code-link {
	opacity: 0.6;
	color: inherit;
}

.monaco-editor .marker-widget .descriptioncontainer .message a.code-link:before {
	content: '(';
}

.monaco-editor .marker-widget .descriptioncontainer .message a.code-link:after {
	content: ')';
}

.monaco-editor .marker-widget .descriptioncontainer .message a.code-link > span {
	text-decoration: underline;
	/** Hack to force underline to show **/
	border-bottom: 1px solid transparent;
	text-underline-position: under;
	color: var(--vscode-textLink-foreground);
}

.monaco-editor .marker-widget .descriptioncontainer .message a.code-link > span {
	color: var(--vscode-textLink-activeForeground);
}

.monaco-editor .marker-widget .descriptioncontainer .filename {
	cursor: pointer;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .zone-widget .codicon.codicon-error,
.markers-panel .marker-icon.error, .markers-panel .marker-icon .codicon.codicon-error,
.text-search-provider-messages .providerMessage .codicon.codicon-error,
.extensions-viewlet > .extensions .codicon.codicon-error,
.extension-editor .codicon.codicon-error,
.preferences-editor .codicon.codicon-error {
	color: var(--vscode-problemsErrorIcon-foreground);
}

.monaco-editor .zone-widget .codicon.codicon-warning,
.markers-panel .marker-icon.warning, .markers-panel .marker-icon .codicon.codicon-warning,
.text-search-provider-messages .providerMessage .codicon.codicon-warning,
.extensions-viewlet > .extensions .codicon.codicon-warning,
.extension-editor .codicon.codicon-warning,
.preferences-editor .codicon.codicon-warning {
	color: var(--vscode-problemsWarningIcon-foreground);
}

.monaco-editor .zone-widget .codicon.codicon-info,
.markers-panel .marker-icon.info, .markers-panel .marker-icon .codicon.codicon-info,
.text-search-provider-messages .providerMessage .codicon.codicon-info,
.extensions-viewlet > .extensions .codicon.codicon-info,
.extension-editor .codicon.codicon-info,
.preferences-editor .codicon.codicon-info {
	color: var(--vscode-problemsInfoIcon-foreground);
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .hoverHighlight {
	background-color: var(--vscode-editor-hoverHighlightBackground);
}

.monaco-editor .monaco-hover {
	color: var(--vscode-editorHoverWidget-foreground);
	background-color: var(--vscode-editorHoverWidget-background);
	border: 1px solid var(--vscode-editorHoverWidget-border);
}

.monaco-editor .monaco-hover a {
	color: var(--vscode-textLink-foreground);
}

.monaco-editor .monaco-hover a:hover {
	color: var(--vscode-textLink-activeForeground);
}

.monaco-editor .monaco-hover .hover-row .actions {
	background-color: var(--vscode-editorHoverWidget-statusBarBackground);
}

.monaco-editor .monaco-hover code {
	background-color: var(--vscode-textCodeBlock-background);
}


</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .inlineSuggestionsHints.withBorder {
	z-index: 39;
	color: var(--vscode-editorHoverWidget-foreground);
	background-color: var(--vscode-editorHoverWidget-background);
	border: 1px solid var(--vscode-editorHoverWidget-border);
}

.monaco-editor .inlineSuggestionsHints a {
	color: var(--vscode-foreground);
}

.monaco-editor .inlineSuggestionsHints a:hover {
	color: var(--vscode-foreground);
}

.monaco-editor .inlineSuggestionsHints .keybinding {
	display: flex;
	margin-left: 4px;
	opacity: 0.6;
}

.monaco-editor .inlineSuggestionsHints .keybinding .monaco-keybinding-key {
	font-size: 8px;
	padding: 2px 3px;
}

.monaco-editor .inlineSuggestionsHints .custom-actions .action-item:nth-child(2) a {
	display: flex;
	min-width: 19px;
	justify-content: center;
}

.monaco-editor .inlineSuggestionStatusBarItemLabel {
	margin-right: 2px;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-toolbar {
	height: 100%;
}

.monaco-toolbar .toolbar-toggle-more {
	display: inline-block;
	padding: 0;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.inline-editor-progress-decoration {
	display: inline-block;
	width: 1em;
	height: 1em;
}

.inline-progress-widget  {
	display: flex !important;
	justify-content: center;
	align-items: center;
}

.inline-progress-widget .icon {
	font-size: 80% !important;
}

.inline-progress-widget:hover .icon {
	font-size: 90% !important;
	animation: none;
}

.inline-progress-widget:hover .icon::before {
	content: "\ea76"; /* codicon-x */
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor.vs .dnd-target,
.monaco-editor.hc-light .dnd-target {
	border-right: 2px dotted black;
	color: white; /* opposite of black */
}
.monaco-editor.vs-dark .dnd-target {
	border-right: 2px dotted #AEAFAD;
	color: #51504f; /* opposite of #AEAFAD */
}
.monaco-editor.hc-black .dnd-target {
	border-right: 2px dotted #fff;
	color: #000; /* opposite of #fff */
}

.monaco-editor.mouse-default .view-lines,
.monaco-editor.vs-dark.mac.mouse-default .view-lines,
.monaco-editor.hc-black.mac.mouse-default .view-lines,
.monaco-editor.hc-light.mac.mouse-default .view-lines {
	cursor: default;
}
.monaco-editor.mouse-copy .view-lines,
.monaco-editor.vs-dark.mac.mouse-copy .view-lines,
.monaco-editor.hc-black.mac.mouse-copy .view-lines,
.monaco-editor.hc-light.mac.mouse-copy .view-lines {
	cursor: copy;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-text-button {
	box-sizing: border-box;
	display: flex;
	width: 100%;
	padding: 4px;
	border-radius: 2px;
	text-align: center;
	cursor: pointer;
	justify-content: center;
	align-items: center;
	border: 1px solid var(--vscode-button-border, transparent);
	line-height: 18px;
}

.monaco-text-button:focus {
	outline-offset: 2px !important;
}

.monaco-text-button:hover {
	text-decoration: none !important;
}

.monaco-button.disabled:focus,
.monaco-button.disabled {
	opacity: 0.4 !important;
	cursor: default;
}

.monaco-text-button .codicon {
	margin: 0 0.2em;
	color: inherit !important;
}

.monaco-text-button.monaco-text-button-with-short-label {
	flex-direction: row;
	flex-wrap: wrap;
	padding: 0 4px;
	overflow: hidden;
	height: 28px;
}

.monaco-text-button.monaco-text-button-with-short-label > .monaco-button-label {
	flex-basis: 100%;
}

.monaco-text-button.monaco-text-button-with-short-label > .monaco-button-label-short {
	flex-grow: 1;
	width: 0;
	overflow: hidden;
}

.monaco-text-button.monaco-text-button-with-short-label > .monaco-button-label,
.monaco-text-button.monaco-text-button-with-short-label > .monaco-button-label-short {
	display: flex;
	justify-content: center;
	align-items: center;
	font-weight: normal;
	font-style: inherit;
	padding: 4px 0;
}

.monaco-button-dropdown {
	display: flex;
	cursor: pointer;
}

.monaco-button-dropdown.disabled {
	cursor: default;
}

.monaco-button-dropdown > .monaco-button:focus {
	outline-offset: -1px !important;
}

.monaco-button-dropdown.disabled > .monaco-button.disabled,
.monaco-button-dropdown.disabled > .monaco-button.disabled:focus,
.monaco-button-dropdown.disabled > .monaco-button-dropdown-separator {
	opacity: 0.4 !important;
}

.monaco-button-dropdown > .monaco-button.monaco-text-button {
	border-right-width: 0 !important;
}

.monaco-button-dropdown .monaco-button-dropdown-separator {
	padding: 4px 0;
	cursor: default;
}

.monaco-button-dropdown .monaco-button-dropdown-separator > div {
	height: 100%;
	width: 1px;
}

.monaco-button-dropdown > .monaco-button.monaco-dropdown-button {
	border: 1px solid var(--vscode-button-border, transparent);
	border-left-width: 0 !important;
	border-radius: 0 2px 2px 0;
}

.monaco-button-dropdown > .monaco-button.monaco-text-button {
	border-radius: 2px 0 0 2px;
}

.monaco-description-button {
	display: flex;
	flex-direction: column;
	align-items: center;
	margin: 4px 5px; /* allows button focus outline to be visible */
}

.monaco-description-button .monaco-button-description {
	font-style: italic;
	font-size: 11px;
	padding: 4px 20px;
}

.monaco-description-button .monaco-button-label,
.monaco-description-button .monaco-button-description {
	display: flex;
	justify-content: center;
	align-items: center;
}

.monaco-description-button .monaco-button-label > .codicon,
.monaco-description-button .monaco-button-description > .codicon {
	margin: 0 0.2em;
	color: inherit !important;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.post-drop-widget {
	box-shadow: 0 0 8px 2px var(--vscode-widget-shadow);
	border: 1px solid var(--vscode-widget-border, transparent);
	border-radius: 4px;
	background-color: var(--vscode-editorWidget-background);
	overflow: hidden;
}

.post-drop-widget .monaco-button {
	padding: 2px;
	border: none;
	border-radius: 0;
}

.post-drop-widget .monaco-button:hover {
	background-color: var(--vscode-button-secondaryHoverBackground) !important;
}

.post-drop-widget .monaco-button .codicon {
	margin: 0;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .findOptionsWidget {
	background-color: var(--vscode-editorWidget-background);
	color: var(--vscode-editorWidget-foreground);
	box-shadow: 0 0 8px 2px var(--vscode-widget-shadow);
	border: 2px solid var(--vscode-contrastBorder);
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

/* Find widget */
.monaco-editor .find-widget {
	position: absolute;
	z-index: 35;
	height: 33px;
	overflow: hidden;
	line-height: 19px;
	transition: transform 200ms linear;
	padding: 0 4px;
	box-sizing: border-box;
	transform: translateY(calc(-100% - 10px)); /* shadow (10px) */
	border-bottom-left-radius: 4px;
	border-bottom-right-radius: 4px;
}

.monaco-workbench.reduce-motion .monaco-editor .find-widget {
	transition: transform 0ms linear;
}

.monaco-editor .find-widget textarea {
	margin: 0px;
}

.monaco-editor .find-widget.hiddenEditor {
	display: none;
}

/* Find widget when replace is toggled on */
.monaco-editor .find-widget.replaceToggled > .replace-part {
	display: flex;
}

.monaco-editor .find-widget.visible  {
	transform: translateY(0);
}

.monaco-editor .find-widget .monaco-inputbox.synthetic-focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

.monaco-editor .find-widget .monaco-inputbox .input {
	background-color: transparent;
	min-height: 0;
}

.monaco-editor .find-widget .monaco-findInput .input {
	font-size: 13px;
}

.monaco-editor .find-widget > .find-part,
.monaco-editor .find-widget > .replace-part {
	margin: 3px 0 0 17px;
	font-size: 12px;
	display: flex;
}

.monaco-editor .find-widget > .find-part .monaco-inputbox,
.monaco-editor .find-widget > .replace-part .monaco-inputbox {
	min-height: 25px;
}


.monaco-editor .find-widget > .replace-part .monaco-inputbox > .ibwrapper > .mirror {
	padding-right: 22px;
}

.monaco-editor .find-widget > .find-part .monaco-inputbox > .ibwrapper > .input,
.monaco-editor .find-widget > .find-part .monaco-inputbox > .ibwrapper > .mirror,
.monaco-editor .find-widget > .replace-part .monaco-inputbox > .ibwrapper > .input,
.monaco-editor .find-widget > .replace-part .monaco-inputbox > .ibwrapper > .mirror {
	padding-top: 2px;
	padding-bottom: 2px;
}

.monaco-editor .find-widget > .find-part .find-actions {
	height: 25px;
	display: flex;
	align-items: center;
}

.monaco-editor .find-widget > .replace-part .replace-actions {
	height: 25px;
	display: flex;
	align-items: center;
}

.monaco-editor .find-widget .monaco-findInput {
	vertical-align: middle;
	display: flex;
	flex:1;
}

.monaco-editor .find-widget .monaco-findInput .monaco-scrollable-element {
	/* Make sure textarea inherits the width correctly */
	width: 100%;
}

.monaco-editor .find-widget .monaco-findInput .monaco-scrollable-element .scrollbar.vertical {
	/* Hide vertical scrollbar */
	opacity: 0;
}

.monaco-editor .find-widget .matchesCount {
	display: flex;
	flex: initial;
	margin: 0 0 0 3px;
	padding: 2px 0 0 2px;
	height: 25px;
	vertical-align: middle;
	box-sizing: border-box;
	text-align: center;
	line-height: 23px;
}

.monaco-editor .find-widget .button {
	width: 16px;
	height: 16px;
	padding: 3px;
	border-radius: 5px;
	display: flex;
	flex: initial;
	margin-left: 3px;
	background-position: center center;
	background-repeat: no-repeat;
	cursor: pointer;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* find in selection button */
.monaco-editor .find-widget .codicon-find-selection {
	width: 22px;
	height: 22px;
	padding: 3px;
	border-radius: 5px;
}

.monaco-editor .find-widget .button.left {
	margin-left: 0;
	margin-right: 3px;
}

.monaco-editor .find-widget .button.wide {
	width: auto;
	padding: 1px 6px;
	top: -1px;
}

.monaco-editor .find-widget .button.toggle {
	position: absolute;
	top: 0;
	left: 3px;
	width: 18px;
	height: 100%;
	border-radius: 0;
	box-sizing: border-box;
}

.monaco-editor .find-widget .button.toggle.disabled {
	display: none;
}

.monaco-editor .find-widget .disabled {
	color: var(--vscode-disabledForeground);
	cursor: default;
}

.monaco-editor .find-widget > .replace-part {
	display: none;
}

.monaco-editor .find-widget > .replace-part > .monaco-findInput {
	position: relative;
	display: flex;
	vertical-align: middle;
	flex: auto;
	flex-grow: 0;
	flex-shrink: 0;
}

.monaco-editor .find-widget > .replace-part > .monaco-findInput > .controls {
	position: absolute;
	top: 3px;
	right: 2px;
}

/* REDUCED */
.monaco-editor .find-widget.reduced-find-widget .matchesCount {
	display:none;
}

/* NARROW (SMALLER THAN REDUCED) */
.monaco-editor .find-widget.narrow-find-widget {
	max-width: 257px !important;
}

/* COLLAPSED (SMALLER THAN NARROW) */
.monaco-editor .find-widget.collapsed-find-widget {
	max-width: 170px !important;
}

.monaco-editor .find-widget.collapsed-find-widget .button.previous,
.monaco-editor .find-widget.collapsed-find-widget .button.next,
.monaco-editor .find-widget.collapsed-find-widget .button.replace,
.monaco-editor .find-widget.collapsed-find-widget .button.replace-all,
.monaco-editor .find-widget.collapsed-find-widget > .find-part .monaco-findInput .controls {
	display:none;
}

.monaco-editor .findMatch {
	animation-duration: 0;
	animation-name: inherit !important;
}

.monaco-editor .find-widget .monaco-sash {
	left: 0 !important;
}

.monaco-editor.hc-black .find-widget .button:before {
	position: relative;
	top: 1px;
	left: 2px;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
.monaco-editor .margin-view-overlays .codicon-folding-manual-collapsed,
.monaco-editor .margin-view-overlays .codicon-folding-manual-expanded,
.monaco-editor .margin-view-overlays .codicon-folding-expanded,
.monaco-editor .margin-view-overlays .codicon-folding-collapsed {
	cursor: pointer;
	opacity: 0;
	transition: opacity 0.5s;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 140%;
	margin-left: 2px;
}

.monaco-workbench.reduce-motion .monaco-editor .margin-view-overlays .codicon-folding-manual-collapsed,
.monaco-workbench.reduce-motion .monaco-editor .margin-view-overlays .codicon-folding-manual-expanded,
.monaco-workbench.reduce-motion .monaco-editor .margin-view-overlays .codicon-folding-expanded,
.monaco-workbench.reduce-motion .monaco-editor .margin-view-overlays .codicon-folding-collapsed {
	transition: initial;
}

.monaco-editor .margin-view-overlays:hover .codicon,
.monaco-editor .margin-view-overlays .codicon.codicon-folding-collapsed,
.monaco-editor .margin-view-overlays .codicon.codicon-folding-manual-collapsed,
.monaco-editor .margin-view-overlays .codicon.alwaysShowFoldIcons {
	opacity: 1;
}

.monaco-editor .inline-folded:after {
	color: grey;
	margin: 0.1em 0.2em 0 0.2em;
	content: "\22EF"; /* ellipses unicode character */
	display: inline;
	line-height: 1em;
	cursor: pointer;
}

.monaco-editor .folded-background {
	background-color: var(--vscode-editor-foldBackground);
}

.monaco-editor .cldr.codicon.codicon-folding-expanded,
.monaco-editor .cldr.codicon.codicon-folding-collapsed,
.monaco-editor .cldr.codicon.codicon-folding-manual-expanded,
.monaco-editor .cldr.codicon.codicon-folding-manual-collapsed {
	color: var(--vscode-editorGutter-foldingControlForeground) !important;
}

</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .iPadShowKeyboard {
	width: 58px;
	min-width: 0;
	height: 36px;
	min-height: 0;
	margin: 0;
	padding: 0;
	position: absolute;
	resize: none;
	overflow: hidden;
	background: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjNDI0MjQyIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==) center center no-repeat;
	border: 4px solid #F6F6F6;
	border-radius: 4px;
}

.monaco-editor.vs-dark .iPadShowKeyboard {
	background: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCA1MyAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDguMDM2NCA0LjAxMDQySDQuMDA3NzlMNC4wMDc3OSAzMi4wMjg2SDQ4LjAzNjRWNC4wMTA0MlpNNC4wMDc3OSAwLjAwNzgxMjVDMS43OTcyMSAwLjAwNzgxMjUgMC4wMDUxODc5OSAxLjc5OTg0IDAuMDA1MTg3OTkgNC4wMTA0MlYzMi4wMjg2QzAuMDA1MTg3OTkgMzQuMjM5MiAxLjc5NzIxIDM2LjAzMTIgNC4wMDc3OSAzNi4wMzEySDQ4LjAzNjRDNTAuMjQ3IDM2LjAzMTIgNTIuMDM5IDM0LjIzOTIgNTIuMDM5IDMyLjAyODZWNC4wMTA0MkM1Mi4wMzkgMS43OTk4NCA1MC4yNDcgMC4wMDc4MTI1IDQ4LjAzNjQgMC4wMDc4MTI1SDQuMDA3NzlaTTguMDEwNDIgOC4wMTMwMkgxMi4wMTNWMTIuMDE1Nkg4LjAxMDQyVjguMDEzMDJaTTIwLjAxODIgOC4wMTMwMkgxNi4wMTU2VjEyLjAxNTZIMjAuMDE4MlY4LjAxMzAyWk0yNC4wMjA4IDguMDEzMDJIMjguMDIzNFYxMi4wMTU2SDI0LjAyMDhWOC4wMTMwMlpNMzYuMDI4NiA4LjAxMzAySDMyLjAyNlYxMi4wMTU2SDM2LjAyODZWOC4wMTMwMlpNNDAuMDMxMiA4LjAxMzAySDQ0LjAzMzlWMTIuMDE1Nkg0MC4wMzEyVjguMDEzMDJaTTE2LjAxNTYgMTYuMDE4Mkg4LjAxMDQyVjIwLjAyMDhIMTYuMDE1NlYxNi4wMTgyWk0yMC4wMTgyIDE2LjAxODJIMjQuMDIwOFYyMC4wMjA4SDIwLjAxODJWMTYuMDE4MlpNMzIuMDI2IDE2LjAxODJIMjguMDIzNFYyMC4wMjA4SDMyLjAyNlYxNi4wMTgyWk00NC4wMzM5IDE2LjAxODJWMjAuMDIwOEgzNi4wMjg2VjE2LjAxODJINDQuMDMzOVpNMTIuMDEzIDI0LjAyMzRIOC4wMTA0MlYyOC4wMjZIMTIuMDEzVjI0LjAyMzRaTTE2LjAxNTYgMjQuMDIzNEgzNi4wMjg2VjI4LjAyNkgxNi4wMTU2VjI0LjAyMzRaTTQ0LjAzMzkgMjQuMDIzNEg0MC4wMzEyVjI4LjAyNkg0NC4wMzM5VjI0LjAyMzRaIiBmaWxsPSIjQzVDNUM1Ii8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDAiPgo8cmVjdCB3aWR0aD0iNTMiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==) center center no-repeat;
	border: 4px solid #252526;
}</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/


.monaco-editor.vs .valueSetReplacement {
	outline: solid 2px var(--vscode-editorBracketMatch-border);
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .suggest-preview-additional-widget {
	white-space: nowrap;
}

.monaco-editor .suggest-preview-additional-widget .content-spacer {
	color: transparent;
	white-space: pre;
}

.monaco-editor .suggest-preview-additional-widget .button {
	display: inline-block;
	cursor: pointer;
	text-decoration: underline;
	text-underline-position: under;
}

.monaco-editor .ghost-text-hidden {
	opacity: 0;
	font-size: 0;
}

.monaco-editor .ghost-text-decoration, .monaco-editor .suggest-preview-text .ghost-text {
	font-style: italic;
}

.monaco-editor .inline-completion-text-to-replace {
	text-decoration: underline;
	text-underline-position: under;
}

.monaco-editor .ghost-text-decoration,
.monaco-editor .ghost-text-decoration-preview,
.monaco-editor .suggest-preview-text .ghost-text {
	color: var(--vscode-editorGhostText-foreground) !important;
	background-color: var(--vscode-editorGhostText-background);
	border: 1px solid var(--vscode-editorGhostText-border);
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .snippet-placeholder {
	min-width: 2px;
	outline-style: solid;
	outline-width: 1px;
	background-color: var(--vscode-editor-snippetTabstopHighlightBackground, transparent);
	outline-color: var(--vscode-editor-snippetTabstopHighlightBorder, transparent);
}

.monaco-editor .finish-snippet-placeholder {
	outline-style: solid;
	outline-width: 1px;
	background-color: var(--vscode-editor-snippetFinalTabstopHighlightBackground, transparent);
	outline-color: var(--vscode-editor-snippetFinalTabstopHighlightBorder, transparent);
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

/* Suggest widget*/

.monaco-editor .suggest-widget {
	width: 430px;
	z-index: 40;
	display: flex;
	flex-direction: column;
}

.monaco-editor .suggest-widget.message {
	flex-direction: row;
	align-items: center;
}

.monaco-editor .suggest-widget,
.monaco-editor .suggest-details {
	flex: 0 1 auto;
	width: 100%;
	border-style: solid;
	border-width: 1px;
	border-color: var(--vscode-editorSuggestWidget-border);
	background-color: var(--vscode-editorSuggestWidget-background);
}

.monaco-editor.hc-black .suggest-widget,
.monaco-editor.hc-black .suggest-details,
.monaco-editor.hc-light .suggest-widget,
.monaco-editor.hc-light .suggest-details {
	border-width: 2px;
}

/* Styles for status bar part */


.monaco-editor .suggest-widget .suggest-status-bar {
	box-sizing: border-box;
	display: none;
	flex-flow: row nowrap;
	justify-content: space-between;
	width: 100%;
	font-size: 80%;
	padding: 0 4px 0 4px;
	border-top: 1px solid var(--vscode-editorSuggestWidget-border);
	overflow: hidden;
}

.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar {
	display: flex;
}

.monaco-editor .suggest-widget .suggest-status-bar .left {
	padding-right: 8px;
}

.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar .action-label {
	color: var(--vscode-editorSuggestWidgetStatus-foreground);
}

.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar .action-item:not(:last-of-type) .action-label {
	margin-right: 0;
}

.monaco-editor .suggest-widget.with-status-bar .suggest-status-bar .action-item:not(:last-of-type) .action-label::after {
	content: ', ';
	margin-right: 0.3em;
}

.monaco-editor .suggest-widget.with-status-bar .monaco-list .monaco-list-row>.contents>.main>.right>.readMore,
.monaco-editor .suggest-widget.with-status-bar .monaco-list .monaco-list-row.focused.string-label>.contents>.main>.right>.readMore {
	display: none;
}

.monaco-editor .suggest-widget.with-status-bar:not(.docs-side) .monaco-list .monaco-list-row:hover>.contents>.main>.right.can-expand-details>.details-label {
	width: 100%;
}

/* Styles for Message element for when widget is loading or is empty */

.monaco-editor .suggest-widget>.message {
	padding-left: 22px;
}

/** Styles for the list element **/

.monaco-editor .suggest-widget>.tree {
	height: 100%;
	width: 100%;
}

.monaco-editor .suggest-widget .monaco-list {
	user-select: none;
	-webkit-user-select: none;
}

/** Styles for each row in the list element **/

.monaco-editor .suggest-widget .monaco-list .monaco-list-row {
	display: flex;
	-mox-box-sizing: border-box;
	box-sizing: border-box;
	padding-right: 10px;
	background-repeat: no-repeat;
	background-position: 2px 2px;
	white-space: nowrap;
	cursor: pointer;
	touch-action: none;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused {
	color: var(--vscode-editorSuggestWidget-selectedForeground);
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .codicon {
	color: var(--vscode-editorSuggestWidget-selectedIconForeground);
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents {
	flex: 1;
	height: 100%;
	overflow: hidden;
	padding-left: 2px;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main {
	display: flex;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: pre;
	justify-content: space-between;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left,
.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right {
	display: flex;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row:not(.focused)>.contents>.main .monaco-icon-label {
	color: var(--vscode-editorSuggestWidget-foreground);
}

.monaco-editor .suggest-widget:not(.frozen) .monaco-highlighted-label .highlight {
	font-weight: bold;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main .monaco-highlighted-label .highlight {
	color: var(--vscode-editorSuggestWidget-highlightForeground);
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused>.contents>.main .monaco-highlighted-label .highlight {
	color: var(--vscode-editorSuggestWidget-focusHighlightForeground);
}

/** ReadMore Icon styles **/

.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.codicon-close,
.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.readMore::before {
	color: inherit;
	opacity: 1;
	font-size: 14px;
	cursor: pointer;
}

.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.codicon-close {
	position: absolute;
	top: 6px;
	right: 2px;
}

.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.codicon-close:hover,
.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.readMore:hover {
	opacity: 1;
}

/** signature, qualifier, type/details opacity **/

.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label {
	opacity: 0.7;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left>.signature-label {
	overflow: hidden;
	text-overflow: ellipsis;
	opacity: 0.6;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left>.qualifier-label {
	margin-left: 12px;
	opacity: 0.4;
	font-size: 85%;
	line-height: initial;
	text-overflow: ellipsis;
	overflow: hidden;
	align-self: center;
}

/** Type Info and icon next to the label in the focused completion item **/

.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label {
	font-size: 85%;
	margin-left: 1.1em;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label>.monaco-tokenized-source {
	display: inline;
}

/** Details: if using CompletionItem#details, show on focus **/

.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.details-label {
	display: none;
}

.monaco-editor .suggest-widget:not(.shows-details) .monaco-list .monaco-list-row.focused>.contents>.main>.right>.details-label {
	display: inline;
}

/** Details: if using CompletionItemLabel#details, always show **/

.monaco-editor .suggest-widget .monaco-list .monaco-list-row:not(.string-label)>.contents>.main>.right>.details-label,
.monaco-editor .suggest-widget.docs-side .monaco-list .monaco-list-row.focused:not(.string-label)>.contents>.main>.right>.details-label {
	display: inline;
}

/** Ellipsis on hover **/

.monaco-editor .suggest-widget:not(.docs-side) .monaco-list .monaco-list-row.focused:hover>.contents>.main>.right.can-expand-details>.details-label {
	width: calc(100% - 26px);
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left {
	flex-shrink: 1;
	flex-grow: 1;
	overflow: hidden;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.left>.monaco-icon-label {
	flex-shrink: 0;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row:not(.string-label)>.contents>.main>.left>.monaco-icon-label {
	max-width: 100%;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row.string-label>.contents>.main>.left>.monaco-icon-label {
	flex-shrink: 1;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right {
	overflow: hidden;
	flex-shrink: 4;
	max-width: 70%;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row>.contents>.main>.right>.readMore {
	display: inline-block;
	position: absolute;
	right: 10px;
	width: 18px;
	height: 18px;
	visibility: hidden;
}

/** Do NOT display ReadMore when docs is side/below **/

.monaco-editor .suggest-widget.docs-side .monaco-list .monaco-list-row>.contents>.main>.right>.readMore {
	display: none !important;
}

/** Do NOT display ReadMore when using plain CompletionItemLabel (details/documentation might not be resolved) **/

.monaco-editor .suggest-widget .monaco-list .monaco-list-row.string-label>.contents>.main>.right>.readMore {
	display: none;
}

/** Focused item can show ReadMore, but can't when docs is side/below **/

.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused.string-label>.contents>.main>.right>.readMore {
	display: inline-block;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused:hover>.contents>.main>.right>.readMore {
	visibility: visible;
}

/** Styles for each row in the list **/

.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-icon-label.deprecated {
	opacity: 0.66;
	text-decoration: unset;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-icon-label.deprecated>.monaco-icon-label-container>.monaco-icon-name-container {
	text-decoration: line-through;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-icon-label::before {
	height: 100%;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row .icon {
	display: block;
	height: 16px;
	width: 16px;
	margin-left: 2px;
	background-repeat: no-repeat;
	background-size: 80%;
	background-position: center;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row .icon.hide {
	display: none;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row .suggest-icon {
	display: flex;
	align-items: center;
	margin-right: 4px;
}

.monaco-editor .suggest-widget.no-icons .monaco-list .monaco-list-row .icon,
.monaco-editor .suggest-widget.no-icons .monaco-list .monaco-list-row .suggest-icon::before {
	display: none;
}

.monaco-editor .suggest-widget .monaco-list .monaco-list-row .icon.customcolor .colorspan {
	margin: 0 0 0 0.3em;
	border: 0.1em solid #000;
	width: 0.7em;
	height: 0.7em;
	display: inline-block;
}

/** Styles for the docs of the completion item in focus **/

.monaco-editor .suggest-details-container {
	z-index: 41;
}

.monaco-editor .suggest-details {
	display: flex;
	flex-direction: column;
	cursor: default;
	color: var(--vscode-editorSuggestWidget-foreground);
}

.monaco-editor .suggest-details.focused {
	border-color: var(--vscode-focusBorder);
}

.monaco-editor .suggest-details a {
	color: var(--vscode-textLink-foreground);
}

.monaco-editor .suggest-details a:hover {
	color: var(--vscode-textLink-activeForeground);
}

.monaco-editor .suggest-details code {
	background-color: var(--vscode-textCodeBlock-background);
}

.monaco-editor .suggest-details.no-docs {
	display: none;
}

.monaco-editor .suggest-details>.monaco-scrollable-element {
	flex: 1;
}

.monaco-editor .suggest-details>.monaco-scrollable-element>.body {
	box-sizing: border-box;
	height: 100%;
	width: 100%;
}

.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.type {
	flex: 2;
	overflow: hidden;
	text-overflow: ellipsis;
	opacity: 0.7;
	white-space: pre;
	margin: 0 24px 0 0;
	padding: 4px 0 12px 5px;
}

.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.header>.type.auto-wrap {
	white-space: normal;
	word-break: break-all;
}

.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs {
	margin: 0;
	padding: 4px 5px;
	white-space: pre-wrap;
}

.monaco-editor .suggest-details.no-type>.monaco-scrollable-element>.body>.docs {
	margin-right: 24px;
	overflow: hidden;
}

.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs {
	padding: 0;
	white-space: initial;
	min-height: calc(1rem + 8px);
}

.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>div,
.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>span:not(:empty) {
	padding: 4px 5px;
}

.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>div>p:first-child {
	margin-top: 0;
}

.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs>div>p:last-child {
	margin-bottom: 0;
}

.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs .monaco-tokenized-source {
	white-space: pre;
}

.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs .code {
	white-space: pre-wrap;
	word-wrap: break-word;
}

.monaco-editor .suggest-details>.monaco-scrollable-element>.body>.docs.markdown-docs .codicon {
	vertical-align: sub;
}

.monaco-editor .suggest-details>.monaco-scrollable-element>.body>p:empty {
	display: none;
}

.monaco-editor .suggest-details code {
	border-radius: 3px;
	padding: 0 0.4em;
}

.monaco-editor .suggest-details ul {
	padding-left: 20px;
}

.monaco-editor .suggest-details ol {
	padding-left: 20px;
}

.monaco-editor .suggest-details p code {
	font-family: var(--monaco-monospace-font);
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .tokens-inspect-widget {
	z-index: 50;
	user-select: text;
	-webkit-user-select: text;
	padding: 10px;
	color: var(--vscode-editorHoverWidget-foreground);
	background-color: var(--vscode-editorHoverWidget-background);
	border: 1px solid var(--vscode-editorHoverWidget-border);
}
.monaco-editor.hc-black .tokens-inspect-widget, .monaco-editor.hc-light .tokens-inspect-widget {
	border-width: 2px;
}

.monaco-editor .tokens-inspect-widget .tokens-inspect-separator {
	height: 1px;
	border: 0;
	background-color: var(--vscode-editorHoverWidget-border);
}

.monaco-editor .tokens-inspect-widget .tm-token {
	font-family: var(--monaco-monospace-font);
}

.monaco-editor .tokens-inspect-widget .tm-token-length {
	font-weight: normal;
	font-size: 60%;
	float: right;
}

.monaco-editor .tokens-inspect-widget .tm-metadata-table {
	width: 100%;
}

.monaco-editor .tokens-inspect-widget .tm-metadata-value {
	font-family: var(--monaco-monospace-font);
	text-align: right;
}

.monaco-editor .tokens-inspect-widget .tm-token-type {
	font-family: var(--monaco-monospace-font);
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .linked-editing-decoration {
	background-color: var(--vscode-editor-linkedEditingBackground);

	/* Ensure decoration is visible even if range is empty */
	min-width: 1px;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
.monaco-editor .detected-link,
.monaco-editor .detected-link-active {
	text-decoration: underline;
	text-underline-position: under;
}

.monaco-editor .detected-link-active {
	cursor: pointer;
	color: var(--vscode-editorLink-activeForeground) !important;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .focused .selectionHighlight {
	background-color: var(--vscode-editor-selectionHighlightBackground);
	box-sizing: border-box;
	border: 1px solid var(--vscode-editor-selectionHighlightBorder);
}
.monaco-editor.hc-black .focused .selectionHighlight, .monaco-editor.hc-light .focused .selectionHighlight {
	border-style: dotted;
}

.monaco-editor .wordHighlight {
	background-color: var(--vscode-editor-wordHighlightBackground);
	box-sizing: border-box;
	border: 1px solid var(--vscode-editor-wordHighlightBorder);
}
.monaco-editor.hc-black .wordHighlight, .monaco-editor.hc-light .wordHighlight {
	border-style: dotted;
}

.monaco-editor .wordHighlightStrong {
	background-color: var(--vscode-editor-wordHighlightStrongBackground);
	box-sizing: border-box;
	border: 1px solid var(--vscode-editor-wordHighlightStrongBorder);
}
.monaco-editor.hc-black .wordHighlightStrong, .monaco-editor.hc-light .wordHighlightStrong {
	border-style: dotted;
}

.monaco-editor .wordHighlightText {
	background-color: var(--vscode-editor-wordHighlightTextBackground);
	box-sizing: border-box;
	border: 1px solid var(--vscode-editor-wordHighlightTextBorder);
}
.monaco-editor.hc-black .wordHighlightText, .monaco-editor.hc-light .wordHighlightText {
	border-style: dotted;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .parameter-hints-widget {
	/* Must be higher than the sash's z-index and terminal canvases but lower than the suggest widget */
	z-index: 39;
	display: flex;
	flex-direction: column;
	line-height: 1.5em;
	cursor: default;
	color: var(--vscode-editorHoverWidget-foreground);
	background-color: var(--vscode-editorHoverWidget-background);
	border: 1px solid var(--vscode-editorHoverWidget-border);
}

.hc-black .monaco-editor .parameter-hints-widget,
.hc-light .monaco-editor .parameter-hints-widget {
	border-width: 2px;
}

.monaco-editor .parameter-hints-widget > .phwrapper {
	max-width: 440px;
	display: flex;
	flex-direction: row;
}

.monaco-editor .parameter-hints-widget.multiple {
	min-height: 3.3em;
	padding: 0;
}

.monaco-editor .parameter-hints-widget.multiple .body::before {
	content: "";
	display: block;
	height: 100%;
	position: absolute;
	opacity: 0.5;
	border-left: 1px solid var(--vscode-editorHoverWidget-border);
}

.monaco-editor .parameter-hints-widget p,
.monaco-editor .parameter-hints-widget ul {
	margin: 8px 0;
}

.monaco-editor .parameter-hints-widget .monaco-scrollable-element,
.monaco-editor .parameter-hints-widget .body {
	display: flex;
	flex: 1;
	flex-direction: column;
	min-height: 100%;
}

.monaco-editor .parameter-hints-widget .signature {
	padding: 4px 5px;
	position: relative;
}

.monaco-editor .parameter-hints-widget .signature.has-docs::after {
	content: "";
	display: block;
	position: absolute;
	left: 0;
	width: 100%;
	padding-top: 4px;
	opacity: 0.5;
	border-bottom: 1px solid var(--vscode-editorHoverWidget-border);
}

.monaco-editor .parameter-hints-widget .docs {
	padding: 0 10px 0 5px;
	white-space: pre-wrap;
}

.monaco-editor .parameter-hints-widget .docs.empty {
	display: none;
}

.monaco-editor .parameter-hints-widget .docs a {
	color: var(--vscode-textLink-foreground);
}

.monaco-editor .parameter-hints-widget .docs a:hover {
	color: var(--vscode-textLink-activeForeground);
	cursor: pointer;
}

.monaco-editor .parameter-hints-widget .docs .markdown-docs {
	white-space: initial;
}

.monaco-editor .parameter-hints-widget .docs code {
	font-family: var(--monaco-monospace-font);
	border-radius: 3px;
	padding: 0 0.4em;
	background-color: var(--vscode-textCodeBlock-background);
}

.monaco-editor .parameter-hints-widget .docs .monaco-tokenized-source,
.monaco-editor .parameter-hints-widget .docs .code {
	white-space: pre-wrap;
}

.monaco-editor .parameter-hints-widget .controls {
	display: none;
	flex-direction: column;
	align-items: center;
	min-width: 22px;
	justify-content: flex-end;
}

.monaco-editor .parameter-hints-widget.multiple .controls {
	display: flex;
	padding: 0 2px;
}

.monaco-editor .parameter-hints-widget.multiple .button {
	width: 16px;
	height: 16px;
	background-repeat: no-repeat;
	cursor: pointer;
}

.monaco-editor .parameter-hints-widget .button.previous {
	bottom: 24px;
}

.monaco-editor .parameter-hints-widget .overloads {
	text-align: center;
	height: 12px;
	line-height: 12px;
	font-family: var(--monaco-monospace-font);
}

.monaco-editor .parameter-hints-widget .signature .parameter.active {
	color: var(--vscode-editorHoverWidget-highlightForeground);
	font-weight: bold;
}

.monaco-editor .parameter-hints-widget .documentation-parameter > .parameter {
	font-weight: bold;
	margin-right: 0.5em;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .rename-box {
	z-index: 100;
	color: inherit;
	border-radius: 4px;
}

.monaco-editor .rename-box.preview {
	padding: 4px 4px 0 4px;
}

.monaco-editor .rename-box .rename-input {
	padding: 3px;
	border-radius: 2px;
}

.monaco-editor .rename-box .rename-label {
	display: none;
	opacity: .8;
}

.monaco-editor .rename-box.preview .rename-label {
	display: inherit;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .sticky-line {
	color: var(--vscode-editorLineNumber-foreground);
	overflow: hidden;
	white-space: nowrap;
	display: inline-block;
}

.monaco-editor .sticky-line-number {
	text-align: right;
	float: left;
}

.monaco-editor .sticky-line-root {
	background-color: inherit;
	overflow: hidden;
	white-space: nowrap;
	width: 100%;
}

.monaco-editor.hc-black .sticky-widget,
.monaco-editor.hc-light .sticky-widget {
	border-bottom: 1px solid var(--vscode-contrastBorder);
}

.monaco-editor .sticky-line-root:hover {
	background-color: var(--vscode-editorStickyScrollHover-background);
	cursor: pointer;
}

.monaco-editor .sticky-widget {
	width: 100%;
	box-shadow: var(--vscode-scrollbar-shadow) 0 3px 2px -2px;
	z-index: 4;
	background-color: var(--vscode-editorStickyScroll-background);
}

.monaco-editor .sticky-widget.peek {
	background-color: var(--vscode-peekViewEditorStickyScroll-background);
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-editor .unicode-highlight {
	border: 1px solid var(--vscode-editorUnicodeHighlight-border);
	background-color: var(--vscode-editorUnicodeHighlight-background);
	box-sizing: border-box;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.editor-banner {
	box-sizing: border-box;
	cursor: default;
	width: 100%;
	font-size: 12px;
	display: flex;
	overflow: visible;

	height: 26px;

	background: var(--vscode-banner-background);
}


.editor-banner .icon-container {
	display: flex;
	flex-shrink: 0;
	align-items: center;
	padding: 0 6px 0 10px;
}

.editor-banner .icon-container.custom-icon {
	background-repeat: no-repeat;
	background-position: center center;
	background-size: 16px;
	width: 16px;
	padding: 0;
	margin: 0 6px 0 10px;
}

.editor-banner .message-container {
	display: flex;
	align-items: center;
	line-height: 26px;
	text-overflow: ellipsis;
	white-space: nowrap;
	overflow: hidden;
}

.editor-banner .message-container p {
	margin-block-start: 0;
	margin-block-end: 0;
}

.editor-banner .message-actions-container {
	flex-grow: 1;
	flex-shrink: 0;
	line-height: 26px;
	margin: 0 4px;
}

.editor-banner .message-actions-container a.monaco-button {
	width: inherit;
	margin: 2px 8px;
	padding: 0px 12px;
}

.editor-banner .message-actions-container a {
	padding: 3px;
	margin-left: 12px;
	text-decoration: underline;
}

.editor-banner .action-container {
	padding: 0 10px 0 6px;
}

.editor-banner {
	background-color: var(--vscode-banner-background);
}

.editor-banner,
.editor-banner .action-container .codicon,
.editor-banner .message-actions-container .monaco-link {
	color: var(--vscode-banner-foreground);
}

.editor-banner .icon-container .codicon {
	color: var(--vscode-banner-iconForeground);
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-link {
	color: var(--vscode-textLink-foreground);
}

.monaco-link:hover {
	color: var(--vscode-textLink-activeForeground);
}

</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/


/* Default standalone editor fonts */
.monaco-editor {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	--monaco-monospace-font: "SF Mono", Monaco, Menlo, Consolas, "Ubuntu Mono", "Liberation Mono", "DejaVu Sans Mono", "Courier New", monospace;
}

.monaco-menu .monaco-action-bar.vertical .action-item .action-menu-item:focus .action-label {
	stroke-width: 1.2px;
}

.monaco-editor.vs-dark .monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .action-label,
.monaco-editor.hc-black .monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .action-label,
.monaco-editor.hc-light .monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .action-label {
	stroke-width: 1.2px;
}

.monaco-hover p {
	margin: 0;
}

/* See https://github.com/microsoft/monaco-editor/issues/2168#issuecomment-780078600 */
.monaco-aria-container {
	position: absolute !important;
	top: 0; /* avoid being placed underneath a sibling element */
	height: 1px;
	width: 1px;
	margin: -1px;
	overflow: hidden;
	padding: 0;
	clip: rect(1px, 1px, 1px, 1px);
	clip-path: inset(50%);
}

/*.monaco-editor.vs [tabindex="0"]:focus {
	outline: 1px solid rgba(0, 122, 204, 0.4);
	outline-offset: -1px;
	opacity: 1 !important;
}

.monaco-editor.vs-dark [tabindex="0"]:focus {
	outline: 1px solid rgba(14, 99, 156, 0.6);
	outline-offset: -1px;
	opacity: 1 !important;
}*/
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
/* ---------- DiffEditor ---------- */

.monaco-diff-editor .diffOverview {
	z-index: 9;
}

.monaco-diff-editor .diffOverview .diffViewport {
	z-index: 10;
}

/* colors not externalized: using transparancy on background */
.monaco-diff-editor.vs			.diffOverview { background: rgba(0, 0, 0, 0.03); }
.monaco-diff-editor.vs-dark		.diffOverview { background: rgba(255, 255, 255, 0.01); }

.monaco-scrollable-element.modified-in-monaco-diff-editor.vs		.scrollbar { background: rgba(0,0,0,0); }
.monaco-scrollable-element.modified-in-monaco-diff-editor.vs-dark	.scrollbar { background: rgba(0,0,0,0); }
.monaco-scrollable-element.modified-in-monaco-diff-editor.hc-black	.scrollbar { background: none; }
.monaco-scrollable-element.modified-in-monaco-diff-editor.hc-light	.scrollbar { background: none; }

.monaco-scrollable-element.modified-in-monaco-diff-editor .slider {
	z-index: 10;
}
.modified-in-monaco-diff-editor				.slider.active { background: rgba(171, 171, 171, .4); }
.modified-in-monaco-diff-editor.hc-black	.slider.active { background: none; }
.modified-in-monaco-diff-editor.hc-light	.slider.active { background: none; }

/* ---------- Diff ---------- */

.monaco-editor .insert-sign,
.monaco-diff-editor .insert-sign,
.monaco-editor .delete-sign,
.monaco-diff-editor .delete-sign {
	font-size: 11px !important;
	opacity: 0.7 !important;
	display: flex !important;
	align-items: center;
}
.monaco-editor.hc-black .insert-sign,
.monaco-diff-editor.hc-black .insert-sign,
.monaco-editor.hc-black .delete-sign,
.monaco-diff-editor.hc-black .delete-sign,
.monaco-editor.hc-light .insert-sign,
.monaco-diff-editor.hc-light .insert-sign,
.monaco-editor.hc-light .delete-sign,
.monaco-diff-editor.hc-light .delete-sign {
	opacity: 1;
}

.monaco-editor .inline-deleted-margin-view-zone {
	text-align: right;
}
.monaco-editor .inline-added-margin-view-zone {
	text-align: right;
}

.monaco-editor .arrow-revert-change {
	z-index: 10;
	position: absolute;
}

.monaco-editor .arrow-revert-change:hover {
	cursor: pointer;
}

/* ---------- Inline Diff ---------- */

.monaco-editor .view-zones .view-lines .view-line span {
	display: inline-block;
}

.monaco-editor .margin-view-zones .lightbulb-glyph:hover {
	cursor: pointer;
}

.monaco-editor .char-insert, .monaco-diff-editor .char-insert {
	background-color: var(--vscode-diffEditor-insertedTextBackground);
}

.monaco-editor .line-insert, .monaco-diff-editor .line-insert {
	background-color: var(--vscode-diffEditor-insertedLineBackground, --vscode-diffEditor-insertedTextBackground);
}

.monaco-editor .line-insert,
.monaco-editor .char-insert {
	box-sizing: border-box;
	border: 1px solid var(--vscode-diffEditor-insertedTextBorder);
}
.monaco-editor.hc-black .line-insert, .monaco-editor.hc-light .line-insert,
.monaco-editor.hc-black .char-insert, .monaco-editor.hc-light .char-insert {
	border-style: dashed;
}

.monaco-editor .line-delete,
.monaco-editor .char-delete {
	box-sizing: border-box;
	border: 1px solid var(--vscode-diffEditor-removedTextBorder);
}
.monaco-editor.hc-black .line-delete, .monaco-editor.hc-light .line-delete,
.monaco-editor.hc-black .char-delete, .monaco-editor.hc-light .char-delete {
	border-style: dashed;
}

.monaco-editor .inline-added-margin-view-zone,
.monaco-editor .gutter-insert, .monaco-diff-editor .gutter-insert {
	background-color: var(--vscode-diffEditorGutter-insertedLineBackground, --vscode-diffEditor-insertedLineBackground, --vscode-diffEditor-insertedTextBackground);
}

.monaco-editor .char-delete, .monaco-diff-editor .char-delete {
	background-color: var(--vscode-diffEditor-removedTextBackground);
}

.monaco-editor .line-delete, .monaco-diff-editor .line-delete {
	background-color: var(--vscode-diffEditor-removedLineBackground, --vscode-diffEditor-removedTextBackground);
}

.monaco-editor .inline-deleted-margin-view-zone,
.monaco-editor .gutter-delete, .monaco-diff-editor .gutter-delete {
	background-color: var(--vscode-diffEditorGutter-removedLineBackground, --vscode-diffEditor-removedLineBackground, --vscode-diffEditor-removedTextBackground);
}

.monaco-diff-editor.side-by-side .editor.modified {
	box-shadow: -6px 0 5px -5px var(--vscode-scrollbar-shadow);
	border-left: 1px solid var(--vscode-diffEditor-border);
}

.monaco-diff-editor .diffViewport {
	background: var(--vscode-scrollbarSlider-background);
}

.monaco-diff-editor .diffViewport:hover {
	background: var(--vscode-scrollbarSlider-hoverBackground);
}

.monaco-diff-editor .diffViewport:active {
	background: var(--vscode-scrollbarSlider-activeBackground);
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-diff-editor .diff-review-line-number {
	text-align: right;
	display: inline-block;
	color: var(--vscode-editorLineNumber-foreground);
}

.monaco-diff-editor .diff-review {
	position: absolute;
	user-select: none;
	-webkit-user-select: none;
}

.monaco-diff-editor .diff-review-summary {
	padding-left: 10px;
}

.monaco-diff-editor .diff-review-shadow {
	position: absolute;
	box-shadow: var(--vscode-scrollbar-shadow) 0 -6px 6px -6px inset;
}

.monaco-diff-editor .diff-review-row {
	white-space: pre;
}

.monaco-diff-editor .diff-review-table {
	display: table;
	min-width: 100%;
}

.monaco-diff-editor .diff-review-row {
	display: table-row;
	width: 100%;
}

.monaco-diff-editor .diff-review-spacer {
	display: inline-block;
	width: 10px;
	vertical-align: middle;
}

.monaco-diff-editor .diff-review-spacer > .codicon {
	font-size: 9px !important;
}

.monaco-diff-editor .diff-review-actions {
	display: inline-block;
	position: absolute;
	right: 10px;
	top: 2px;
}

.monaco-diff-editor .diff-review-actions .action-label {
	width: 16px;
	height: 16px;
	margin: 2px 0;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.context-view {
	position: absolute;
}

.context-view.fixed {
	all: initial;
	font-family: inherit;
	font-size: 13px;
	position: fixed;
	color: inherit;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.quick-input-widget {
	font-size: 13px;
}

.quick-input-widget .monaco-highlighted-label .highlight,
.quick-input-widget .monaco-highlighted-label .highlight {
	color: #0066BF;
}

.vs .quick-input-widget .monaco-list-row.focused .monaco-highlighted-label .highlight,
.vs .quick-input-widget .monaco-list-row.focused .monaco-highlighted-label .highlight {
	color: #9DDDFF;
}

.vs-dark .quick-input-widget .monaco-highlighted-label .highlight,
.vs-dark .quick-input-widget .monaco-highlighted-label .highlight {
	color: #0097fb;
}

.hc-black .quick-input-widget .monaco-highlighted-label .highlight,
.hc-black .quick-input-widget .monaco-highlighted-label .highlight {
	color: #F38518;
}

.hc-light .quick-input-widget .monaco-highlighted-label .highlight,
.hc-light .quick-input-widget .monaco-highlighted-label .highlight {
	color: #0F4A85;
}

.monaco-keybinding > .monaco-keybinding-key {
	background-color: rgba(221, 221, 221, 0.4);
	border: solid 1px rgba(204, 204, 204, 0.4);
	border-bottom-color: rgba(187, 187, 187, 0.4);
	box-shadow: inset 0 -1px 0 rgba(187, 187, 187, 0.4);
	color: #555;
}

.hc-black .monaco-keybinding > .monaco-keybinding-key {
	background-color: transparent;
	border: solid 1px rgb(111, 195, 223);
	box-shadow: none;
	color: #fff;
}

.hc-light .monaco-keybinding > .monaco-keybinding-key {
	background-color: transparent;
	border: solid 1px #0F4A85;
	box-shadow: none;
	color: #292929;
}

.vs-dark .monaco-keybinding > .monaco-keybinding-key {
	background-color: rgba(128, 128, 128, 0.17);
	border: solid 1px rgba(51, 51, 51, 0.6);
	border-bottom-color: rgba(68, 68, 68, 0.6);
	box-shadow: inset 0 -1px 0 rgba(68, 68, 68, 0.6);
	color: #ccc;
}
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.monaco-progress-container {
	width: 100%;
	height: 5px;
	overflow: hidden; /* keep progress bit in bounds */
}

.monaco-progress-container .progress-bit {
	width: 2%;
	height: 5px;
	position: absolute;
	left: 0;
	display: none;
}

.monaco-progress-container.active .progress-bit {
	display: inherit;
}

.monaco-progress-container.discrete .progress-bit {
	left: 0;
	transition: width 100ms linear;
}

.monaco-progress-container.discrete.done .progress-bit {
	width: 100%;
}

.monaco-progress-container.infinite .progress-bit {
	animation-name: progress;
	animation-duration: 4s;
	animation-iteration-count: infinite;
	transform: translate3d(0px, 0px, 0px);
	animation-timing-function: linear;
}

.monaco-progress-container.infinite.infinite-long-running .progress-bit {
	/*
		The more smooth `linear` timing function can cause
		higher GPU consumption as indicated in
		https://github.com/microsoft/vscode/issues/97900 &
		https://github.com/microsoft/vscode/issues/138396
	*/
	animation-timing-function: steps(100);
}

/**
 * The progress bit has a width: 2% (1/50) of the parent container. The animation moves it from 0% to 100% of
 * that container. Since translateX is relative to the progress bit size, we have to multiple it with
 * its relative size to the parent container:
 * parent width: 5000%
 *    bit width: 100%
 * translateX should be as follow:
 *  50%: 5000% * 50% - 50% (set to center) = 2450%
 * 100%: 5000% * 100% - 100% (do not overflow) = 4900%
 */
@keyframes progress { from { transform: translateX(0%) scaleX(1) } 50% { transform: translateX(2500%) scaleX(3) } to { transform: translateX(4900%) scaleX(1) } }
</style><style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.quick-input-widget {
	position: absolute;
	width: 600px;
	z-index: 2550;
	left: 50%;
	margin-left: -300px;
	-webkit-app-region: no-drag;
	border-radius: 6px;
}

.quick-input-titlebar {
	display: flex;
	align-items: center;
	border-top-left-radius: 5px; /* match border radius of quick input widget */
	border-top-right-radius: 5px;
}

.quick-input-left-action-bar {
	display: flex;
	margin-left: 4px;
	flex: 1;
}

.quick-input-title {
	padding: 3px 0px;
	text-align: center;
	text-overflow: ellipsis;
	overflow: hidden;
}

.quick-input-right-action-bar {
	display: flex;
	margin-right: 4px;
	flex: 1;
}

.quick-input-right-action-bar > .actions-container {
	justify-content: flex-end;
}

.quick-input-titlebar .monaco-action-bar .action-label.codicon {
	background-position: center;
	background-repeat: no-repeat;
	padding: 2px;
}

.quick-input-description {
	margin: 6px;
}

.quick-input-header .quick-input-description {
	margin: 4px 2px;
}

.quick-input-header {
	display: flex;
	padding: 8px 6px 6px 6px;
}

.quick-input-widget.hidden-input .quick-input-header {
	/* reduce margins and paddings when input box hidden */
	padding: 0;
	margin-bottom: 0;
}

.quick-input-and-message {
	display: flex;
	flex-direction: column;
	flex-grow: 1;
	min-width: 0;
	position: relative;
}

.quick-input-check-all {
	align-self: center;
	margin: 0;
}

.quick-input-filter {
	flex-grow: 1;
	display: flex;
	position: relative;
}

.quick-input-box {
	flex-grow: 1;
}

.quick-input-widget.show-checkboxes .quick-input-box,
.quick-input-widget.show-checkboxes .quick-input-message {
	margin-left: 5px;
}

.quick-input-visible-count {
	position: absolute;
	left: -10000px;
}

.quick-input-count {
	align-self: center;
	position: absolute;
	right: 4px;
	display: flex;
	align-items: center;
}

.quick-input-count .monaco-count-badge {
	vertical-align: middle;
	padding: 2px 4px;
	border-radius: 2px;
	min-height: auto;
	line-height: normal;
}

.quick-input-action {
	margin-left: 6px;
}

.quick-input-action .monaco-text-button {
	font-size: 11px;
	padding: 0 6px;
	display: flex;
	height: 25px;
	align-items: center;
}

.quick-input-message {
	margin-top: -1px;
	padding: 5px;
	overflow-wrap: break-word;
}

.quick-input-message > .codicon {
	margin: 0 0.2em;
	vertical-align: text-bottom;
}

/* Links in descriptions & validations */
.quick-input-message a {
	color: inherit;
}

.quick-input-progress.monaco-progress-container {
	position: relative;
}

.quick-input-progress.monaco-progress-container,
.quick-input-progress.monaco-progress-container .progress-bit {
	height: 2px;
}

.quick-input-list {
	line-height: 22px;
}

.quick-input-widget.hidden-input .quick-input-list {
	margin-top: 4px; /* reduce margins when input box hidden */
	padding-bottom: 4px;
}

.quick-input-list .monaco-list {
	overflow: hidden;
	max-height: calc(20 * 22px);
	padding-bottom: 5px;
}

.quick-input-list .monaco-scrollable-element {
	padding: 0px 5px;
}

.quick-input-list .quick-input-list-entry {
	box-sizing: border-box;
	overflow: hidden;
	display: flex;
	height: 100%;
	padding: 0 6px;
}

.quick-input-list .quick-input-list-entry.quick-input-list-separator-border {
	border-top-width: 1px;
	border-top-style: solid;
}

.quick-input-list .monaco-list-row {
	border-radius: 3px;
}

.quick-input-list .monaco-list-row[data-index="0"] .quick-input-list-entry.quick-input-list-separator-border {
	border-top-style: none;
}

.quick-input-list .quick-input-list-label {
	overflow: hidden;
	display: flex;
	height: 100%;
	flex: 1;
}

.quick-input-list .quick-input-list-checkbox {
	align-self: center;
	margin: 0;
}

.quick-input-list .quick-input-list-rows {
	overflow: hidden;
	text-overflow: ellipsis;
	display: flex;
	flex-direction: column;
	height: 100%;
	flex: 1;
	margin-left: 5px;
}

.quick-input-widget.show-checkboxes .quick-input-list .quick-input-list-rows {
	margin-left: 10px;
}

.quick-input-widget .quick-input-list .quick-input-list-checkbox {
	display: none;
}
.quick-input-widget.show-checkboxes .quick-input-list .quick-input-list-checkbox {
	display: inline;
}

.quick-input-list .quick-input-list-rows > .quick-input-list-row {
	display: flex;
	align-items: center;
}

.quick-input-list .quick-input-list-rows > .quick-input-list-row .monaco-icon-label,
.quick-input-list .quick-input-list-rows > .quick-input-list-row .monaco-icon-label .monaco-icon-label-container > .monaco-icon-name-container {
	flex: 1; /* make sure the icon label grows within the row */
}

.quick-input-list .quick-input-list-rows > .quick-input-list-row .codicon[class*='codicon-'] {
	vertical-align: text-bottom;
}

.quick-input-list .quick-input-list-rows .monaco-highlighted-label > span {
	opacity: 1;
}

.quick-input-list .quick-input-list-entry .quick-input-list-entry-keybinding {
	margin-right: 8px; /* separate from the separator label or scrollbar if any */
}

.quick-input-list .quick-input-list-label-meta {
	opacity: 0.7;
	line-height: normal;
	text-overflow: ellipsis;
	overflow: hidden;
}

.quick-input-list .monaco-highlighted-label .highlight {
	font-weight: bold;
}

.quick-input-list .quick-input-list-entry .quick-input-list-separator {
	margin-right: 4px; /* separate from keybindings or actions */
}

.quick-input-list .quick-input-list-entry-action-bar {
	display: flex;
	flex: 0;
	overflow: visible;
}

.quick-input-list .quick-input-list-entry-action-bar .action-label {
	/*
	 * By default, actions in the quick input action bar are hidden
	 * until hovered over them or selected.
	 */
	display: none;
}

.quick-input-list .quick-input-list-entry-action-bar .action-label.codicon {
	margin-right: 4px;
	padding: 0px 2px 2px 2px;
}

.quick-input-list .quick-input-list-entry-action-bar {
	margin-top: 1px;
}

.quick-input-list .quick-input-list-entry-action-bar {
	margin-right: 4px; /* separate from scrollbar */
}

.quick-input-list .quick-input-list-entry .quick-input-list-entry-action-bar .action-label.always-visible,
.quick-input-list .quick-input-list-entry:hover .quick-input-list-entry-action-bar .action-label,
.quick-input-list .monaco-list-row.focused .quick-input-list-entry-action-bar .action-label {
	display: flex;
}

/* focused items in quick pick */
.quick-input-list .monaco-list-row.focused .monaco-keybinding-key,
.quick-input-list .monaco-list-row.focused .quick-input-list-entry .quick-input-list-separator {
	color: inherit
}
.quick-input-list .monaco-list-row.focused .monaco-keybinding-key {
	background: none;
}
</style><style type="text/css" media="screen" class="monaco-colors">.codicon-add:before { content: '\ea60'; }
.codicon-plus:before { content: '\ea60'; }
.codicon-gist-new:before { content: '\ea60'; }
.codicon-repo-create:before { content: '\ea60'; }
.codicon-lightbulb:before { content: '\ea61'; }
.codicon-light-bulb:before { content: '\ea61'; }
.codicon-repo:before { content: '\ea62'; }
.codicon-repo-delete:before { content: '\ea62'; }
.codicon-gist-fork:before { content: '\ea63'; }
.codicon-repo-forked:before { content: '\ea63'; }
.codicon-git-pull-request:before { content: '\ea64'; }
.codicon-git-pull-request-abandoned:before { content: '\ea64'; }
.codicon-record-keys:before { content: '\ea65'; }
.codicon-keyboard:before { content: '\ea65'; }
.codicon-tag:before { content: '\ea66'; }
.codicon-tag-add:before { content: '\ea66'; }
.codicon-tag-remove:before { content: '\ea66'; }
.codicon-person:before { content: '\ea67'; }
.codicon-person-follow:before { content: '\ea67'; }
.codicon-person-outline:before { content: '\ea67'; }
.codicon-person-filled:before { content: '\ea67'; }
.codicon-git-branch:before { content: '\ea68'; }
.codicon-git-branch-create:before { content: '\ea68'; }
.codicon-git-branch-delete:before { content: '\ea68'; }
.codicon-source-control:before { content: '\ea68'; }
.codicon-mirror:before { content: '\ea69'; }
.codicon-mirror-public:before { content: '\ea69'; }
.codicon-star:before { content: '\ea6a'; }
.codicon-star-add:before { content: '\ea6a'; }
.codicon-star-delete:before { content: '\ea6a'; }
.codicon-star-empty:before { content: '\ea6a'; }
.codicon-comment:before { content: '\ea6b'; }
.codicon-comment-add:before { content: '\ea6b'; }
.codicon-alert:before { content: '\ea6c'; }
.codicon-warning:before { content: '\ea6c'; }
.codicon-search:before { content: '\ea6d'; }
.codicon-search-save:before { content: '\ea6d'; }
.codicon-log-out:before { content: '\ea6e'; }
.codicon-sign-out:before { content: '\ea6e'; }
.codicon-log-in:before { content: '\ea6f'; }
.codicon-sign-in:before { content: '\ea6f'; }
.codicon-eye:before { content: '\ea70'; }
.codicon-eye-unwatch:before { content: '\ea70'; }
.codicon-eye-watch:before { content: '\ea70'; }
.codicon-circle-filled:before { content: '\ea71'; }
.codicon-primitive-dot:before { content: '\ea71'; }
.codicon-close-dirty:before { content: '\ea71'; }
.codicon-debug-breakpoint:before { content: '\ea71'; }
.codicon-debug-breakpoint-disabled:before { content: '\ea71'; }
.codicon-debug-hint:before { content: '\ea71'; }
.codicon-primitive-square:before { content: '\ea72'; }
.codicon-edit:before { content: '\ea73'; }
.codicon-pencil:before { content: '\ea73'; }
.codicon-info:before { content: '\ea74'; }
.codicon-issue-opened:before { content: '\ea74'; }
.codicon-gist-private:before { content: '\ea75'; }
.codicon-git-fork-private:before { content: '\ea75'; }
.codicon-lock:before { content: '\ea75'; }
.codicon-mirror-private:before { content: '\ea75'; }
.codicon-close:before { content: '\ea76'; }
.codicon-remove-close:before { content: '\ea76'; }
.codicon-x:before { content: '\ea76'; }
.codicon-repo-sync:before { content: '\ea77'; }
.codicon-sync:before { content: '\ea77'; }
.codicon-clone:before { content: '\ea78'; }
.codicon-desktop-download:before { content: '\ea78'; }
.codicon-beaker:before { content: '\ea79'; }
.codicon-microscope:before { content: '\ea79'; }
.codicon-vm:before { content: '\ea7a'; }
.codicon-device-desktop:before { content: '\ea7a'; }
.codicon-file:before { content: '\ea7b'; }
.codicon-file-text:before { content: '\ea7b'; }
.codicon-more:before { content: '\ea7c'; }
.codicon-ellipsis:before { content: '\ea7c'; }
.codicon-kebab-horizontal:before { content: '\ea7c'; }
.codicon-mail-reply:before { content: '\ea7d'; }
.codicon-reply:before { content: '\ea7d'; }
.codicon-organization:before { content: '\ea7e'; }
.codicon-organization-filled:before { content: '\ea7e'; }
.codicon-organization-outline:before { content: '\ea7e'; }
.codicon-new-file:before { content: '\ea7f'; }
.codicon-file-add:before { content: '\ea7f'; }
.codicon-new-folder:before { content: '\ea80'; }
.codicon-file-directory-create:before { content: '\ea80'; }
.codicon-trash:before { content: '\ea81'; }
.codicon-trashcan:before { content: '\ea81'; }
.codicon-history:before { content: '\ea82'; }
.codicon-clock:before { content: '\ea82'; }
.codicon-folder:before { content: '\ea83'; }
.codicon-file-directory:before { content: '\ea83'; }
.codicon-symbol-folder:before { content: '\ea83'; }
.codicon-logo-github:before { content: '\ea84'; }
.codicon-mark-github:before { content: '\ea84'; }
.codicon-github:before { content: '\ea84'; }
.codicon-terminal:before { content: '\ea85'; }
.codicon-console:before { content: '\ea85'; }
.codicon-repl:before { content: '\ea85'; }
.codicon-zap:before { content: '\ea86'; }
.codicon-symbol-event:before { content: '\ea86'; }
.codicon-error:before { content: '\ea87'; }
.codicon-stop:before { content: '\ea87'; }
.codicon-variable:before { content: '\ea88'; }
.codicon-symbol-variable:before { content: '\ea88'; }
.codicon-array:before { content: '\ea8a'; }
.codicon-symbol-array:before { content: '\ea8a'; }
.codicon-symbol-module:before { content: '\ea8b'; }
.codicon-symbol-package:before { content: '\ea8b'; }
.codicon-symbol-namespace:before { content: '\ea8b'; }
.codicon-symbol-object:before { content: '\ea8b'; }
.codicon-symbol-method:before { content: '\ea8c'; }
.codicon-symbol-function:before { content: '\ea8c'; }
.codicon-symbol-constructor:before { content: '\ea8c'; }
.codicon-symbol-boolean:before { content: '\ea8f'; }
.codicon-symbol-null:before { content: '\ea8f'; }
.codicon-symbol-numeric:before { content: '\ea90'; }
.codicon-symbol-number:before { content: '\ea90'; }
.codicon-symbol-structure:before { content: '\ea91'; }
.codicon-symbol-struct:before { content: '\ea91'; }
.codicon-symbol-parameter:before { content: '\ea92'; }
.codicon-symbol-type-parameter:before { content: '\ea92'; }
.codicon-symbol-key:before { content: '\ea93'; }
.codicon-symbol-text:before { content: '\ea93'; }
.codicon-symbol-reference:before { content: '\ea94'; }
.codicon-go-to-file:before { content: '\ea94'; }
.codicon-symbol-enum:before { content: '\ea95'; }
.codicon-symbol-value:before { content: '\ea95'; }
.codicon-symbol-ruler:before { content: '\ea96'; }
.codicon-symbol-unit:before { content: '\ea96'; }
.codicon-activate-breakpoints:before { content: '\ea97'; }
.codicon-archive:before { content: '\ea98'; }
.codicon-arrow-both:before { content: '\ea99'; }
.codicon-arrow-down:before { content: '\ea9a'; }
.codicon-arrow-left:before { content: '\ea9b'; }
.codicon-arrow-right:before { content: '\ea9c'; }
.codicon-arrow-small-down:before { content: '\ea9d'; }
.codicon-arrow-small-left:before { content: '\ea9e'; }
.codicon-arrow-small-right:before { content: '\ea9f'; }
.codicon-arrow-small-up:before { content: '\eaa0'; }
.codicon-arrow-up:before { content: '\eaa1'; }
.codicon-bell:before { content: '\eaa2'; }
.codicon-bold:before { content: '\eaa3'; }
.codicon-book:before { content: '\eaa4'; }
.codicon-bookmark:before { content: '\eaa5'; }
.codicon-debug-breakpoint-conditional-unverified:before { content: '\eaa6'; }
.codicon-debug-breakpoint-conditional:before { content: '\eaa7'; }
.codicon-debug-breakpoint-conditional-disabled:before { content: '\eaa7'; }
.codicon-debug-breakpoint-data-unverified:before { content: '\eaa8'; }
.codicon-debug-breakpoint-data:before { content: '\eaa9'; }
.codicon-debug-breakpoint-data-disabled:before { content: '\eaa9'; }
.codicon-debug-breakpoint-log-unverified:before { content: '\eaaa'; }
.codicon-debug-breakpoint-log:before { content: '\eaab'; }
.codicon-debug-breakpoint-log-disabled:before { content: '\eaab'; }
.codicon-briefcase:before { content: '\eaac'; }
.codicon-broadcast:before { content: '\eaad'; }
.codicon-browser:before { content: '\eaae'; }
.codicon-bug:before { content: '\eaaf'; }
.codicon-calendar:before { content: '\eab0'; }
.codicon-case-sensitive:before { content: '\eab1'; }
.codicon-check:before { content: '\eab2'; }
.codicon-checklist:before { content: '\eab3'; }
.codicon-chevron-down:before { content: '\eab4'; }
.codicon-drop-down-button:before { content: '\eab4'; }
.codicon-chevron-left:before { content: '\eab5'; }
.codicon-chevron-right:before { content: '\eab6'; }
.codicon-chevron-up:before { content: '\eab7'; }
.codicon-chrome-close:before { content: '\eab8'; }
.codicon-chrome-maximize:before { content: '\eab9'; }
.codicon-chrome-minimize:before { content: '\eaba'; }
.codicon-chrome-restore:before { content: '\eabb'; }
.codicon-circle:before { content: '\eabc'; }
.codicon-circle-outline:before { content: '\eabc'; }
.codicon-debug-breakpoint-unverified:before { content: '\eabc'; }
.codicon-circle-slash:before { content: '\eabd'; }
.codicon-circuit-board:before { content: '\eabe'; }
.codicon-clear-all:before { content: '\eabf'; }
.codicon-clippy:before { content: '\eac0'; }
.codicon-close-all:before { content: '\eac1'; }
.codicon-cloud-download:before { content: '\eac2'; }
.codicon-cloud-upload:before { content: '\eac3'; }
.codicon-code:before { content: '\eac4'; }
.codicon-collapse-all:before { content: '\eac5'; }
.codicon-color-mode:before { content: '\eac6'; }
.codicon-comment-discussion:before { content: '\eac7'; }
.codicon-compare-changes:before { content: '\eafd'; }
.codicon-credit-card:before { content: '\eac9'; }
.codicon-dash:before { content: '\eacc'; }
.codicon-dashboard:before { content: '\eacd'; }
.codicon-database:before { content: '\eace'; }
.codicon-debug-continue:before { content: '\eacf'; }
.codicon-debug-disconnect:before { content: '\ead0'; }
.codicon-debug-pause:before { content: '\ead1'; }
.codicon-debug-restart:before { content: '\ead2'; }
.codicon-debug-start:before { content: '\ead3'; }
.codicon-debug-step-into:before { content: '\ead4'; }
.codicon-debug-step-out:before { content: '\ead5'; }
.codicon-debug-step-over:before { content: '\ead6'; }
.codicon-debug-stop:before { content: '\ead7'; }
.codicon-debug:before { content: '\ead8'; }
.codicon-device-camera-video:before { content: '\ead9'; }
.codicon-device-camera:before { content: '\eada'; }
.codicon-device-mobile:before { content: '\eadb'; }
.codicon-diff-added:before { content: '\eadc'; }
.codicon-diff-ignored:before { content: '\eadd'; }
.codicon-diff-modified:before { content: '\eade'; }
.codicon-diff-removed:before { content: '\eadf'; }
.codicon-diff-renamed:before { content: '\eae0'; }
.codicon-diff:before { content: '\eae1'; }
.codicon-discard:before { content: '\eae2'; }
.codicon-editor-layout:before { content: '\eae3'; }
.codicon-empty-window:before { content: '\eae4'; }
.codicon-exclude:before { content: '\eae5'; }
.codicon-extensions:before { content: '\eae6'; }
.codicon-eye-closed:before { content: '\eae7'; }
.codicon-file-binary:before { content: '\eae8'; }
.codicon-file-code:before { content: '\eae9'; }
.codicon-file-media:before { content: '\eaea'; }
.codicon-file-pdf:before { content: '\eaeb'; }
.codicon-file-submodule:before { content: '\eaec'; }
.codicon-file-symlink-directory:before { content: '\eaed'; }
.codicon-file-symlink-file:before { content: '\eaee'; }
.codicon-file-zip:before { content: '\eaef'; }
.codicon-files:before { content: '\eaf0'; }
.codicon-filter:before { content: '\eaf1'; }
.codicon-flame:before { content: '\eaf2'; }
.codicon-fold-down:before { content: '\eaf3'; }
.codicon-fold-up:before { content: '\eaf4'; }
.codicon-fold:before { content: '\eaf5'; }
.codicon-folder-active:before { content: '\eaf6'; }
.codicon-folder-opened:before { content: '\eaf7'; }
.codicon-gear:before { content: '\eaf8'; }
.codicon-gift:before { content: '\eaf9'; }
.codicon-gist-secret:before { content: '\eafa'; }
.codicon-gist:before { content: '\eafb'; }
.codicon-git-commit:before { content: '\eafc'; }
.codicon-git-compare:before { content: '\eafd'; }
.codicon-git-merge:before { content: '\eafe'; }
.codicon-github-action:before { content: '\eaff'; }
.codicon-github-alt:before { content: '\eb00'; }
.codicon-globe:before { content: '\eb01'; }
.codicon-grabber:before { content: '\eb02'; }
.codicon-graph:before { content: '\eb03'; }
.codicon-gripper:before { content: '\eb04'; }
.codicon-heart:before { content: '\eb05'; }
.codicon-home:before { content: '\eb06'; }
.codicon-horizontal-rule:before { content: '\eb07'; }
.codicon-hubot:before { content: '\eb08'; }
.codicon-inbox:before { content: '\eb09'; }
.codicon-issue-closed:before { content: '\eba4'; }
.codicon-issue-reopened:before { content: '\eb0b'; }
.codicon-issues:before { content: '\eb0c'; }
.codicon-italic:before { content: '\eb0d'; }
.codicon-jersey:before { content: '\eb0e'; }
.codicon-json:before { content: '\eb0f'; }
.codicon-bracket:before { content: '\eb0f'; }
.codicon-kebab-vertical:before { content: '\eb10'; }
.codicon-key:before { content: '\eb11'; }
.codicon-law:before { content: '\eb12'; }
.codicon-lightbulb-autofix:before { content: '\eb13'; }
.codicon-link-external:before { content: '\eb14'; }
.codicon-link:before { content: '\eb15'; }
.codicon-list-ordered:before { content: '\eb16'; }
.codicon-list-unordered:before { content: '\eb17'; }
.codicon-live-share:before { content: '\eb18'; }
.codicon-loading:before { content: '\eb19'; }
.codicon-location:before { content: '\eb1a'; }
.codicon-mail-read:before { content: '\eb1b'; }
.codicon-mail:before { content: '\eb1c'; }
.codicon-markdown:before { content: '\eb1d'; }
.codicon-megaphone:before { content: '\eb1e'; }
.codicon-mention:before { content: '\eb1f'; }
.codicon-milestone:before { content: '\eb20'; }
.codicon-mortar-board:before { content: '\eb21'; }
.codicon-move:before { content: '\eb22'; }
.codicon-multiple-windows:before { content: '\eb23'; }
.codicon-mute:before { content: '\eb24'; }
.codicon-no-newline:before { content: '\eb25'; }
.codicon-note:before { content: '\eb26'; }
.codicon-octoface:before { content: '\eb27'; }
.codicon-open-preview:before { content: '\eb28'; }
.codicon-package:before { content: '\eb29'; }
.codicon-paintcan:before { content: '\eb2a'; }
.codicon-pin:before { content: '\eb2b'; }
.codicon-play:before { content: '\eb2c'; }
.codicon-run:before { content: '\eb2c'; }
.codicon-plug:before { content: '\eb2d'; }
.codicon-preserve-case:before { content: '\eb2e'; }
.codicon-preview:before { content: '\eb2f'; }
.codicon-project:before { content: '\eb30'; }
.codicon-pulse:before { content: '\eb31'; }
.codicon-question:before { content: '\eb32'; }
.codicon-quote:before { content: '\eb33'; }
.codicon-radio-tower:before { content: '\eb34'; }
.codicon-reactions:before { content: '\eb35'; }
.codicon-references:before { content: '\eb36'; }
.codicon-refresh:before { content: '\eb37'; }
.codicon-regex:before { content: '\eb38'; }
.codicon-remote-explorer:before { content: '\eb39'; }
.codicon-remote:before { content: '\eb3a'; }
.codicon-remove:before { content: '\eb3b'; }
.codicon-replace-all:before { content: '\eb3c'; }
.codicon-replace:before { content: '\eb3d'; }
.codicon-repo-clone:before { content: '\eb3e'; }
.codicon-repo-force-push:before { content: '\eb3f'; }
.codicon-repo-pull:before { content: '\eb40'; }
.codicon-repo-push:before { content: '\eb41'; }
.codicon-report:before { content: '\eb42'; }
.codicon-request-changes:before { content: '\eb43'; }
.codicon-rocket:before { content: '\eb44'; }
.codicon-root-folder-opened:before { content: '\eb45'; }
.codicon-root-folder:before { content: '\eb46'; }
.codicon-rss:before { content: '\eb47'; }
.codicon-ruby:before { content: '\eb48'; }
.codicon-save-all:before { content: '\eb49'; }
.codicon-save-as:before { content: '\eb4a'; }
.codicon-save:before { content: '\eb4b'; }
.codicon-screen-full:before { content: '\eb4c'; }
.codicon-screen-normal:before { content: '\eb4d'; }
.codicon-search-stop:before { content: '\eb4e'; }
.codicon-server:before { content: '\eb50'; }
.codicon-settings-gear:before { content: '\eb51'; }
.codicon-settings:before { content: '\eb52'; }
.codicon-shield:before { content: '\eb53'; }
.codicon-smiley:before { content: '\eb54'; }
.codicon-sort-precedence:before { content: '\eb55'; }
.codicon-split-horizontal:before { content: '\eb56'; }
.codicon-split-vertical:before { content: '\eb57'; }
.codicon-squirrel:before { content: '\eb58'; }
.codicon-star-full:before { content: '\eb59'; }
.codicon-star-half:before { content: '\eb5a'; }
.codicon-symbol-class:before { content: '\eb5b'; }
.codicon-symbol-color:before { content: '\eb5c'; }
.codicon-symbol-customcolor:before { content: '\eb5c'; }
.codicon-symbol-constant:before { content: '\eb5d'; }
.codicon-symbol-enum-member:before { content: '\eb5e'; }
.codicon-symbol-field:before { content: '\eb5f'; }
.codicon-symbol-file:before { content: '\eb60'; }
.codicon-symbol-interface:before { content: '\eb61'; }
.codicon-symbol-keyword:before { content: '\eb62'; }
.codicon-symbol-misc:before { content: '\eb63'; }
.codicon-symbol-operator:before { content: '\eb64'; }
.codicon-symbol-property:before { content: '\eb65'; }
.codicon-wrench:before { content: '\eb65'; }
.codicon-wrench-subaction:before { content: '\eb65'; }
.codicon-symbol-snippet:before { content: '\eb66'; }
.codicon-tasklist:before { content: '\eb67'; }
.codicon-telescope:before { content: '\eb68'; }
.codicon-text-size:before { content: '\eb69'; }
.codicon-three-bars:before { content: '\eb6a'; }
.codicon-thumbsdown:before { content: '\eb6b'; }
.codicon-thumbsup:before { content: '\eb6c'; }
.codicon-tools:before { content: '\eb6d'; }
.codicon-triangle-down:before { content: '\eb6e'; }
.codicon-triangle-left:before { content: '\eb6f'; }
.codicon-triangle-right:before { content: '\eb70'; }
.codicon-triangle-up:before { content: '\eb71'; }
.codicon-twitter:before { content: '\eb72'; }
.codicon-unfold:before { content: '\eb73'; }
.codicon-unlock:before { content: '\eb74'; }
.codicon-unmute:before { content: '\eb75'; }
.codicon-unverified:before { content: '\eb76'; }
.codicon-verified:before { content: '\eb77'; }
.codicon-versions:before { content: '\eb78'; }
.codicon-vm-active:before { content: '\eb79'; }
.codicon-vm-outline:before { content: '\eb7a'; }
.codicon-vm-running:before { content: '\eb7b'; }
.codicon-watch:before { content: '\eb7c'; }
.codicon-whitespace:before { content: '\eb7d'; }
.codicon-whole-word:before { content: '\eb7e'; }
.codicon-window:before { content: '\eb7f'; }
.codicon-word-wrap:before { content: '\eb80'; }
.codicon-zoom-in:before { content: '\eb81'; }
.codicon-zoom-out:before { content: '\eb82'; }
.codicon-list-filter:before { content: '\eb83'; }
.codicon-list-flat:before { content: '\eb84'; }
.codicon-list-selection:before { content: '\eb85'; }
.codicon-selection:before { content: '\eb85'; }
.codicon-list-tree:before { content: '\eb86'; }
.codicon-debug-breakpoint-function-unverified:before { content: '\eb87'; }
.codicon-debug-breakpoint-function:before { content: '\eb88'; }
.codicon-debug-breakpoint-function-disabled:before { content: '\eb88'; }
.codicon-debug-stackframe-active:before { content: '\eb89'; }
.codicon-circle-small-filled:before { content: '\eb8a'; }
.codicon-debug-stackframe-dot:before { content: '\eb8a'; }
.codicon-debug-stackframe:before { content: '\eb8b'; }
.codicon-debug-stackframe-focused:before { content: '\eb8b'; }
.codicon-debug-breakpoint-unsupported:before { content: '\eb8c'; }
.codicon-symbol-string:before { content: '\eb8d'; }
.codicon-debug-reverse-continue:before { content: '\eb8e'; }
.codicon-debug-step-back:before { content: '\eb8f'; }
.codicon-debug-restart-frame:before { content: '\eb90'; }
.codicon-call-incoming:before { content: '\eb92'; }
.codicon-call-outgoing:before { content: '\eb93'; }
.codicon-menu:before { content: '\eb94'; }
.codicon-expand-all:before { content: '\eb95'; }
.codicon-feedback:before { content: '\eb96'; }
.codicon-group-by-ref-type:before { content: '\eb97'; }
.codicon-ungroup-by-ref-type:before { content: '\eb98'; }
.codicon-account:before { content: '\eb99'; }
.codicon-bell-dot:before { content: '\eb9a'; }
.codicon-debug-console:before { content: '\eb9b'; }
.codicon-library:before { content: '\eb9c'; }
.codicon-output:before { content: '\eb9d'; }
.codicon-run-all:before { content: '\eb9e'; }
.codicon-sync-ignored:before { content: '\eb9f'; }
.codicon-pinned:before { content: '\eba0'; }
.codicon-github-inverted:before { content: '\eba1'; }
.codicon-debug-alt:before { content: '\eb91'; }
.codicon-server-process:before { content: '\eba2'; }
.codicon-server-environment:before { content: '\eba3'; }
.codicon-pass:before { content: '\eba4'; }
.codicon-stop-circle:before { content: '\eba5'; }
.codicon-play-circle:before { content: '\eba6'; }
.codicon-record:before { content: '\eba7'; }
.codicon-debug-alt-small:before { content: '\eba8'; }
.codicon-vm-connect:before { content: '\eba9'; }
.codicon-cloud:before { content: '\ebaa'; }
.codicon-merge:before { content: '\ebab'; }
.codicon-export:before { content: '\ebac'; }
.codicon-graph-left:before { content: '\ebad'; }
.codicon-magnet:before { content: '\ebae'; }
.codicon-notebook:before { content: '\ebaf'; }
.codicon-redo:before { content: '\ebb0'; }
.codicon-check-all:before { content: '\ebb1'; }
.codicon-pinned-dirty:before { content: '\ebb2'; }
.codicon-pass-filled:before { content: '\ebb3'; }
.codicon-circle-large-filled:before { content: '\ebb4'; }
.codicon-circle-large:before { content: '\ebb5'; }
.codicon-circle-large-outline:before { content: '\ebb5'; }
.codicon-combine:before { content: '\ebb6'; }
.codicon-gather:before { content: '\ebb6'; }
.codicon-table:before { content: '\ebb7'; }
.codicon-variable-group:before { content: '\ebb8'; }
.codicon-type-hierarchy:before { content: '\ebb9'; }
.codicon-type-hierarchy-sub:before { content: '\ebba'; }
.codicon-type-hierarchy-super:before { content: '\ebbb'; }
.codicon-git-pull-request-create:before { content: '\ebbc'; }
.codicon-run-above:before { content: '\ebbd'; }
.codicon-run-below:before { content: '\ebbe'; }
.codicon-notebook-template:before { content: '\ebbf'; }
.codicon-debug-rerun:before { content: '\ebc0'; }
.codicon-workspace-trusted:before { content: '\ebc1'; }
.codicon-workspace-untrusted:before { content: '\ebc2'; }
.codicon-workspace-unspecified:before { content: '\ebc3'; }
.codicon-terminal-cmd:before { content: '\ebc4'; }
.codicon-terminal-debian:before { content: '\ebc5'; }
.codicon-terminal-linux:before { content: '\ebc6'; }
.codicon-terminal-powershell:before { content: '\ebc7'; }
.codicon-terminal-tmux:before { content: '\ebc8'; }
.codicon-terminal-ubuntu:before { content: '\ebc9'; }
.codicon-terminal-bash:before { content: '\ebca'; }
.codicon-arrow-swap:before { content: '\ebcb'; }
.codicon-copy:before { content: '\ebcc'; }
.codicon-person-add:before { content: '\ebcd'; }
.codicon-filter-filled:before { content: '\ebce'; }
.codicon-wand:before { content: '\ebcf'; }
.codicon-debug-line-by-line:before { content: '\ebd0'; }
.codicon-inspect:before { content: '\ebd1'; }
.codicon-layers:before { content: '\ebd2'; }
.codicon-layers-dot:before { content: '\ebd3'; }
.codicon-layers-active:before { content: '\ebd4'; }
.codicon-compass:before { content: '\ebd5'; }
.codicon-compass-dot:before { content: '\ebd6'; }
.codicon-compass-active:before { content: '\ebd7'; }
.codicon-azure:before { content: '\ebd8'; }
.codicon-issue-draft:before { content: '\ebd9'; }
.codicon-git-pull-request-closed:before { content: '\ebda'; }
.codicon-git-pull-request-draft:before { content: '\ebdb'; }
.codicon-debug-all:before { content: '\ebdc'; }
.codicon-debug-coverage:before { content: '\ebdd'; }
.codicon-run-errors:before { content: '\ebde'; }
.codicon-folder-library:before { content: '\ebdf'; }
.codicon-debug-continue-small:before { content: '\ebe0'; }
.codicon-beaker-stop:before { content: '\ebe1'; }
.codicon-graph-line:before { content: '\ebe2'; }
.codicon-graph-scatter:before { content: '\ebe3'; }
.codicon-pie-chart:before { content: '\ebe4'; }
.codicon-bracket-dot:before { content: '\ebe5'; }
.codicon-bracket-error:before { content: '\ebe6'; }
.codicon-lock-small:before { content: '\ebe7'; }
.codicon-azure-devops:before { content: '\ebe8'; }
.codicon-verified-filled:before { content: '\ebe9'; }
.codicon-newline:before { content: '\ebea'; }
.codicon-layout:before { content: '\ebeb'; }
.codicon-layout-activitybar-left:before { content: '\ebec'; }
.codicon-layout-activitybar-right:before { content: '\ebed'; }
.codicon-layout-panel-left:before { content: '\ebee'; }
.codicon-layout-panel-center:before { content: '\ebef'; }
.codicon-layout-panel-justify:before { content: '\ebf0'; }
.codicon-layout-panel-right:before { content: '\ebf1'; }
.codicon-layout-panel:before { content: '\ebf2'; }
.codicon-layout-sidebar-left:before { content: '\ebf3'; }
.codicon-layout-sidebar-right:before { content: '\ebf4'; }
.codicon-layout-statusbar:before { content: '\ebf5'; }
.codicon-layout-menubar:before { content: '\ebf6'; }
.codicon-layout-centered:before { content: '\ebf7'; }
.codicon-layout-sidebar-right-off:before { content: '\ec00'; }
.codicon-layout-panel-off:before { content: '\ec01'; }
.codicon-layout-sidebar-left-off:before { content: '\ec02'; }
.codicon-target:before { content: '\ebf8'; }
.codicon-indent:before { content: '\ebf9'; }
.codicon-record-small:before { content: '\ebfa'; }
.codicon-error-small:before { content: '\ebfb'; }
.codicon-arrow-circle-down:before { content: '\ebfc'; }
.codicon-arrow-circle-left:before { content: '\ebfd'; }
.codicon-arrow-circle-right:before { content: '\ebfe'; }
.codicon-arrow-circle-up:before { content: '\ebff'; }
.codicon-heart-filled:before { content: '\ec04'; }
.codicon-map:before { content: '\ec05'; }
.codicon-map-filled:before { content: '\ec06'; }
.codicon-circle-small:before { content: '\ec07'; }
.codicon-bell-slash:before { content: '\ec08'; }
.codicon-bell-slash-dot:before { content: '\ec09'; }
.codicon-comment-unresolved:before { content: '\ec0a'; }
.codicon-git-pull-request-go-to-changes:before { content: '\ec0b'; }
.codicon-git-pull-request-new-changes:before { content: '\ec0c'; }
.codicon-search-fuzzy:before { content: '\ec0d'; }
.codicon-comment-draft:before { content: '\ec0e'; }
.codicon-send:before { content: '\ec0f'; }
.codicon-sparkle:before { content: '\ec10'; }
.codicon-insert:before { content: '\ec11'; }
.codicon-dialog-error:before { content: '\ea87'; }
.codicon-dialog-warning:before { content: '\ea6c'; }
.codicon-dialog-info:before { content: '\ea74'; }
.codicon-dialog-close:before { content: '\ea76'; }
.codicon-tree-item-expanded:before { content: '\eab4'; }
.codicon-tree-filter-on-type-on:before { content: '\eb83'; }
.codicon-tree-filter-on-type-off:before { content: '\eb85'; }
.codicon-tree-filter-clear:before { content: '\ea76'; }
.codicon-tree-item-loading:before { content: '\eb19'; }
.codicon-menu-selection:before { content: '\eab2'; }
.codicon-menu-submenu:before { content: '\eab6'; }
.codicon-menubar-more:before { content: '\ea7c'; }
.codicon-scrollbar-button-left:before { content: '\eb6f'; }
.codicon-scrollbar-button-right:before { content: '\eb70'; }
.codicon-scrollbar-button-up:before { content: '\eb71'; }
.codicon-scrollbar-button-down:before { content: '\eb6e'; }
.codicon-toolbar-more:before { content: '\ea7c'; }
.codicon-quick-input-back:before { content: '\ea9b'; }
.codicon-widget-close:before { content: '\ea76'; }
.codicon-goto-previous-location:before { content: '\eaa1'; }
.codicon-goto-next-location:before { content: '\ea9a'; }
.codicon-marker-navigation-next:before { content: '\ea9a'; }
.codicon-marker-navigation-previous:before { content: '\eaa1'; }
.codicon-inline-suggestion-hints-next:before { content: '\eab6'; }
.codicon-inline-suggestion-hints-previous:before { content: '\eab5'; }
.codicon-find-selection:before { content: '\eb85'; }
.codicon-find-collapsed:before { content: '\eab6'; }
.codicon-find-expanded:before { content: '\eab4'; }
.codicon-find-replace:before { content: '\eb3d'; }
.codicon-find-replace-all:before { content: '\eb3c'; }
.codicon-find-previous-match:before { content: '\eaa1'; }
.codicon-find-next-match:before { content: '\ea9a'; }
.codicon-folding-expanded:before { content: '\eab4'; }
.codicon-folding-collapsed:before { content: '\eab6'; }
.codicon-folding-manual-collapsed:before { content: '\eab6'; }
.codicon-folding-manual-expanded:before { content: '\eab4'; }
.codicon-suggest-more-info:before { content: '\eab6'; }
.codicon-parameter-hints-next:before { content: '\eab4'; }
.codicon-parameter-hints-previous:before { content: '\eab7'; }
.codicon-extensions-warning-message:before { content: '\ea6c'; }
.codicon-diff-review-insert:before { content: '\ea60'; }
.codicon-diff-review-remove:before { content: '\eb3b'; }
.codicon-diff-review-close:before { content: '\ea76'; }
.codicon-diff-insert:before { content: '\ea60'; }
.codicon-diff-remove:before { content: '\eb3b'; }
.monaco-editor .inputarea.ime-input { background-color: #fffffe; }
.monaco-editor .unexpected-closing-bracket { color: rgba(255, 18, 18, 0.8); }
.monaco-editor .bracket-highlighting-0 { color: #0431fa; }
.monaco-editor .bracket-highlighting-1 { color: #319331; }
.monaco-editor .bracket-highlighting-2 { color: #7b3814; }
.monaco-editor .bracket-highlighting-3 { color: #0431fa; }
.monaco-editor .bracket-highlighting-4 { color: #319331; }
.monaco-editor .bracket-highlighting-5 { color: #7b3814; }
.monaco-editor .bracket-highlighting-6 { color: #0431fa; }
.monaco-editor .bracket-highlighting-7 { color: #319331; }
.monaco-editor .bracket-highlighting-8 { color: #7b3814; }
.monaco-editor .bracket-highlighting-9 { color: #0431fa; }
.monaco-editor .bracket-highlighting-10 { color: #319331; }
.monaco-editor .bracket-highlighting-11 { color: #7b3814; }
.monaco-editor .bracket-highlighting-12 { color: #0431fa; }
.monaco-editor .bracket-highlighting-13 { color: #319331; }
.monaco-editor .bracket-highlighting-14 { color: #7b3814; }
.monaco-editor .bracket-highlighting-15 { color: #0431fa; }
.monaco-editor .bracket-highlighting-16 { color: #319331; }
.monaco-editor .bracket-highlighting-17 { color: #7b3814; }
.monaco-editor .bracket-highlighting-18 { color: #0431fa; }
.monaco-editor .bracket-highlighting-19 { color: #319331; }
.monaco-editor .bracket-highlighting-20 { color: #7b3814; }
.monaco-editor .bracket-highlighting-21 { color: #0431fa; }
.monaco-editor .bracket-highlighting-22 { color: #319331; }
.monaco-editor .bracket-highlighting-23 { color: #7b3814; }
.monaco-editor .bracket-highlighting-24 { color: #0431fa; }
.monaco-editor .bracket-highlighting-25 { color: #319331; }
.monaco-editor .bracket-highlighting-26 { color: #7b3814; }
.monaco-editor .bracket-highlighting-27 { color: #0431fa; }
.monaco-editor .bracket-highlighting-28 { color: #319331; }
.monaco-editor .bracket-highlighting-29 { color: #7b3814; }
.monaco-editor .line-numbers.dimmed-line-number { color: rgba(35, 120, 147, 0.4); }
.monaco-editor .view-overlays .current-line { border: 2px solid #eeeeee; }
.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid #eeeeee; }
.monaco-editor .bracket-indent-guide.lvl-0 { --guide-color: rgba(4, 49, 250, 0.3); --guide-color-active: #0431fa; }
.monaco-editor .bracket-indent-guide.lvl-1 { --guide-color: rgba(49, 147, 49, 0.3); --guide-color-active: #319331; }
.monaco-editor .bracket-indent-guide.lvl-2 { --guide-color: rgba(123, 56, 20, 0.3); --guide-color-active: #7b3814; }
.monaco-editor .bracket-indent-guide.lvl-3 { --guide-color: rgba(4, 49, 250, 0.3); --guide-color-active: #0431fa; }
.monaco-editor .bracket-indent-guide.lvl-4 { --guide-color: rgba(49, 147, 49, 0.3); --guide-color-active: #319331; }
.monaco-editor .bracket-indent-guide.lvl-5 { --guide-color: rgba(123, 56, 20, 0.3); --guide-color-active: #7b3814; }
.monaco-editor .bracket-indent-guide.lvl-6 { --guide-color: rgba(4, 49, 250, 0.3); --guide-color-active: #0431fa; }
.monaco-editor .bracket-indent-guide.lvl-7 { --guide-color: rgba(49, 147, 49, 0.3); --guide-color-active: #319331; }
.monaco-editor .bracket-indent-guide.lvl-8 { --guide-color: rgba(123, 56, 20, 0.3); --guide-color-active: #7b3814; }
.monaco-editor .bracket-indent-guide.lvl-9 { --guide-color: rgba(4, 49, 250, 0.3); --guide-color-active: #0431fa; }
.monaco-editor .bracket-indent-guide.lvl-10 { --guide-color: rgba(49, 147, 49, 0.3); --guide-color-active: #319331; }
.monaco-editor .bracket-indent-guide.lvl-11 { --guide-color: rgba(123, 56, 20, 0.3); --guide-color-active: #7b3814; }
.monaco-editor .bracket-indent-guide.lvl-12 { --guide-color: rgba(4, 49, 250, 0.3); --guide-color-active: #0431fa; }
.monaco-editor .bracket-indent-guide.lvl-13 { --guide-color: rgba(49, 147, 49, 0.3); --guide-color-active: #319331; }
.monaco-editor .bracket-indent-guide.lvl-14 { --guide-color: rgba(123, 56, 20, 0.3); --guide-color-active: #7b3814; }
.monaco-editor .bracket-indent-guide.lvl-15 { --guide-color: rgba(4, 49, 250, 0.3); --guide-color-active: #0431fa; }
.monaco-editor .bracket-indent-guide.lvl-16 { --guide-color: rgba(49, 147, 49, 0.3); --guide-color-active: #319331; }
.monaco-editor .bracket-indent-guide.lvl-17 { --guide-color: rgba(123, 56, 20, 0.3); --guide-color-active: #7b3814; }
.monaco-editor .bracket-indent-guide.lvl-18 { --guide-color: rgba(4, 49, 250, 0.3); --guide-color-active: #0431fa; }
.monaco-editor .bracket-indent-guide.lvl-19 { --guide-color: rgba(49, 147, 49, 0.3); --guide-color-active: #319331; }
.monaco-editor .bracket-indent-guide.lvl-20 { --guide-color: rgba(123, 56, 20, 0.3); --guide-color-active: #7b3814; }
.monaco-editor .bracket-indent-guide.lvl-21 { --guide-color: rgba(4, 49, 250, 0.3); --guide-color-active: #0431fa; }
.monaco-editor .bracket-indent-guide.lvl-22 { --guide-color: rgba(49, 147, 49, 0.3); --guide-color-active: #319331; }
.monaco-editor .bracket-indent-guide.lvl-23 { --guide-color: rgba(123, 56, 20, 0.3); --guide-color-active: #7b3814; }
.monaco-editor .bracket-indent-guide.lvl-24 { --guide-color: rgba(4, 49, 250, 0.3); --guide-color-active: #0431fa; }
.monaco-editor .bracket-indent-guide.lvl-25 { --guide-color: rgba(49, 147, 49, 0.3); --guide-color-active: #319331; }
.monaco-editor .bracket-indent-guide.lvl-26 { --guide-color: rgba(123, 56, 20, 0.3); --guide-color-active: #7b3814; }
.monaco-editor .bracket-indent-guide.lvl-27 { --guide-color: rgba(4, 49, 250, 0.3); --guide-color-active: #0431fa; }
.monaco-editor .bracket-indent-guide.lvl-28 { --guide-color: rgba(49, 147, 49, 0.3); --guide-color-active: #319331; }
.monaco-editor .bracket-indent-guide.lvl-29 { --guide-color: rgba(123, 56, 20, 0.3); --guide-color-active: #7b3814; }
.monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }
.monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }
.monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }
.monaco-editor .vertical.indent-active { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }
.monaco-editor .horizontal-top.indent-active { border-top: 1px solid var(--guide-color-active); }
.monaco-editor .horizontal-bottom.indent-active { border-bottom: 1px solid var(--guide-color-active); }
.monaco-editor .cursors-layer .cursor { background-color: #000000; border-color: #000000; color: #ffffff; }
.monaco-editor .squiggly-error { background: url("data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%206%203'%20enable-background%3D'new%200%200%206%203'%20height%3D'3'%20width%3D'6'%3E%3Cg%20fill%3D'%23e51400'%3E%3Cpolygon%20points%3D'5.5%2C0%202.5%2C3%201.1%2C3%204.1%2C0'%2F%3E%3Cpolygon%20points%3D'4%2C0%206%2C2%206%2C0.6%205.4%2C0'%2F%3E%3Cpolygon%20points%3D'0%2C2%201%2C3%202.4%2C3%200%2C0.6'%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E") repeat-x bottom left; }
.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%206%203'%20enable-background%3D'new%200%200%206%203'%20height%3D'3'%20width%3D'6'%3E%3Cg%20fill%3D'%23bf8803'%3E%3Cpolygon%20points%3D'5.5%2C0%202.5%2C3%201.1%2C3%204.1%2C0'%2F%3E%3Cpolygon%20points%3D'4%2C0%206%2C2%206%2C0.6%205.4%2C0'%2F%3E%3Cpolygon%20points%3D'0%2C2%201%2C3%202.4%2C3%200%2C0.6'%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E") repeat-x bottom left; }
.monaco-editor .squiggly-info { background: url("data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%206%203'%20enable-background%3D'new%200%200%206%203'%20height%3D'3'%20width%3D'6'%3E%3Cg%20fill%3D'%231a85ff'%3E%3Cpolygon%20points%3D'5.5%2C0%202.5%2C3%201.1%2C3%204.1%2C0'%2F%3E%3Cpolygon%20points%3D'4%2C0%206%2C2%206%2C0.6%205.4%2C0'%2F%3E%3Cpolygon%20points%3D'0%2C2%201%2C3%202.4%2C3%200%2C0.6'%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E") repeat-x bottom left; }
.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%223%22%20width%3D%2212%22%3E%3Cg%20fill%3D%22%236c6c6c%22%3E%3Ccircle%20cx%3D%221%22%20cy%3D%221%22%20r%3D%221%22%2F%3E%3Ccircle%20cx%3D%225%22%20cy%3D%221%22%20r%3D%221%22%2F%3E%3Ccircle%20cx%3D%229%22%20cy%3D%221%22%20r%3D%221%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E") no-repeat bottom left; }
.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: 0.467; }
.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid rgba(200, 200, 200, 0.5); }
.monaco-editor .monaco-hover hr { border-top: 1px solid rgba(200, 200, 200, 0.5); }
.monaco-editor .monaco-hover hr { border-bottom: 0px solid rgba(200, 200, 200, 0.5); }
.monaco-editor .findMatch { background-color: rgba(234, 92, 0, 0.33); }
.monaco-editor .currentFindMatch { background-color: #a8ac94; }
.monaco-editor .findScope { background-color: rgba(180, 180, 180, 0.3); }
.monaco-editor .find-widget { background-color: #f3f3f3; }
.monaco-editor .find-widget { box-shadow: 0 0 8px 2px rgba(0, 0, 0, 0.16); }
.monaco-editor .find-widget { color: #616161; }
.monaco-editor .find-widget.no-results .matchesCount { color: #a1260d; }
.monaco-editor .find-widget .monaco-sash { background-color: #c8c8c8; }

		.monaco-editor .find-widget .button:not(.disabled):hover,
		.monaco-editor .find-widget .codicon-find-selection:hover {
			background-color: rgba(184, 184, 184, 0.31) !important;
		}
	
.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: #0090f1; }
.monaco-editor .selectionHighlight { background-color: rgba(173, 214, 255, 0.15); }

	.monaco-editor .diagonal-fill {
		background-image: linear-gradient(
			-45deg,
			rgba(34, 34, 34, 0.2) 12.5%,
			#0000 12.5%, #0000 50%,
			rgba(34, 34, 34, 0.2) 50%, rgba(34, 34, 34, 0.2) 62.5%,
			#0000 62.5%, #0000 100%
		);
		background-size: 8px 8px;
	}
	
.monaco-editor { --vscode-foreground: #616161;
--vscode-disabledForeground: rgba(97, 97, 97, 0.5);
--vscode-errorForeground: #a1260d;
--vscode-descriptionForeground: #717171;
--vscode-icon-foreground: #424242;
--vscode-focusBorder: #0090f1;
--vscode-textSeparator-foreground: rgba(0, 0, 0, 0.18);
--vscode-textLink-foreground: #006ab1;
--vscode-textLink-activeForeground: #006ab1;
--vscode-textPreformat-foreground: #a31515;
--vscode-textBlockQuote-background: rgba(127, 127, 127, 0.1);
--vscode-textBlockQuote-border: rgba(0, 122, 204, 0.5);
--vscode-textCodeBlock-background: rgba(220, 220, 220, 0.4);
--vscode-widget-shadow: rgba(0, 0, 0, 0.16);
--vscode-input-background: #ffffff;
--vscode-input-foreground: #616161;
--vscode-inputOption-activeBorder: #007acc;
--vscode-inputOption-hoverBackground: rgba(184, 184, 184, 0.31);
--vscode-inputOption-activeBackground: rgba(0, 144, 241, 0.2);
--vscode-inputOption-activeForeground: #000000;
--vscode-input-placeholderForeground: rgba(97, 97, 97, 0.5);
--vscode-inputValidation-infoBackground: #d6ecf2;
--vscode-inputValidation-infoBorder: #007acc;
--vscode-inputValidation-warningBackground: #f6f5d2;
--vscode-inputValidation-warningBorder: #b89500;
--vscode-inputValidation-errorBackground: #f2dede;
--vscode-inputValidation-errorBorder: #be1100;
--vscode-dropdown-background: #ffffff;
--vscode-dropdown-foreground: #616161;
--vscode-dropdown-border: #cecece;
--vscode-button-foreground: #ffffff;
--vscode-button-separator: rgba(255, 255, 255, 0.4);
--vscode-button-background: #007acc;
--vscode-button-hoverBackground: #0062a3;
--vscode-button-secondaryForeground: #ffffff;
--vscode-button-secondaryBackground: #5f6a79;
--vscode-button-secondaryHoverBackground: #4c5561;
--vscode-badge-background: #c4c4c4;
--vscode-badge-foreground: #333333;
--vscode-scrollbar-shadow: #dddddd;
--vscode-scrollbarSlider-background: rgba(100, 100, 100, 0.4);
--vscode-scrollbarSlider-hoverBackground: rgba(100, 100, 100, 0.7);
--vscode-scrollbarSlider-activeBackground: rgba(0, 0, 0, 0.6);
--vscode-progressBar-background: #0e70c0;
--vscode-editorError-foreground: #e51400;
--vscode-editorWarning-foreground: #bf8803;
--vscode-editorInfo-foreground: #1a85ff;
--vscode-editorHint-foreground: #6c6c6c;
--vscode-sash-hoverBorder: #0090f1;
--vscode-editor-background: #fffffe;
--vscode-editor-foreground: #000000;
--vscode-editorStickyScroll-background: #fffffe;
--vscode-editorStickyScrollHover-background: #f0f0f0;
--vscode-editorWidget-background: #f3f3f3;
--vscode-editorWidget-foreground: #616161;
--vscode-editorWidget-border: #c8c8c8;
--vscode-quickInput-background: #f3f3f3;
--vscode-quickInput-foreground: #616161;
--vscode-quickInputTitle-background: rgba(0, 0, 0, 0.06);
--vscode-pickerGroup-foreground: #0066bf;
--vscode-pickerGroup-border: #cccedb;
--vscode-keybindingLabel-background: rgba(221, 221, 221, 0.4);
--vscode-keybindingLabel-foreground: #555555;
--vscode-keybindingLabel-border: rgba(204, 204, 204, 0.4);
--vscode-keybindingLabel-bottomBorder: rgba(187, 187, 187, 0.4);
--vscode-editor-selectionBackground: #add6ff;
--vscode-editor-inactiveSelectionBackground: #e5ebf1;
--vscode-editor-selectionHighlightBackground: rgba(173, 214, 255, 0.3);
--vscode-editor-findMatchBackground: #a8ac94;
--vscode-editor-findMatchHighlightBackground: rgba(234, 92, 0, 0.33);
--vscode-editor-findRangeHighlightBackground: rgba(180, 180, 180, 0.3);
--vscode-searchEditor-findMatchBackground: rgba(234, 92, 0, 0.22);
--vscode-search-resultsInfoForeground: #616161;
--vscode-editor-hoverHighlightBackground: rgba(173, 214, 255, 0.15);
--vscode-editorHoverWidget-background: #f3f3f3;
--vscode-editorHoverWidget-foreground: #616161;
--vscode-editorHoverWidget-border: #c8c8c8;
--vscode-editorHoverWidget-statusBarBackground: #e7e7e7;
--vscode-editorLink-activeForeground: #0000ff;
--vscode-editorInlayHint-foreground: #333333;
--vscode-editorInlayHint-background: rgba(196, 196, 196, 0.6);
--vscode-editorInlayHint-typeForeground: #333333;
--vscode-editorInlayHint-typeBackground: rgba(196, 196, 196, 0.6);
--vscode-editorInlayHint-parameterForeground: #333333;
--vscode-editorInlayHint-parameterBackground: rgba(196, 196, 196, 0.6);
--vscode-editorLightBulb-foreground: #ddb100;
--vscode-editorLightBulbAutoFix-foreground: #007acc;
--vscode-diffEditor-insertedTextBackground: rgba(156, 204, 44, 0.25);
--vscode-diffEditor-removedTextBackground: rgba(255, 0, 0, 0.2);
--vscode-diffEditor-insertedLineBackground: rgba(155, 185, 85, 0.2);
--vscode-diffEditor-removedLineBackground: rgba(255, 0, 0, 0.2);
--vscode-diffEditor-diagonalFill: rgba(34, 34, 34, 0.2);
--vscode-list-focusOutline: #0090f1;
--vscode-list-activeSelectionBackground: #0060c0;
--vscode-list-activeSelectionForeground: #ffffff;
--vscode-list-inactiveSelectionBackground: #e4e6f1;
--vscode-list-hoverBackground: #f0f0f0;
--vscode-list-dropBackground: #d6ebff;
--vscode-list-highlightForeground: #0066bf;
--vscode-list-focusHighlightForeground: #bbe7ff;
--vscode-list-invalidItemForeground: #b89500;
--vscode-list-errorForeground: #b01011;
--vscode-list-warningForeground: #855f00;
--vscode-listFilterWidget-background: #f3f3f3;
--vscode-listFilterWidget-outline: rgba(0, 0, 0, 0);
--vscode-listFilterWidget-noMatchesOutline: #be1100;
--vscode-listFilterWidget-shadow: rgba(0, 0, 0, 0.16);
--vscode-list-filterMatchBackground: rgba(234, 92, 0, 0.33);
--vscode-tree-indentGuidesStroke: #a9a9a9;
--vscode-tree-inactiveIndentGuidesStroke: rgba(169, 169, 169, 0.4);
--vscode-tree-tableColumnsBorder: rgba(97, 97, 97, 0.13);
--vscode-tree-tableOddRowsBackground: rgba(97, 97, 97, 0.04);
--vscode-list-deemphasizedForeground: #8e8e90;
--vscode-checkbox-background: #ffffff;
--vscode-checkbox-selectBackground: #f3f3f3;
--vscode-checkbox-foreground: #616161;
--vscode-checkbox-border: #cecece;
--vscode-checkbox-selectBorder: #424242;
--vscode-quickInputList-focusForeground: #ffffff;
--vscode-quickInputList-focusBackground: #0060c0;
--vscode-menu-foreground: #616161;
--vscode-menu-background: #ffffff;
--vscode-menu-selectionForeground: #ffffff;
--vscode-menu-selectionBackground: #0060c0;
--vscode-menu-separatorBackground: #d4d4d4;
--vscode-toolbar-hoverBackground: rgba(184, 184, 184, 0.31);
--vscode-toolbar-activeBackground: rgba(166, 166, 166, 0.31);
--vscode-editor-snippetTabstopHighlightBackground: rgba(10, 50, 100, 0.2);
--vscode-editor-snippetFinalTabstopHighlightBorder: rgba(10, 50, 100, 0.5);
--vscode-breadcrumb-foreground: rgba(97, 97, 97, 0.8);
--vscode-breadcrumb-background: #fffffe;
--vscode-breadcrumb-focusForeground: #4e4e4e;
--vscode-breadcrumb-activeSelectionForeground: #4e4e4e;
--vscode-breadcrumbPicker-background: #f3f3f3;
--vscode-merge-currentHeaderBackground: rgba(64, 200, 174, 0.5);
--vscode-merge-currentContentBackground: rgba(64, 200, 174, 0.2);
--vscode-merge-incomingHeaderBackground: rgba(64, 166, 255, 0.5);
--vscode-merge-incomingContentBackground: rgba(64, 166, 255, 0.2);
--vscode-merge-commonHeaderBackground: rgba(96, 96, 96, 0.4);
--vscode-merge-commonContentBackground: rgba(96, 96, 96, 0.16);
--vscode-editorOverviewRuler-currentContentForeground: rgba(64, 200, 174, 0.5);
--vscode-editorOverviewRuler-incomingContentForeground: rgba(64, 166, 255, 0.5);
--vscode-editorOverviewRuler-commonContentForeground: rgba(96, 96, 96, 0.4);
--vscode-editorOverviewRuler-findMatchForeground: rgba(209, 134, 22, 0.49);
--vscode-editorOverviewRuler-selectionHighlightForeground: rgba(160, 160, 160, 0.8);
--vscode-minimap-findMatchHighlight: #d18616;
--vscode-minimap-selectionOccurrenceHighlight: #c9c9c9;
--vscode-minimap-selectionHighlight: #add6ff;
--vscode-minimap-errorHighlight: rgba(255, 18, 18, 0.7);
--vscode-minimap-warningHighlight: #bf8803;
--vscode-minimap-foregroundOpacity: #000000;
--vscode-minimapSlider-background: rgba(100, 100, 100, 0.2);
--vscode-minimapSlider-hoverBackground: rgba(100, 100, 100, 0.35);
--vscode-minimapSlider-activeBackground: rgba(0, 0, 0, 0.3);
--vscode-problemsErrorIcon-foreground: #e51400;
--vscode-problemsWarningIcon-foreground: #bf8803;
--vscode-problemsInfoIcon-foreground: #1a85ff;
--vscode-charts-foreground: #616161;
--vscode-charts-lines: rgba(97, 97, 97, 0.5);
--vscode-charts-red: #e51400;
--vscode-charts-blue: #1a85ff;
--vscode-charts-yellow: #bf8803;
--vscode-charts-orange: #d18616;
--vscode-charts-green: #388a34;
--vscode-charts-purple: #652d90;
--vscode-editor-lineHighlightBorder: #eeeeee;
--vscode-editor-rangeHighlightBackground: rgba(253, 255, 0, 0.2);
--vscode-editor-symbolHighlightBackground: rgba(234, 92, 0, 0.33);
--vscode-editorCursor-foreground: #000000;
--vscode-editorWhitespace-foreground: rgba(51, 51, 51, 0.2);
--vscode-editorIndentGuide-background: #d3d3d3;
--vscode-editorIndentGuide-activeBackground: #939393;
--vscode-editorLineNumber-foreground: #237893;
--vscode-editorActiveLineNumber-foreground: #0b216f;
--vscode-editorLineNumber-activeForeground: #0b216f;
--vscode-editorRuler-foreground: #d3d3d3;
--vscode-editorCodeLens-foreground: #919191;
--vscode-editorBracketMatch-background: rgba(0, 100, 0, 0.1);
--vscode-editorBracketMatch-border: #b9b9b9;
--vscode-editorOverviewRuler-border: rgba(127, 127, 127, 0.3);
--vscode-editorGutter-background: #fffffe;
--vscode-editorUnnecessaryCode-opacity: rgba(0, 0, 0, 0.47);
--vscode-editorGhostText-foreground: rgba(0, 0, 0, 0.47);
--vscode-editorOverviewRuler-rangeHighlightForeground: rgba(0, 122, 204, 0.6);
--vscode-editorOverviewRuler-errorForeground: rgba(255, 18, 18, 0.7);
--vscode-editorOverviewRuler-warningForeground: #bf8803;
--vscode-editorOverviewRuler-infoForeground: #1a85ff;
--vscode-editorBracketHighlight-foreground1: #0431fa;
--vscode-editorBracketHighlight-foreground2: #319331;
--vscode-editorBracketHighlight-foreground3: #7b3814;
--vscode-editorBracketHighlight-foreground4: rgba(0, 0, 0, 0);
--vscode-editorBracketHighlight-foreground5: rgba(0, 0, 0, 0);
--vscode-editorBracketHighlight-foreground6: rgba(0, 0, 0, 0);
--vscode-editorBracketHighlight-unexpectedBracket-foreground: rgba(255, 18, 18, 0.8);
--vscode-editorBracketPairGuide-background1: rgba(0, 0, 0, 0);
--vscode-editorBracketPairGuide-background2: rgba(0, 0, 0, 0);
--vscode-editorBracketPairGuide-background3: rgba(0, 0, 0, 0);
--vscode-editorBracketPairGuide-background4: rgba(0, 0, 0, 0);
--vscode-editorBracketPairGuide-background5: rgba(0, 0, 0, 0);
--vscode-editorBracketPairGuide-background6: rgba(0, 0, 0, 0);
--vscode-editorBracketPairGuide-activeBackground1: rgba(0, 0, 0, 0);
--vscode-editorBracketPairGuide-activeBackground2: rgba(0, 0, 0, 0);
--vscode-editorBracketPairGuide-activeBackground3: rgba(0, 0, 0, 0);
--vscode-editorBracketPairGuide-activeBackground4: rgba(0, 0, 0, 0);
--vscode-editorBracketPairGuide-activeBackground5: rgba(0, 0, 0, 0);
--vscode-editorBracketPairGuide-activeBackground6: rgba(0, 0, 0, 0);
--vscode-editorUnicodeHighlight-border: #cea33d;
--vscode-editorUnicodeHighlight-background: rgba(206, 163, 61, 0.08);
--vscode-editorOverviewRuler-bracketMatchForeground: #a0a0a0;
--vscode-symbolIcon-arrayForeground: #616161;
--vscode-symbolIcon-booleanForeground: #616161;
--vscode-symbolIcon-classForeground: #d67e00;
--vscode-symbolIcon-colorForeground: #616161;
--vscode-symbolIcon-constantForeground: #616161;
--vscode-symbolIcon-constructorForeground: #652d90;
--vscode-symbolIcon-enumeratorForeground: #d67e00;
--vscode-symbolIcon-enumeratorMemberForeground: #007acc;
--vscode-symbolIcon-eventForeground: #d67e00;
--vscode-symbolIcon-fieldForeground: #007acc;
--vscode-symbolIcon-fileForeground: #616161;
--vscode-symbolIcon-folderForeground: #616161;
--vscode-symbolIcon-functionForeground: #652d90;
--vscode-symbolIcon-interfaceForeground: #007acc;
--vscode-symbolIcon-keyForeground: #616161;
--vscode-symbolIcon-keywordForeground: #616161;
--vscode-symbolIcon-methodForeground: #652d90;
--vscode-symbolIcon-moduleForeground: #616161;
--vscode-symbolIcon-namespaceForeground: #616161;
--vscode-symbolIcon-nullForeground: #616161;
--vscode-symbolIcon-numberForeground: #616161;
--vscode-symbolIcon-objectForeground: #616161;
--vscode-symbolIcon-operatorForeground: #616161;
--vscode-symbolIcon-packageForeground: #616161;
--vscode-symbolIcon-propertyForeground: #616161;
--vscode-symbolIcon-referenceForeground: #616161;
--vscode-symbolIcon-snippetForeground: #616161;
--vscode-symbolIcon-stringForeground: #616161;
--vscode-symbolIcon-structForeground: #616161;
--vscode-symbolIcon-textForeground: #616161;
--vscode-symbolIcon-typeParameterForeground: #616161;
--vscode-symbolIcon-unitForeground: #616161;
--vscode-symbolIcon-variableForeground: #007acc;
--vscode-peekViewTitle-background: #f3f3f3;
--vscode-peekViewTitleLabel-foreground: #000000;
--vscode-peekViewTitleDescription-foreground: #616161;
--vscode-peekView-border: #1a85ff;
--vscode-peekViewResult-background: #f3f3f3;
--vscode-peekViewResult-lineForeground: #646465;
--vscode-peekViewResult-fileForeground: #1e1e1e;
--vscode-peekViewResult-selectionBackground: rgba(51, 153, 255, 0.2);
--vscode-peekViewResult-selectionForeground: #6c6c6c;
--vscode-peekViewEditor-background: #f2f8fc;
--vscode-peekViewEditorGutter-background: #f2f8fc;
--vscode-peekViewEditorStickyScroll-background: #f2f8fc;
--vscode-peekViewResult-matchHighlightBackground: rgba(234, 92, 0, 0.3);
--vscode-peekViewEditor-matchHighlightBackground: rgba(245, 216, 2, 0.87);
--vscode-editorMarkerNavigationError-background: #e51400;
--vscode-editorMarkerNavigationError-headerBackground: rgba(229, 20, 0, 0.1);
--vscode-editorMarkerNavigationWarning-background: #bf8803;
--vscode-editorMarkerNavigationWarning-headerBackground: rgba(191, 136, 3, 0.1);
--vscode-editorMarkerNavigationInfo-background: #1a85ff;
--vscode-editorMarkerNavigationInfo-headerBackground: rgba(26, 133, 255, 0.1);
--vscode-editorMarkerNavigation-background: #fffffe;
--vscode-editor-foldBackground: rgba(173, 214, 255, 0.3);
--vscode-editorGutter-foldingControlForeground: #424242;
--vscode-editorSuggestWidget-background: #f3f3f3;
--vscode-editorSuggestWidget-border: #c8c8c8;
--vscode-editorSuggestWidget-foreground: #000000;
--vscode-editorSuggestWidget-selectedForeground: #ffffff;
--vscode-editorSuggestWidget-selectedBackground: #0060c0;
--vscode-editorSuggestWidget-highlightForeground: #0066bf;
--vscode-editorSuggestWidget-focusHighlightForeground: #bbe7ff;
--vscode-editorSuggestWidgetStatus-foreground: rgba(0, 0, 0, 0.5);
--vscode-editor-linkedEditingBackground: rgba(255, 0, 0, 0.3);
--vscode-editor-wordHighlightBackground: rgba(87, 87, 87, 0.25);
--vscode-editor-wordHighlightStrongBackground: rgba(14, 99, 156, 0.25);
--vscode-editor-wordHighlightTextBackground: rgba(87, 87, 87, 0.25);
--vscode-editorOverviewRuler-wordHighlightForeground: rgba(160, 160, 160, 0.8);
--vscode-editorOverviewRuler-wordHighlightStrongForeground: rgba(192, 160, 192, 0.8);
--vscode-editorOverviewRuler-wordHighlightTextForeground: rgba(160, 160, 160, 0.8);
--vscode-editorHoverWidget-highlightForeground: #0066bf; }

.mtk1 { color: #000000; }
.mtk2 { color: #fffffe; }
.mtk3 { color: #808080; }
.mtk4 { color: #ff0000; }
.mtk5 { color: #0451a5; }
.mtk6 { color: #0000ff; }
.mtk7 { color: #098658; }
.mtk8 { color: #008000; }
.mtk9 { color: #dd0000; }
.mtk10 { color: #383838; }
.mtk11 { color: #cd3131; }
.mtk12 { color: #863b00; }
.mtk13 { color: #af00db; }
.mtk14 { color: #800000; }
.mtk15 { color: #e00000; }
.mtk16 { color: #3030c0; }
.mtk17 { color: #666666; }
.mtk18 { color: #778899; }
.mtk19 { color: #c700c7; }
.mtk20 { color: #a31515; }
.mtk21 { color: #4f76ac; }
.mtk22 { color: #008080; }
.mtk23 { color: #001188; }
.mtk24 { color: #4864aa; }
.mtki { font-style: italic; }
.mtkb { font-weight: bold; }
.mtku { text-decoration: underline; text-underline-position: under; }
.mtks { text-decoration: line-through; }
.mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }</style></head>
<body spellcheck="false">
<div id="red-ui-editor" class="red-ui-editor"><div id="red-ui-header"><span class="red-ui-header-logo"><img src="./Node-RED _ maindashboard_files/node-red.svg"><span>Node-RED</span></span><ul class="red-ui-header-toolbar hide" style="display: block;"><li><span class="red-ui-deploy-button-group button-group"><a id="red-ui-header-button-deploy" class="red-ui-deploy-button" href="http://localhost:1880/#"><span class="red-ui-deploy-button-content" style="opacity: 1;"><img id="red-ui-header-button-deploy-icon" src="./Node-RED _ maindashboard_files/deploy-full-o.svg"> <span>Deploy</span></span><span class="red-ui-deploy-button-spinner hide" style="display: none;"><img src="./Node-RED _ maindashboard_files/spin.svg"></span></a><a id="red-ui-header-button-deploy-options" class="red-ui-deploy-button" href="http://localhost:1880/#"><i class="fa fa-caret-down"></i></a><ul class="red-ui-menu red-ui-menu-dropdown pull-right" id="red-ui-header-button-deploy-options-submenu" style="display: none;"><li><a id="deploymenu-item-full" tabindex="-1" href="http://localhost:1880/#" class="active"><i class="fa fa-square pull-left"></i><i class="fa fa-check-square pull-left"></i><img src="./Node-RED _ maindashboard_files/deploy-full.svg"> <span class="red-ui-menu-label-container"><span class="red-ui-menu-label">Full</span><span class="red-ui-menu-sublabel">Deploys everything in the workspace</span></span></a></li><li><a id="deploymenu-item-flow" tabindex="-1" href="http://localhost:1880/#"><i class="fa fa-square pull-left"></i><i class="fa fa-check-square pull-left"></i><img src="./Node-RED _ maindashboard_files/deploy-flows.svg"> <span class="red-ui-menu-label-container"><span class="red-ui-menu-label">Modified Flows</span><span class="red-ui-menu-sublabel">Only deploys flows that contain changed nodes</span></span></a></li><li><a id="deploymenu-item-node" tabindex="-1" href="http://localhost:1880/#"><i class="fa fa-square pull-left"></i><i class="fa fa-check-square pull-left"></i><img src="./Node-RED _ maindashboard_files/deploy-nodes.svg"> <span class="red-ui-menu-label-container"><span class="red-ui-menu-label">Modified Nodes</span><span class="red-ui-menu-sublabel">Only deploys nodes that have changed</span></span></a></li><li class="red-ui-menu-divider"></li><li><a id="deploymenu-item-reload" tabindex="-1" href="http://localhost:1880/#"><img src="./Node-RED _ maindashboard_files/deploy-reload.svg"> <span class="red-ui-menu-label-container"><span class="red-ui-menu-label">Restart Flows</span><span class="red-ui-menu-sublabel">Restarts the current deployed flows</span></span></a></li></ul></span></li><li style=""><a class="button" href="http://localhost:1880/#"><i class="fa fa-warning"></i></a></li><li><a id="red-ui-header-button-sidemenu" class="button" href="http://localhost:1880/#"><i class="fa fa-bars"></i></a><ul class="red-ui-menu red-ui-menu-dropdown pull-right red-ui-menu-dropdown-noicons red-ui-menu-dropdown-submenus" id="red-ui-header-button-sidemenu-submenu" style="display: none;"><li class="red-ui-menu-dropdown-submenu pull-left"><a id="menu-item-edit-menu" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Edit</span></span></a><ul id="menu-item-edit-menu-submenu" class="red-ui-menu-dropdown red-ui-menu-dropdown-noicons"><li class="disabled"><a id="menu-item-edit-undo" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Undo</span><span class="red-ui-popover-key">ctrl-z</span></span></a></li><li class="disabled"><a id="menu-item-edit-redo" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Redo</span><span class="red-ui-popover-key">ctrl-y</span></span></a></li><li class="red-ui-menu-divider"></li><li class="disabled"><a id="menu-item-edit-cut" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Cut selected nodes</span><span class="red-ui-popover-key">ctrl-x</span></span></a></li><li class="disabled"><a id="menu-item-edit-copy" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Copy selected nodes</span><span class="red-ui-popover-key">ctrl-c</span></span></a></li><li class="disabled"><a id="menu-item-edit-paste" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Paste nodes</span><span class="red-ui-popover-key">ctrl-v</span></span></a></li><li class="red-ui-menu-divider"></li><li class="disabled"><a id="menu-item-edit-copy-group-style" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Copy group style</span><span class="red-ui-popover-key">ctrl-⇧c</span></span></a></li><li class="disabled"><a id="menu-item-edit-paste-group-style" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Paste group style</span><span class="red-ui-popover-key">ctrl-⇧v</span></span></a></li><li class="red-ui-menu-divider"></li><li><a id="menu-item-edit-select-all" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Select all</span><span class="red-ui-popover-key">ctrl-a</span></span></a></li><li class="disabled"><a id="menu-item-edit-select-connected" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Select connected</span><span class="red-ui-popover-key">alt-s c</span></span></a></li><li><a id="menu-item-edit-select-none" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Select none</span><span class="red-ui-popover-key">escape</span></span></a></li><li class="red-ui-menu-divider"></li><li class="disabled"><a id="menu-item-edit-split-wire-with-links" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Split selection with Link nodes</span><span class="red-ui-popover-key">alt-l l</span></span></a></li></ul></li><li class="red-ui-menu-dropdown-submenu pull-left"><a id="menu-item-view-menu" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>View</span></span></a><ul id="menu-item-view-menu-submenu" class="red-ui-menu-dropdown red-ui-menu-dropdown-noicons"><li><a id="menu-item-palette" tabindex="-1" href="http://localhost:1880/#" class="active"><i class="fa fa-square pull-left"></i><i class="fa fa-check-square pull-left"></i><span class="red-ui-menu-label"><span>Show palette</span><span class="red-ui-popover-key">ctrl-p</span></span></a></li><li><a id="menu-item-sidebar" tabindex="-1" href="http://localhost:1880/#" class="active"><i class="fa fa-square pull-left"></i><i class="fa fa-check-square pull-left"></i><span class="red-ui-menu-label"><span>Show sidebar</span><span class="red-ui-popover-key">ctrl-space</span></span></a></li><li><a id="menu-item-event-log" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Event log</span><span class="red-ui-popover-key">ctrl-⇧l</span></span></a></li><li><a id="menu-item-action-list" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Action list</span><span class="red-ui-popover-key">ctrl-⇧p</span></span></a></li><li class="red-ui-menu-divider"></li><li class="red-ui-menu-group-sidebar-tabs"><a id="menu-item-view-menu-debug" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Debug messages</span></span></a></li><li class="red-ui-menu-group-sidebar-tabs"><a id="menu-item-view-menu-dashboard-2.0" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Dashboard 2.0</span></span></a></li><li class="red-ui-menu-group-sidebar-tabs"><a id="menu-item-view-menu-dashboard" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Dashboard</span></span></a></li></ul></li><li class="red-ui-menu-dropdown-submenu pull-left"><a id="menu-item-arrange-menu" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Arrange</span></span></a><ul id="menu-item-arrange-menu-submenu" class="red-ui-menu-dropdown red-ui-menu-dropdown-noicons"><li class="disabled"><a id="menu-item-view-tools-align-left" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Align to left</span><span class="red-ui-popover-key">alt-a l</span></span></a></li><li class="disabled"><a id="menu-item-view-tools-align-center" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Align to center</span><span class="red-ui-popover-key">alt-a c</span></span></a></li><li class="disabled"><a id="menu-item-view-tools-align-right" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Align to right</span><span class="red-ui-popover-key">alt-a r</span></span></a></li><li class="red-ui-menu-divider"></li><li class="disabled"><a id="menu-item-view-tools-align-top" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Align to top</span><span class="red-ui-popover-key">alt-a t</span></span></a></li><li class="disabled"><a id="menu-item-view-tools-align-middle" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Align to middle</span><span class="red-ui-popover-key">alt-a m</span></span></a></li><li class="disabled"><a id="menu-item-view-tools-align-bottom" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Align to bottom</span><span class="red-ui-popover-key">alt-a b</span></span></a></li><li class="red-ui-menu-divider"></li><li class="disabled"><a id="menu-item-view-tools-distribute-horizontally" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Distribute horizontally</span><span class="red-ui-popover-key">alt-a h</span></span></a></li><li class="disabled"><a id="menu-item-view-tools-distribute-veritcally" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Distribute vertically</span><span class="red-ui-popover-key">alt-a v</span></span></a></li><li class="red-ui-menu-divider"></li><li class="disabled"><a id="menu-item-view-tools-move-to-back" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Move to back</span></span></a></li><li class="disabled"><a id="menu-item-view-tools-move-to-front" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Move to front</span></span></a></li><li class="disabled"><a id="menu-item-view-tools-move-backwards" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Move backwards</span></span></a></li><li class="disabled"><a id="menu-item-view-tools-move-forwards" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Move forwards</span></span></a></li></ul></li><li class="red-ui-menu-divider"></li><li><a id="menu-item-import" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Import</span><span class="red-ui-popover-key">ctrl-i</span></span></a></li><li><a id="menu-item-export" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Export</span><span class="red-ui-popover-key">ctrl-e</span></span></a></li><li class="red-ui-menu-divider"></li><li><a id="menu-item-search" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Search flows</span><span class="red-ui-popover-key">ctrl-f</span></span></a></li><li class="red-ui-menu-divider"></li><li><a id="menu-item-config-nodes" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Configuration nodes</span><span class="red-ui-popover-key">ctrl-g c</span></span></a></li><li class="red-ui-menu-dropdown-submenu pull-left"><a id="menu-item-workspace" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Flows</span></span></a><ul id="menu-item-workspace-submenu" class="red-ui-menu-dropdown red-ui-menu-dropdown-noicons"><li><a id="menu-item-workspace-add" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Add</span></span></a></li><li><a id="menu-item-workspace-edit" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Rename</span></span></a></li><li class=""><a id="menu-item-workspace-delete" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Delete</span></span></a></li></ul></li><li class="red-ui-menu-dropdown-submenu pull-left"><a id="menu-item-subflow" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Subflows</span></span></a><ul id="menu-item-subflow-submenu" class="red-ui-menu-dropdown red-ui-menu-dropdown-noicons"><li><a id="menu-item-subflow-create" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Create Subflow</span></span></a></li><li class="disabled"><a id="menu-item-subflow-convert" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Selection to Subflow</span></span></a></li></ul></li><li class="red-ui-menu-dropdown-submenu pull-left"><a id="menu-item-group" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Groups</span></span></a><ul id="menu-item-group-submenu" class="red-ui-menu-dropdown red-ui-menu-dropdown-noicons"><li class="disabled"><a id="menu-item-group-group" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Group selection</span><span class="red-ui-popover-key">ctrl-⇧g</span></span></a></li><li class="disabled"><a id="menu-item-group-ungroup" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Ungroup selection</span><span class="red-ui-popover-key">ctrl-⇧u</span></span></a></li><li class="red-ui-menu-divider"></li><li class="disabled"><a id="menu-item-group-merge" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Merge selection</span></span></a></li><li class="disabled"><a id="menu-item-group-remove" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Remove from group</span></span></a></li></ul></li><li class="red-ui-menu-divider"></li><li><a id="menu-item-edit-palette" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Manage palette</span><span class="red-ui-popover-key">alt-⇧p</span></span></a></li><li class="red-ui-menu-divider"></li><li><a id="menu-item-user-settings" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Settings</span><span class="red-ui-popover-key">ctrl-,</span></span></a></li><li class="red-ui-menu-divider"></li><li><a id="menu-item-keyboard-shortcuts" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Keyboard shortcuts</span><span class="red-ui-popover-key">⇧?</span></span></a></li><li><a id="menu-item-help" tabindex="-1" href="https://nodered.org/docs" target="_blank"><span class="red-ui-menu-label"><span>Node-RED website</span></span></a></li><li><a id="menu-item-node-red-version" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>v3.1.3</span></span></a></li></ul></li></ul><div id="red-ui-header-shade" class="hide" style="display: none;"></div></div><div id="red-ui-main-container" class="hide" style="display: block;"><div id="red-ui-workspace" class=""><div class="red-ui-tabs red-ui-tabs-add red-ui-tabs-menu red-ui-tabs-scrollable" style=""><div class="red-ui-tabs-scroll-container"><ul id="red-ui-workspace-tabs" style="width: 1493.9px;" class=""><li class="red-ui-tab red-ui-workspace-disabled ui-draggable ui-draggable-handle" id="red-ui-tab-73393adb9ca26544" style="width: 158.656px;" flowname="Flow 1"><a href="http://localhost:1880/#73393adb9ca26544" class="red-ui-tab-label"><span class="red-ui-workspace-locked-icon"><i class="fa fa-lock"></i> </span><span class="red-ui-workspace-disabled-icon"><i class="fa fa-ban"></i> </span><span class="red-ui-text-bidi-aware" dir="">Flow 1</span></a><span class="red-ui-tabs-fade"></span><span class="red-ui-tabs-badges"><i class="red-ui-tabs-badge-selected fa fa-check-circle"></i></span><svg class="red-ui-flow-tab-changed red-ui-flow-node-changed" width="10" height="10" viewBox="-1 -1 12 12"><circle cx="5" cy="5" r="5"></circle></svg></li><li class="red-ui-tab ui-draggable ui-draggable-handle active" id="red-ui-tab-38240a5a23fafee4" flowname="maindashboard" style="width: 158.656px;"><a href="http://localhost:1880/#38240a5a23fafee4" class="red-ui-tab-label"><span class="red-ui-workspace-locked-icon"><i class="fa fa-lock"></i> </span><span class="red-ui-workspace-disabled-icon"><i class="fa fa-ban"></i> </span><span class="red-ui-text-bidi-aware" dir="">maindashboard</span></a><span class="red-ui-tabs-fade"></span><span class="red-ui-tabs-badges"><i class="red-ui-tabs-badge-selected fa fa-check-circle"></i></span><svg class="red-ui-flow-tab-changed red-ui-flow-node-changed" width="10" height="10" viewBox="-1 -1 12 12"><circle cx="5" cy="5" r="5"></circle></svg></li><li class="red-ui-tab red-ui-workspace-disabled ui-draggable ui-draggable-handle" id="red-ui-tab-a3fa2a99e772c545" flowname="Flow 3" style="width: 158.656px;"><a href="http://localhost:1880/#a3fa2a99e772c545" class="red-ui-tab-label"><span class="red-ui-workspace-locked-icon"><i class="fa fa-lock"></i> </span><span class="red-ui-workspace-disabled-icon"><i class="fa fa-ban"></i> </span><span class="red-ui-text-bidi-aware" dir="">Flow 3</span></a><span class="red-ui-tabs-fade"></span><span class="red-ui-tabs-badges"><i class="red-ui-tabs-badge-selected fa fa-check-circle"></i></span><svg class="red-ui-flow-tab-changed red-ui-flow-node-changed" width="10" height="10" viewBox="-1 -1 12 12"><circle cx="5" cy="5" r="5"></circle></svg></li><li class="red-ui-tab red-ui-workspace-disabled ui-draggable ui-draggable-handle" id="red-ui-tab-7e9da581-12d884" flowname="template-flow-video2" style="width: 158.656px;"><a href="http://localhost:1880/#7e9da581.12d884" class="red-ui-tab-label"><span class="red-ui-workspace-locked-icon"><i class="fa fa-lock"></i> </span><span class="red-ui-workspace-disabled-icon"><i class="fa fa-ban"></i> </span><span class="red-ui-text-bidi-aware" dir="">template-flow-video2</span></a><span class="red-ui-tabs-fade"></span><span class="red-ui-tabs-badges"><i class="red-ui-tabs-badge-selected fa fa-check-circle"></i></span><svg class="red-ui-flow-tab-changed red-ui-flow-node-changed" width="10" height="10" viewBox="-1 -1 12 12"><circle cx="5" cy="5" r="5"></circle></svg></li><li class="red-ui-tab red-ui-workspace-disabled ui-draggable ui-draggable-handle" id="red-ui-tab-eae036f7ed9aa487" flowname="Flow 4" style="width: 158.656px;"><a href="http://localhost:1880/#eae036f7ed9aa487" class="red-ui-tab-label"><span class="red-ui-workspace-locked-icon"><i class="fa fa-lock"></i> </span><span class="red-ui-workspace-disabled-icon"><i class="fa fa-ban"></i> </span><span class="red-ui-text-bidi-aware" dir="">Flow 4</span></a><span class="red-ui-tabs-fade"></span><span class="red-ui-tabs-badges"><i class="red-ui-tabs-badge-selected fa fa-check-circle"></i></span><svg class="red-ui-flow-tab-changed red-ui-flow-node-changed" width="10" height="10" viewBox="-1 -1 12 12"><circle cx="5" cy="5" r="5"></circle></svg></li><li class="red-ui-tab red-ui-workspace-disabled ui-draggable ui-draggable-handle" id="red-ui-tab-d49472cb-6086a" flowname="python virtual environment" style="width: 158.656px;"><a href="http://localhost:1880/#d49472cb.6086a" class="red-ui-tab-label"><span class="red-ui-workspace-locked-icon"><i class="fa fa-lock"></i> </span><span class="red-ui-workspace-disabled-icon"><i class="fa fa-ban"></i> </span><span class="red-ui-text-bidi-aware" dir="">python virtual environment</span></a><span class="red-ui-tabs-fade"></span><span class="red-ui-tabs-badges"><i class="red-ui-tabs-badge-selected fa fa-check-circle"></i></span><svg class="red-ui-flow-tab-changed red-ui-flow-node-changed" width="10" height="10" viewBox="-1 -1 12 12"><circle cx="5" cy="5" r="5"></circle></svg></li><li class="red-ui-tab ui-draggable ui-draggable-handle" id="red-ui-tab-bc27ebb3355b6132" flowname="Flow 2" style="width: 158.656px;"><a href="http://localhost:1880/#bc27ebb3355b6132" class="red-ui-tab-label"><span class="red-ui-workspace-locked-icon"><i class="fa fa-lock"></i> </span><span class="red-ui-workspace-disabled-icon"><i class="fa fa-ban"></i> </span><span class="red-ui-text-bidi-aware" dir="">Flow 2</span></a><span class="red-ui-tabs-fade"></span><span class="red-ui-tabs-badges"><i class="red-ui-tabs-badge-selected fa fa-check-circle"></i></span><svg class="red-ui-flow-tab-changed red-ui-flow-node-changed" width="10" height="10" viewBox="-1 -1 12 12"><circle cx="5" cy="5" r="5"></circle></svg></li><li class="red-ui-tab ui-draggable ui-draggable-handle" id="red-ui-tab-d8033d206022253c" flowname="Flow 5" style="width: 158.656px;"><a href="http://localhost:1880/#d8033d206022253c" class="red-ui-tab-label"><span class="red-ui-workspace-locked-icon"><i class="fa fa-lock"></i> </span><span class="red-ui-workspace-disabled-icon"><i class="fa fa-ban"></i> </span><span class="red-ui-text-bidi-aware" dir="">Flow 5</span></a><span class="red-ui-tabs-fade"></span><span class="red-ui-tabs-badges"><i class="red-ui-tabs-badge-selected fa fa-check-circle"></i></span><svg class="red-ui-flow-tab-changed red-ui-flow-node-changed" width="10" height="10" viewBox="-1 -1 12 12"><circle cx="5" cy="5" r="5"></circle></svg></li><li class="red-ui-tab red-ui-workspace-disabled ui-draggable ui-draggable-handle" id="red-ui-tab-a29cf0664c167293" flowname="Template Tests" style="width: 158.656px;"><a href="http://localhost:1880/#a29cf0664c167293" class="red-ui-tab-label"><span class="red-ui-workspace-locked-icon"><i class="fa fa-lock"></i> </span><span class="red-ui-workspace-disabled-icon"><i class="fa fa-ban"></i> </span><span class="red-ui-text-bidi-aware" dir="">Template Tests</span></a><span class="red-ui-tabs-fade"></span><span class="red-ui-tabs-badges"><i class="red-ui-tabs-badge-selected fa fa-check-circle"></i></span><svg class="red-ui-flow-tab-changed red-ui-flow-node-changed" width="10" height="10" viewBox="-1 -1 12 12"><circle cx="5" cy="5" r="5"></circle></svg></li></ul></div><div class="red-ui-tab-button red-ui-tabs-add"><a href="http://localhost:1880/#"><i class="fa fa-plus"></i></a></div><div class="red-ui-tab-button red-ui-tabs-menu"><a href="http://localhost:1880/#"><i class="fa fa-caret-down"></i></a></div><div class="red-ui-tab-button red-ui-tab-scroll red-ui-tab-scroll-left"><a href="http://localhost:1880/#" style="display:none;"><i class="fa fa-caret-left"></i></a></div><div class="red-ui-tab-button red-ui-tab-scroll red-ui-tab-scroll-right"><a href="http://localhost:1880/#" style=""><i class="fa fa-caret-right"></i></a></div></div><div id="red-ui-workspace-tabs-shade" class="hide"></div><div id="red-ui-workspace-chart" tabindex="1" class="ui-droppable" style="margin-top: 0px;"><svg width="8000" height="8000" pointer-events="all" style="cursor: crosshair; touch-action: none;"><g><g class="red-ui-workspace-chart-event-layer" transform="scale(1)"><rect class="red-ui-workspace-chart-background" width="8000" height="8000"></rect><g class="red-ui-workspace-chart-grid" style="visibility: visible;"><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="0" y2="0"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="20" y2="20"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="40" y2="40"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="60" y2="60"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="80" y2="80"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="100" y2="100"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="120" y2="120"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="140" y2="140"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="160" y2="160"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="180" y2="180"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="200" y2="200"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="220" y2="220"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="240" y2="240"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="260" y2="260"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="280" y2="280"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="300" y2="300"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="320" y2="320"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="340" y2="340"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="360" y2="360"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="380" y2="380"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="400" y2="400"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="420" y2="420"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="440" y2="440"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="460" y2="460"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="480" y2="480"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="500" y2="500"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="520" y2="520"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="540" y2="540"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="560" y2="560"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="580" y2="580"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="600" y2="600"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="620" y2="620"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="640" y2="640"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="660" y2="660"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="680" y2="680"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="700" y2="700"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="720" y2="720"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="740" y2="740"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="760" y2="760"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="780" y2="780"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="800" y2="800"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="820" y2="820"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="840" y2="840"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="860" y2="860"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="880" y2="880"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="900" y2="900"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="920" y2="920"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="940" y2="940"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="960" y2="960"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="980" y2="980"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1000" y2="1000"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1020" y2="1020"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1040" y2="1040"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1060" y2="1060"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1080" y2="1080"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1100" y2="1100"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1120" y2="1120"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1140" y2="1140"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1160" y2="1160"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1180" y2="1180"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1200" y2="1200"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1220" y2="1220"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1240" y2="1240"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1260" y2="1260"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1280" y2="1280"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1300" y2="1300"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1320" y2="1320"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1340" y2="1340"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1360" y2="1360"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1380" y2="1380"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1400" y2="1400"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1420" y2="1420"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1440" y2="1440"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1460" y2="1460"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1480" y2="1480"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1500" y2="1500"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1520" y2="1520"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1540" y2="1540"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1560" y2="1560"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1580" y2="1580"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1600" y2="1600"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1620" y2="1620"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1640" y2="1640"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1660" y2="1660"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1680" y2="1680"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1700" y2="1700"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1720" y2="1720"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1740" y2="1740"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1760" y2="1760"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1780" y2="1780"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1800" y2="1800"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1820" y2="1820"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1840" y2="1840"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1860" y2="1860"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1880" y2="1880"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1900" y2="1900"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1920" y2="1920"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1940" y2="1940"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1960" y2="1960"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="1980" y2="1980"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2000" y2="2000"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2020" y2="2020"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2040" y2="2040"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2060" y2="2060"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2080" y2="2080"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2100" y2="2100"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2120" y2="2120"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2140" y2="2140"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2160" y2="2160"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2180" y2="2180"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2200" y2="2200"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2220" y2="2220"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2240" y2="2240"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2260" y2="2260"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2280" y2="2280"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2300" y2="2300"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2320" y2="2320"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2340" y2="2340"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2360" y2="2360"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2380" y2="2380"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2400" y2="2400"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2420" y2="2420"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2440" y2="2440"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2460" y2="2460"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2480" y2="2480"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2500" y2="2500"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2520" y2="2520"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2540" y2="2540"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2560" y2="2560"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2580" y2="2580"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2600" y2="2600"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2620" y2="2620"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2640" y2="2640"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2660" y2="2660"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2680" y2="2680"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2700" y2="2700"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2720" y2="2720"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2740" y2="2740"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2760" y2="2760"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2780" y2="2780"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2800" y2="2800"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2820" y2="2820"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2840" y2="2840"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2860" y2="2860"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2880" y2="2880"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2900" y2="2900"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2920" y2="2920"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2940" y2="2940"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2960" y2="2960"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="2980" y2="2980"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3000" y2="3000"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3020" y2="3020"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3040" y2="3040"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3060" y2="3060"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3080" y2="3080"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3100" y2="3100"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3120" y2="3120"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3140" y2="3140"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3160" y2="3160"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3180" y2="3180"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3200" y2="3200"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3220" y2="3220"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3240" y2="3240"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3260" y2="3260"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3280" y2="3280"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3300" y2="3300"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3320" y2="3320"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3340" y2="3340"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3360" y2="3360"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3380" y2="3380"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3400" y2="3400"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3420" y2="3420"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3440" y2="3440"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3460" y2="3460"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3480" y2="3480"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3500" y2="3500"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3520" y2="3520"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3540" y2="3540"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3560" y2="3560"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3580" y2="3580"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3600" y2="3600"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3620" y2="3620"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3640" y2="3640"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3660" y2="3660"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3680" y2="3680"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3700" y2="3700"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3720" y2="3720"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3740" y2="3740"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3760" y2="3760"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3780" y2="3780"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3800" y2="3800"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3820" y2="3820"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3840" y2="3840"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3860" y2="3860"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3880" y2="3880"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3900" y2="3900"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3920" y2="3920"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3940" y2="3940"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3960" y2="3960"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="3980" y2="3980"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4000" y2="4000"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4020" y2="4020"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4040" y2="4040"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4060" y2="4060"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4080" y2="4080"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4100" y2="4100"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4120" y2="4120"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4140" y2="4140"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4160" y2="4160"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4180" y2="4180"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4200" y2="4200"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4220" y2="4220"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4240" y2="4240"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4260" y2="4260"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4280" y2="4280"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4300" y2="4300"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4320" y2="4320"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4340" y2="4340"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4360" y2="4360"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4380" y2="4380"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4400" y2="4400"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4420" y2="4420"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4440" y2="4440"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4460" y2="4460"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4480" y2="4480"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4500" y2="4500"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4520" y2="4520"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4540" y2="4540"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4560" y2="4560"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4580" y2="4580"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4600" y2="4600"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4620" y2="4620"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4640" y2="4640"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4660" y2="4660"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4680" y2="4680"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4700" y2="4700"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4720" y2="4720"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4740" y2="4740"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4760" y2="4760"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4780" y2="4780"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4800" y2="4800"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4820" y2="4820"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4840" y2="4840"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4860" y2="4860"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4880" y2="4880"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4900" y2="4900"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4920" y2="4920"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4940" y2="4940"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4960" y2="4960"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="4980" y2="4980"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5000" y2="5000"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5020" y2="5020"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5040" y2="5040"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5060" y2="5060"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5080" y2="5080"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5100" y2="5100"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5120" y2="5120"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5140" y2="5140"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5160" y2="5160"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5180" y2="5180"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5200" y2="5200"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5220" y2="5220"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5240" y2="5240"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5260" y2="5260"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5280" y2="5280"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5300" y2="5300"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5320" y2="5320"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5340" y2="5340"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5360" y2="5360"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5380" y2="5380"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5400" y2="5400"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5420" y2="5420"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5440" y2="5440"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5460" y2="5460"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5480" y2="5480"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5500" y2="5500"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5520" y2="5520"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5540" y2="5540"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5560" y2="5560"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5580" y2="5580"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5600" y2="5600"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5620" y2="5620"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5640" y2="5640"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5660" y2="5660"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5680" y2="5680"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5700" y2="5700"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5720" y2="5720"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5740" y2="5740"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5760" y2="5760"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5780" y2="5780"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5800" y2="5800"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5820" y2="5820"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5840" y2="5840"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5860" y2="5860"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5880" y2="5880"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5900" y2="5900"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5920" y2="5920"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5940" y2="5940"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5960" y2="5960"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="5980" y2="5980"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6000" y2="6000"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6020" y2="6020"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6040" y2="6040"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6060" y2="6060"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6080" y2="6080"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6100" y2="6100"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6120" y2="6120"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6140" y2="6140"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6160" y2="6160"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6180" y2="6180"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6200" y2="6200"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6220" y2="6220"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6240" y2="6240"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6260" y2="6260"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6280" y2="6280"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6300" y2="6300"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6320" y2="6320"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6340" y2="6340"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6360" y2="6360"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6380" y2="6380"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6400" y2="6400"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6420" y2="6420"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6440" y2="6440"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6460" y2="6460"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6480" y2="6480"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6500" y2="6500"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6520" y2="6520"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6540" y2="6540"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6560" y2="6560"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6580" y2="6580"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6600" y2="6600"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6620" y2="6620"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6640" y2="6640"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6660" y2="6660"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6680" y2="6680"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6700" y2="6700"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6720" y2="6720"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6740" y2="6740"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6760" y2="6760"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6780" y2="6780"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6800" y2="6800"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6820" y2="6820"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6840" y2="6840"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6860" y2="6860"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6880" y2="6880"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6900" y2="6900"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6920" y2="6920"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6940" y2="6940"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6960" y2="6960"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="6980" y2="6980"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7000" y2="7000"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7020" y2="7020"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7040" y2="7040"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7060" y2="7060"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7080" y2="7080"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7100" y2="7100"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7120" y2="7120"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7140" y2="7140"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7160" y2="7160"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7180" y2="7180"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7200" y2="7200"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7220" y2="7220"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7240" y2="7240"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7260" y2="7260"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7280" y2="7280"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7300" y2="7300"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7320" y2="7320"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7340" y2="7340"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7360" y2="7360"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7380" y2="7380"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7400" y2="7400"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7420" y2="7420"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7440" y2="7440"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7460" y2="7460"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7480" y2="7480"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7500" y2="7500"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7520" y2="7520"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7540" y2="7540"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7560" y2="7560"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7580" y2="7580"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7600" y2="7600"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7620" y2="7620"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7640" y2="7640"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7660" y2="7660"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7680" y2="7680"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7700" y2="7700"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7720" y2="7720"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7740" y2="7740"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7760" y2="7760"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7780" y2="7780"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7800" y2="7800"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7820" y2="7820"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7840" y2="7840"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7860" y2="7860"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7880" y2="7880"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7900" y2="7900"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7920" y2="7920"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7940" y2="7940"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7960" y2="7960"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="8000" y1="7980" y2="7980"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="0" x2="0"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="20" x2="20"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="40" x2="40"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="60" x2="60"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="80" x2="80"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="100" x2="100"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="120" x2="120"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="140" x2="140"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="160" x2="160"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="180" x2="180"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="200" x2="200"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="220" x2="220"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="240" x2="240"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="260" x2="260"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="280" x2="280"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="300" x2="300"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="320" x2="320"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="340" x2="340"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="360" x2="360"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="380" x2="380"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="400" x2="400"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="420" x2="420"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="440" x2="440"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="460" x2="460"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="480" x2="480"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="500" x2="500"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="520" x2="520"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="540" x2="540"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="560" x2="560"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="580" x2="580"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="600" x2="600"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="620" x2="620"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="640" x2="640"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="660" x2="660"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="680" x2="680"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="700" x2="700"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="720" x2="720"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="740" x2="740"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="760" x2="760"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="780" x2="780"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="800" x2="800"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="820" x2="820"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="840" x2="840"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="860" x2="860"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="880" x2="880"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="900" x2="900"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="920" x2="920"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="940" x2="940"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="960" x2="960"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="980" x2="980"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1000" x2="1000"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1020" x2="1020"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1040" x2="1040"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1060" x2="1060"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1080" x2="1080"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1100" x2="1100"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1120" x2="1120"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1140" x2="1140"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1160" x2="1160"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1180" x2="1180"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1200" x2="1200"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1220" x2="1220"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1240" x2="1240"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1260" x2="1260"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1280" x2="1280"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1300" x2="1300"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1320" x2="1320"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1340" x2="1340"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1360" x2="1360"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1380" x2="1380"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1400" x2="1400"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1420" x2="1420"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1440" x2="1440"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1460" x2="1460"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1480" x2="1480"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1500" x2="1500"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1520" x2="1520"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1540" x2="1540"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1560" x2="1560"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1580" x2="1580"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1600" x2="1600"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1620" x2="1620"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1640" x2="1640"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1660" x2="1660"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1680" x2="1680"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1700" x2="1700"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1720" x2="1720"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1740" x2="1740"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1760" x2="1760"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1780" x2="1780"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1800" x2="1800"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1820" x2="1820"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1840" x2="1840"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1860" x2="1860"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1880" x2="1880"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1900" x2="1900"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1920" x2="1920"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1940" x2="1940"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1960" x2="1960"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="1980" x2="1980"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2000" x2="2000"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2020" x2="2020"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2040" x2="2040"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2060" x2="2060"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2080" x2="2080"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2100" x2="2100"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2120" x2="2120"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2140" x2="2140"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2160" x2="2160"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2180" x2="2180"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2200" x2="2200"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2220" x2="2220"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2240" x2="2240"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2260" x2="2260"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2280" x2="2280"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2300" x2="2300"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2320" x2="2320"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2340" x2="2340"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2360" x2="2360"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2380" x2="2380"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2400" x2="2400"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2420" x2="2420"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2440" x2="2440"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2460" x2="2460"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2480" x2="2480"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2500" x2="2500"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2520" x2="2520"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2540" x2="2540"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2560" x2="2560"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2580" x2="2580"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2600" x2="2600"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2620" x2="2620"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2640" x2="2640"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2660" x2="2660"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2680" x2="2680"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2700" x2="2700"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2720" x2="2720"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2740" x2="2740"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2760" x2="2760"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2780" x2="2780"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2800" x2="2800"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2820" x2="2820"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2840" x2="2840"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2860" x2="2860"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2880" x2="2880"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2900" x2="2900"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2920" x2="2920"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2940" x2="2940"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2960" x2="2960"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="2980" x2="2980"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3000" x2="3000"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3020" x2="3020"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3040" x2="3040"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3060" x2="3060"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3080" x2="3080"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3100" x2="3100"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3120" x2="3120"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3140" x2="3140"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3160" x2="3160"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3180" x2="3180"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3200" x2="3200"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3220" x2="3220"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3240" x2="3240"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3260" x2="3260"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3280" x2="3280"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3300" x2="3300"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3320" x2="3320"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3340" x2="3340"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3360" x2="3360"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3380" x2="3380"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3400" x2="3400"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3420" x2="3420"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3440" x2="3440"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3460" x2="3460"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3480" x2="3480"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3500" x2="3500"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3520" x2="3520"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3540" x2="3540"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3560" x2="3560"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3580" x2="3580"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3600" x2="3600"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3620" x2="3620"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3640" x2="3640"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3660" x2="3660"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3680" x2="3680"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3700" x2="3700"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3720" x2="3720"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3740" x2="3740"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3760" x2="3760"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3780" x2="3780"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3800" x2="3800"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3820" x2="3820"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3840" x2="3840"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3860" x2="3860"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3880" x2="3880"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3900" x2="3900"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3920" x2="3920"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3940" x2="3940"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3960" x2="3960"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="3980" x2="3980"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4000" x2="4000"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4020" x2="4020"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4040" x2="4040"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4060" x2="4060"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4080" x2="4080"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4100" x2="4100"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4120" x2="4120"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4140" x2="4140"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4160" x2="4160"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4180" x2="4180"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4200" x2="4200"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4220" x2="4220"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4240" x2="4240"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4260" x2="4260"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4280" x2="4280"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4300" x2="4300"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4320" x2="4320"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4340" x2="4340"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4360" x2="4360"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4380" x2="4380"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4400" x2="4400"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4420" x2="4420"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4440" x2="4440"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4460" x2="4460"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4480" x2="4480"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4500" x2="4500"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4520" x2="4520"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4540" x2="4540"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4560" x2="4560"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4580" x2="4580"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4600" x2="4600"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4620" x2="4620"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4640" x2="4640"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4660" x2="4660"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4680" x2="4680"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4700" x2="4700"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4720" x2="4720"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4740" x2="4740"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4760" x2="4760"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4780" x2="4780"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4800" x2="4800"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4820" x2="4820"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4840" x2="4840"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4860" x2="4860"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4880" x2="4880"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4900" x2="4900"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4920" x2="4920"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4940" x2="4940"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4960" x2="4960"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="4980" x2="4980"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5000" x2="5000"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5020" x2="5020"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5040" x2="5040"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5060" x2="5060"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5080" x2="5080"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5100" x2="5100"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5120" x2="5120"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5140" x2="5140"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5160" x2="5160"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5180" x2="5180"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5200" x2="5200"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5220" x2="5220"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5240" x2="5240"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5260" x2="5260"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5280" x2="5280"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5300" x2="5300"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5320" x2="5320"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5340" x2="5340"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5360" x2="5360"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5380" x2="5380"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5400" x2="5400"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5420" x2="5420"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5440" x2="5440"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5460" x2="5460"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5480" x2="5480"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5500" x2="5500"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5520" x2="5520"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5540" x2="5540"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5560" x2="5560"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5580" x2="5580"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5600" x2="5600"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5620" x2="5620"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5640" x2="5640"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5660" x2="5660"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5680" x2="5680"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5700" x2="5700"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5720" x2="5720"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5740" x2="5740"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5760" x2="5760"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5780" x2="5780"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5800" x2="5800"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5820" x2="5820"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5840" x2="5840"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5860" x2="5860"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5880" x2="5880"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5900" x2="5900"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5920" x2="5920"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5940" x2="5940"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5960" x2="5960"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="5980" x2="5980"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6000" x2="6000"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6020" x2="6020"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6040" x2="6040"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6060" x2="6060"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6080" x2="6080"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6100" x2="6100"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6120" x2="6120"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6140" x2="6140"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6160" x2="6160"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6180" x2="6180"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6200" x2="6200"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6220" x2="6220"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6240" x2="6240"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6260" x2="6260"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6280" x2="6280"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6300" x2="6300"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6320" x2="6320"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6340" x2="6340"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6360" x2="6360"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6380" x2="6380"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6400" x2="6400"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6420" x2="6420"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6440" x2="6440"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6460" x2="6460"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6480" x2="6480"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6500" x2="6500"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6520" x2="6520"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6540" x2="6540"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6560" x2="6560"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6580" x2="6580"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6600" x2="6600"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6620" x2="6620"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6640" x2="6640"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6660" x2="6660"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6680" x2="6680"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6700" x2="6700"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6720" x2="6720"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6740" x2="6740"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6760" x2="6760"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6780" x2="6780"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6800" x2="6800"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6820" x2="6820"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6840" x2="6840"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6860" x2="6860"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6880" x2="6880"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6900" x2="6900"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6920" x2="6920"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6940" x2="6940"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6960" x2="6960"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="6980" x2="6980"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7000" x2="7000"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7020" x2="7020"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7040" x2="7040"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7060" x2="7060"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7080" x2="7080"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7100" x2="7100"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7120" x2="7120"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7140" x2="7140"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7160" x2="7160"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7180" x2="7180"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7200" x2="7200"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7220" x2="7220"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7240" x2="7240"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7260" x2="7260"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7280" x2="7280"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7300" x2="7300"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7320" x2="7320"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7340" x2="7340"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7360" x2="7360"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7380" x2="7380"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7400" x2="7400"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7420" x2="7420"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7440" x2="7440"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7460" x2="7460"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7480" x2="7480"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7500" x2="7500"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7520" x2="7520"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7540" x2="7540"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7560" x2="7560"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7580" x2="7580"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7600" x2="7600"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7620" x2="7620"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7640" x2="7640"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7660" x2="7660"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7680" x2="7680"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7700" x2="7700"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7720" x2="7720"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7740" x2="7740"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7760" x2="7760"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7780" x2="7780"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7800" x2="7800"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7820" x2="7820"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7840" x2="7840"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7860" x2="7860"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7880" x2="7880"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7900" x2="7900"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7920" x2="7920"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7940" x2="7940"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7960" x2="7960"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="8000" x1="7980" x2="7980"></line></g><g></g><g></g><g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 120 280 C 165 280 135 280 180 280"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 120 280 C 165 280 135 280 180 280"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 120 280 C 165 280 135 280 180 280"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 120 280 C 195 280 105 560 180 560"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 120 280 C 195 280 105 560 180 560"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 120 280 C 195 280 105 560 180 560"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 120 280 C 195 280 265 140 340 140"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 120 280 C 195 280 265 140 340 140"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-node-disabled red-ui-flow-subflow-link" d="M 120 280 C 195 280 265 140 340 140"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 120 280 C 195 280 145 480 220 480"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 120 280 C 195 280 145 480 220 480"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-node-disabled red-ui-flow-subflow-link" d="M 120 280 C 195 280 145 480 220 480"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 120 280 C 195 280 265 40 340 40"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 120 280 C 195 280 265 40 340 40"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 120 280 C 195 280 265 40 340 40"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 120 280 C 195 280 425 40 500 40"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 120 280 C 195 280 425 40 500 40"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 120 280 C 195 280 425 40 500 40"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 300 280 C 375 280 265 180 340 180"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 300 280 C 375 280 265 180 340 180"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 300 280 C 375 280 265 180 340 180"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 300 280 C 354.08326913195987 280 285.91673086804013 220 340 220"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 300 280 C 354.08326913195987 280 285.91673086804013 220 340 220"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 300 280 C 354.08326913195987 280 285.91673086804013 220 340 220"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 300 280 C 333.54101966249686 280 306.45898033750314 260 340 260"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 300 280 C 333.54101966249686 280 306.45898033750314 260 340 260"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 300 280 C 333.54101966249686 280 306.45898033750314 260 340 260"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 300 280 C 333.54101966249686 280 306.45898033750314 300 340 300"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 300 280 C 333.54101966249686 280 306.45898033750314 300 340 300"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 300 280 C 333.54101966249686 280 306.45898033750314 300 340 300"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 300 280 C 354.08326913195987 280 285.91673086804013 340 340 340"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 300 280 C 354.08326913195987 280 285.91673086804013 340 340 340"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 300 280 C 354.08326913195987 280 285.91673086804013 340 340 340"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 300 280 C 375 280 265 400 340 400"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 300 280 C 375 280 265 400 340 400"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 300 280 C 375 280 265 400 340 400"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 460 180 C 535 180 745 180 820 180"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 460 180 C 535 180 745 180 820 180"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 460 180 C 535 180 745 180 820 180"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 460 180 C 535 180 605 340 680 340"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 460 180 C 535 180 605 340 680 340"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 460 180 C 535 180 605 340 680 340"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 460 220 C 535 220 605 40 680 40"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 460 220 C 535 220 605 40 680 40"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 460 220 C 535 220 605 40 680 40"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 460 220 C 535 220 745 220 820 220"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 460 220 C 535 220 745 220 820 220"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 460 220 C 535 220 745 220 820 220"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 940 220 C 1015 220 1125 220 1200 220"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 940 220 C 1015 220 1125 220 1200 220"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 940 220 C 1015 220 1125 220 1200 220"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 280 560 C 355 560 305 580 380 580"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 280 560 C 355 560 305 580 380 580"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 280 560 C 355 560 305 580 380 580"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 500 580 C 575 580 665 580 740 580"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 500 580 C 575 580 665 580 740 580"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 500 580 C 575 580 665 580 740 580"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 480 260 C 555 260 765 260 840 260"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 480 260 C 555 260 765 260 840 260"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 480 260 C 555 260 765 260 840 260"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 480 300 C 555 300 605 300 680 300"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 480 300 C 555 300 605 300 680 300"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 480 300 C 555 300 605 300 680 300"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 480 340 C 555 340 605 340 680 340"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 480 340 C 555 340 605 340 680 340"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 480 340 C 555 340 605 340 680 340"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 480 640 C 555 640 545 640 620 640"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 480 640 C 555 640 545 640 620 640"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 480 640 C 555 640 545 640 620 640"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 440 140 C 515 140 725 140 800 140"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 440 140 C 515 140 725 140 800 140"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-node-disabled" d="M 440 140 C 515 140 725 140 800 140"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 480 400 C 555 400 745 400 820 400"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 480 400 C 555 400 745 400 820 400"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 480 400 C 555 400 745 400 820 400"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 540 480 C 585 480 555 480 600 480"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 540 480 C 585 480 555 480 600 480"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-node-disabled" d="M 540 480 C 585 480 555 480 600 480"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 320 480 C 365 480 335 480 380 480"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 320 480 C 365 480 335 480 380 480"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-node-disabled" d="M 320 480 C 365 480 335 480 380 480"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 380 520 C 425 520 395 520 440 520"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 380 520 C 425 520 395 520 440 520"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 380 520 C 425 520 395 520 440 520"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 540 520 C 585 520 555 520 600 520"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 540 520 C 585 520 555 520 600 520"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 540 520 C 585 520 555 520 600 520"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 440 700 C 515 700 505 700 580 700"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 440 700 C 515 700 505 700 580 700"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 440 700 C 515 700 505 700 580 700"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 740 700 C 800 700 760 700 820 700"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 740 700 C 800 700 760 700 820 700"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 740 700 C 800 700 760 700 820 700"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 920 700 C 995 700 1025 660 1100 660"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 920 700 C 995 700 1025 660 1100 660"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 920 700 C 995 700 1025 660 1100 660"></path></g></g><g></g><g></g><g><g class="red-ui-flow-node red-ui-flow-node-group" id="d7cb8e8311cf984f" transform="translate(0,265)"><rect class="red-ui-flow-node" rx="5" ry="5" fill="#d8bfd8" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red/bridge.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label node_label_italic" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">test_data</text></g><g class="red-ui-flow-node-status-group" transform="translate(3,33)" style="display: inline;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="76.2951431274414" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status red-ui-flow-node-status-dot-green" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3" style="display: inline;"></rect><text class="red-ui-flow-node-status-label" x="20" y="10">connected</text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-output" transform="translate(115,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="4e60c868b2c4e276" transform="translate(180,265)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#DEBD5C" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red/parser-json.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label node_label_italic" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">test_data</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(115,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="0b893f145ecc80a6" transform="translate(340,25)"><g transform="translate(106,2)" class="red-ui-flow-node-button" style="display: inherit;"><rect class="red-ui-flow-node-button-background" rx="5" ry="5" width="32" height="26" fill-opacity="0.2"></rect><rect class="red-ui-flow-node-button-button" x="11" y="4" rx="4" ry="4" width="16" height="18" fill="#87a980" fill-opacity="0.2"></rect></g><rect class="red-ui-flow-node " rx="5" ry="5" fill="#87a980" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" transform="translate(90,0)" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M 0 0 h25 a 5 5 0 0 1 5 5 v20 a 5 5 0 0 1 -5 5 h-25 v-30"></path><image href="icons/node-red/debug.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 0.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right node_label_italic" transform="translate(82,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">debugcb</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="67287e4beba8ae5e" transform="translate(820,165)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="180" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" transform="translate(150,0)" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M 0 0 h25 a 5 5 0 0 1 5 5 v20 a 5 5 0 0 1 -5 5 h-25 v-30"></path><image href="icons/node-red-dashboard/ui_chart.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" style="" y="0"></image><path d="M 0.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right node_label_italic" transform="translate(142,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">temperaturechart</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(175,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="98934c617ec031ca" transform="translate(340,165)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#fdd0a2" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red/function.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label node_label_italic" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">function 8</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(115,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="069b176dd23b0419" transform="translate(500,25)"><g transform="translate(114,2)" class="red-ui-flow-node-button" style="display: inherit;"><rect class="red-ui-flow-node-button-background" rx="5" ry="5" width="32" height="26" fill-opacity="1"></rect><rect class="red-ui-flow-node-button-button" x="11" y="4" rx="4" ry="4" width="16" height="18" fill="#87a980" fill-opacity="1"></rect></g><rect class="red-ui-flow-node " rx="5" ry="5" fill="#87a980" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" transform="translate(90,0)" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M 0 0 h25 a 5 5 0 0 1 5 5 v20 a 5 5 0 0 1 -5 5 h-25 v-30"></path><image href="icons/node-red/debug.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 0.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right node_label_italic" transform="translate(82,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">debug 8</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="eb04bd32b445be58" transform="translate(340,205)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#fdd0a2" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red/function.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label node_label_italic" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">function 9</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(115,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="919f8d3e743fed46" transform="translate(820,205)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" transform="translate(90,0)" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M 0 0 h25 a 5 5 0 0 1 5 5 v20 a 5 5 0 0 1 -5 5 h-25 v-30"></path><image href="icons/node-red-dashboard/ui_chart.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" style="" y="0"></image><path d="M 0.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right node_label_italic" transform="translate(82,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">Humidity</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(115,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="1ebfc4ad28a3254d" transform="translate(740,565)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="BurlyWood" width="420" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red/file-out.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">/home/cuthbert/Desktop/node-red testing folder/file2.csv</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(415,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="827b15d05456ff78" transform="translate(180,545)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#DEBD5C" width="100" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red/parser-json.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">json</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(95,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="1d68c244c5d29ab2" transform="translate(380,565)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#DEBD5C" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red/parser-csv.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label node_label_italic" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">test_data</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(115,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="825df2569933dce7" transform="translate(340,245)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#fdd0a2" width="140" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red/function.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label node_label_italic" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">function 10</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(135,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="1e8c99fa575e3619" transform="translate(840,245)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="100" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" transform="translate(70,0)" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M 0 0 h25 a 5 5 0 0 1 5 5 v20 a 5 5 0 0 1 -5 5 h-25 v-30"></path><image href="icons/node-red-dashboard/ui_gauge.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" style="" y="0"></image><path d="M 0.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right node_label_italic" transform="translate(62,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">Ave1</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="99b1eb12ef24eabb" transform="translate(340,285)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#fdd0a2" width="140" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red/function.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label node_label_italic" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">function 11</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(135,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="6186111f1db84628" transform="translate(340,325)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#fdd0a2" width="140" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red/function.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label node_label_italic" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">function 12</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(135,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="d8f6617ce5cc0b17" transform="translate(680,285)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="200" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" transform="translate(170,0)" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M 0 0 h25 a 5 5 0 0 1 5 5 v20 a 5 5 0 0 1 -5 5 h-25 v-30"></path><image href="icons/node-red-dashboard/ui_gauge.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" style="" y="0"></image><path d="M 0.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right node_label_italic" transform="translate(162,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">Last Weeks Average</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="c973cca490dff1b9" transform="translate(680,325)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="200" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" transform="translate(170,0)" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M 0 0 h25 a 5 5 0 0 1 5 5 v20 a 5 5 0 0 1 -5 5 h-25 v-30"></path><image href="icons/node-red-dashboard/ui_gauge.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" style="" y="0"></image><path d="M 0.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right node_label_italic" transform="translate(162,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">Average of Last Month</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="2a9429dab4e4700e" transform="translate(620,625)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#38989f" width="180" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" transform="translate(150,0)" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M 0 0 h25 a 5 5 0 0 1 5 5 v20 a 5 5 0 0 1 -5 5 h-25 v-30"></path><image href="icons/node-red/white-globe.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 0.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right node_label_italic" transform="translate(142,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">Hathersage sensor</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="3fd17778688f7392" transform="translate(240,625)"><g transform="translate(-25,2)" class="red-ui-flow-node-button"><rect class="red-ui-flow-node-button-background" rx="5" ry="5" width="32" height="26"></rect><rect class="red-ui-flow-node-button-button" x="5" y="4" rx="4" ry="4" width="16" height="18" fill="#a6bbcf"></rect></g><rect class="red-ui-flow-node " rx="5" ry="5" fill="#a6bbcf" width="240" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red/inject.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label node_label_italic" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">Co ordinates for Hathersage ¹</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-output" transform="translate(235,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="3ab5c0f6871d7a58" transform="translate(680,25)"><g transform="translate(106,2)" class="red-ui-flow-node-button" style="display: inherit;"><rect class="red-ui-flow-node-button-background" rx="5" ry="5" width="32" height="26" fill-opacity="0.2"></rect><rect class="red-ui-flow-node-button-button" x="11" y="4" rx="4" ry="4" width="16" height="18" fill="#87a980" fill-opacity="0.2"></rect></g><rect class="red-ui-flow-node " rx="5" ry="5" fill="#87a980" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" transform="translate(90,0)" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M 0 0 h25 a 5 5 0 0 1 5 5 v20 a 5 5 0 0 1 -5 5 h-25 v-30"></path><image href="icons/node-red/debug.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 0.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right node_label_italic" transform="translate(82,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">debug 14</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="64b67bf5093a084b" transform="translate(1200,205)"><g transform="translate(106,2)" class="red-ui-flow-node-button" style="display: inherit;"><rect class="red-ui-flow-node-button-background" rx="5" ry="5" width="32" height="26" fill-opacity="0.2"></rect><rect class="red-ui-flow-node-button-button" x="11" y="4" rx="4" ry="4" width="16" height="18" fill="#87a980" fill-opacity="0.2"></rect></g><rect class="red-ui-flow-node " rx="5" ry="5" fill="#87a980" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" transform="translate(90,0)" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M 0 0 h25 a 5 5 0 0 1 5 5 v20 a 5 5 0 0 1 -5 5 h-25 v-30"></path><image href="icons/node-red/debug.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 0.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right node_label_italic" transform="translate(82,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">debug 15</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group red-ui-flow-node-disabled" id="ee54db14f7d40cc2" transform="translate(340,125)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#DEBD5C" width="100" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red/parser-json.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">json</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(95,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="2ecbabc8109cd63b" transform="translate(800,125)"><g transform="translate(106,2)" class="red-ui-flow-node-button" style="display: inherit;"><rect class="red-ui-flow-node-button-background" rx="5" ry="5" width="32" height="26" fill-opacity="0.2"></rect><rect class="red-ui-flow-node-button-button" x="11" y="4" rx="4" ry="4" width="16" height="18" fill="#87a980" fill-opacity="0.2"></rect></g><rect class="red-ui-flow-node " rx="5" ry="5" fill="#87a980" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" transform="translate(90,0)" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M 0 0 h25 a 5 5 0 0 1 5 5 v20 a 5 5 0 0 1 -5 5 h-25 v-30"></path><image href="icons/node-red/debug.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 0.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right node_label_italic" transform="translate(82,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">debug 26</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="bcb4e8ce81dbb2a0" transform="translate(340,385)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#fdd0a2" width="140" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red/function.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label node_label_italic" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">function 20</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(135,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="fc1516c7b6983a39" transform="translate(820,385)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" transform="translate(90,0)" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M 0 0 h25 a 5 5 0 0 1 5 5 v20 a 5 5 0 0 1 -5 5 h-25 v-30"></path><image href="icons/node-red-dashboard/ui_chart.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" style="" y="0"></image><path d="M 0.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right node_label_italic" transform="translate(82,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">Pressure</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(115,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group red-ui-flow-node-disabled" id="11372edd376acd39" transform="translate(380,465)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#e97b00" width="160" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red-node-sqlite/sqlite.png" class="red-ui-flow-node-icon" x="4.5" width="21" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label node_label_italic" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">sensor_data.db</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(155,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group red-ui-flow-node-disabled" id="ac29d091af3c97a6" transform="translate(600,465)"><g transform="translate(114,2)" class="red-ui-flow-node-button red-ui-flow-node-button-disabled" style="display: inherit;"><rect class="red-ui-flow-node-button-background" rx="5" ry="5" width="32" height="26" fill-opacity="1"></rect><rect class="red-ui-flow-node-button-button" x="11" y="4" rx="4" ry="4" width="16" height="18" fill="#87a980" fill-opacity="1"></rect></g><rect class="red-ui-flow-node " rx="5" ry="5" fill="#87a980" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" transform="translate(90,0)" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M 0 0 h25 a 5 5 0 0 1 5 5 v20 a 5 5 0 0 1 -5 5 h-25 v-30"></path><image href="icons/node-red/debug.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 0.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right node_label_italic" transform="translate(82,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">debug 35</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group red-ui-flow-node-disabled" id="398d19f9d9649d2c" transform="translate(220,465)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#DEBD5C" width="100" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red/parser-json.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">json</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(95,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="33f73603fcd12055" transform="translate(260,505)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(176, 223, 227)" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red-dashboard/ui_form.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label node_label_italic" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">Event Log</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(115,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="554ec710843b996f" transform="translate(440,505)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#DEBD5C" width="100" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red/parser-csv.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">csv</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(95,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="fdd0cc92be8f1418" transform="translate(600,505)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="BurlyWood" width="440" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red/file-out.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">/home/cuthbert/Desktop/node-red testing folder/eventlog.csv</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(435,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="fd110f10a34a4b97" transform="translate(60,685)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(176, 223, 227)" width="380" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red-dashboard/ui_button.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">press button to read the event log from this sensor</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(375,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="a864a576535e1e3c" transform="translate(1100,645)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="140" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" transform="translate(110,0)" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M 0 0 h25 a 5 5 0 0 1 5 5 v20 a 5 5 0 0 1 -5 5 h-25 v-30"></path><image href="icons/node-red-dashboard/ui_toast.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" style="" y="0"></image><path d="M 0.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right" transform="translate(102,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">show dialog</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(135,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="a5540a7b9391add3" transform="translate(580,685)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="BurlyWood" width="160" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red/file-in.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label node_label_italic" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">eventlog-read</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(155,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="85230d44e96d64e0" transform="translate(820,685)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#DEBD5C" width="100" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" transform="" style="pointer-events: none;"><path x="0" y="0" class="red-ui-flow-node-icon-shade" d="M5 0 h25 v30 h-25 a 5 5 0 0 1 -5 -5  v-20 a 5 5 0 0 1 5 -5"></path><image href="icons/node-red/parser-csv.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" style="" y="0"></image><path d="M 29.5 0.5 l 0 29" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">csv</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status-background" x="3" y="-1" width="200" height="13" rx="2" ry="2"></rect><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide"><circle cx="5" cy="5" r="5"></circle></g><g class="red-ui-flow-node-error hide"><path d="M 0,9 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(95,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g></g></g></g></svg></div><div id="red-ui-workspace-toolbar" style="display: none;"></div><div id="red-ui-workspace-footer" class="red-ui-component-footer"><span class="red-ui-statusbar-bucket red-ui-statusbar-bucket-left"><span class="red-ui-statusbar-widget" id="view-search-tools"><span class="button-group"><button class="red-ui-footer-button" id="red-ui-view-searchtools-search"><i class="fa fa-search"></i></button></span><span class="button-group search-counter" style="display: none;"><span class="red-ui-footer-button" id="red-ui-view-searchtools-counter">? of ?</span></span><span class="button-group" style="display: none;"><button class="red-ui-footer-button" id="red-ui-view-searchtools-prev"><i class="fa fa-chevron-left"></i></button><button class="red-ui-footer-button" id="red-ui-view-searchtools-next"><i class="fa fa-chevron-right"></i></button></span><span class="button-group" style="display: none;"><button class="red-ui-footer-button" id="red-ui-view-searchtools-close"><i class="fa fa-close"></i></button></span></span></span><span class="red-ui-statusbar-bucket red-ui-statusbar-bucket-right"><span class="red-ui-statusbar-widget" id="view-navigator"><button class="red-ui-footer-button-toggle single" id="red-ui-view-navigate"><i class="fa fa-map-o"></i></button></span><span class="red-ui-statusbar-widget" id="view-zoom-controls"><span class="button-group"><button class="red-ui-footer-button" id="red-ui-view-zoom-out"><i class="fa fa-minus"></i></button><button class="red-ui-footer-button" id="red-ui-view-zoom-zero"><i class="fa fa-circle-o"></i></button><button class="red-ui-footer-button" id="red-ui-view-zoom-in"><i class="fa fa-plus"></i></button></span></span></span></div><div id="red-ui-editor-shade" class="hide" style="display: none;"></div><div style="position: absolute; bottom: 25px; right: 0px; z-index: 1; display: none;"><svg width="160" height="160" pointer-events="all" id="red-ui-navigator-canvas"><rect x="0" y="0" width="160" height="160" style="fill: none; stroke: none;"></rect><rect class="red-ui-navigator-border" x="0" y="0" width="31.958000000000002" height="17.713540000000002"></rect><g></g></svg></div></div><div id="red-ui-editor-stack" tabindex="-1" style="z-index: 9;"></div><div id="red-ui-palette"><img src="./Node-RED _ maindashboard_files/spin.svg" class="red-ui-palette-spinner hide" style="display: none;"><div id="red-ui-palette-search" class="red-ui-palette-search"><div class="red-ui-searchBox-container"><i class="fa fa-search"></i><form class="red-ui-searchBox-form"><input type="text" data-i18n="[placeholder]palette.filter" class="red-ui-searchBox-input" placeholder="filter nodes"></form><a class="red-ui-searchBox-clear" href="http://localhost:1880/#"><i class="fa fa-times"></i></a><span class="red-ui-searchBox-resultCount hide"></span></div></div><div id="red-ui-palette-container" class="red-ui-palette-scroll"><div id="red-ui-palette-container-subflows" class="red-ui-palette-category hide"><div id="red-ui-palette-header-subflows" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>subflows</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-subflows"><div id="red-ui-palette-subflows"></div><div id="red-ui-palette-subflows-input"></div><div id="red-ui-palette-subflows-output"></div><div id="red-ui-palette-subflows-function"></div></div></div><div id="red-ui-palette-container-common" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-common" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>common</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-common"><div id="red-ui-palette-common"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="inject" data-palette-label="inject" style="background-color: rgb(166, 187, 207); height: 28px;"><div class="red-ui-palette-label" dir="">inject</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/inject.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/inject.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="debug" data-palette-label="debug" style="background-color: rgb(135, 169, 128); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">debug</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/debug.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/debug.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="complete" data-palette-label="complete" style="background-color: rgb(192, 237, 192); height: 28px;"><div class="red-ui-palette-label" dir="">complete</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/alert.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/alert.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="catch" data-palette-label="catch" style="background-color: rgb(228, 145, 145); height: 28px;"><div class="red-ui-palette-label" dir="">catch</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/alert.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/alert.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="status" data-palette-label="status" style="background-color: rgb(148, 193, 208); height: 28px;"><div class="red-ui-palette-label" dir="">status</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/status.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/status.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="link in" data-palette-label="link in" style="background-color: rgb(221, 221, 221); height: 28px;"><div class="red-ui-palette-label" dir="">link   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/link-out.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/link-out.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="link call" data-palette-label="link call" style="background-color: rgb(221, 221, 221); height: 28px;"><div class="red-ui-palette-label" dir="">link   call</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/link-call.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/link-call.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="link out" data-palette-label="link out" style="background-color: rgb(221, 221, 221); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">link   out</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/link-out.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/link-out.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="comment" data-palette-label="comment" style="background-color: rgb(255, 255, 255); height: 28px;"><div class="red-ui-palette-label" dir="">comment</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/comment.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/comment.svg&quot;);"></div></div></div></div><div id="red-ui-palette-common-input"></div><div id="red-ui-palette-common-output"></div><div id="red-ui-palette-common-function"></div></div></div><div id="red-ui-palette-container-function" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-function" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>function</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-function"><div id="red-ui-palette-function"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="function" data-palette-label="function" style="background-color: rgb(253, 208, 162); height: 28px;"><div class="red-ui-palette-label" dir="">function</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/function.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/function.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="switch" data-palette-label="switch" style="background-color: rgb(226, 217, 110); height: 28px;"><div class="red-ui-palette-label" dir="">switch</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/switch.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/switch.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="change" data-palette-label="change" style="background-color: rgb(226, 217, 110); height: 28px;"><div class="red-ui-palette-label" dir="">change</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/swap.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/swap.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="range" data-palette-label="range" style="background-color: rgb(226, 217, 110); height: 28px;"><div class="red-ui-palette-label" dir="">range</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/range.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/range.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="template" data-palette-label="template" style="background-color: rgb(243, 181, 103); height: 28px;"><div class="red-ui-palette-label" dir="">template</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/template.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/template.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="delay" data-palette-label="delay" style="background-color: rgb(230, 224, 248); height: 28px;"><div class="red-ui-palette-label" dir="">delay</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/timer.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/timer.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="trigger" data-palette-label="trigger" style="background-color: rgb(230, 224, 248); height: 28px;"><div class="red-ui-palette-label" dir="">trigger</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/trigger.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/trigger.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="exec" data-palette-label="exec" style="background-color: darksalmon; height: 28px;"><div class="red-ui-palette-label" dir="">exec</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/cog.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="rbe" data-palette-label="filter" style="background-color: rgb(226, 217, 110); height: 28px;"><div class="red-ui-palette-label" dir="">filter</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/rbe.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/rbe.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ArrGrouper" data-palette-label="ArrGrouper" style="background-color: rgb(226, 217, 110); height: 28px;"><div class="red-ui-palette-label" dir="">ArrGrouper</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/link-out.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/link-out.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="smooth" data-palette-label="smooth" style="background-color: rgb(226, 217, 110); height: 28px;"><div class="red-ui-palette-label" dir="">smooth</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-node-smooth/smooth.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-node-smooth/smooth.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-function-input"></div><div id="red-ui-palette-function-output"></div><div id="red-ui-palette-function-function"></div></div></div><div id="red-ui-palette-container-network" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-network" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>network</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-network"><div id="red-ui-palette-network"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="mqtt in" data-palette-label="mqtt in" style="background-color: rgb(216, 191, 216); height: 28px;"><div class="red-ui-palette-label" dir="">mqtt   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/bridge.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="mqtt out" data-palette-label="mqtt out" style="background-color: rgb(216, 191, 216); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">mqtt   out</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/bridge.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="http in" data-palette-label="http in" style="background-color: rgb(231, 231, 174); height: 28px;"><div class="red-ui-palette-label" dir="">http   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/white-globe.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="http response" data-palette-label="http response" style="background-color: rgb(231, 231, 174); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">http   response</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/white-globe.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="http request" data-palette-label="http request" style="background-color: rgb(231, 231, 174); height: 28px;"><div class="red-ui-palette-label" dir="">http   request</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/white-globe.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="websocket in" data-palette-label="websocket in" style="background-color: rgb(215, 215, 160); height: 28px;"><div class="red-ui-palette-label" dir="">websocket   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/white-globe.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="websocket out" data-palette-label="websocket out" style="background-color: rgb(215, 215, 160); height: 48px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">websocket  <br>out</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/white-globe.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 19px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="tcp in" data-palette-label="tcp in" style="background-color: rgb(192, 192, 192); height: 28px;"><div class="red-ui-palette-label" dir="">tcp   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/bridge-dash.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="tcp out" data-palette-label="tcp out" style="background-color: rgb(192, 192, 192); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">tcp   out</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/bridge-dash.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="tcp request" data-palette-label="tcp request" style="background-color: rgb(192, 192, 192); height: 28px;"><div class="red-ui-palette-label" dir="">tcp   request</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/bridge-dash.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="udp in" data-palette-label="udp in" style="background-color: rgb(192, 192, 192); height: 28px;"><div class="red-ui-palette-label" dir="">udp   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/bridge-dash.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="udp out" data-palette-label="udp out" style="background-color: rgb(192, 192, 192); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">udp   out</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/bridge-dash.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="serial in" data-palette-label="serial in" style="background-color: burlywood; height: 28px;"><div class="red-ui-palette-label" dir="">serial   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/serial.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/serial.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="serial out" data-palette-label="serial out" style="background-color: burlywood; height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">serial   out</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/serial.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/serial.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="serial request" data-palette-label="serial request" style="background-color: burlywood; height: 28px;"><div class="red-ui-palette-label" dir="">serial   request</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/serial.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/serial.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="serial control" data-palette-label="serial control" style="background-color: burlywood; height: 28px;"><div class="red-ui-palette-label" dir="">serial   control</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/serial.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/serial.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-network-input"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ping" data-palette-label="ping" style="background-color: rgb(253, 240, 194); height: 28px;"><div class="red-ui-palette-label" dir="">ping</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/alert.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/alert.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div></div><div id="red-ui-palette-network-output"></div><div id="red-ui-palette-network-function"></div></div></div><div id="red-ui-palette-container-input" class="red-ui-palette-category hide"><div id="red-ui-palette-header-input" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>input</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-input"><div id="red-ui-palette-input"></div><div id="red-ui-palette-input-input"></div><div id="red-ui-palette-input-output"></div><div id="red-ui-palette-input-function"></div></div></div><div id="red-ui-palette-container-output" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-output" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>output</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-output"><div id="red-ui-palette-output"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="play audio" data-palette-label="play audio" style="background-color: rgb(218, 175, 247); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">play   audio</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/feed.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/feed.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-output-input"></div><div id="red-ui-palette-output-output"></div><div id="red-ui-palette-output-function"></div></div></div><div id="red-ui-palette-container-sequence" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-sequence" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>sequence</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-sequence"><div id="red-ui-palette-sequence"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="split" data-palette-label="split" style="background-color: rgb(226, 217, 110); height: 28px;"><div class="red-ui-palette-label" dir="">split</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/split.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/split.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="join" data-palette-label="join" style="background-color: rgb(226, 217, 110); height: 28px;"><div class="red-ui-palette-label" dir="">join</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/join.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/join.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="sort" data-palette-label="sort" style="background-color: rgb(226, 217, 110); height: 28px;"><div class="red-ui-palette-label" dir="">sort</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/sort.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/sort.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="batch" data-palette-label="batch" style="background-color: rgb(226, 217, 110); height: 28px;"><div class="red-ui-palette-label" dir="">batch</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/batch.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/batch.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-sequence-input"></div><div id="red-ui-palette-sequence-output"></div><div id="red-ui-palette-sequence-function"></div></div></div><div id="red-ui-palette-container-parser" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-parser" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>parser</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-parser"><div id="red-ui-palette-parser"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="csv" data-palette-label="csv" style="background-color: rgb(222, 189, 92); height: 28px;"><div class="red-ui-palette-label" dir="">csv</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/parser-csv.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-csv.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="html" data-palette-label="html" style="background-color: rgb(222, 189, 92); height: 28px;"><div class="red-ui-palette-label" dir="">html</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/parser-html.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-html.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="json" data-palette-label="json" style="background-color: rgb(222, 189, 92); height: 28px;"><div class="red-ui-palette-label" dir="">json</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/parser-json.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-json.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="xml" data-palette-label="xml" style="background-color: rgb(222, 189, 92); height: 28px;"><div class="red-ui-palette-label" dir="">xml</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/parser-xml.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-xml.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="yaml" data-palette-label="yaml" style="background-color: rgb(222, 189, 92); height: 28px;"><div class="red-ui-palette-label" dir="">yaml</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/parser-yaml.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-yaml.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="buffer-parser" data-palette-label="buffer-parser" style="background-color: rgb(0, 144, 212); height: 28px;"><div class="red-ui-palette-label" dir="">buffer - parser</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-expand"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-expand"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="buffer-maker" data-palette-label="buffer-maker" style="background-color: rgb(0, 144, 212); height: 28px;"><div class="red-ui-palette-label" dir="">buffer - maker</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-compress"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-compress"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-parser-input"></div><div id="red-ui-palette-parser-output"></div><div id="red-ui-palette-parser-function"></div></div></div><div id="red-ui-palette-container-storage" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-storage" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>storage</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-storage"><div id="red-ui-palette-storage"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="file" data-palette-label="write file" style="background-color: burlywood; height: 28px;"><div class="red-ui-palette-label" dir="">write   file</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/file-out.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file-out.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="file in" data-palette-label="read file" style="background-color: burlywood; height: 28px;"><div class="red-ui-palette-label" dir="">read   file</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/file-in.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file-in.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="watch" data-palette-label="watch" style="background-color: burlywood; height: 28px;"><div class="red-ui-palette-label" dir="">watch</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/watch.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/watch.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div></div><div id="red-ui-palette-storage-input"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="sqlite" data-palette-label="sqlite" style="background-color: rgb(233, 123, 0); height: 28px;"><div class="red-ui-palette-label" dir="">sqlite</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-node-sqlite/sqlite.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-node-sqlite/sqlite.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-storage-output"></div><div id="red-ui-palette-storage-function"></div></div></div><div id="red-ui-palette-container-analysis" class="red-ui-palette-category hide"><div id="red-ui-palette-header-analysis" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>analysis</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-analysis"><div id="red-ui-palette-analysis"></div><div id="red-ui-palette-analysis-input"></div><div id="red-ui-palette-analysis-output"></div><div id="red-ui-palette-analysis-function"></div></div></div><div id="red-ui-palette-container-social" class="red-ui-palette-category hide"><div id="red-ui-palette-header-social" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>social</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-social"><div id="red-ui-palette-social"></div><div id="red-ui-palette-social-input"></div><div id="red-ui-palette-social-output"></div><div id="red-ui-palette-social-function"></div></div></div><div id="red-ui-palette-container-advanced" class="red-ui-palette-category hide"><div id="red-ui-palette-header-advanced" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>advanced</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-advanced"><div id="red-ui-palette-advanced"></div><div id="red-ui-palette-advanced-input"></div><div id="red-ui-palette-advanced-output"></div><div id="red-ui-palette-advanced-function"></div></div></div><div id="red-ui-palette-container-dashboard_2" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-dashboard_2" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>dashboard 2</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-dashboard_2"><div id="red-ui-palette-dashboard_2"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui-form" data-palette-label="form" style="background-color: var(--nrdb-node-light); height: 28px;"><div class="red-ui-palette-label" dir="">form</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-list-alt"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-list-alt"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui-text-input" data-palette-label="text input" style="background-color: var(--nrdb-node-light); height: 28px;"><div class="red-ui-palette-label" dir="">text   input</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-i-cursor"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-i-cursor"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui-button" data-palette-label="button" style="background-color: var(--nrdb-node-light); height: 28px;"><div class="red-ui-palette-label" dir="">button</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-hand-pointer-o"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-hand-pointer-o"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui-button-group" data-palette-label="button group" style="background-color: var(--nrdb-node-light); height: 28px;"><div class="red-ui-palette-label" dir="">button   group</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-toggle-off"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-toggle-off"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui-dropdown" data-palette-label="dropdown" style="background-color: var(--nrdb-node-light); height: 28px;"><div class="red-ui-palette-label" dir="">dropdown</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-bars"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-bars"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui-slider" data-palette-label="slider" style="background-color: var(--nrdb-node-light); height: 28px;"><div class="red-ui-palette-label" dir="">slider</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-sliders"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-sliders"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui-switch" data-palette-label="switch" style="background-color: var(--nrdb-node-light); height: 28px;"><div class="red-ui-palette-label" dir="">switch</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-toggle-on"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-toggle-on"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui-text" data-palette-label="text" style="background-color: var(--nrdb-node-medium); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">text</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="font-awesome/fa-font"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-font"></i></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui-table" data-palette-label="table" style="background-color: var(--nrdb-node-medium); height: 28px;"><div class="red-ui-palette-label" dir="">table</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-table"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-table"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui-chart" data-palette-label="chart" style="background-color: var(--nrdb-node-medium); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">chart</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="font-awesome/fa-line-chart"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-line-chart"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui-gauge" data-palette-label="gauge" style="background-color: var(--nrdb-node-medium); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">gauge</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/@flowfuse/node-red-dashboard/ui-gauge.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/@flowfuse/node-red-dashboard/ui-gauge.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui-notification" data-palette-label="notification" style="background-color: var(--nrdb-node-medium); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">notification</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="font-awesome/fa-envelope-o"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-envelope-o"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui-markdown" data-palette-label="markdown" style="background-color: var(--nrdb-node-dark); height: 28px;"><div class="red-ui-palette-label" dir="">markdown</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/arrow-in.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/arrow-in.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui-template" data-palette-label="template" style="background-color: var(--nrdb-node-dark); height: 28px;"><div class="red-ui-palette-label" dir="">template</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-code"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-code"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui-event" data-palette-label="event" style="background-color: var(--nrdb-node-darkest); height: 28px;"><div class="red-ui-palette-label" dir="">event</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-arrow-circle-right"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-arrow-circle-right"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui-control" data-palette-label="ui control" style="background-color: var(--nrdb-node-darkest); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">ui   control</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="font-awesome/fa-arrow-circle-right"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-arrow-circle-right"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui-iframe" data-palette-label="iframe" style="background-color: var(--nrdb-node-dark); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">iframe</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/@flowfuse/node-red-dashboard-2-ui-iframe/iframe-icon.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/@flowfuse/node-red-dashboard-2-ui-iframe/iframe-icon.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui-webcam" data-palette-label="webcam" style="background-color: var(--nrdb-node-medium); height: 28px;"><div class="red-ui-palette-label" dir="">webcam</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-camera"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-camera"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-dashboard_2-input"></div><div id="red-ui-palette-dashboard_2-output"></div><div id="red-ui-palette-dashboard_2-function"></div></div></div><div id="red-ui-palette-container-CN_Dashboards" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-CN_Dashboards" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>CN Dashboards</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-CN_Dashboards"><div id="red-ui-palette-CN_Dashboards"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="IssueDashboard" data-palette-label="IssueDashboard" style="background-color: rgb(255, 255, 255); height: 48px;"><div class="red-ui-palette-label" dir="">IssueDashbo<br>ard</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/cn-dashboard-nodes/dashboard.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/cn-dashboard-nodes/dashboard.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 19px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 19px;"></div></div></div><div id="red-ui-palette-CN_Dashboards-input"></div><div id="red-ui-palette-CN_Dashboards-output"></div><div id="red-ui-palette-CN_Dashboards-function"></div></div></div><div id="red-ui-palette-container-dashboard" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-dashboard" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>dashboard</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-dashboard"><div id="red-ui-palette-dashboard"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="average-bars" data-palette-label="average-bars" style="background-color: rgb(63, 173, 181); height: 48px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">average -<br>bars</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red-contrib-dashboard-average-bars/ui_template.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-dashboard-average-bars/ui_template.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 19px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 19px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_timeline" data-palette-label="Timeline" style="background-color: rgb(69, 123, 157); height: 28px;"><div class="red-ui-palette-label" dir="">Timeline</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-ui-timeline/ui_chart.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-ui-timeline/ui_chart.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_timelines_chart" data-palette-label="timelines-chart" style="background-color: rgb(63, 173, 181); height: 48px;"><div class="red-ui-palette-label" dir="">timelines -<br>chart</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-ui-timelines-chart/icon.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-ui-timelines-chart/icon.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 19px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 19px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_button" data-palette-label="button" style="background-color: rgb(176, 223, 227); height: 28px;"><div class="red-ui-palette-label" dir="">button</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_button.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_button.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_dropdown" data-palette-label="dropdown" style="background-color: rgb(176, 223, 227); height: 28px;"><div class="red-ui-palette-label" dir="">dropdown</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_dropdown.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_dropdown.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_switch" data-palette-label="switch" style="background-color: rgb(176, 223, 227); height: 28px;"><div class="red-ui-palette-label" dir="">switch</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_switch.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_switch.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_slider" data-palette-label="slider" style="background-color: rgb(176, 223, 227); height: 28px;"><div class="red-ui-palette-label" dir="">slider</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_slider.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_slider.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_numeric" data-palette-label="numeric" style="background-color: rgb(176, 223, 227); height: 28px;"><div class="red-ui-palette-label" dir="">numeric</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_numeric.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_numeric.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_text_input" data-palette-label="text input" style="background-color: rgb(176, 223, 227); height: 28px;"><div class="red-ui-palette-label" dir="">text   input</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_text.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_text.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_date_picker" data-palette-label="date picker" style="background-color: rgb(176, 223, 227); height: 28px;"><div class="red-ui-palette-label" dir="">date   picker</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_date_picker.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_date_picker.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_colour_picker" data-palette-label="colour picker" style="background-color: rgb(176, 223, 227); height: 28px;"><div class="red-ui-palette-label" dir="">colour   picker</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_colour_picker.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_colour_picker.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_form" data-palette-label="form" style="background-color: rgb(176, 223, 227); height: 28px;"><div class="red-ui-palette-label" dir="">form</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_form.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_form.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_text" data-palette-label="text" style="background-color: rgb(119, 198, 204); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">text</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red-dashboard/ui_text.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_text.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_gauge" data-palette-label="gauge" style="background-color: rgb(119, 198, 204); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">gauge</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red-dashboard/ui_gauge.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_gauge.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_chart" data-palette-label="chart" style="background-color: rgb(119, 198, 204); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">chart</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red-dashboard/ui_chart.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_chart.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_audio" data-palette-label="audio out" style="background-color: rgb(119, 198, 204); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">audio   out</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/feed.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/feed.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_toast" data-palette-label="notification" style="background-color: rgb(119, 198, 204); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">notification</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red-dashboard/ui_toast.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_toast.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_ui_control" data-palette-label="ui control" style="background-color: rgb(63, 173, 181); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">ui   control</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/arrow-in.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/arrow-in.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_template" data-palette-label="template" style="background-color: rgb(63, 173, 181); height: 28px;"><div class="red-ui-palette-label" dir="">template</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_template.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_template.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_iframe" data-palette-label="iframe" style="background-color: rgb(63, 173, 181); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">iframe</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red-node-ui-iframe/icon.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-node-ui-iframe/icon.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_worldmap" data-palette-label="worldmap" style="background-color: rgb(56, 152, 159); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">worldmap</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/white-globe.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-dashboard-input"></div><div id="red-ui-palette-dashboard-output"></div><div id="red-ui-palette-dashboard-function"></div></div></div><div id="red-ui-palette-container-uibuilder" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-uibuilder" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>uibuilder</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-uibuilder"><div id="red-ui-palette-uibuilder"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="uibuilder" data-palette-label="uibuilder" style="background-color: var(--uib-node-colour); height: 28px;"><div class="red-ui-palette-label" dir="">uibuilder</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-uibuilder/node-blue-inverted.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-uibuilder/node-blue-inverted.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="uib-cache" data-palette-label="uib-cache" style="background-color: var(--uib-node-colour); height: 28px;"><div class="red-ui-palette-label" dir="">uib - cache</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/parser-json.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-json.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="uib-tag" data-palette-label="uib-tag" style="background-color: var(--uib-node-colour); height: 28px;"><div class="red-ui-palette-label" dir="">uib - tag</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-tag"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-tag"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="uib-element" data-palette-label="uib-element" style="background-color: var(--uib-node-colour); height: 28px;"><div class="red-ui-palette-label" dir="">uib - element</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-uibuilder/pencilBoxMultipleWhite.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-uibuilder/pencilBoxMultipleWhite.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="uib-update" data-palette-label="uib-update" style="background-color: var(--uib-node-colour); height: 28px;"><div class="red-ui-palette-label" dir="">uib - update</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-uibuilder/pencilProgressWhiteSmaller.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-uibuilder/pencilProgressWhiteSmaller.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="uib-html" data-palette-label="uib-html" style="background-color: var(--uib-node-colour); height: 28px;"><div class="red-ui-palette-label" dir="">uib - html</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-code"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-code"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="uib-save" data-palette-label="uib-save" style="background-color: var(--uib-node-colour); height: 28px;"><div class="red-ui-palette-label" dir="">uib - save</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-floppy-o"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-floppy-o"></i></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="uib-sender" data-palette-label="uib-sender" style="background-color: var(--uib-node-colour); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">uib - sender</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/link-out.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/link-out.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="uib-list" data-palette-label="uib-list" style="background-color: rgb(246, 224, 248); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">uib - list</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="font-awesome/fa-list"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-list"></i></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-uibuilder-input"></div><div id="red-ui-palette-uibuilder-output"></div><div id="red-ui-palette-uibuilder-function"></div></div></div><div id="red-ui-palette-container-🛠️_tools" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-🛠️_tools" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>🛠️ tools</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-🛠️_tools"><div id="red-ui-palette-🛠️_tools"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="node-mustache" data-palette-label="Mustache" style="background-color: rgb(63, 173, 181); height: 28px;"><div class="red-ui-palette-label" dir="">Mustache</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/template.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/template.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-🛠️_tools-input"></div><div id="red-ui-palette-🛠️_tools-output"></div><div id="red-ui-palette-🛠️_tools-function"></div></div></div><div id="red-ui-palette-container-location" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-location" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>location</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-location"><div id="red-ui-palette-location"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="worldmap" data-palette-label="worldmap" style="background-color: darksalmon; height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">worldmap</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/white-globe.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="worldmap in" data-palette-label="worldmap in" style="background-color: darksalmon; height: 28px;"><div class="red-ui-palette-label" dir="">worldmap   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/white-globe.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="worldmap-tracks" data-palette-label="tracks" style="background-color: darksalmon; height: 28px;"><div class="red-ui-palette-label" dir="">tracks</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/white-globe.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="worldmap-hull" data-palette-label="convex-hull" style="background-color: darksalmon; height: 28px;"><div class="red-ui-palette-label" dir="">convex - hull</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/white-globe.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-location-input"></div><div id="red-ui-palette-location-output"></div><div id="red-ui-palette-location-function"></div></div></div><div id="red-ui-palette-container-Raspberry_Pi" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-Raspberry_Pi" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>Raspberry Pi</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-Raspberry_Pi"><div id="red-ui-palette-Raspberry_Pi"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="rpi-gpio in" data-palette-label="rpi-gpio in" style="background-color: rgb(198, 219, 239); height: 28px;"><div class="red-ui-palette-label" dir="">rpi - gpio   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/rpi.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/rpi.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="rpi-gpio out" data-palette-label="rpi-gpio out" style="background-color: rgb(198, 219, 239); height: 28px;"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">rpi - gpio   out</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/rpi.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/rpi.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="rpi-mouse" data-palette-label="rpi-mouse" style="background-color: rgb(198, 219, 239); height: 28px;"><div class="red-ui-palette-label" dir="">rpi - mouse</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/rpi.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/rpi.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="rpi-keyboard" data-palette-label="rpi-keyboard" style="background-color: rgb(198, 219, 239); height: 28px;"><div class="red-ui-palette-label" dir="">rpi - keyboard</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/rpi.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/rpi.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div></div><div id="red-ui-palette-Raspberry_Pi-input"></div><div id="red-ui-palette-Raspberry_Pi-output"></div><div id="red-ui-palette-Raspberry_Pi-function"></div></div></div></div><div class="red-ui-component-footer"><span class="button-group"><button type="button" class="red-ui-footer-button"><i class="fa fa-angle-double-up"></i></button><button type="button" class="red-ui-footer-button"><i class="fa fa-angle-double-down"></i></button></span></div><div id="red-ui-palette-shade" class="hide" style="display: none;"></div><div class="red-ui-sidebar-control-left" style="display: none;"><i class="fa fa-chevron-left"></i></div></div><div id="red-ui-sidebar"><div class="red-ui-tabs red-ui-tabs-collapsible"><div><ul id="red-ui-sidebar-tabs"><li class="red-ui-tab red-ui-tab-pinned active" id="red-ui-tab-info" style="width: 132.986px;"><a href="http://localhost:1880/#info" class="red-ui-tab-label"><i class="red-ui-tab-icon fa fa-info"></i><span class="red-ui-text-bidi-aware" dir="">info</span></a><span class="red-ui-tabs-fade"></span><span class="red-ui-tabs-badges"></span></li><li class="red-ui-tab red-ui-tab-pinned" id="red-ui-tab-help" style="width: 132.986px;"><a href="http://localhost:1880/#help" class="red-ui-tab-label"><i class="red-ui-tab-icon fa fa-book"></i><span class="red-ui-text-bidi-aware" dir="">help</span></a><span class="red-ui-tabs-fade"></span><span class="red-ui-tabs-badges"></span></li><li class="red-ui-tab red-ui-tab-pinned" id="red-ui-tab-debug" style="width: 132.986px;"><a href="http://localhost:1880/#debug" class="red-ui-tab-label"><i class="red-ui-tab-icon fa fa-bug"></i><span class="red-ui-text-bidi-aware" dir="">debug</span></a><span class="red-ui-tabs-fade"></span><span class="red-ui-tabs-badges"></span></li><li class="red-ui-tab red-ui-tab-pinned" id="red-ui-tab-config" style="width: 132.986px;"><a href="http://localhost:1880/#config" class="red-ui-tab-label"><i class="red-ui-tab-icon fa fa-cog"></i><span class="red-ui-text-bidi-aware" dir="">config</span></a><span class="red-ui-tabs-fade"></span><span class="red-ui-tabs-badges"></span></li><li class="red-ui-tab red-ui-tab-pinned" id="red-ui-tab-context" style="width: 132.986px;"><a href="http://localhost:1880/#context" class="red-ui-tab-label"><i class="red-ui-tab-icon fa fa-database"></i><span class="red-ui-text-bidi-aware" dir="">context</span></a><span class="red-ui-tabs-fade"></span><span class="red-ui-tabs-badges"></span></li><li class="red-ui-tab red-ui-tab-pinned" id="red-ui-tab-dashboard-2-0" style="width: 132.986px;"><a href="http://localhost:1880/#dashboard-2.0" class="red-ui-tab-label"><i class="red-ui-tab-icon fa fa-bar-chart"></i><span class="red-ui-text-bidi-aware" dir="">Dashboard 2.0</span></a><span class="red-ui-tabs-fade"></span><span class="red-ui-tabs-badges"></span></li><li class="red-ui-tab red-ui-tab-pinned" id="red-ui-tab-dashboard" style="width: 132.986px;"><a href="http://localhost:1880/#dashboard" class="red-ui-tab-label"><i class="red-ui-tab-icon fa fa-bar-chart"></i><span class="red-ui-text-bidi-aware" dir="">dashboard</span></a><span class="red-ui-tabs-fade"></span><span class="red-ui-tabs-badges"></span></li></ul></div><div class="red-ui-tab-link-buttons"><a href="http://localhost:1880/#info" class="red-ui-tab-link-button red-ui-tab-link-button-pinned ui-draggable ui-draggable-handle active selected" id="red-ui-tab-info-link-button" style="position: relative;"><i class="fa fa-info"></i></a><a href="http://localhost:1880/#help" class="red-ui-tab-link-button red-ui-tab-link-button-pinned ui-draggable ui-draggable-handle" id="red-ui-tab-help-link-button" style="position: relative;"><i class="fa fa-book"></i></a><a href="http://localhost:1880/#debug" class="red-ui-tab-link-button red-ui-tab-link-button-pinned ui-draggable ui-draggable-handle" id="red-ui-tab-debug-link-button" style="position: relative;"><i class="fa fa-bug"></i></a><a href="http://localhost:1880/#config" class="red-ui-tab-link-button ui-draggable ui-draggable-handle" id="red-ui-tab-config-link-button" style="position: relative;"><i class="fa fa-cog"></i></a><a href="http://localhost:1880/#context" class="red-ui-tab-link-button ui-draggable ui-draggable-handle" id="red-ui-tab-context-link-button" style="position: relative; display: none;"><i class="fa fa-database"></i></a><a href="http://localhost:1880/#dashboard-2.0" class="red-ui-tab-link-button red-ui-tab-link-button-pinned ui-draggable ui-draggable-handle" id="red-ui-tab-dashboard-2-0-link-button" style="position: relative; display: none;"><i class="fa fa-bar-chart"></i></a><a href="http://localhost:1880/#dashboard" class="red-ui-tab-link-button red-ui-tab-link-button-pinned ui-draggable ui-draggable-handle" id="red-ui-tab-dashboard-link-button" style="position: relative; display: none;"><i class="fa fa-bar-chart"></i></a><a href="http://localhost:1880/#" class="red-ui-tab-link-button-menu"><i class="fa fa-caret-down"></i></a></div></div><div id="red-ui-sidebar-content"><div style="height: 100%;"><div class="red-ui-sidebar-info show-tips"><div class="red-ui-sidebar-info-stack red-ui-panels" style="height: 736.667px;"><div class="red-ui-panel" style="overflow: hidden; height: 437.2px;"><div class="red-ui-info-outline" style="height: 100%;"><div class="red-ui-sidebar-header red-ui-info-toolbar"><div class="red-ui-searchBox-container red-ui-searchBox-compact red-ui-searchBox-has-options"><i class="fa fa-search"></i><form class="red-ui-searchBox-form"><input type="text" data-i18n="[placeholder]menu.label.search" class="red-ui-searchBox-input" placeholder="Search flows"></form><a class="red-ui-searchBox-clear" href="http://localhost:1880/#"><i class="fa fa-times"></i></a><a class="red-ui-searchBox-opts" href="http://localhost:1880/#"><i class="fa fa-caret-down"></i></a><span class="red-ui-searchBox-resultCount hide"></span></div></div><div class="red-ui-treeList-label red-ui-info-outline-project" style="display: none;"><span class="red-ui-treeList-icon"><i class="fa fa-archive"></i></span><span></span></div><div class="red-ui-treeList" tabindex="0" style="width: 100%;"><div class="red-ui-treeList-container"><div class="red-ui-editableList" style="inset: 0px; position: absolute;"><div class="red-ui-editableList-border red-ui-editableList-container" style="inset: 0px; position: absolute; overflow-y: auto;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="position: static; inset: auto; min-height: 0px; height: auto;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 0px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">Flows</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container"><ol class="red-ui-treeList-list red-ui-editableList-list" style="min-height: 0px; height: auto; display: none;"><li><div class="red-ui-editableList-item-content red-ui-info-outline-item-disabled"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="red-ui-icons red-ui-icons-flow"></i></span><div class="red-ui-info-outline-item red-ui-info-outline-item-flow red-ui-info-outline-item-disabled" style="width: calc(100% - 60px);"><div class="red-ui-search-result-description red-ui-info-outline-item-label">Flow 1</div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-hide red-ui-button red-ui-button-small"><i class="fa fa-eye"></i><i class="fa fa-eye-slash"></i></button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><button type="button" class="red-ui-info-outline-item-control-lock red-ui-button red-ui-button-small"><i class="fa fa-unlock-alt"></i><i class="fa fa-lock"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content built expanded"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="red-ui-icons red-ui-icons-flow"></i></span><div class="red-ui-info-outline-item red-ui-info-outline-item-flow" style="width: calc(100% - 60px);"><div class="red-ui-search-result-description red-ui-info-outline-item-label">maindashboard</div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-hide red-ui-button red-ui-button-small"><i class="fa fa-eye"></i><i class="fa fa-eye-slash"></i></button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><button type="button" class="red-ui-info-outline-item-control-lock red-ui-button red-ui-button-small"><i class="fa fa-unlock-alt"></i><i class="fa fa-lock"></i></button></div></div></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(216, 191, 216); border-color: rgb(166, 141, 166);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">test_data</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-json.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">test_data</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(135, 169, 128); border-color: rgb(85, 119, 78);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/debug.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">debugcb</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-action red-ui-button red-ui-button-small"><i class="fa fa-toggle-right"></i></button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(119, 198, 204);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_chart.png&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">temperaturechart</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(253, 208, 162); border-color: rgb(203, 158, 112);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/function.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">function 8</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(135, 169, 128); border-color: rgb(85, 119, 78);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/debug.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">debug 8</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-action red-ui-button red-ui-button-small"><i class="fa fa-toggle-right"></i></button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(253, 208, 162); border-color: rgb(203, 158, 112);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/function.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">function 9</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(119, 198, 204);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_chart.png&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">Humidity</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: burlywood;"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file-out.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">/home/cuthbert/Desktop/node-red testing folder/file2.csv</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-json.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">json</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-csv.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">test_data</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(253, 208, 162); border-color: rgb(203, 158, 112);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/function.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">function 10</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(119, 198, 204);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_gauge.png&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">Ave1</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(253, 208, 162); border-color: rgb(203, 158, 112);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/function.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">function 11</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(253, 208, 162); border-color: rgb(203, 158, 112);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/function.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">function 12</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(119, 198, 204);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_gauge.png&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">Last Weeks Average</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(119, 198, 204);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_gauge.png&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">Average of Last Month</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(56, 152, 159); border-color: rgb(6, 102, 109);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">Hathersage sensor</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(166, 187, 207); border-color: rgb(116, 137, 157);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/inject.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">Co ordinates for Hathersage ¹</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-action red-ui-button red-ui-button-small"><i class="fa fa-toggle-right"></i></button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(135, 169, 128); border-color: rgb(85, 119, 78);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/debug.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">debug 14</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-action red-ui-button red-ui-button-small"><i class="fa fa-toggle-right"></i></button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(135, 169, 128); border-color: rgb(85, 119, 78);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/debug.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">debug 15</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-action red-ui-button red-ui-button-small"><i class="fa fa-toggle-right"></i></button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item red-ui-info-outline-item-disabled" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-json.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">json</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(135, 169, 128); border-color: rgb(85, 119, 78);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/debug.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">debug 26</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-action red-ui-button red-ui-button-small"><i class="fa fa-toggle-right"></i></button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(253, 208, 162); border-color: rgb(203, 158, 112);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/function.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">function 20</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(119, 198, 204);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_chart.png&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">Pressure</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item red-ui-info-outline-item-disabled" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(233, 123, 0); border-color: rgb(183, 73, 0);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-node-sqlite/sqlite.png&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">sensor_data.db</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item red-ui-info-outline-item-disabled" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(135, 169, 128); border-color: rgb(85, 119, 78);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/debug.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">debug 35</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-action red-ui-button red-ui-button-small"><i class="fa fa-toggle-right"></i></button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item red-ui-info-outline-item-disabled" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-json.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">json</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_form.png&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">Event Log</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-csv.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">csv</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: burlywood;"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file-out.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">/home/cuthbert/Desktop/node-red testing folder/eventlog.csv</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_button.png&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">press button to read the event log from this sensor</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(119, 198, 204);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_toast.png&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">show dialog</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: burlywood;"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file-in.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">eventlog-read</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-csv.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">csv</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content red-ui-info-outline-item-disabled"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="red-ui-icons red-ui-icons-flow"></i></span><div class="red-ui-info-outline-item red-ui-info-outline-item-flow red-ui-info-outline-item-disabled" style="width: calc(100% - 60px);"><div class="red-ui-search-result-description red-ui-info-outline-item-label">Flow 3</div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-hide red-ui-button red-ui-button-small"><i class="fa fa-eye"></i><i class="fa fa-eye-slash"></i></button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><button type="button" class="red-ui-info-outline-item-control-lock red-ui-button red-ui-button-small"><i class="fa fa-unlock-alt"></i><i class="fa fa-lock"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content red-ui-info-outline-item-disabled"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="red-ui-icons red-ui-icons-flow"></i></span><div class="red-ui-info-outline-item red-ui-info-outline-item-flow red-ui-info-outline-item-disabled" style="width: calc(100% - 60px);"><div class="red-ui-search-result-description red-ui-info-outline-item-label">template-flow-video2</div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-hide red-ui-button red-ui-button-small"><i class="fa fa-eye"></i><i class="fa fa-eye-slash"></i></button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><button type="button" class="red-ui-info-outline-item-control-lock red-ui-button red-ui-button-small"><i class="fa fa-unlock-alt"></i><i class="fa fa-lock"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content red-ui-info-outline-item-disabled"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="red-ui-icons red-ui-icons-flow"></i></span><div class="red-ui-info-outline-item red-ui-info-outline-item-flow red-ui-info-outline-item-disabled" style="width: calc(100% - 60px);"><div class="red-ui-search-result-description red-ui-info-outline-item-label">Flow 4</div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-hide red-ui-button red-ui-button-small"><i class="fa fa-eye"></i><i class="fa fa-eye-slash"></i></button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><button type="button" class="red-ui-info-outline-item-control-lock red-ui-button red-ui-button-small"><i class="fa fa-unlock-alt"></i><i class="fa fa-lock"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content red-ui-info-outline-item-disabled"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="red-ui-icons red-ui-icons-flow"></i></span><div class="red-ui-info-outline-item red-ui-info-outline-item-flow red-ui-info-outline-item-disabled" style="width: calc(100% - 60px);"><div class="red-ui-search-result-description red-ui-info-outline-item-label">python virtual environment</div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-hide red-ui-button red-ui-button-small"><i class="fa fa-eye"></i><i class="fa fa-eye-slash"></i></button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><button type="button" class="red-ui-info-outline-item-control-lock red-ui-button red-ui-button-small"><i class="fa fa-unlock-alt"></i><i class="fa fa-lock"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="red-ui-icons red-ui-icons-flow"></i></span><div class="red-ui-info-outline-item red-ui-info-outline-item-flow" style="width: calc(100% - 60px);"><div class="red-ui-search-result-description red-ui-info-outline-item-label">Flow 2</div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-hide red-ui-button red-ui-button-small"><i class="fa fa-eye"></i><i class="fa fa-eye-slash"></i></button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><button type="button" class="red-ui-info-outline-item-control-lock red-ui-button red-ui-button-small"><i class="fa fa-unlock-alt"></i><i class="fa fa-lock"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="red-ui-icons red-ui-icons-flow"></i></span><div class="red-ui-info-outline-item red-ui-info-outline-item-flow" style="width: calc(100% - 60px);"><div class="red-ui-search-result-description red-ui-info-outline-item-label">Flow 5</div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-hide red-ui-button red-ui-button-small"><i class="fa fa-eye"></i><i class="fa fa-eye-slash"></i></button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><button type="button" class="red-ui-info-outline-item-control-lock red-ui-button red-ui-button-small"><i class="fa fa-unlock-alt"></i><i class="fa fa-lock"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content red-ui-info-outline-item-disabled"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="red-ui-icons red-ui-icons-flow"></i></span><div class="red-ui-info-outline-item red-ui-info-outline-item-flow red-ui-info-outline-item-disabled" style="width: calc(100% - 60px);"><div class="red-ui-search-result-description red-ui-info-outline-item-label">Template Tests</div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-hide red-ui-button red-ui-button-small"><i class="fa fa-eye"></i><i class="fa fa-eye-slash"></i></button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><button type="button" class="red-ui-info-outline-item-control-lock red-ui-button red-ui-button-small"><i class="fa fa-unlock-alt"></i><i class="fa fa-lock"></i></button></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 0px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">Subflows</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container"><ol class="red-ui-treeList-list red-ui-editableList-list" style="min-height: 0px; height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item red-ui-info-outline-item-empty" style="width: calc(100% - 40px);">empty</div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content expanded"><div class="red-ui-treeList-label focus"><span style="display: inline-block; flex-shrink: 0; width: 0px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">Global Configuration Nodes</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container"><ol class="red-ui-treeList-list red-ui-editableList-list" style="min-height: 0px; height: auto;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">ui_tab</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">River</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">3</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">2nd input</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">0</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">Home</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">1</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">ui_base</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">Node-RED Dashboard</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">0</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">ui_group</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item red-ui-info-outline-item-disabled" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">[River] River</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">127</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">[River] River1</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">23</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">[River] River2</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">18</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item red-ui-info-outline-item-disabled" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">[unassigned] Default</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">3</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">mqtt-broker</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">outside</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">1</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">local</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">3</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">sqlitedb</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">/home/cuthbert/Desktop/node-red testing folder/sensor_data.db</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">2</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item red-ui-info-outline-item-disabled" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">c:\users\steve\.node-red\test.db</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">1</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">global-config</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">global-config</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">0</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">ui-base</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">UInew [/dashboard]</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">3</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">ui-theme</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">Theme1</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">1</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">Theme 2</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">0</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">ui-page</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item red-ui-info-outline-item-disabled" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">Front Page [/dashboard/page1]</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">1</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">ui-group</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item red-ui-info-outline-item-disabled" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">NewGroup [Front Page]</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">8</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">ui-link</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter red-ui-treeList-gutter-float" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item red-ui-info-outline-item red-ui-info-outline-item-disabled" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label red-ui-info-outline-item-label">Link [/]</div></span><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">0</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li></ol></div></div></div></li></ol></div></div></div></li></ol></div></div></div></div></div></div><div class="red-ui-panels-separator ui-draggable ui-draggable-handle" style="position: relative;"></div><div class="red-ui-panel" style="overflow: hidden; height: 100%; display: flex; flex-direction: column;"><div class="red-ui-palette-header red-ui-info-header" style="flex: 0 0 auto;"><span></span><span></span><button type="button" class="red-ui-button red-ui-button-small" style="position: absolute; top: 12px; right: 32px; display: none;"><i class="fa fa-link"></i></button><button type="button" class="red-ui-button red-ui-button-small" style="position: absolute; top: 12px; right: 56px; display: none;"><i class="fa fa-book"></i></button><button type="button" class="red-ui-button red-ui-button-small" style="position: absolute; top: 12px; right: 8px; display: none;"><i class="fa fa-search"></i></button></div><div style="flex: 1 1 auto; overflow-y: auto;"><table class="red-ui-info-table"><tbody></tbody></table></div></div></div><div class="red-ui-help-tips"><div class="red-ui-help-tip" style=""><span class="help-key-block"><span class="help-key">ctrl-space</span></span> will toggle the view of this sidebar</div><div class="red-ui-help-tips-buttons"><a href="http://localhost:1880/#" class="red-ui-footer-button"><i class="fa fa-refresh"></i></a><a href="http://localhost:1880/#" class="red-ui-footer-button"><i class="fa fa-times"></i></a></div></div></div></div><div style="height: 100%; display: none;"><div class="red-ui-sidebar-info show-tips"><div class="red-ui-sidebar-header red-ui-info-toolbar"><span class="button-group"><a id="red-ui-sidebar-help-show-toc" class="red-ui-button red-ui-button-small" href="http://localhost:1880/#"><i class="fa fa-list-ul"></i></a></span><div class="red-ui-searchBox-container red-ui-searchBox-compact"><i class="fa fa-search"></i><form class="red-ui-searchBox-form"><input type="text" data-i18n="[placeholder]sidebar.help.search" class="red-ui-searchBox-input" placeholder="Search help"></form><a class="red-ui-searchBox-clear" href="http://localhost:1880/#"><i class="fa fa-times"></i></a><span class="red-ui-searchBox-resultCount hide"></span></div></div><div class="red-ui-sidebar-help-stack red-ui-panels" style="height: 847.667px;"><div class="red-ui-sidebar-help-toc red-ui-panel" style="height: 0px;"><div class="red-ui-treeList" tabindex="0" style="width: 100%;"><div class="red-ui-treeList-container"><div class="red-ui-editableList" style="inset: 0px; position: absolute;"><div class="red-ui-editableList-border red-ui-editableList-container" style="inset: 0px; position: absolute; overflow-y: auto;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="position: static; inset: auto; min-height: 0px; height: auto;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 0px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">Node-RED</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"></span><span class="red-ui-treeList-label-text">Change Log</span></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">Welcome Tours</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><span class="red-ui-treeList-icon"><i class="fa fa-play-circle-o"></i></span><span class="red-ui-treeList-label-text">3.1</span></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><span class="red-ui-treeList-icon"><i class="fa fa-play-circle-o"></i></span><span class="red-ui-treeList-label-text">3.0</span></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><span class="red-ui-treeList-icon"><i class="fa fa-play-circle-o"></i></span><span class="red-ui-treeList-label-text">2.2</span></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><span class="red-ui-treeList-icon"><i class="fa fa-play-circle-o"></i></span><span class="red-ui-treeList-label-text">2.1</span></div></div></li></ol></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 0px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">Node Help</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">@flowfuse/node-red-dashboard</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label">ui-base</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--nrdb-node-light);"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-hand-pointer-o"></i></div><div class="red-ui-node-label">button</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--nrdb-node-light);"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-toggle-off"></i></div><div class="red-ui-node-label">button group</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--nrdb-node-medium);"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-line-chart"></i></div><div class="red-ui-node-label">chart</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--nrdb-node-darkest);"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-arrow-circle-right"></i></div><div class="red-ui-node-label">ui control</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--nrdb-node-light);"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-bars"></i></div><div class="red-ui-node-label">dropdown</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--nrdb-node-darkest);"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-arrow-circle-right"></i></div><div class="red-ui-node-label">event</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--nrdb-node-light);"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-list-alt"></i></div><div class="red-ui-node-label">form</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--nrdb-node-medium);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/@flowfuse/node-red-dashboard/ui-gauge.svg&quot;);"></div></div><div class="red-ui-node-label">gauge</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label">ui-group</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label">ui-page</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--nrdb-node-light);"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-sliders"></i></div><div class="red-ui-node-label">slider</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--nrdb-node-light);"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-toggle-on"></i></div><div class="red-ui-node-label">switch</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--nrdb-node-dark);"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-code"></i></div><div class="red-ui-node-label">template</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--nrdb-node-medium);"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-font"></i></div><div class="red-ui-node-label">text</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--nrdb-node-light);"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-i-cursor"></i></div><div class="red-ui-node-label">text input</div></span></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">@flowfuse/node-red-dashboard-2-ui-iframe</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--nrdb-node-dark);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/@flowfuse/node-red-dashboard-2-ui-iframe/iframe-icon.svg&quot;);"></div></div><div class="red-ui-node-label">iframe</div></span></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">@sumit_shinde_84/node-red-dashboard-2-ui-webcam</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--nrdb-node-medium);"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-camera"></i></div><div class="red-ui-node-label">webcam</div></span></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">cn-dashboard-nodes</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(255, 255, 255); border-color: rgb(205, 205, 205);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/cn-dashboard-nodes/dashboard.png&quot;);"></div></div><div class="red-ui-node-label">IssueDashboard</div></span></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(226, 217, 110); border-color: rgb(176, 167, 60);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/batch.svg&quot;);"></div></div><div class="red-ui-node-label">batch</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(228, 145, 145); border-color: rgb(178, 95, 95);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/alert.svg&quot;);"></div></div><div class="red-ui-node-label">catch</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(226, 217, 110); border-color: rgb(176, 167, 60);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/swap.svg&quot;);"></div></div><div class="red-ui-node-label">change</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(255, 255, 255); border-color: rgb(205, 205, 205);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/comment.svg&quot;);"></div></div><div class="red-ui-node-label">comment</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(192, 237, 192); border-color: rgb(142, 187, 142);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/alert.svg&quot;);"></div></div><div class="red-ui-node-label">complete</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-csv.svg&quot;);"></div></div><div class="red-ui-node-label">csv</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(135, 169, 128); border-color: rgb(85, 119, 78);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/debug.svg&quot;);"></div></div><div class="red-ui-node-label">debug</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(230, 224, 248); border-color: rgb(180, 174, 198);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/timer.svg&quot;);"></div></div><div class="red-ui-node-label">delay</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: darksalmon;"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label">exec</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: burlywood;"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file-out.svg&quot;);"></div></div><div class="red-ui-node-label">write file</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: burlywood;"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file-in.svg&quot;);"></div></div><div class="red-ui-node-label">read file</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(253, 208, 162); border-color: rgb(203, 158, 112);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/function.svg&quot;);"></div></div><div class="red-ui-node-label">function</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label">global-config</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-html.svg&quot;);"></div></div><div class="red-ui-node-label">html</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(231, 231, 174);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-node-label">http in</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label">http proxy</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(231, 231, 174);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-node-label">http request</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(231, 231, 174);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-node-label">http response</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(166, 187, 207); border-color: rgb(116, 137, 157);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/inject.svg&quot;);"></div></div><div class="red-ui-node-label">inject</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(226, 217, 110); border-color: rgb(176, 167, 60);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/join.svg&quot;);"></div></div><div class="red-ui-node-label">join</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-json.svg&quot;);"></div></div><div class="red-ui-node-label">json</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/link-call.svg&quot;);"></div></div><div class="red-ui-node-label">link call</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/link-out.svg&quot;);"></div></div><div class="red-ui-node-label">link in</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/link-out.svg&quot;);"></div></div><div class="red-ui-node-label">link out</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(216, 191, 216); border-color: rgb(166, 141, 166);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge.svg&quot;);"></div></div><div class="red-ui-node-label">mqtt in</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(216, 191, 216); border-color: rgb(166, 141, 166);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge.svg&quot;);"></div></div><div class="red-ui-node-label">mqtt out</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label">mqtt-broker</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(226, 217, 110); border-color: rgb(176, 167, 60);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/range.svg&quot;);"></div></div><div class="red-ui-node-label">range</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(226, 217, 110); border-color: rgb(176, 167, 60);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/rbe.svg&quot;);"></div></div><div class="red-ui-node-label">filter</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(226, 217, 110); border-color: rgb(176, 167, 60);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/sort.svg&quot;);"></div></div><div class="red-ui-node-label">sort</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(226, 217, 110); border-color: rgb(176, 167, 60);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/split.svg&quot;);"></div></div><div class="red-ui-node-label">split</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(148, 193, 208); border-color: rgb(98, 143, 158);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/status.svg&quot;);"></div></div><div class="red-ui-node-label">status</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(226, 217, 110); border-color: rgb(176, 167, 60);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/switch.svg&quot;);"></div></div><div class="red-ui-node-label">switch</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(192, 192, 192);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div><div class="red-ui-node-label">tcp in</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(192, 192, 192);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div><div class="red-ui-node-label">tcp out</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(192, 192, 192);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div><div class="red-ui-node-label">tcp request</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(243, 181, 103);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/template.svg&quot;);"></div></div><div class="red-ui-node-label">template</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label">tls-config</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(230, 224, 248); border-color: rgb(180, 174, 198);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/trigger.svg&quot;);"></div></div><div class="red-ui-node-label">trigger</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(192, 192, 192);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div><div class="red-ui-node-label">udp in</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(192, 192, 192);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div><div class="red-ui-node-label">udp out</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(255, 240, 240); border-color: rgb(205, 190, 190);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/alert.svg&quot;);"></div></div><div class="red-ui-node-label">unknown</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: burlywood;"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/watch.svg&quot;);"></div></div><div class="red-ui-node-label">watch</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(215, 215, 160);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-node-label">websocket in</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(215, 215, 160);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-node-label">websocket out</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label">websocket-client</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label">websocket-listener</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-xml.svg&quot;);"></div></div><div class="red-ui-node-label">xml</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-yaml.svg&quot;);"></div></div><div class="red-ui-node-label">yaml</div></span></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-buffer-parser</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(0, 144, 212); border-color: rgb(0, 94, 162);"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-compress"></i></div><div class="red-ui-node-label">buffer-maker</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(0, 144, 212); border-color: rgb(0, 94, 162);"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-expand"></i></div><div class="red-ui-node-label">buffer-parser</div></span></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-dashboard-average-bars</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(63, 173, 181); border-color: rgb(13, 123, 131);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-dashboard-average-bars/ui_template.png&quot;);"></div></div><div class="red-ui-node-label">average-bars</div></span></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-play-audio</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(218, 175, 247); border-color: rgb(168, 125, 197);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/feed.svg&quot;);"></div></div><div class="red-ui-node-label">play audio</div></span></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-ui-timeline</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(69, 123, 157);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-ui-timeline/ui_chart.png&quot;);"></div></div><div class="red-ui-node-label">Timeline</div></span></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-ui-timelines-chart</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(63, 173, 181);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-ui-timelines-chart/icon.png&quot;);"></div></div><div class="red-ui-node-label">timelines-chart</div></span></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-uibuilder</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--uib-node-colour);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-json.svg&quot;);"></div></div><div class="red-ui-node-label">uib-cache</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--uib-node-colour);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-uibuilder/pencilBoxMultipleWhite.svg&quot;);"></div></div><div class="red-ui-node-label">uib-element</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--uib-node-colour);"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-code"></i></div><div class="red-ui-node-label">uib-html</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(246, 224, 248); border-color: rgb(196, 174, 198);"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-list"></i></div><div class="red-ui-node-label">uib-list</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--uib-node-colour);"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-floppy-o"></i></div><div class="red-ui-node-label">uib-save</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--uib-node-colour);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/link-out.svg&quot;);"></div></div><div class="red-ui-node-label">uib-sender</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--uib-node-colour);"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-tag"></i></div><div class="red-ui-node-label">uib-tag</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--uib-node-colour);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-uibuilder/pencilProgressWhiteSmaller.svg&quot;);"></div></div><div class="red-ui-node-label">uib-update</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: var(--uib-node-colour);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-uibuilder/node-blue-inverted.svg&quot;);"></div></div><div class="red-ui-node-label">uibuilder</div></span></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-viseo-mustache</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(63, 173, 181); border-color: rgb(13, 123, 131);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/template.svg&quot;);"></div></div><div class="red-ui-node-label">Mustache</div></span></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-web-worldmap</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(56, 152, 159); border-color: rgb(6, 102, 109);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-node-label">worldmap</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: darksalmon;"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-node-label">worldmap</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: darksalmon;"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-node-label">worldmap in</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: darksalmon;"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-node-label">convex-hull</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: darksalmon;"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-node-label">tracks</div></span></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-dashboard</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(119, 198, 204);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/feed.svg&quot;);"></div></div><div class="red-ui-node-label">audio out</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label">Dashboard</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_button.png&quot;);"></div></div><div class="red-ui-node-label">button</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(119, 198, 204);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_chart.png&quot;);"></div></div><div class="red-ui-node-label">chart</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_colour_picker.png&quot;);"></div></div><div class="red-ui-node-label">colour picker</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_date_picker.png&quot;);"></div></div><div class="red-ui-node-label">date picker</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_dropdown.png&quot;);"></div></div><div class="red-ui-node-label">dropdown</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_form.png&quot;);"></div></div><div class="red-ui-node-label">form</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(119, 198, 204);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_gauge.png&quot;);"></div></div><div class="red-ui-node-label">gauge</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label">dashboard group</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(63, 173, 181);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label">link</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_numeric.png&quot;);"></div></div><div class="red-ui-node-label">numeric</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_slider.png&quot;);"></div></div><div class="red-ui-node-label">slider</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(212, 240, 248); border-color: rgb(162, 190, 198);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label">spacer</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_switch.png&quot;);"></div></div><div class="red-ui-node-label">switch</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label">dashboard tab</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(63, 173, 181);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_template.png&quot;);"></div></div><div class="red-ui-node-label">template</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(119, 198, 204);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_text.png&quot;);"></div></div><div class="red-ui-node-label">text</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_text.png&quot;);"></div></div><div class="red-ui-node-label">text input</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(119, 198, 204);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_toast.png&quot;);"></div></div><div class="red-ui-node-label">notification</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(63, 173, 181);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/arrow-in.svg&quot;);"></div></div><div class="red-ui-node-label">ui control</div></span></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-node-pi-gpio</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(198, 219, 239); border-color: rgb(148, 169, 189);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/rpi.svg&quot;);"></div></div><div class="red-ui-node-label">rpi-gpio in</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(198, 219, 239); border-color: rgb(148, 169, 189);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/rpi.svg&quot;);"></div></div><div class="red-ui-node-label">rpi-gpio out</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(198, 219, 239); border-color: rgb(148, 169, 189);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/rpi.svg&quot;);"></div></div><div class="red-ui-node-label">rpi-keyboard</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(198, 219, 239); border-color: rgb(148, 169, 189);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/rpi.svg&quot;);"></div></div><div class="red-ui-node-label">rpi-mouse</div></span></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-node-ping</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(253, 240, 194); border-color: rgb(203, 190, 144);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/alert.svg&quot;);"></div></div><div class="red-ui-node-label">ping</div></span></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-node-serialport</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: burlywood;"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/serial.svg&quot;);"></div></div><div class="red-ui-node-label">serial control</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: burlywood;"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/serial.svg&quot;);"></div></div><div class="red-ui-node-label">serial in</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: burlywood;"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/serial.svg&quot;);"></div></div><div class="red-ui-node-label">serial out</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: burlywood;"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/serial.svg&quot;);"></div></div><div class="red-ui-node-label">serial request</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label">serial-port</div></span></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-node-smooth</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(226, 217, 110); border-color: rgb(176, 167, 60);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-node-smooth/smooth.png&quot;);"></div></div><div class="red-ui-node-label">smooth</div></span></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-node-sqlite</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(233, 123, 0); border-color: rgb(183, 73, 0);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-node-sqlite/sqlite.png&quot;);"></div></div><div class="red-ui-node-label">sqlite</div></span></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-node-label">sqlitedb</div></span></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-node-ui-iframe</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; flex-shrink: 0; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-node-list-item" style="width: calc(100% - 60px);"><span class="red-ui-node-icon-container"><div class="red-ui-node-icon" style="background-color: rgb(63, 173, 181);"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-node-ui-iframe/icon.png&quot;);"></div></div><div class="red-ui-node-label">iframe</div></span></div></div></div></li></ol></div></div></div></li></ol></div></div></div></li></ol></div></div></div></div></div><div class="red-ui-panels-separator ui-draggable ui-draggable-handle" style="position: relative; display: none;"></div><div class="red-ui-panel" style="overflow-y: auto;"><div class="red-ui-help" style="padding: 6px;"><span class="red-ui-help-info-none">No help topic selected</span></div></div></div></div></div><div style="height: 100%; display: none;"><div class="red-ui-sidebar-node-config" id="red-ui-sidebar-node-config" tabindex="0"><div class="red-ui-sidebar-header"><span class="button-group"><a class="red-ui-sidebar-header-button-toggle selected" id="red-ui-sidebar-config-filter-all" href="http://localhost:1880/#"><span data-i18n="sidebar.config.filterAll">all</span></a><a class="red-ui-sidebar-header-button-toggle" id="red-ui-sidebar-config-filter-unused" href="http://localhost:1880/#"><span data-i18n="sidebar.config.filterUnused">unused</span></a> </span></div><div><div class="red-ui-palette-category red-ui-sidebar-config-category" id="red-ui-sidebar-config-category-global"><div class="red-ui-sidebar-config-tray-header red-ui-palette-header"><i class="fa fa-angle-down expanded"></i><span class="red-ui-palette-node-config-label" data-i18n="sidebar.config.global">On all flows</span><span class="red-ui-sidebar-node-config-filter-info" style="display: none;"></span></div><ul class="red-ui-palette-content red-ui-sidebar-node-config-list" style=""><li class="red-ui-palette-node-config-type">global-config</li><li class="red-ui-palette-node_id_338caca30bb130d2"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">338caca30bb130d2</div></div></li><li class="red-ui-palette-node-config-type">mqtt-broker</li><li class="red-ui-palette-node_id_178a50aa1245cf00"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">outside</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="http://localhost:1880/#">1</a></div></div></li><li class="red-ui-palette-node_id_e0fdefaa9f27b1df"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">local</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="http://localhost:1880/#">3</a></div></div></li><li class="red-ui-palette-node-config-type">sqlitedb</li><li class="red-ui-palette-node_id_6d70096c-acbce8"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">/home/cuthbert/Desktop/node-red testing folder/sensor_data.db</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="http://localhost:1880/#">2</a></div></div></li><li class="red-ui-palette-node_id_41e0319c-240b28"><div class="red-ui-palette-node-config red-ui-palette-node red-ui-palette-node-config-disabled"><div class="red-ui-palette-label"><i class="fa fa-ban"></i>c:\users\steve\.node-red\test.db</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="http://localhost:1880/#">1</a></div></div></li><li class="red-ui-palette-node-config-type">ui-base</li><li class="red-ui-palette-node_id_afc328fce936e3bf"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">UInew [/dashboard]</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="http://localhost:1880/#">3</a></div></div></li><li class="red-ui-palette-node-config-type">ui-group</li><li class="red-ui-palette-node_id_0e6cd99c91b690ee"><div class="red-ui-palette-node-config red-ui-palette-node red-ui-palette-node-config-disabled"><div class="red-ui-palette-label"><i class="fa fa-ban"></i>NewGroup [Front Page]</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="http://localhost:1880/#">8</a></div></div></li><li class="red-ui-palette-node-config-type">ui-link</li><li class="red-ui-palette-node_id_7ec1816e7188059d"><div class="red-ui-palette-node-config red-ui-palette-node red-ui-palette-node-config-disabled red-ui-palette-node-config-unused"><div class="red-ui-palette-label"><i class="fa fa-ban"></i>Link [/]</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right">0</div></div></li><li class="red-ui-palette-node-config-type">ui-page</li><li class="red-ui-palette-node_id_b9f2467d3ce29265"><div class="red-ui-palette-node-config red-ui-palette-node red-ui-palette-node-config-disabled"><div class="red-ui-palette-label"><i class="fa fa-ban"></i>Front Page [/dashboard/page1]</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="http://localhost:1880/#">1</a></div></div></li><li class="red-ui-palette-node-config-type">ui-theme</li><li class="red-ui-palette-node_id_d28a2fbde4b06184"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">Theme1</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="http://localhost:1880/#">1</a></div></div></li><li class="red-ui-palette-node_id_efffdb7cf706f095"><div class="red-ui-palette-node-config red-ui-palette-node red-ui-palette-node-config-unused"><div class="red-ui-palette-label">Theme 2</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right">0</div></div></li><li class="red-ui-palette-node-config-type">ui_base</li><li class="red-ui-palette-node_id_0dac8e42c09dcadf"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">Node-RED Dashboard</div></div></li><li class="red-ui-palette-node-config-type">ui_group</li><li class="red-ui-palette-node_id_a5d3a21adf49b4af"><div class="red-ui-palette-node-config red-ui-palette-node red-ui-palette-node-config-disabled"><div class="red-ui-palette-label"><i class="fa fa-ban"></i>[River] River</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="http://localhost:1880/#">127</a></div></div></li><li class="red-ui-palette-node_id_2fc1ce28a58b1ce7"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[River] River1</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="http://localhost:1880/#">23</a></div></div></li><li class="red-ui-palette-node_id_703824db-9d74a4"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[River] River2</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="http://localhost:1880/#">18</a></div></div></li><li class="red-ui-palette-node_id_2ac8e3fa-8b8584"><div class="red-ui-palette-node-config red-ui-palette-node red-ui-palette-node-config-disabled"><div class="red-ui-palette-label"><i class="fa fa-ban"></i>[Home] Default</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="http://localhost:1880/#">3</a></div></div></li><li class="red-ui-palette-node-config-type">ui_tab</li><li class="red-ui-palette-node_id_a58e6387f04561da"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">River</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="http://localhost:1880/#">3</a></div></div></li><li class="red-ui-palette-node_id_da91e2e4-019118"><div class="red-ui-palette-node-config red-ui-palette-node red-ui-palette-node-config-unused"><div class="red-ui-palette-label">2nd input</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right">0</div></div></li><li class="red-ui-palette-node_id_ebb1ed1c-5ebe2"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">Home</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="http://localhost:1880/#">1</a></div></div></li></ul></div></div><div><div class="red-ui-palette-category red-ui-sidebar-config-category" id="red-ui-sidebar-config-category-73393adb9ca26544"><div class="red-ui-sidebar-config-tray-header red-ui-palette-header"><i class="fa fa-angle-down"></i><span style="margin-right: 5px; display: none;"><i class="fa fa-lock"></i></span><span class="red-ui-palette-node-config-label">Flow 1</span><span class="red-ui-sidebar-node-config-filter-info" style="display: none;"></span></div><ul class="red-ui-palette-content red-ui-sidebar-node-config-list" style="display: none;"><li class="red-ui-palette-node-config-none" data-i18n="sidebar.config.none">none</li></ul></div><div class="red-ui-palette-category red-ui-sidebar-config-category" id="red-ui-sidebar-config-category-38240a5a23fafee4"><div class="red-ui-sidebar-config-tray-header red-ui-palette-header"><i class="fa fa-angle-down"></i><span style="margin-right: 5px; display: none;"><i class="fa fa-lock"></i></span><span class="red-ui-palette-node-config-label">maindashboard</span><span class="red-ui-sidebar-node-config-filter-info" style="display: none;"></span></div><ul class="red-ui-palette-content red-ui-sidebar-node-config-list" style="display: none;"><li class="red-ui-palette-node-config-none" data-i18n="sidebar.config.none">none</li></ul></div><div class="red-ui-palette-category red-ui-sidebar-config-category" id="red-ui-sidebar-config-category-a3fa2a99e772c545"><div class="red-ui-sidebar-config-tray-header red-ui-palette-header"><i class="fa fa-angle-down"></i><span style="margin-right: 5px; display: none;"><i class="fa fa-lock"></i></span><span class="red-ui-palette-node-config-label">Flow 3</span><span class="red-ui-sidebar-node-config-filter-info" style="display: none;"></span></div><ul class="red-ui-palette-content red-ui-sidebar-node-config-list" style="display: none;"><li class="red-ui-palette-node-config-none" data-i18n="sidebar.config.none">none</li></ul></div><div class="red-ui-palette-category red-ui-sidebar-config-category" id="red-ui-sidebar-config-category-7e9da581-12d884"><div class="red-ui-sidebar-config-tray-header red-ui-palette-header"><i class="fa fa-angle-down"></i><span style="margin-right: 5px; display: none;"><i class="fa fa-lock"></i></span><span class="red-ui-palette-node-config-label">template-flow-video2</span><span class="red-ui-sidebar-node-config-filter-info" style="display: none;"></span></div><ul class="red-ui-palette-content red-ui-sidebar-node-config-list" style="display: none;"><li class="red-ui-palette-node-config-none" data-i18n="sidebar.config.none">none</li></ul></div><div class="red-ui-palette-category red-ui-sidebar-config-category" id="red-ui-sidebar-config-category-eae036f7ed9aa487"><div class="red-ui-sidebar-config-tray-header red-ui-palette-header"><i class="fa fa-angle-down"></i><span style="margin-right: 5px; display: none;"><i class="fa fa-lock"></i></span><span class="red-ui-palette-node-config-label">Flow 4</span><span class="red-ui-sidebar-node-config-filter-info" style="display: none;"></span></div><ul class="red-ui-palette-content red-ui-sidebar-node-config-list" style="display: none;"><li class="red-ui-palette-node-config-none" data-i18n="sidebar.config.none">none</li></ul></div><div class="red-ui-palette-category red-ui-sidebar-config-category" id="red-ui-sidebar-config-category-d49472cb-6086a"><div class="red-ui-sidebar-config-tray-header red-ui-palette-header"><i class="fa fa-angle-down"></i><span style="margin-right: 5px; display: none;"><i class="fa fa-lock"></i></span><span class="red-ui-palette-node-config-label">python virtual environment</span><span class="red-ui-sidebar-node-config-filter-info" style="display: none;"></span></div><ul class="red-ui-palette-content red-ui-sidebar-node-config-list" style="display: none;"><li class="red-ui-palette-node-config-none" data-i18n="sidebar.config.none">none</li></ul></div><div class="red-ui-palette-category red-ui-sidebar-config-category" id="red-ui-sidebar-config-category-bc27ebb3355b6132"><div class="red-ui-sidebar-config-tray-header red-ui-palette-header"><i class="fa fa-angle-down"></i><span style="margin-right: 5px; display: none;"><i class="fa fa-lock"></i></span><span class="red-ui-palette-node-config-label">Flow 2</span><span class="red-ui-sidebar-node-config-filter-info" style="display: none;"></span></div><ul class="red-ui-palette-content red-ui-sidebar-node-config-list" style="display: none;"><li class="red-ui-palette-node-config-none" data-i18n="sidebar.config.none">none</li></ul></div><div class="red-ui-palette-category red-ui-sidebar-config-category" id="red-ui-sidebar-config-category-d8033d206022253c"><div class="red-ui-sidebar-config-tray-header red-ui-palette-header"><i class="fa fa-angle-down expanded"></i><span style="margin-right: 5px; display: none;"><i class="fa fa-lock"></i></span><span class="red-ui-palette-node-config-label">Flow 5</span><span class="red-ui-sidebar-node-config-filter-info" style="display: none;"></span></div><ul class="red-ui-palette-content red-ui-sidebar-node-config-list"><li class="red-ui-palette-node-config-type">ui_spacer</li><li class="red-ui-palette-node_id_660ac543c16a2953"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 5x1</div></div></li><li class="red-ui-palette-node_id_1c78dc5a51398669"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 5x1</div></div></li><li class="red-ui-palette-node_id_5c617a6d3afb286b"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 5x1</div></div></li><li class="red-ui-palette-node_id_d2cf7a54f70d6670"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 5x1</div></div></li><li class="red-ui-palette-node_id_59c7bccc4576a9a4"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 10x1</div></div></li><li class="red-ui-palette-node_id_4859718b880caf76"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_7f75376753da00f9"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_f714cf24eeea3e15"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_db3ed1cd7592677a"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_ae51f3f3ca1674fc"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 9x1</div></div></li><li class="red-ui-palette-node_id_c3707f311e7f4752"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 1x1</div></div></li><li class="red-ui-palette-node_id_f93ca6bc0e76a85f"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 9x1</div></div></li><li class="red-ui-palette-node_id_3ec01a5433f49c68"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 1x1</div></div></li><li class="red-ui-palette-node_id_e4113f7cfb5fcc63"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 9x1</div></div></li><li class="red-ui-palette-node_id_9f5c2d6db91ea88f"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 1x1</div></div></li><li class="red-ui-palette-node_id_29a791402c07f8a3"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 9x1</div></div></li><li class="red-ui-palette-node_id_72f36707be980a78"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 1x1</div></div></li><li class="red-ui-palette-node_id_e73b22fda65d4186"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 10x1</div></div></li><li class="red-ui-palette-node_id_a9deac3fdf7ed2ec"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_6206652480e22dd9"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 10x1</div></div></li><li class="red-ui-palette-node_id_82180aabf098af70"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_def4e13bdcd04199"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 10x1</div></div></li><li class="red-ui-palette-node_id_8ceeb2fbc3f189e5"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_5ecd0a73d64925c7"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 10x1</div></div></li><li class="red-ui-palette-node_id_9d07201a348015b2"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_29e93a70f4cea6ee"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 10x1</div></div></li><li class="red-ui-palette-node_id_7cddfdaa60fd8b27"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_9947d64d3c1024c4"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 10x1</div></div></li><li class="red-ui-palette-node_id_6cb48b128d45fa18"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_94417d57054d33fc"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 10x1</div></div></li><li class="red-ui-palette-node_id_78a080b850bdb651"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_5bf0a5c8b2412749"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_a8a394e995828029"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_ab04b6d9c757cc71"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_2fccc82376dcd4db"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_10d8cc8cb4d14fca"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_220a28d7beed7d90"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_056ca4707d5ef98c"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_e245d75b063681b9"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_17384cd2e805f196"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_2bd9afd56a578097"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_794b0e6c7ceb49e0"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_19a92332d3fc75de"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_182b42573b92a843"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_5801412d8c6057f4"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_e01d1406eb8faa56"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_a5f2480e32aeb15b"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_aa96ca64ac079af6"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_5fc471aac2a7918e"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_aba8b53617caa41d"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_e2e93b3efdb22f55"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_1d5e40a5456b2f0a"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_2ffde7aa89da0566"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_f816df5dff01eda9"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_92a5cad85baa7845"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_2ba627710bcbe533"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_b72eb761867ef90f"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 6x1</div></div></li><li class="red-ui-palette-node_id_1e39c04831614d34"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_0f8f63a83fc18cf2"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 6x1</div></div></li><li class="red-ui-palette-node_id_9dd7edbeb1e8f976"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_6a4f2aa9c13ff20e"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 6x1</div></div></li><li class="red-ui-palette-node_id_992e9b48ccc26a78"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 6x1</div></div></li><li class="red-ui-palette-node_id_ea37e414fabc22b8"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 6x1</div></div></li><li class="red-ui-palette-node_id_02c873f79667c087"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_d3151c86bec66787"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 7x1</div></div></li><li class="red-ui-palette-node_id_0fdc6540e34d2c9b"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 7x1</div></div></li><li class="red-ui-palette-node_id_854f01d378dedc82"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 7x1</div></div></li><li class="red-ui-palette-node_id_5dc862d0adeaf6ef"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 7x1</div></div></li><li class="red-ui-palette-node_id_6e51f9fb3a535177"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 7x1</div></div></li><li class="red-ui-palette-node_id_7460cb5434b4bc79"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 7x1</div></div></li><li class="red-ui-palette-node_id_482dbb5ac9ed40e3"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 5x1</div></div></li><li class="red-ui-palette-node_id_bee91add64e8672d"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 5x1</div></div></li><li class="red-ui-palette-node_id_57aca75d4f5f8b9a"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 5x1</div></div></li><li class="red-ui-palette-node_id_bb3919351c742b5c"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 5x1</div></div></li><li class="red-ui-palette-node_id_8673538768df5d26"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 10x1</div></div></li><li class="red-ui-palette-node_id_6dab83e440ef68cc"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_8173e1fd1830cb16"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_c913075364252e7a"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_9544dc5af3fe224e"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_955a77b08037c1f1"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 9x1</div></div></li><li class="red-ui-palette-node_id_ef69a80d1af721c5"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 1x1</div></div></li><li class="red-ui-palette-node_id_466c418cf27905fb"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 9x1</div></div></li><li class="red-ui-palette-node_id_9a8af7742c98500b"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 1x1</div></div></li><li class="red-ui-palette-node_id_8ac50291f72282cf"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 9x1</div></div></li><li class="red-ui-palette-node_id_09aea1f71551936e"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 1x1</div></div></li><li class="red-ui-palette-node_id_1f26f9d46a6a9acc"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 9x1</div></div></li><li class="red-ui-palette-node_id_f9d22ee3f7893ee2"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 1x1</div></div></li><li class="red-ui-palette-node_id_a9877882443f9e32"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 10x1</div></div></li><li class="red-ui-palette-node_id_ef27105f6101410e"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_b59c4a63931d91a5"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 10x1</div></div></li><li class="red-ui-palette-node_id_9ca0cee8bf738a94"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_d065966248cba00c"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 10x1</div></div></li><li class="red-ui-palette-node_id_c6403420120a12ef"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_7034e7dba2f8d94c"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 10x1</div></div></li><li class="red-ui-palette-node_id_8a04557b5158e168"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_e9efba497e72dbc5"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 10x1</div></div></li><li class="red-ui-palette-node_id_6b7a761495258777"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_13a512dc6a506970"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 10x1</div></div></li><li class="red-ui-palette-node_id_59c013c83841b577"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_873a6724bfb05ee5"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 10x1</div></div></li><li class="red-ui-palette-node_id_4671181b06d89b8b"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_182f054d0dfe0763"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_9c8487d8f16fbb7d"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_eb911003704d28ee"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_22b486c0b0198a54"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_56dc596b44dd9b46"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_ed809711c49c23f1"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_34106bb6545433ca"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_311358fcae5a6dfb"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_377302ad3c2304f6"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_57a2c334a094dc29"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_a39895e96b61482b"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_efc4c563a09fa2fc"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_f492311540e55027"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_9401fbe62553fda1"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_a42d6f2cac3d90d9"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_44718fedc63eaa7e"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_dc84c05d3535d569"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_0b5fe3210b118c84"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_abcea7225a61d2e6"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_dcbf1394f7a43349"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_4d5b55acb308a1f7"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_deee30bf63b5fb82"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_1e0f61f411c6836b"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_a1631f6637bbf9ca"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 2x1</div></div></li><li class="red-ui-palette-node_id_4da9b5321935ff60"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_44fa0720b59b7934"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 6x1</div></div></li><li class="red-ui-palette-node_id_8943e46d2a2340f2"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_a13f1914fc29df37"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 6x1</div></div></li><li class="red-ui-palette-node_id_59efad81266262e1"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 3x1</div></div></li><li class="red-ui-palette-node_id_15f132e023eab8bb"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 6x1</div></div></li><li class="red-ui-palette-node_id_9a22646b2d6a17c0"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 6x1</div></div></li><li class="red-ui-palette-node_id_9cd2b83782f5e21c"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 6x1</div></div></li><li class="red-ui-palette-node_id_9f25c413316fa865"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 15x1</div></div></li><li class="red-ui-palette-node_id_6e28d95dc2de5148"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 7x1</div></div></li><li class="red-ui-palette-node_id_1ee835d0b8a03b06"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 7x1</div></div></li><li class="red-ui-palette-node_id_325d23aac6fc97df"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 7x1</div></div></li><li class="red-ui-palette-node_id_9238934aae04b432"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 7x1</div></div></li><li class="red-ui-palette-node_id_0408fef341650c78"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 7x1</div></div></li><li class="red-ui-palette-node_id_1906904f5261ecd5"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">spacer 7x1</div></div></li></ul></div><div class="red-ui-palette-category red-ui-sidebar-config-category" id="red-ui-sidebar-config-category-a29cf0664c167293"><div class="red-ui-sidebar-config-tray-header red-ui-palette-header"><i class="fa fa-angle-down"></i><span style="margin-right: 5px; display: none;"><i class="fa fa-lock"></i></span><span class="red-ui-palette-node-config-label">Template Tests</span><span class="red-ui-sidebar-node-config-filter-info" style="display: none;"></span></div><ul class="red-ui-palette-content red-ui-sidebar-node-config-list" style="display: none;"><li class="red-ui-palette-node-config-none" data-i18n="sidebar.config.none">none</li></ul></div></div><div></div></div><div class="red-ui-sidebar-shade hide" style="display: none;"></div></div><div style="height: 100%; display: none;"><div style="position: relative; height: 100%;"><div class="red-ui-sidebar-context-stack red-ui-stack"><div class="red-ui-palette-category expanded"><div class="red-ui-palette-header"><i class="fa fa-angle-down expanded"></i><span>Node</span><div style="float: right"><input type="checkbox" style="display: none;"><button type="button" class="red-ui-toggleButton red-ui-sidebar-header-button red-ui-button-small toggle single"><i class="fa fa-square-o"></i></button><button class="red-ui-button red-ui-button-small" style="margin-left: 5px"><i class="fa fa-refresh"></i></button></div></div><div style="position: relative;"><div style="height: 100%;"><div class="red-ui-sidebar-context-updated">&nbsp;</div><table class="red-ui-info-table"><tbody><tr class="red-ui-help-info-row red-ui-search-empty blank" colspan="2"><td data-i18n="sidebar.context.none">none selected</td></tr></tbody></table></div></div></div><div class="red-ui-palette-category expanded"><div class="red-ui-palette-header"><i class="fa fa-angle-down expanded"></i><span>Flow</span><div style="float: right"><input type="checkbox" style="display: none;"><button type="button" class="red-ui-toggleButton red-ui-sidebar-header-button red-ui-button-small toggle single"><i class="fa fa-square-o"></i></button><button class="red-ui-button red-ui-button-small" style="margin-left: 5px"><i class="fa fa-refresh"></i></button></div></div><div style="position: relative;"><div style="height: 100%;"><div class="red-ui-sidebar-context-updated">&nbsp;</div><table class="red-ui-info-table"><tbody><tr class="red-ui-help-info-row red-ui-search-empty blank" colspan="2"><td data-i18n="sidebar.context.refresh">refresh to load</td></tr></tbody></table></div></div></div><div class="red-ui-palette-category expanded"><div class="red-ui-palette-header"><i class="fa fa-angle-down expanded"></i><span>Global</span><div style="float: right"><button class="red-ui-button red-ui-button-small"><i class="fa fa-refresh"></i></button></div></div><div style="position: relative;"><div style="height: 100%;"><div class="red-ui-sidebar-context-updated">&nbsp;</div><table class="red-ui-info-table"><tbody><tr class="red-ui-help-info-row red-ui-search-empty blank" colspan="2"><td data-i18n="sidebar.context.refresh">refresh to load</td></tr></tbody></table></div></div></div></div></div></div><div style="height: 100%; display: none;"><div style="position: relative; height: 100%;"><div class="red-ui-sidebar-header"><span class="button-group"><a id="red-ui-sidebar-debug-filter" style="padding-right: 5px" class="red-ui-sidebar-header-button" href="http://localhost:1880/#"><i class="fa fa-filter"></i> <span>selected nodes</span> <i style="padding-left: 5px;" class="fa fa-caret-down"></i></a></span><span class="button-group"><a id="red-ui-sidebar-debug-clear" style="border-right: none; padding-right: 6px" class="red-ui-sidebar-header-button" href="http://localhost:1880/#" data-clear-type="all"><i class="fa fa-trash"></i> <span>all</span></a><a id="red-ui-sidebar-debug-clear-opts" style="padding: 5px; border-left: none;" class="red-ui-sidebar-header-button" href="http://localhost:1880/#"><i class="fa fa-caret-down"></i></a></span><div class="red-ui-debug-filter-box hide"><div style="margin-bottom: 3px; display: flex;"><span style="flex-grow:1; text-align: left;"><span class="button-group"><button type="button" id="red-ui-sidebar-filter-select-all" class="red-ui-sidebar-header-button red-ui-button-small" data-i18n="node-red:debug.sidebar.selectAll">select all</button></span><span class="button-group"><button type="button" id="red-ui-sidebar-filter-select-none" class="red-ui-sidebar-header-button red-ui-button-small" data-i18n="node-red:debug.sidebar.selectNone">select none</button></span></span><span class="button-group"><button type="button" id="red-ui-sidebar-filter-select-close" class="red-ui-sidebar-header-button red-ui-button-small"><i class="fa fa-times"></i></button></span></div><div class="red-ui-debug-filter-row" id="red-ui-sidebar-debug-filter-node-list-row"><div class="red-ui-treeList" tabindex="0" style="width: 100%; height: 300px;"><div class="red-ui-treeList-container"><div class="red-ui-editableList" style="inset: 0px; position: absolute;"><div class="red-ui-editableList-border red-ui-editableList-container" style="inset: 0px; position: absolute; overflow-y: auto;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="position: static; inset: auto; min-height: 0px; height: auto;"></ol></div></div></div></div></div></div></div><div class="red-ui-debug-content red-ui-debug-content-list"><div class="red-ui-debug-msg red-ui-debug-msg-level-30"><div class="red-ui-debug-msg-meta"><span class="red-ui-debug-msg-date">6/30/2024, 6:08:14 AM</span><span class="red-ui-debug-msg-tools button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-caret-down"></i></button></span><span class="red-ui-debug-msg-topic">msg : string[567]</span></div><span class="red-ui-debug-msg-payload"><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-string red-ui-debug-msg-object-header">"↵↵---------------------------------------------------------------------↵Your flow credentials file is encrypted using a system-generated key.↵↵If the system-generated key is lost for any reason, your credentials↵file will not be recoverable, you will have to delete it and re-enter↵your credentials.↵↵You should set your own key using the 'credentialSecret' option in↵your settings file. Node-RED will then re-encrypt your credentials↵file using your chosen key the next time you deploy a change.↵---------------------------------------------------------------------↵"</span></span></span></span></span></div><div class="red-ui-debug-msg red-ui-debug-msg-level-20 red-ui-debug-msg-node-6c3bdf3a984b6bbf red-ui-debug-msg-flow-d8033d206022253c"><div class="red-ui-debug-msg-meta"><span class="red-ui-debug-msg-date">6/30/2024, 6:08:15 AM</span><a href="http://localhost:1880/#" class="red-ui-debug-msg-name">node: Gaugue</a><span class="red-ui-debug-msg-tools button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-caret-down"></i></button></span><span class="red-ui-debug-msg-topic">msg : error</span></div><span class="red-ui-debug-msg-payload"><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level"><span class="red-ui-debug-msg-row"><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span></span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-string red-ui-debug-msg-object-header">"TypeError: Cannot read properties of null (reading 'register')"</span></span></span></span></span></div><div class="red-ui-debug-msg red-ui-debug-msg-level-20 red-ui-debug-msg-node-6ed27d3d90f32818 red-ui-debug-msg-flow-d8033d206022253c"><div class="red-ui-debug-msg-meta"><span class="red-ui-debug-msg-date">6/30/2024, 6:08:15 AM</span><a href="http://localhost:1880/#" class="red-ui-debug-msg-name">node: Temperature</a><span class="red-ui-debug-msg-tools button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-caret-down"></i></button></span><span class="red-ui-debug-msg-topic">msg : error</span></div><span class="red-ui-debug-msg-payload"><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level"><span class="red-ui-debug-msg-row"><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span></span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-string red-ui-debug-msg-object-header">"TypeError: Cannot read properties of null (reading 'getBase')"</span></span></span></span></span></div><div class="red-ui-debug-msg red-ui-debug-msg-level-20 red-ui-debug-msg-node-53540b4ae9686c84 red-ui-debug-msg-flow-d8033d206022253c"><div class="red-ui-debug-msg-meta"><span class="red-ui-debug-msg-date">6/30/2024, 6:08:15 AM</span><a href="http://localhost:1880/#" class="red-ui-debug-msg-name">node: 53540b4ae9686c84</a><span class="red-ui-debug-msg-tools button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-caret-down"></i></button></span><span class="red-ui-debug-msg-topic">msg : error</span></div><span class="red-ui-debug-msg-payload"><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level"><span class="red-ui-debug-msg-row"><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span></span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-string red-ui-debug-msg-object-header">"TypeError: Cannot read properties of null (reading 'getBase')"</span></span></span></span></span></div><div class="red-ui-debug-msg red-ui-debug-msg-level-20 red-ui-debug-msg-node-4463964f31c87b4a red-ui-debug-msg-flow-d8033d206022253c"><div class="red-ui-debug-msg-meta"><span class="red-ui-debug-msg-date">6/30/2024, 6:08:15 AM</span><a href="http://localhost:1880/#" class="red-ui-debug-msg-name">node: 4463964f31c87b4a</a><span class="red-ui-debug-msg-tools button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-caret-down"></i></button></span><span class="red-ui-debug-msg-topic">msg : error</span></div><span class="red-ui-debug-msg-payload"><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level"><span class="red-ui-debug-msg-row"><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span></span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-string red-ui-debug-msg-object-header">"TypeError: Cannot read properties of null (reading 'getBase')"</span></span></span></span></span></div><div class="red-ui-debug-msg red-ui-debug-msg-level-20 red-ui-debug-msg-node-2610333daf014f87 red-ui-debug-msg-flow-d8033d206022253c"><div class="red-ui-debug-msg-meta"><span class="red-ui-debug-msg-date">6/30/2024, 6:08:15 AM</span><a href="http://localhost:1880/#" class="red-ui-debug-msg-name">node: read event log</a><span class="red-ui-debug-msg-tools button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-caret-down"></i></button></span><span class="red-ui-debug-msg-topic">msg : string[19]</span></div><span class="red-ui-debug-msg-payload"><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level"><span class="red-ui-debug-msg-row"><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span></span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-string red-ui-debug-msg-object-header">"No group configured"</span></span></span></span></span></div><div class="red-ui-debug-msg red-ui-debug-msg-level-20 red-ui-debug-msg-node-3f7a3de2e99f4207 red-ui-debug-msg-flow-d8033d206022253c"><div class="red-ui-debug-msg-meta"><span class="red-ui-debug-msg-date">6/30/2024, 6:08:15 AM</span><a href="http://localhost:1880/#" class="red-ui-debug-msg-name">node: 3f7a3de2e99f4207</a><span class="red-ui-debug-msg-tools button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-caret-down"></i></button></span><span class="red-ui-debug-msg-topic">msg : error</span></div><span class="red-ui-debug-msg-payload"><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level"><span class="red-ui-debug-msg-row"><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span></span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-string red-ui-debug-msg-object-header">"TypeError: Cannot read properties of null (reading 'register')"</span></span></span></span></span></div><div class="red-ui-debug-msg red-ui-debug-msg-level-20 red-ui-debug-msg-node-ce82a29184ff00a1 red-ui-debug-msg-flow-d8033d206022253c"><div class="red-ui-debug-msg-meta"><span class="red-ui-debug-msg-date">6/30/2024, 6:08:15 AM</span><a href="http://localhost:1880/#" class="red-ui-debug-msg-name">node: ce82a29184ff00a1</a><span class="red-ui-debug-msg-tools button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-caret-down"></i></button></span><span class="red-ui-debug-msg-topic">msg : error</span></div><span class="red-ui-debug-msg-payload"><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level"><span class="red-ui-debug-msg-row"><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span></span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-string red-ui-debug-msg-object-header">"TypeError: Cannot read properties of null (reading 'register')"</span></span></span></span></span></div><div class="red-ui-debug-msg red-ui-debug-msg-node-069b176dd23b0419 red-ui-debug-msg-flow-38240a5a23fafee4 hide"><div class="red-ui-debug-msg-meta"><span class="red-ui-debug-msg-date">6/30/2024, 6:08:15 AM</span><a href="http://localhost:1880/#" class="red-ui-debug-msg-name">node: debug 8</a><span class="red-ui-debug-msg-tools button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-caret-down"></i></button></span><span class="red-ui-debug-msg-topic">test_data : msg.payload : Object</span></div><span class="red-ui-debug-msg-payload"><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span></span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-object-header"><span>{ </span><span class="red-ui-debug-msg-object-key">temp</span><span>: </span><span class="red-ui-debug-msg-object-value red-ui-debug-msg-type-number">44.0045</span><span>, </span><span class="red-ui-debug-msg-object-key">Humidity</span><span>: </span><span class="red-ui-debug-msg-object-value red-ui-debug-msg-type-number">29.6007</span><span>, </span><span class="red-ui-debug-msg-object-key">Pressure</span><span>: </span><span class="red-ui-debug-msg-object-value red-ui-debug-msg-type-number">1007.9616</span><span>, </span><span class="red-ui-debug-msg-object-key">Date</span><span>: </span><span class="red-ui-debug-msg-object-value red-ui-debug-msg-type-string">"2024-05-18T08:44:15.040256"</span><span>, </span><span class="red-ui-debug-msg-object-key">Ave1</span><span>: </span><span class="red-ui-debug-msg-object-value red-ui-debug-msg-type-number">43.9875</span><span> …</span><span> }</span></span></span></span></span></span></div><div class="red-ui-debug-msg red-ui-debug-msg-level-30 red-ui-debug-msg-node-1d68c244c5d29ab2 red-ui-debug-msg-flow-38240a5a23fafee4"><div class="red-ui-debug-msg-meta"><span class="red-ui-debug-msg-date">6/30/2024, 6:08:15 AM</span><a href="http://localhost:1880/#" class="red-ui-debug-msg-name">node: test_data</a><span class="red-ui-debug-msg-tools button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-caret-down"></i></button></span><span class="red-ui-debug-msg-topic">msg : string[48]</span></div><span class="red-ui-debug-msg-payload"><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level"><span class="red-ui-debug-msg-row"><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span></span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-string red-ui-debug-msg-object-header">"No columns template specified for object -&gt; CSV."</span></span></span></span></span></div><div class="red-ui-debug-msg red-ui-debug-msg-level-30 red-ui-debug-msg-node-99861df781a9de67 red-ui-debug-msg-flow-bc27ebb3355b6132"><div class="red-ui-debug-msg-meta"><span class="red-ui-debug-msg-date">6/30/2024, 6:08:15 AM</span><a href="http://localhost:1880/#" class="red-ui-debug-msg-name">node: 99861df781a9de67</a><span class="red-ui-debug-msg-tools button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-caret-down"></i></button></span><span class="red-ui-debug-msg-topic">msg : string[48]</span></div><span class="red-ui-debug-msg-payload"><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level"><span class="red-ui-debug-msg-row"><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span></span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-string red-ui-debug-msg-object-header">"No columns template specified for object -&gt; CSV."</span></span></span></span></span></div></div><div class="red-ui-debug-content  red-ui-debug-content-table hide"></div></div></div><div style="height: 100%; display: none;"><div id="ff-node-red-dashboard"></div><div class="red-ui-sidebar-shade hide" style="display: none;"></div></div><div style="height: 100%; display: none;"><div style="position: relative; height: 100%;"><div class="nr-db-sb"><form class="dialog-form"><div class="red-ui-tabs"><ul id="dashboard-tabs-list"><li class="red-ui-tab active" style="width:70px;"><a class="red-ui-tab-label" title="Layout"><span>Layout</span></a></li><li class="red-ui-tab" style="width:70px;"><a class="red-ui-tab-label" title="Site" style="width:60px;"><span>Site</span></a></li><li class="red-ui-tab" style="width:70px;"><a class="red-ui-tab-label" title="Theme" style="width:80px;"><span>Theme</span></a></li><li class="red-ui-tab hidden" style="width:70px;"><a class="red-ui-tab-label" title="Angular" style="width:80px;"><span>Angular</span></a></li><span id="dash-link-button" class="editor-button" style="position:absolute; right:0px;"><i class="fa fa-external-link"></i></span></ul></div><div id="dashboard-layout" style="height:calc(100% - 48px)"><div class="form-row" style="position:relative"><label><b>Tabs &amp; Links</b></label><div class="nr-db-sb-list-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-angle-double-up"></i></a><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-angle-double-down"></i></a><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> tab</a><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> link</a></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="overflow-y: auto;"><ol class="nr-db-sb-tab-list red-ui-editableList-list ui-sortable" style="min-height: 0px; height: auto;"><li><div class="red-ui-editableList-item-content nr-db-sb-tab-list-item"><div class="nr-db-sb-list-header nr-db-sb-tab-list-header"><i class="nr-db-sb-list-handle nr-db-sb-tab-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron"></i><i class="nr-db-sb-icon nr-db-sb-tab-icon fa fa-object-group"></i><span class="nr-db-sb-title">River</span><div class="nr-db-sb-list-header-button-group" id="a58e6387f04561da"><a href="http://localhost:1880/#" class="nr-db-sb-tab-add-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> group</a><a href="http://localhost:1880/#" class="nr-db-sb-tab-edit-button editor-button  editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a><a href="http://localhost:1880/#" class="nr-db-sb-tab-edit-layout-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> layout</a></div></div><div class="nr-db-sb-group-list-container"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="min-height: 10px; max-height: none;"><ol class="nr-db-sb-group-list red-ui-editableList-list ui-sortable" style="min-height: 0px; height: auto;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">River</span><div class="nr-db-sb-list-header-button-group" id="a5d3a21adf49b4af"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="http://localhost:1880/#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Ave1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Last Weeks Average</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Average of Last Month</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 5x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 5x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">worldmap</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 5x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 5x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 5x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 5x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 5x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 5x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 10x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 10x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 9x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 9x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Ave1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 1x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 1x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 9x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 9x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 1x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 1x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 9x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 9x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 1x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 1x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 9x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 9x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 1x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 1x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 10x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 10x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 10x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 10x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 10x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 10x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 10x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 10x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 10x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 10x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 10x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 10x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 10x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 10x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">chart</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">chart</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 2x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 6x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 6x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 6x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 6x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 3x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">River2</span><div class="nr-db-sb-list-header-button-group" id="703824db.9d74a4"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="http://localhost:1880/#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Ave1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Last Weeks Average</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Average of Last Month</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 6x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 6x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 6x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 6x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 6x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 6x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">temperaturechart</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Humidity</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Pressure</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Hathersage sensor</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 15x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">template</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Event Log</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">press button to read the event log from this sensor</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">River1</span><div class="nr-db-sb-list-header-button-group" id="2fc1ce28a58b1ce7"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="http://localhost:1880/#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Ave1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Last Weeks Average</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Average of Last Month</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Temperature/Humidity</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Pressure</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">worldmap</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 7x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 7x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 7x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 7x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 7x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 7x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 7x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 7x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 7x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 7x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 7x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">spacer 7x1</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Event Log</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Latest:</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">switch</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">switch</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">dropdown</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content nr-db-sb-tab-list-item"><div class="nr-db-sb-list-header nr-db-sb-tab-list-header"><i class="nr-db-sb-list-handle nr-db-sb-tab-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron"></i><i class="nr-db-sb-icon nr-db-sb-tab-icon fa fa-object-group"></i><span class="nr-db-sb-title nr-db-sb-title-hidden nr-db-sb-title-disabled">2nd input</span><div class="nr-db-sb-list-header-button-group" id="da91e2e4.019118"><a href="http://localhost:1880/#" class="nr-db-sb-tab-add-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> group</a><a href="http://localhost:1880/#" class="nr-db-sb-tab-edit-button editor-button  editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a><a href="http://localhost:1880/#" class="nr-db-sb-tab-edit-layout-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> layout</a></div></div><div class="nr-db-sb-group-list-container"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="min-height: 10px; max-height: none;"><ol class="nr-db-sb-group-list red-ui-editableList-list ui-sortable" style="min-height: 0px; height: auto;"></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content nr-db-sb-tab-list-item"><div class="nr-db-sb-list-header nr-db-sb-tab-list-header"><i class="nr-db-sb-list-handle nr-db-sb-tab-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron"></i><i class="nr-db-sb-icon nr-db-sb-tab-icon fa fa-object-group"></i><span class="nr-db-sb-title nr-db-sb-title-disabled">Home</span><div class="nr-db-sb-list-header-button-group" id="ebb1ed1c.5ebe2"><a href="http://localhost:1880/#" class="nr-db-sb-tab-add-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> group</a><a href="http://localhost:1880/#" class="nr-db-sb-tab-edit-button editor-button  editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a><a href="http://localhost:1880/#" class="nr-db-sb-tab-edit-layout-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> layout</a></div></div><div class="nr-db-sb-group-list-container"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="min-height: 10px; max-height: none;"><ol class="nr-db-sb-group-list red-ui-editableList-list ui-sortable" style="min-height: 0px; height: auto;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">Default</span><div class="nr-db-sb-list-header-button-group" id="2ac8e3fa.8b8584"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="http://localhost:1880/#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">template</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">template</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">template</span><div class="nr-db-sb-list-header-button-group"><a href="http://localhost:1880/#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li></ol></div></div></div></div></li></ol></div></div></div><div class="form-row" style="display: none;"><span><i class="fa fa-info-circle"></i> There <span id="nr-db-missing-group-count"></span> not in a group. Click <a id="nr-db-add-missing-groups" href="http://localhost:1880/#">here</a> to create the missing groups</span></div></div><div id="dashboard-site" style="display:none;"><div class="form-row compact"><div><b>Title</b></div><input type="text" id="nr-db-field-title" style="width: 100%;"></div><div class="form-row compact"><div><b>Options</b></div><select id="nr-db-field-hideToolbar" style="width: 100%;"><option value="false" selected="selected">Show the title bar</option><option value="true">Hide the title bar</option></select></div><div class="form-row compact"><select id="nr-db-field-lockMenu" style="width: 100%;"><option value="false" selected="selected">Click to show side menu</option><option value="true">Always show side menu</option><option value="icon">Always show icons only</option></select></div><div class="form-row compact"><select id="nr-db-field-allowSwipe" style="width: 100%;"><option value="false" selected="selected">No swipe between tabs</option><option value="true">Allow swipe between tabs</option><option value="mouse">Allow swipe (+mouse) between tabs</option><option value="menu">Swipe to open/close menu</option></select></div><div class="form-row compact"><select id="nr-db-field-allowTempTheme" style="width: 100%;"><option value="true" selected="selected">Node-RED theme everywhere</option><option value="false">Use Angular theme in ui_template</option><option value="none">Angular theme everywhere</option></select></div><div class="form-row"><div style="width: 80%; display: inline-block;"><b>Date Format</b></div><div style="display: inline-block; margin-right: 6px; float: right;"><a href="https://momentjs.com/docs/#/displaying/format/" target="_new"><i class="fa fa-info-circle" style="color:var(--red-ui-secondary-text-color, grey);"></i></a></div><input type="text" id="nr-db-field-dateFormat" style="width: 100%;"></div><div class="form-row"><span style="width:45%; display:inline-block"><b>Sizes</b></span><span style="width:25%; display:inline-block; font-size:smaller">Horizontal</span><span style="width:20%; display:inline-block; font-size:smaller">Vertical</span><i id="sizes-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 1;"></i><br>1x1 Widget Size</br><span style="width:45%; display:inline-block">1x1 Widget Size</span><input type="number" name="sx" min="24" id="nr-db-field-sx" style="width: 20%;"><span style="width:5%; display:inline-block"> </span><input type="number" name="sy" min="24" id="nr-db-field-sy" style="width: 20%;"><br>Widget Spacing</br><span style="width:45%; display:inline-block">Widget Spacing</span><input type="number" name="cx" min="0" id="nr-db-field-cx" style="width: 20%;"><span style="width:5%; display:inline-block"> </span><input type="number" name="cy" min="0" id="nr-db-field-cy" style="width: 20%;"><br>Group Padding</br><span style="width:45%; display:inline-block">Group Padding</span><input type="number" name="px" min="0" id="nr-db-field-px" style="width: 20%;"><span style="width:5%; display:inline-block"> </span><input type="number" name="py" min="0" id="nr-db-field-py" style="width: 20%;"><br>Group Spacing</br><span style="width:45%; display:inline-block">Group Spacing</span><input type="number" name="gx" min="0" id="nr-db-field-gx" style="width: 20%;"><span style="width:5%; display:inline-block"> </span><input type="number" name="gy" min="0" id="nr-db-field-gy" style="width: 20%;"></div></div><div id="dashboard-theme" style="display:none;"><div class="form-row"><label class="nr-db-theme-label">Style</label><select id="nr-db-field-theme" style="width: 100%;"><option value="theme-light">Light (default)</option><option value="theme-dark">Dark</option><option value="theme-custom">Custom</option></select></div><div id="custom-theme-library-container" style="display: none;"><label class="nr-db-theme-label">Custom Profile</label><input type="text" id="ui-sidebar-name" style="vertical-align: top; width: calc(100% - 52px);" placeholder="profile name (not blank)"><div style="margin-left:5px; display: inline-block;position: relative;"><a id="node-input-theme-lookup" class="red-ui-button"><i class="fa fa-book"></i> <i class="fa fa-caret-down"></i></a><ul class="red-ui-menu red-ui-menu-dropdown pull-right red-ui-menu-dropdown-noicons" id="node-input-theme-lookup-submenu" style="display: none;"><li><a id="node-input-theme-menu-open-library" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Open Library...</span></span></a></li><li><a id="node-input-theme-menu-save-library" tabindex="-1" href="http://localhost:1880/#"><span class="red-ui-menu-label"><span>Save to Library...</span></span></a></li></ul></div><input type="hidden" id="nr-db-field-format"><div style="display:none;" class="node-text-editor" id="nr-db-field-format-editor"><div></div><div class="red-ui-editor-text-container" data-keybinding-context="1" style="--vscode-editorCodeLens-lineHeight: 16px; --vscode-editorCodeLens-fontSize: 12px; --vscode-editorCodeLens-fontFeatureSettings: &quot;liga&quot; off, &quot;calt&quot; off;"></div></div></div><div id="base-theme-settings"><div class="form-row"><label class="nr-db-theme-label">Base Settings</label><ul id="base-settings-ul" class="red-ui-dashboard-theme-styles"><li class="red-ui-dashboard-theme-item"><span>Colour</span><span class="nr-db-color-pick-container"><input id="base-color" class="nr-db-field-themeColor" type="color" value="#ffffff" style="background-color: rgb(9, 116, 121); color: rgb(238, 238, 238);"></span><i id="base-color-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 1;"></i></li><li class="red-ui-dashboard-theme-item"><span>Font</span><select id="nr-db-field-font"><option value="-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif" style="font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif">System Font (default)</option><option value="Arial,Arial,Helvetica,sans-serif" style="font-family:Arial,Arial,Helvetica,sans-serif">Arial</option><option value="Arial Black,Arial Black,Gadget,sans-serif" style="font-family:Arial Black,Arial Black,Gadget,sans-serif">Arial Black</option><option value="Arial Narrow,Nimbus Sans L,sans-serif" style="font-family:Arial Narrow,Nimbus Sans L,sans-serif">Arial Narrow</option><option value="Century Gothic,CenturyGothic,AppleGothic,sans-serif" style="font-family:Century Gothic,CenturyGothic,AppleGothic,sans-serif">Century Gothic</option><option value="Copperplate,Copperplate Gothic Light,fantasy" style="font-family:Copperplate,Copperplate Gothic Light,fantasy;">Copperplate</option><option value="Courier,monospace" style="font-family:Courier,monospace;">Courier</option><option value="Georgia,Georgia,serif" style="font-family:Georgia,Georgia,serif">Georgia</option><option value="Gill Sans,Geneva,sans-serif" style="font-family:Gill Sans,Geneva,sans-serif;">Gill Sans</option><option value="Impact,Impact,Charcoal,sans-serif" style="font-family:Impact,Impact,Charcoal,sans-serif">Impact</option><option value="Lucida Sans Typewriter,Lucida Console,Monaco,monospace" style="font-family:Lucida Console,Monaco,monospace">Lucida Console</option><option value="Lucida Sans Unicode,Lucida Grande,sans-serif" style="font-family:Lucida Sans Unicode,Lucida Grande,sans-serif">Lucida Sans</option><option value="Palatino Linotype,Palatino,Book Antiqua,serif" style="font-family:Palatino Linotype,Palatino,Book Antiqua,serif">Palatino Linotype</option><option value="Tahoma,Geneva,sans-serif" style="font-family:Tahoma,Geneva,sans-serif">Tahoma</option><option value="Times New Roman,Times,serif" style="font-family:Times New Roman,Times,serif">Times New Roman</option><option value="Trebuchet MS,Helvetica,sans-serif" style="font-family:Trebuchet MS,Helvetica,sans-serif">Trebuchet MS</option><option value="Verdana,Verdana,Geneva,sans-serif" style="font-family:Verdana,Verdana,Geneva,sans-serif">Verdana</option></select></li></ul></div></div><div id="custom-theme-settings" style="display: none;"><div class="form-row"><label class="nr-db-theme-label">Page Settings</label></div><ul class="red-ui-dashboard-theme-styles"><li class="red-ui-dashboard-theme-item"><span>Title Bar Background</span><span class="nr-db-color-pick-container"><input id="page-titlebar-backgroundColor" class="nr-db-field-themeColor" type="color" value="#ffffff" style="background-color: rgb(9, 116, 121); color: rgb(238, 238, 238);"></span><i id="page-titlebar-backgroundColor-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 0.2;"></i></li><li class="red-ui-dashboard-theme-item"><span>Page Background</span><span class="nr-db-color-pick-container"><input id="page-backgroundColor" class="nr-db-field-themeColor" type="color" value="#ffffff" style="background-color: rgb(17, 17, 17); color: rgb(238, 238, 238);"></span><i id="page-backgroundColor-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 0.2;"></i></li><li class="red-ui-dashboard-theme-item"><span>Side Bar Background</span><span class="nr-db-color-pick-container"><input id="page-sidebar-backgroundColor" class="nr-db-field-themeColor" type="color" value="#ffffff" style="background-color: rgb(51, 51, 51); color: rgb(238, 238, 238);"></span><i id="page-sidebar-backgroundColor-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 0.2;"></i></li></ul><div class="form-row"><label class="nr-db-theme-label">Group Settings</label></div><ul class="red-ui-dashboard-theme-styles"><li class="red-ui-dashboard-theme-item"><span>Group Text</span><span class="nr-db-color-pick-container"><input id="group-textColor" class="nr-db-field-themeColor" type="color" value="#ffffff" style="background-color: rgb(14, 184, 192); color: rgb(17, 17, 17);"></span><i id="group-textColor-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 0.2;"></i></li><li class="red-ui-dashboard-theme-item"><span>Group Border</span><span class="nr-db-color-pick-container"><input id="group-borderColor" class="nr-db-field-themeColor" type="color" value="#ffffff" style="background-color: rgb(85, 85, 85); color: rgb(238, 238, 238);"></span><i id="group-borderColor-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 0.2;"></i></li><li class="red-ui-dashboard-theme-item"><span>Group Background</span><span class="nr-db-color-pick-container"><input id="group-backgroundColor" class="nr-db-field-themeColor" type="color" value="#ffffff" style="background-color: rgb(51, 51, 51); color: rgb(238, 238, 238);"></span><i id="group-backgroundColor-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 0.2;"></i></li></ul><div class="form-row"><label class="nr-db-theme-label">Widget Settings</label></div><ul class="red-ui-dashboard-theme-styles"><li class="red-ui-dashboard-theme-item"><span>Widget Text</span><span class="nr-db-color-pick-container"><input id="widget-textColor" class="nr-db-field-themeColor" type="color" value="#ffffff" style="background-color: rgb(238, 238, 238); color: rgb(17, 17, 17);"></span><i id="widget-textColor-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 0.2;"></i></li><li class="red-ui-dashboard-theme-item"><span>Widget Colour</span><span class="nr-db-color-pick-container"><input id="widget-backgroundColor" class="nr-db-field-themeColor" type="color" value="#ffffff" style="background-color: rgb(9, 116, 121); color: rgb(238, 238, 238);"></span><i id="widget-backgroundColor-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 0.2;"></i></li><li class="red-ui-dashboard-theme-item"><span>Widget Background</span><span class="nr-db-color-pick-container"><input id="widget-borderColor" class="nr-db-field-themeColor" type="color" value="#ffffff" style="background-color: rgb(51, 51, 51); color: rgb(238, 238, 238);"></span><i id="widget-borderColor-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 0.2;"></i></li></ul></div></div><div id="dashboard-angular" style="display:none;"><div class="form-row"><span style="width:45%; display:inline-block"><b>Primary</b></span><i id="ang-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 1;"></i><select id="nr-db-field-angPrimary" style="width: 100%;"><option value="red">red</option><option value="pink">pink</option><option value="purple">purple</option><option value="deep-purple">deep-purple</option><option value="indigo">indigo</option><option value="blue">blue</option><option value="light-blue">light-blue</option><option value="cyan">cyan</option><option value="teal">teal</option><option value="green">green</option><option value="light-green">light-green</option><option value="lime">lime</option><option value="yellow">yellow</option><option value="amber">amber</option><option value="orange">orange</option><option value="deep-orange">deep-orange</option><option value="brown">brown</option><option value="grey">grey</option><option value="blue-grey">blue-grey</option></select></div><div class="form-row"><span style="width:45%; display:inline-block"><b>Accents</b></span><i id="ang-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 1;"></i><select id="nr-db-field-angAccents" style="width: 100%;"><option value="red">red</option><option value="pink">pink</option><option value="purple">purple</option><option value="deep-purple">deep-purple</option><option value="indigo">indigo</option><option value="blue">blue</option><option value="light-blue">light-blue</option><option value="cyan">cyan</option><option value="teal">teal</option><option value="green">green</option><option value="light-green">light-green</option><option value="lime">lime</option><option value="yellow">yellow</option><option value="amber">amber</option><option value="orange">orange</option><option value="deep-orange">deep-orange</option><option value="brown">brown</option><option value="grey">grey</option><option value="blue-grey">blue-grey</option></select></div><div class="form-row"><span style="width:45%; display:inline-block"><b>Warnings</b></span><i id="ang-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 1;"></i><select id="nr-db-field-angWarn" style="width: 100%;"><option value="red">red</option><option value="pink">pink</option><option value="purple">purple</option><option value="deep-purple">deep-purple</option><option value="indigo">indigo</option><option value="blue">blue</option><option value="light-blue">light-blue</option><option value="cyan">cyan</option><option value="teal">teal</option><option value="green">green</option><option value="light-green">light-green</option><option value="lime">lime</option><option value="yellow">yellow</option><option value="amber">amber</option><option value="orange">orange</option><option value="deep-orange">deep-orange</option><option value="brown">brown</option><option value="grey">grey</option><option value="blue-grey">blue-grey</option></select></div><div class="form-row"><span style="width:45%; display:inline-block"><b>Background</b></span><i id="ang-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 1;"></i><select id="nr-db-field-angBackground" style="width: 100%;"><option value="red">red</option><option value="pink">pink</option><option value="purple">purple</option><option value="deep-purple">deep-purple</option><option value="indigo">indigo</option><option value="blue">blue</option><option value="light-blue">light-blue</option><option value="cyan">cyan</option><option value="teal">teal</option><option value="green">green</option><option value="light-green">light-green</option><option value="lime">lime</option><option value="yellow">yellow</option><option value="amber">amber</option><option value="orange">orange</option><option value="deep-orange">deep-orange</option><option value="brown">brown</option><option value="grey">grey</option><option value="blue-grey">blue-grey</option></select></div><div class="form-row"><span style="width:45%; display:inline-block"><b>Light / Dark</b></span><select id="nr-db-field-angLook" style="width: 100%;"><option value="light">Light (default)</option><option value="dark">Dark</option></select></div></div></form></div></div><div class="red-ui-sidebar-shade hide" style="display: none;"></div></div></div><div id="red-ui-sidebar-footer" class="red-ui-component-footer"><div style="display: none;"><a class="red-ui-footer-button" id="red-ui-sidebar-config-collapse-all" href="http://localhost:1880/#"><i class="fa fa-angle-double-up"></i></a> <a class="red-ui-footer-button" id="red-ui-sidebar-config-expand-all" href="http://localhost:1880/#"><i class="fa fa-angle-double-down"></i></a></div><div style="display: none;"></div><div style="display: none;"><span class="button-group"><a id="red-ui-sidebar-debug-open" class="red-ui-footer-button" href="http://localhost:1880/#"><i class="fa fa-desktop"></i></a></span> </div></div><div id="red-ui-sidebar-shade" class="hide" style="display: none;"></div></div><div id="red-ui-sidebar-separator" class="ui-draggable ui-draggable-handle"><div class="red-ui-sidebar-control-right" style="display: none;"><i class="fa fa-chevron-right" <="" div=""></i></div></div><div id="red-ui-loading-progress" style="display: none;"><div><div class="red-ui-loading-bar-label"></div><div class="red-ui-loading-bar"><span style="width: 0%;"></span></div></div></div></div><div id="red-ui-editor-plugin-configs"><div></div></div><div id="red-ui-editor-node-configs"><script type="text/x-red" data-template-name="_eventLog"><div class="form-row node-text-editor-row"><div style="height: 100%;min-height: 150px;" class="node-text-editor" id="red-ui-event-log-editor"></div></div></script><script type="text/x-red" data-template-name="subflow"><div class="form-row"><label for="node-input-name" data-i18n="[append]editor:common.label.name"><i class="fa fa-tag"></i> </label><input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name"></div><div id="subflow-input-ui"></div></script><script type="text/x-red" data-template-name="subflow-template"><div class="form-row"><label for="subflow-input-name" data-i18n="[append]common.label.name"><i class="fa fa-tag"></i>  </label><input type="text" id="subflow-input-name" data-i18n="[placeholder]common.label.name"></div><div class="form-row"><ul style="margin-bottom: 20px;" id="subflow-env-tabs"></ul></div><div id="subflow-env-tabs-content"><div id="subflow-env-tab-edit"><div class="form-row node-input-env-container-row" id="subflow-input-edit-ui"><ol id="node-input-env-container"></ol><div class="node-input-env-locales-row"><i class="fa fa-language"></i> <select id="subflow-input-env-locale"></select></div></div></div><div id="subflow-env-tab-preview"><div id="subflow-input-ui"/></div></div></script><script type="text/x-red" data-template-name="group"><div class="form-row"><label for="node-input-name" data-i18n="[append]editor:common.label.name"><i class="fa fa-tag"></i> </label><input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name"></div><div class="form-row" id="node-input-row-style-stroke"><label data-i18n="editor:common.label.style"></label><label style="width: 70px;margin-right:10px" for="node-input-style-stroke" data-i18n="editor:common.label.line"></label></div><div class="form-row" style="padding-left: 100px;" id="node-input-row-style-fill"><label style="width: 70px;margin-right: 10px "  for="node-input-style-fill" data-i18n="editor:common.label.fill"></label></div><div class="form-row"><label for="node-input-style-label" data-i18n="editor:common.label.label"></label><input type="checkbox" id="node-input-style-label"/></div><div class="form-row" id="node-input-row-style-label-options"><div style="margin-left: 100px; display: inline-block"><div class="form-row"><span style="display: inline-block; min-width: 140px"  id="node-input-row-style-label-color"><label style="width: 70px;margin-right: 10px" for="node-input-style-fill" data-i18n="editor:common.label.color"></label></span></div><div class="form-row"><span style="display: inline-block; min-width: 140px;" id="node-input-row-style-label-position"><label style="width: 70px;margin-right: 10px " for="node-input-style-label-position" data-i18n="editor:common.label.position"></label></span></div></div></div></script><div><!-- --- [red-module:node-red/junction] --- -->
<!--
  05-junction.html
  This file exists so that the runtime loads the Junction node into the registry,
  but it is empty so it doesn't appear in the editor palette
-->

</div><div><!-- --- [red-module:node-red/inject] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="inject">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>

    <div class="form-row node-input-property-container-row">
        <ol id="node-input-property-container"></ol>
    </div>

    <div class="form-row" id="node-once">
        <label for="node-input-once">&nbsp;</label>
        <input type="checkbox" id="node-input-once" style="display:inline-block; width:15px; vertical-align:baseline;">
        <span data-i18n="inject.onstart"></span>&nbsp;
        <input type="text" id="node-input-onceDelay" placeholder="0.1" style="width:45px; height:28px;">&nbsp;
        <span data-i18n="inject.onceDelay"></span>
    </div>

    <div class="form-row">
        <label for=""><i class="fa fa-repeat"></i> <span data-i18n="inject.label.repeat"></span></label>
        <select id="inject-time-type-select">
            <option value="none" data-i18n="inject.none"></option>
            <option value="interval" data-i18n="inject.interval"></option>
            <option value="interval-time" data-i18n="inject.interval-time"></option>
            <option value="time" data-i18n="inject.time"></option>
        </select>
        <input type="hidden" id="node-input-repeat">
        <input type="hidden" id="node-input-crontab">
    </div>

    <div class="form-row inject-time-row hidden" id="inject-time-row-interval">
        <span data-i18n="inject.every"></span>
        <input id="inject-time-interval-count" class="inject-time-count" value="1"></input>
        <select style="width:100px" id="inject-time-interval-units">
            <option value="s" data-i18n="inject.seconds"></option>
            <option value="m" data-i18n="inject.minutes"></option>
            <option value="h" data-i18n="inject.hours"></option>
        </select><br/>
    </div>

    <div class="form-row inject-time-row hidden" id="inject-time-row-interval-time">
        <span data-i18n="inject.every"></span> <select style="width:90px; margin-left:20px;" id="inject-time-interval-time-units" class="inject-time-int-count" value="1">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="10">10</option>
            <option value="12">12</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="30">30</option>
            <option value="0">60</option>
        </select> <span data-i18n="inject.minutes"></span><br/>
        <span data-i18n="inject.between"></span> <select id="inject-time-interval-time-start" class="inject-time-times"></select>
        <span data-i18n="inject.and"></span> <select id="inject-time-interval-time-end" class="inject-time-times"></select><br/>
        <div id="inject-time-interval-time-days" class="inject-time-days" style="margin-top:5px">
            <div style="display:inline-block; vertical-align:top; margin-right:5px;" data-i18n="inject.on">on</div>
            <div style="display:inline-block;">
                <div>
                    <label><input type='checkbox' checked value='1'/> <span data-i18n="inject.days.0"></span></label>
                    <label><input type='checkbox' checked value='2'/> <span data-i18n="inject.days.1"></span></label>
                    <label><input type='checkbox' checked value='3'/> <span data-i18n="inject.days.2"></span></label>
                </div>
                <div>
                    <label><input type='checkbox' checked value='4'/> <span data-i18n="inject.days.3"></span></label>
                    <label><input type='checkbox' checked value='5'/> <span data-i18n="inject.days.4"></span></label>
                    <label><input type='checkbox' checked value='6'/> <span data-i18n="inject.days.5"></span></label>
                </div>
                <div>
                    <label><input type='checkbox' checked value='0'/> <span data-i18n="inject.days.6"></span></label>
                </div>
            </div>
        </div>
    </div>

    <div class="form-row inject-time-row hidden" id="inject-time-row-time">
        <span data-i18n="inject.at"></span> <input type="text" id="inject-time-time" value="12:00"></input><br/>
        <div id="inject-time-time-days" class="inject-time-days">
            <div style="display:inline-block; vertical-align:top; margin-right:5px;" data-i18n="inject.on"></div>
            <div style="display:inline-block;">
                <div>
                    <label><input type='checkbox' checked value='1'/> <span data-i18n="inject.days.0"></span></label>
                    <label><input type='checkbox' checked value='2'/> <span data-i18n="inject.days.1"></span></label>
                    <label><input type='checkbox' checked value='3'/> <span data-i18n="inject.days.2"></span></label>
                </div>
                <div>
                    <label><input type='checkbox' checked value='4'/> <span data-i18n="inject.days.3"></span></label>
                    <label><input type='checkbox' checked value='5'/> <span data-i18n="inject.days.4"></span></label>
                    <label><input type='checkbox' checked value='6'/> <span data-i18n="inject.days.5"></span></label>
                </div>
                <div>
                    <label><input type='checkbox' checked value='0'/> <span data-i18n="inject.days.6"></span></label>
                </div>
            </div>
        </div>
    </div>

</script>
<style>
    .inject-time-row {
        padding-left: 110px;
    }
    .inject-time-row:not(#inject-time-row-interval) select {
        margin: 3px 0;
    }
    .inject-time-days label {
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        vertical-align: baseline;
        width: 100px;
    }
    .inject-time-days input {
        width: auto !important;
        vertical-align: baseline !important;
    }
    .inject-time-times {
        width: 90px !important;
    }
    #inject-time-time {
        width: 75px;
        margin-left: 8px;
        margin-bottom: 8px;
    }
    .inject-time-count {
        padding-left: 3px !important;
        width: 80px !important;
    }
</style>

<script type="text/javascript">
(function() {

    function resizeDialog(size) {
        size = size || { height: $(".red-ui-tray-content form").height() }
        var rows = $("#dialog-form>div:not(.node-input-property-container-row):visible");
        var height = size.height;
        for (var i=0; i<rows.length; i++) {
            height -= $(rows[i]).outerHeight(true);
        }
        var editorRow = $("#dialog-form>div.node-input-property-container-row");
        height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));
        height += 16;
        $("#node-input-property-container").editableList('height',height);
    }
    /** Retrieve editableList items (refactored for re-use in the form inject button)*/
    function getProps(el, legacy) {
        var result = {
            props: []
        }
        el.each(function(i) {
            var prop = $(this);
            var p = {
                p:prop.find(".node-input-prop-property-name").typedInput('value')
            };
            if (p.p) {
                p.v = prop.find(".node-input-prop-property-value").typedInput('value');
                p.vt = prop.find(".node-input-prop-property-value").typedInput('type');
                if(legacy) {
                    if (p.p === "payload") { // save payload to old "legacy" property
                        result.payloadType = p.vt;
                        result.payload = p.v;
                        delete p.v;
                        delete p.vt;
                    } else if (p.p === "topic" && p.vt === "str") {
                        result.topic = p.v;
                        delete p.v;
                    }
                }
                result.props.push(p);
            }
        });
        return result;
    }
    /** Perform inject, optionally sending a custom msg (refactored for re-use in the form inject button)*/
    function doInject(node, customMsg) {
        var label = node._def.label.call(node,customMsg?customMsg.__user_inject_props__:undefined);
        if (label.length > 30) {
            label = label.substring(0, 50) + "...";
        }
        label = label.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
        $.ajax({
            url: "inject/" + node.id,
            type: "POST",
            data: JSON.stringify(customMsg||{}),
            contentType: "application/json; charset=utf-8",
            success: function (resp) {
                RED.notify(node._("inject.success", { label: label }), { type: "success", id: "inject", timeout: 2000 });
            },
            error: function (jqXHR, textStatus, errorThrown) {
                if (jqXHR.status == 404) {
                    RED.notify(node._("common.notification.error", { message: node._("common.notification.errors.not-deployed") }), "error");
                } else if (jqXHR.status == 500) {
                    RED.notify(node._("common.notification.error", { message: node._("inject.errors.failed") }), "error");
                } else if (jqXHR.status == 0) {
                    RED.notify(node._("common.notification.error", { message: node._("common.notification.errors.no-response") }), "error");
                } else {
                    RED.notify(node._("common.notification.error", { message: node._("common.notification.errors.unexpected", { status: jqXHR.status, message: textStatus }) }), "error");
                }
            }
        });
    }
    RED.nodes.registerType('inject',{  
        category: 'common',
        color:"#a6bbcf",
        defaults: {
            name: {value:""},
            props:{value:[{p:"payload"},{p:"topic",vt:"str"}], validate:function(v, opt) {
                    if (!v || v.length === 0) { return true }
                    for (var i=0;i<v.length;i++) {
                        if (/msg|flow|global/.test(v[i].vt)) {
                            if (!RED.utils.validatePropertyExpression(v[i].v)) {
                                return RED._("node-red:inject.errors.invalid-prop", { prop: 'msg.'+v[i].p, error: v[i].v });
                            }
                        } else if (v[i].vt === "jsonata") {
                            try{ jsonata(v[i].v); }
                            catch(e){
                                return RED._("node-red:inject.errors.invalid-jsonata", { prop: 'msg.'+v[i].p, error: e.message });
                            }
                        } else if (v[i].vt === "json") {
                            try{ JSON.parse(v[i].v); }
                            catch(e){
                                return RED._("node-red:inject.errors.invalid-json", { prop: 'msg.'+v[i].p, error: e.message });
                            }
                        } else if (v[i].vt === "num"){
                            if (!/^[+-]?[0-9]*\.?[0-9]*([eE][-+]?[0-9]+)?$/.test(v[i].v)) {
                                return RED._("node-red:inject.errors.invalid-prop", { prop: 'msg.'+v[i].p, error: v[i].v });
                            }
                        }
                    }
                    return true;
                }
            },
            repeat: {
                value:"", validate: function(v, opt) {
                    if ((v === "") ||
                        (RED.validators.number(v) &&
                         (v >= 0) && (v <= 2147483))) {
                        return true;
                    }
                    return RED._("node-red:inject.errors.invalid-repeat");
                }
            },
            crontab: {value:""},
            once: {value:false},
            onceDelay: {value:0.1},
            topic: {value:""},
            payload: {value:"", validate: RED.validators.typedInput("payloadType", false) },
            payloadType: {value:"date"},
        },
        icon: "inject.svg",
        inputs:0,
        outputs:1,
        outputLabels: function(index) {
            var lab = '';

            // if only payload and topic - display payload type
            // if only one property - show it's type
            // if more than one property (other than payload and topic) - show "x properties" where x is the number of properties.
            // this.props will not be an array for legacy inject nodes until they are re-deployed
            //
            var props = this.props;
            if (!Array.isArray(props)) {
                props = [
                    { p:"payload", v: this.payload, vt: this.payloadType },
                    { p:"topic", v: this.topic, vt: "str" }
                ]
            }
            if (props) {
                for (var i=0,l=props.length; i<l; i++) {
                    if (i > 0) lab += "\n";
                    if (i === 5) {
                        lab += "... +"+(props.length-5);
                        break;
                    }
                    lab += props[i].p+": ";

                    var propType = props[i].p === "payload"? this.payloadType : props[i].vt;
                    if (propType === "json") {
                        try {
                            var parsedProp = JSON.parse(props[i].p === "payload"? this.payload : props[i].v);
                            propType = typeof parsedProp;
                            if (propType === "object" && Array.isArray(parsedProp)) {
                                propType = "Array";
                            }
                        } catch(e) {
                            propType = "invalid";
                        }
                    }
                    lab += this._("inject.label."+propType);
                }
            }
            return lab;
        },
        label: function(customProps) {
            var suffix = "";
            // if fire once then add small indication
            if (this.once) {
                suffix = " ¹";
            }
            // but replace with repeat one if set to repeat
            if ((this.repeat && this.repeat != 0) || this.crontab) {
                suffix = "\t↻";
            }
            if (this.name) {
                return this.name+suffix;
            }
            var payload = "";
            var payloadType = "str";
            var topic = "";
            if (customProps) {
                for (var i=0;i<customProps.length;i++) {
                    if (customProps[i].p === "payload") {
                        payload = customProps[i].v;
                        payloadType = customProps[i].vt;
                    } else if (customProps[i].p === "topic") {
                        topic = customProps[i].v;
                    }
                }
            } else {
                payload = this.payload || "";
                payloadType = this.payloadType || "str";
                topic = this.topic || "";
            }
            if (payloadType === "string" ||
                    payloadType === "str" ||
                    payloadType === "num" ||
                    payloadType === "bool" ||
                    payloadType === "json") {
                if ((topic !== "") && ((topic.length + payload.length) <= 32)) {
                    return topic + ":" + payload+suffix;
                } else if (payload.length > 0 && payload.length < 24) {
                    return payload+suffix;
                } else {
                    return this._("inject.inject")+suffix;
                }
            } else if (payloadType === 'date' || payloadType === 'bin' || payloadType === 'env') {
                if ((topic !== "") && (topic.length <= 16)) {
                    return topic + ":" + this._('inject.label.'+payloadType)+suffix;
                } else {
                    return this._('inject.label.'+payloadType)+suffix;
                }
            } else if (payloadType === 'flow' || payloadType === 'global') {
                var key = RED.utils.parseContextKey(payload);
                return payloadType+"."+key.key+suffix;
            } else {
                return this._("inject.inject")+suffix;
            }
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var node = this;
            var payloadType = node.payloadType;

            if (node.payloadType == null) {
                if (node.payload == "") {
                    payloadType = "date";
                } else {
                    payloadType = "str";
                }
            } else if (node.payloadType === 'string' || node.payloadType === 'none') {
                payloadType = "str";
            }

            $("#inject-time-type-select").on("change", function() {
                $("#node-input-crontab").val('');
                var id = $("#inject-time-type-select").val();
                $(".inject-time-row").hide();
                $("#inject-time-row-"+id).show();

                // Scroll down
                var scrollDiv = $("#dialog-form").parent();
                scrollDiv.scrollTop(scrollDiv.prop('scrollHeight'));
                resizeDialog();
            });

            $("#node-input-once").on("change", function() {
                $("#node-input-onceDelay").attr('disabled', !$("#node-input-once").prop('checked'));
            })

            $(".inject-time-times").each(function() {
                for (var i=0; i<24; i++) {
                    var l = (i<10?"0":"")+i+":00";
                    $(this).append($("<option></option>").val(i).text(l));
                }
            });
            $("<option></option>").val(24).text("00:00").appendTo("#inject-time-interval-time-end");
            $("#inject-time-interval-time-start").on("change", function() {
                var start = Number($("#inject-time-interval-time-start").val());
                var end = Number($("#inject-time-interval-time-end").val());
                $("#inject-time-interval-time-end option").remove();
                for (var i=start+1; i<25; i++) {
                    var l = (i<10?"0":"")+i+":00";
                    if (i==24) {
                        l = "00:00";
                    }
                    var opt = $("<option></option>").val(i).text(l).appendTo("#inject-time-interval-time-end");
                    if (i === end) {
                        opt.attr("selected","selected");
                    }
                }
            });

            $(".inject-time-count").spinner({
                //max:60,
                min:1
            });

            var repeattype = "none";
            if (node.repeat != "" && node.repeat != 0) {
                repeattype = "interval";
                var r = "s";
                var c = node.repeat;
                if (node.repeat % 60 === 0) { r = "m"; c = c/60; }
                if (node.repeat % 1440 === 0) { r = "h"; c = c/60; }
                $("#inject-time-interval-count").val(c);
                $("#inject-time-interval-units").val(r);
                $("#inject-time-interval-days").prop("disabled","disabled");
            } else if (node.crontab) {
                var cronparts = node.crontab.split(" ");
                var days = cronparts[4];
                if (!isNaN(cronparts[0]) && !isNaN(cronparts[1])) {
                    repeattype = "time";
                    // Fixed time
                    var time = cronparts[1]+":"+cronparts[0];
                    $("#inject-time-time").val(time);
                    $("#inject-time-type-select").val("s");
                    if (days == "*") {
                        $("#inject-time-time-days input[type=checkbox]").prop("checked",true);
                    } else {
                        $("#inject-time-time-days input[type=checkbox]").removeAttr("checked");
                        days.split(",").forEach(function(v) {
                            $("#inject-time-time-days [value=" + v + "]").prop("checked", true);
                        });
                    }
                } else {
                    repeattype = "interval-time";
                    // interval - time period
                    var minutes = cronparts[0].slice(2);
                    if (minutes === "") { minutes = "0"; }
                    $("#inject-time-interval-time-units").val(minutes);
                    if (days == "*") {
                        $("#inject-time-interval-time-days input[type=checkbox]").prop("checked",true);
                    } else {
                        $("#inject-time-interval-time-days input[type=checkbox]").removeAttr("checked");
                        days.split(",").forEach(function(v) {
                            $("#inject-time-interval-time-days [value=" + v + "]").prop("checked", true);
                        });
                    }
                    var time = cronparts[1];
                    var timeparts = time.split(",");
                    var start;
                    var end;
                    if (timeparts.length == 1) {
                        // 0 or 0-10
                        var hours = timeparts[0].split("-");
                        if (hours.length == 1) {
                            if (hours[0] === "") {
                                start = "0";
                                end = "0";
                            }
                            else {
                                start = hours[0];
                                end = Number(hours[0])+1;
                            }
                        } else {
                            start = hours[0];
                            end = Number(hours[1])+1;
                        }
                    } else {
                        // 23,0 or 17-23,0-10 or 23,0-2 or 17-23,0
                        var startparts = timeparts[0].split("-");
                        start = startparts[0];

                        var endparts = timeparts[1].split("-");
                        if (endparts.length == 1) {
                            end = Number(endparts[0])+1;
                        } else {
                            end = Number(endparts[1])+1;
                        }
                    }
                    $("#inject-time-interval-time-end").val(end);
                    $("#inject-time-interval-time-start").val(start);

                }
            } else {
                $("#inject-time-type-select").val("none");
            }

            $(".inject-time-row").hide();
            $("#inject-time-type-select").val(repeattype);
            $("#inject-time-row-"+repeattype).show();

            /* */

            var eList = $('#node-input-property-container').css('min-height','120px').css('min-width','450px');

            eList.editableList({
                buttons: [
                    {
                        id: "node-inject-test-inject-button",
                        label: node._("inject.injectNow"),
                        click: function(e) {
                            var items = eList.editableList('items');
                            var props = getProps(items);
                            var m = {__user_inject_props__: props.props};
                            doInject(node, m);
                        }
                    }
                ],
                addItem: function(container,i,opt) {
                    var prop = opt;
                    if (!prop.hasOwnProperty('p')) {
                        prop = {p:"",v:"",vt:"str"};
                    }
                    container.css({
                        overflow: 'hidden',
                        whiteSpace: 'nowrap'
                    });
                    var row = $('<div/>').appendTo(container);

                    var propertyName = $('<input/>',{class:"node-input-prop-property-name",type:"text"})
                        .css("width","30%")
                        .appendTo(row)
                        .typedInput({types:['msg']});

                    $('<div/>',{style: 'display:inline-block; padding:0px 6px;'})
                        .text('=')
                        .appendTo(row);

                    var propertyValue = $('<input/>',{class:"node-input-prop-property-value",type:"text"})
                        .css("width","calc(70% - 30px)")
                        .appendTo(row)
                        .typedInput({default:prop.vt || 'str',types:['flow','global','str','num','bool','json','bin','date','jsonata','env','msg']});

                    propertyName.typedInput('value',prop.p);
                    propertyValue.typedInput('value',prop.v);
                },
                removable: true,
                sortable: true
            });
            $('#node-inject-test-inject-button').css("float", "right").css("margin-right", "unset");

            if (RED.nodes.subflow(node.z)) {
                $('#node-inject-test-inject-button').attr("disabled",true);
            }

            if (!node.props) {
                var payload = {
                    p:'payload',
                    v: node.payload ? node.payload : '',
                    vt:payloadType ? payloadType : 'date'
                };
                var topic = {
                    p:'topic',
                    v: node.topic ? node.topic : '',
                    vt:'str'
                }
                node.props = [payload,topic];
            }

            for (var i=0; i<node.props.length; i++) {
                var prop = node.props[i];
                var newProp = { p: prop.p, v: prop.v, vt: prop.vt };
                if (newProp.v === undefined) {
                    if (prop.p === 'payload') {
                        newProp.v = node.payload ? node.payload : '';
                        newProp.vt = payloadType ? payloadType : 'date';
                    } else if (prop.p === 'topic' && prop.vt === "str") {
                        newProp.v =  node.topic ? node.topic : '';
                    }
                }
                if (newProp.vt === "string") {
                    // Fix bug in pre 2.1 where an old Inject node might have
                    // a migrated rule with type 'string' not 'str'
                    newProp.vt = "str";
                }
                eList.editableList('addItem',newProp);
            }

            $("#inject-time-type-select").trigger("change");
            $("#inject-time-interval-time-start").trigger("change");

        },
        oneditsave: function() {
            var repeat = "";
            var crontab = "";
            var type = $("#inject-time-type-select").val();
            if (type == "none") {
                // nothing
            } else if (type == "interval") {
                var count = $("#inject-time-interval-count").val();
                var units = $("#inject-time-interval-units").val();
                if (units == "s") {
                    repeat = count;
                } else {
                    if (units == "m") {
                        //crontab = "*/"+count+" * * * "+days;
                        repeat = count * 60;
                    } else if (units == "h") {
                        //crontab = "0 */"+count+" * * "+days;
                        repeat = count * 60 * 60;
                    }
                }
            } else if (type == "interval-time") {
                repeat = "";
                var count = $("#inject-time-interval-time-units").val();
                var startTime = Number($("#inject-time-interval-time-start").val());
                var endTime = Number($("#inject-time-interval-time-end").val());
                var days = $('#inject-time-interval-time-days input[type=checkbox]:checked').map(function(_, el) {
                    return $(el).val()
                }).get();
                if (days.length == 0) {
                    crontab = "";
                } else {
                    if (days.length == 7) {
                        days="*";
                    } else {
                        days = days.join(",");
                    }
                    var timerange = "";
                    if (endTime == 0) {
                        timerange = startTime+"-23";
                    } else if (startTime+1 < endTime) {
                        timerange = startTime+"-"+(endTime-1);
                    } else if (startTime+1 == endTime) {
                        timerange = startTime;
                    } else {
                        var startpart = "";
                        var endpart = "";
                        if (startTime == 23) {
                            startpart = "23";
                        } else {
                            startpart = startTime+"-23";
                        }
                        if (endTime == 1) {
                            endpart = "0";
                        } else {
                            endpart = "0-"+(endTime-1);
                        }
                        timerange = startpart+","+endpart;
                    }
                    if (count === "0") {
                        crontab = count+" "+timerange+" * * "+days;
                    } else {
                        crontab = "*/"+count+" "+timerange+" * * "+days;
                    }
                }
            } else if (type == "time") {
                var time = $("#inject-time-time").val();
                var days = $('#inject-time-time-days  input[type=checkbox]:checked').map(function(_, el) {
                    return $(el).val()
                }).get();
                if (days.length == 0) {
                    crontab = "";
                } else {
                    if (days.length == 7) {
                        days="*";
                    } else {
                        days = days.join(",");
                    }
                    var parts = time.split(":");
                    if (parts.length === 2) {
                        repeat = "";
                        parts[1] = ("00" + (parseInt(parts[1]) % 60)).substr(-2);
                        parts[0] = ("00" + (parseInt(parts[0]) % 24)).substr(-2);
                        crontab = parts[1]+" "+parts[0]+" * * "+days;
                    }
                    else { crontab = ""; }
                }
            }

            $("#node-input-repeat").val(repeat);
            $("#node-input-crontab").val(crontab);

            /* Gather the properties */
            var items = $("#node-input-property-container").editableList('items');
            delete this.payloadType;
            delete this.payload;
            this.topic = "";
            var result = getProps(items, true);
            this.props = result.props;
            if(result.hasOwnProperty('payloadType')) { this.payloadType = result.payloadType; };
            if(result.hasOwnProperty('payload')) { this.payload = result.payload; };
            if(result.hasOwnProperty('topic')) { this.topic = result.topic; };
        },
        button: {
            enabled: function() {
                return !this.changed
            },
            onclick: function () {
                if (this.changed) {
                    return RED.notify(RED._("notification.warning", { message: RED._("notification.warnings.undeployedChanges") }), "warning");
                }
                doInject(this);
            }
        },
        oneditresize: resizeDialog
    });
})();
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="inject">
<p>Injects a message into a flow either manually or at regular intervals. The message
payload can be a variety of types, including strings, JavaScript objects or the current time.</p>
<h3>Outputs</h3>
<dl class="message-properties">
    <dt>payload<span class="property-type">various</span></dt>
    <dd>The configured payload of the message.</dd>
    <dt class="optional">topic <span class="property-type">string</span></dt>
    <dd>An optional property that can be configured in the node.</dd>
</dl>
<h3>Details</h3>
<p>The Inject node can initiate a flow with a specific payload value.
The default payload is a timestamp of the current time in millisecs since January 1st, 1970.</p>
<p>The node also supports injecting strings, numbers, booleans, JavaScript objects, or flow/global context values.</p>
<p>By default, the node is triggered manually by clicking on its button within the editor. It can also be set to
inject at regular intervals or according to a schedule.</p>
<p>It can also be configured to inject once each time the flows are started.</p>
<p>The maximum <i>Interval</i> that can be specified is about 596 hours / 24 days. However if you are looking at intervals
greater than one day you should consider using a scheduler node that can cope with power outages and restarts.</p>
<p><b>Note</b>: The <i>"Interval between times"</i> and <i>"at a specific time"</i> options use the standard cron system.
This means that 20 minutes will be at the next hour, 20 minutes past and 40 minutes past - not in 20 minutes time.
If you want every 20 minutes from now - use the <i>"interval"</i> option.</p>
<p><b>Note</b>: To include a newline in a string you must use the Function or Template node to create the payload.</p>
</script>

</div><script src="./Node-RED _ maindashboard_files/debug-utils.js"></script><div><!-- --- [red-module:node-red/debug] --- -->

<script type="text/html" data-template-name="debug">
    <div class="form-row">
        <label for="node-input-typed-complete"><i class="fa fa-list"></i> <span data-i18n="debug.output"></span></label>
        <input id="node-input-typed-complete" type="text" style="width: 70%">
        <input id="node-input-complete" type="hidden">
        <input id="node-input-targetType" type="hidden">
    </div>
    <div class="form-row">
        <label for="node-input-tosidebar"><i class="fa fa-random"></i> <span data-i18n="debug.to"></span></label>
        <label for="node-input-tosidebar" style="width:70%">
        <input type="checkbox" id="node-input-tosidebar" style="display:inline-block; width:22px; vertical-align:top;"><span data-i18n="debug.toSidebar"></span>
        </label>
    </div>
    <div class="form-row">
        <label for="node-input-console"> </label>
        <label for="node-input-console" style="width:70%">
        <input type="checkbox" id="node-input-console" style="display:inline-block; width:22px; vertical-align:top;"><span data-i18n="debug.toConsole"></span>
        </label>
    </div>
    <div class="form-row">
    <label for="node-input-tostatus"> </label>
    <label for="node-input-tostatus" style="width:70%">
        <input type="checkbox" id="node-input-tostatus" style="display:inline-block; width:22px; vertical-align:top;"><span data-i18n="debug.toStatus"></span>
    </label>
    </div>
    <div class="form-row" id="node-tostatus-line">
        <label for="node-input-typed-status"></label>
        <input id="node-input-typed-status" type="text" style="width: 70%">
        <input id="node-input-statusVal" type="hidden">
        <input id="node-input-statusType" type="hidden">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>



<script type="text/javascript">
(function() {
    var subWindow = null;

    function activateAjaxCall(node, active, successCallback) {
        var url;
        var body;

        if (Array.isArray(node)) {
            url = "debug/"+(active?"enable":"disable");
            body = {nodes: node.map(function(n) { return n.id})}
            node = node[0];
        } else {
            url = "debug/"+node.id+"/"+(active?"enable":"disable");
        }
        $.ajax({
            url: url,
            type: "POST",
            data: body,
            success: successCallback,
            error: function(jqXHR,textStatus,errorThrown) {
                if (jqXHR.status == 404) {
                    RED.notify(node._("common.notification.error", {message: node._("common.notification.errors.not-deployed")}),"error");
                } else if (jqXHR.status === 0) {
                    RED.notify(node._("common.notification.error", {message: node._("common.notification.errors.no-response")}),"error");
                } else {
                    // TODO where is the err.status comming from?
                    RED.notify(node._("common.notification.error",{message:node._("common.notification.errors.unexpected",{status:err.status,message:err.response})}),"error");
                }
            }
        });
    }

    RED.nodes.registerType('debug',{
        category: 'common',
        defaults: {
            name: {value:"_DEFAULT_"},
            active: {value:true},
            tosidebar: {value:true},
            console: {value:false},
            tostatus: {value:false},
            complete: {value:"false", required:true},
            targetType: {value:undefined},
            statusVal: {value:""},
            statusType: {value:"auto"}
        },
        label: function() {
            var suffix = "";
            if (this.console === true || this.console === "true") { suffix = "\t⇲"; }
            if (this.targetType === "jsonata") {
                return (this.name || "JSONata") + suffix;
            }
            if (this.complete === true || this.complete === "true") {
                return (this.name||"msg") + suffix;
            } else {
                return (this.name || "msg." + ((!this.complete || this.complete === "false") ? "payload" : this.complete)) + suffix;
            }
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        color:"#87a980",
        inputs:1,
        outputs:0,
        icon: "debug.svg",
        align: "right",
        button: {
            toggle: "active",
            visible: function() { return this.tosidebar; },
            onclick: function() {
                var label = RED.utils.sanitize(this.name||"debug");
                var node = this;
                activateAjaxCall(node, node.active, function(resp, textStatus, xhr) {
                    var historyEvent = {
                        t:'edit',
                        node:node,
                        changes:{
                            active:!node.active
                        },
                        dirty:node.dirty,
                        changed:node.changed,
                        callback: function(ev) {
                            activateAjaxCall(ev.node, ev.node.active);
                        }
                    };
                    node.changed = true;
                    node.dirty = true;
                    RED.nodes.dirty(true);
                    RED.history.push(historyEvent);
                    RED.view.redraw();
                    if (xhr.status == 200) {
                        RED.notify(node._("debug.notification.activated",{label:label}),{type: "success", timeout: 2000});
                    } else if (xhr.status == 201) {
                        RED.notify(node._("debug.notification.deactivated",{label:label}),{type: "success", timeout: 2000});
                    }
                });
            }
        },
        onpaletteadd: function() {
            var options = {
                messageMouseEnter: function(sourceId) {
                    if (sourceId) {
                        var n = RED.nodes.node(sourceId);
                        if (n) {
                            n.highlighted = true;
                            n.dirty = true;
                        }
                        RED.view.redraw();
                    }
                },
                messageMouseLeave: function(sourceId) {
                    if (sourceId) {
                        var n = RED.nodes.node(sourceId);
                        if (n) {
                            n.highlighted = false;
                            n.dirty = true;
                        }
                        RED.view.redraw();
                    }
                },
                messageSourceClick: function(sourceId, aliasId, path) {
                    // Get all of the nodes that could have logged this message
                    if (RED.nodes.workspace(sourceId)) {
                        RED.view.reveal(sourceId);
                        return
                    }
                    var candidateNodes = [RED.nodes.node(sourceId)]
                    if (path) {
                        for (var i=2;i<path.length;i++) {
                            candidateNodes.push(RED.nodes.node(path[i]))
                        }
                    }
                    if (aliasId) {
                        candidateNodes.push(RED.nodes.node(aliasId));
                    }
                    if (candidateNodes.length > 1) {
                        // The node is in a subflow. Check to see if the active
                        // workspace is a subflow in the node's parentage. If
                        // so, reveal the relevant subflow instance node.
                        var ws = RED.workspaces.active();
                        for (var i=0;i<candidateNodes.length;i++) {
                            if (candidateNodes[i].z === ws) {
                                RED.view.reveal(candidateNodes[i].id);
                                return
                            }
                        }
                        // The active workspace is unrelated to the node. So
                        // fall back to revealing the top most node
                    }
                    RED.view.reveal(candidateNodes[0].id);
                },
                clear: function() {
                    RED.nodes.eachNode(function(node) {
                        node.highlighted = false;
                        node.dirty = true;
                    });
                    RED.view.redraw();
                },
                requestDebugNodeList: function(filteredNodes) {
                    var workspaceOrder = RED.nodes.getWorkspaceOrder();
                    var workspaceOrderMap = {};
                    workspaceOrder.forEach(function(ws,i) {
                        workspaceOrderMap[ws] = i;
                    });

                    var candidateNodes = [];
                    var candidateSFs = [];
                    var subflows = {};
                    RED.nodes.eachNode(function (n) {
                        var nt = n.type;
                        if (nt === "debug") {
                            if (n.z in workspaceOrderMap) {
                                candidateNodes.push(n);
                            }
                            else {
                                var sf = RED.nodes.subflow(n.z);
                                if (sf) {
                                    subflows[sf.id] = {
                                        debug: true,
                                        subflows: {}
                                    };
                                }
                            }
                        }
                        else if(nt.substring(0, 8) === "subflow:") {
                            if (n.z in workspaceOrderMap) {
                                candidateSFs.push(n);
                            }
                            else {
                                var psf = RED.nodes.subflow(n.z);
                                if (psf) {
                                    var sid = nt.substring(8);
                                    var item = subflows[psf.id];
                                    if (!item) {
                                        item = {
                                            debug: undefined,
                                            subflows: {}
                                        };
                                        subflows[psf.id] = item;
                                    }
                                    item.subflows[sid] = true;
                                }
                            }
                        }
                    });
                    candidateSFs.forEach(function (sf) {
                        var sid = sf.type.substring(8);
                        if (containsDebug(sid, subflows)) {
                            candidateNodes.push(sf);
                        }
                    });

                    candidateNodes.sort(function(A,B) {
                        var wsA = workspaceOrderMap[A.z];
                        var wsB = workspaceOrderMap[B.z];
                        if (wsA !== wsB) {
                            return wsA-wsB;
                        }
                        var labelA = RED.utils.getNodeLabel(A,A.id);
                        var labelB = RED.utils.getNodeLabel(B,B.id);
                        return labelA.localeCompare(labelB);
                    });
                    var currentWs = null;
                    var data = [];
                    var currentFlow;
                    var currentSelectedCount = 0;
                    candidateNodes.forEach(function(node) {
                        if (currentWs !== node.z) {
                            if (currentFlow && currentFlow.checkbox) {
                                currentFlow.selected = currentSelectedCount === currentFlow.children.length
                            }
                            currentSelectedCount = 0;
                            currentWs = node.z;
                            var parent = RED.nodes.workspace(currentWs) || RED.nodes.subflow(currentWs);
                            currentFlow = {
                                label: RED.utils.getNodeLabel(parent, currentWs),
                            }
                            if (!parent.disabled) {
                                currentFlow.children = [];
                                currentFlow.checkbox = true;
                            } else {
                                currentFlow.class = "disabled"
                            }
                            data.push(currentFlow);
                        }
                        if (currentFlow.children) {
                            if (!filteredNodes[node.id]) {
                                currentSelectedCount++;
                            }
                            currentFlow.children.push({
                                label: RED.utils.getNodeLabel(node,node.id),
                                node: {
                                    id: node.id
                                },
                                checkbox: true,
                                selected: !filteredNodes[node.id]
                            });
                        }
                    });
                    if (currentFlow && currentFlow.checkbox) {
                        currentFlow.selected = currentSelectedCount === currentFlow.children.length
                    }
                    if (subWindow) {
                        try {
                            subWindow.postMessage({event:"refreshDebugNodeList", nodes:data},"*");
                        } catch(err) {
                            console.log(err);
                        }
                    }
                    RED.debug.refreshDebugNodeList(data)
                }
            };

            var uiComponents = RED.debug.init(options);

            RED.sidebar.addTab({
                id: "debug",
                label: this._("debug.sidebar.label"),
                name: this._("debug.sidebar.name"),
                content: uiComponents.content,
                toolbar: uiComponents.footer,
                enableOnEdit: true,
                pinned: true,
                iconClass: "fa fa-bug",
                action: "core:show-debug-tab"
            });
            RED.actions.add("core:show-debug-tab",function() { RED.sidebar.show('debug'); });

            var that = this;
            RED._debug = function(msg) {
                that.handleDebugMessage("", {
                    name:"debug",
                    msg:msg
                });
            };

            this.refreshMessageList = function() {
                RED.debug.refreshMessageList(RED.workspaces.active());
                if (subWindow) {
                    try {
                        subWindow.postMessage({event:"workspaceChange",activeWorkspace:RED.workspaces.active()},"*");
                    } catch(err) {
                        console.log(err);
                    }
                }
            };
            RED.events.on("workspace:change", this.refreshMessageList);

            this.handleDebugMessage = function(t,o) {
                // console.log("->",o.id,o.z,o._alias);
                //
                // sourceNode should be the top-level node - one that is on a flow.
                var sourceNode;
                var pathParts;
                var pathHierarchy;
                if (o.path) {
                    // Path is a `/`-separated list of ids that identifies the
                    // complete parentage of the node that generated this message.
                    //    flow-id/subflow-A-instance/subflow-B-instance

                    // If it has one id, that is a top level flow or config node/global
                    // each subsequent id is the instance id of a subflow node
                    //
                    pathParts = o.path.split("/");
                    if (pathParts.length === 1) {
                        // The source node is on a flow or is a global/config - so can use its id to find
                        sourceNode = RED.nodes.node(o.id);
                    } else if (pathParts.length > 1) {
                        // Highlight the subflow instance node.
                        sourceNode = RED.nodes.node(pathParts[1]);
                    }
                    const getNodeLabel = (n) => n.name || (typeof n.label === "function" && n.label())  || (typeof n.label === "string" && n.label) || (n.type + ":" + n.id);
                    pathHierarchy = pathParts.map((id,index) => {
                        if (index === 0) {
                            if (id === "global") {
                                return { id: sourceNode.id, label: getNodeLabel(sourceNode) }
                            } 
                            return { id: id, label: RED.nodes.workspace(id).label } //flow id + name
                        } else {
                            const instanceNode = RED.nodes.node(id)
                            const pathLabel = (instanceNode.name || RED.nodes.subflow(instanceNode.type.substring(8)).name)
                            return { id: id, label: pathLabel }
                        }
                    })
                    if (pathParts.length === 1 && pathParts[0] !== "global") {
                        pathHierarchy.push({ id: o.id, label: getNodeLabel(sourceNode) })
                    }
                    if (o._alias) {
                        let aliasNode = RED.nodes.node(o._alias)
                        if (aliasNode) {
                            pathHierarchy.push({ id: o._alias, label: getNodeLabel(aliasNode) })
                        }
                    }
                } else {
                    // This is probably redundant...
                    sourceNode = RED.nodes.node(o.id) || RED.nodes.node(o.z);
                }
                if (sourceNode) {
                    var sourceFlow = RED.nodes.workspace(sourceNode.z)
                    o._source = {
                        id:sourceNode.id,
                        z:sourceNode.z,
                        name:sourceNode.name,
                        type:sourceNode.type,
                        // _alias identifies the actual logging node. This is
                        // not necessarily the same as sourceNode, which will be
                        // the top-level subflow instance node.
                        // This means the node's name is displayed in the sidebar.
                        _alias:o._alias,
                        flowName: sourceFlow?(sourceFlow.label||sourceNode.z):sourceNode.z,
                        path: pathParts,
                        pathHierarchy: pathHierarchy
                    };
                }
                RED.debug.handleDebugMessage(o);
                if (subWindow) {
                    try {
                        subWindow.postMessage({event:"message",msg:o},"*");
                    } catch(err) {
                        console.log(err);
                    }
                }
            };
            RED.comms.subscribe("debug",this.handleDebugMessage);

            this.clearMessageList = function() {
                RED.debug.clearMessageList(true);
                if (subWindow) {
                    try {
                        subWindow.postMessage({event:"projectChange"},"*");
                    } catch(err) {
                        console.log(err);
                    }
                }
            };
            RED.events.on("project:change", this.clearMessageList);
            RED.actions.add("core:clear-debug-messages", function() { RED.debug.clearMessageList(true) });
            RED.actions.add("core:clear-filtered-debug-messages", function() { RED.debug.clearMessageList(true, true) });

            RED.actions.add("core:activate-selected-debug-nodes", function() { setDebugNodeState(getSelectedDebugNodes(true), true); });
            RED.actions.add("core:activate-all-debug-nodes", function() { setDebugNodeState(getMatchingDebugNodes(true, true),true); });
            RED.actions.add("core:activate-all-flow-debug-nodes", function() { setDebugNodeState(getMatchingDebugNodes(true, false),true); });

            RED.actions.add("core:deactivate-selected-debug-nodes", function() { setDebugNodeState(getSelectedDebugNodes(false), false); });
            RED.actions.add("core:deactivate-all-debug-nodes", function() { setDebugNodeState(getMatchingDebugNodes(false, true),false); });
            RED.actions.add("core:deactivate-all-flow-debug-nodes", function() { setDebugNodeState(getMatchingDebugNodes(false, false),false); });

            function getSelectedDebugNodes(state) {
                var nodes = [];
                var selection = RED.view.selection();
                if (selection.nodes) {
                    selection.nodes.forEach(function(n) {
                        if (RED.nodes.subflow(n.z)) {
                            return;
                        }
                        if (n.type === 'debug' && n.active !== state) {
                            nodes.push(n);
                        } else if (n.type === 'group') {
                            nodes = nodes.concat( RED.group.getNodes(n,true).filter(function(n) {
                                return n.type === 'debug' && n.active !== state
                            }));
                        }
                    });
                }
                return nodes;

            }
            function getMatchingDebugNodes(state,globally) {
                var nodes = [];
                var filter = {type:"debug"};
                if (!globally) {
                    filter.z = RED.workspaces.active();
                }
                var candidateNodes = RED.nodes.filterNodes(filter);
                nodes = candidateNodes.filter(function(n) {
                    return n.active !== state && !RED.nodes.subflow(n.z)
                })
                return nodes;
            }

            function setDebugNodeState(nodes,state) {
                var historyEvents = [];
                if (nodes.length > 0) {
                    activateAjaxCall(nodes,false, function(resp, textStatus, xhr) {
                        nodes.forEach(function(n) {
                            historyEvents.push({
                                t: "edit",
                                node: n,
                                changed: n.changed,
                                changes: {
                                    active: n.active
                                }
                            });
                            n.active = state;
                            n.changed = true;
                            n.dirty = true;
                        })
                        RED.history.push({
                            t: "multi",
                            events: historyEvents,
                            dirty: RED.nodes.dirty(),
                            callback: function() {
                                activateAjaxCall(nodes,nodes[0].active);
                            }
                        });
                        RED.nodes.dirty(true);
                        RED.view.redraw();
                    });
                }
            }

            function containsDebug(sid, map) {
                var item = map[sid];
                if (item) {
                    if (item.debug === undefined) {
                        var sfs = Object.keys(item.subflows);
                        var contain = false;
                        for (var i = 0; i < sfs.length; i++) {
                            var sf = sfs[i];
                            if (containsDebug(sf, map)) {
                                contain = true;
                                break;
                            }
                        }
                        item.debug = contain;
                    }
                    return item.debug;
                }
                return false;
            }

            $("#red-ui-sidebar-debug-open").on("click", function(e) {
                e.preventDefault();
                subWindow = window.open(document.location.toString().replace(/[?#].*$/,"")+"debug/view/view.html"+document.location.search,"nodeREDDebugView","menubar=no,location=no,toolbar=no,chrome,height=500,width=600");
                subWindow.onload = function() {
                    subWindow.postMessage({event:"workspaceChange",activeWorkspace:RED.workspaces.active()},"*");
                };
            });
            RED.popover.tooltip($("#red-ui-sidebar-debug-open"),RED._('node-red:debug.sidebar.openWindow'));



            $(window).on('beforeunload',function() {
                if (subWindow) {
                    try {
                        subWindow.close();
                    } catch(err) {
                        console.log(err);
                    }
                }
            });

            this.handleWindowMessage = function(evt) {
                var msg = evt.data;
                if (msg.event === "mouseEnter") {
                    options.messageMouseEnter(msg.id);
                } else if (msg.event === "mouseLeave") {
                    options.messageMouseLeave(msg.id);
                } else if (msg.event === "mouseClick") {
                    options.messageSourceClick(msg.id,msg._alias,msg.path);
                } else if (msg.event === "clear") {
                    options.clear();
                } else if (msg.event === "requestDebugNodeList") {
                    options.requestDebugNodeList(msg.filteredNodes)
                }
            };
            window.addEventListener('message',this.handleWindowMessage);
        },
        onpaletteremove: function() {
            RED.comms.unsubscribe("debug",this.handleDebugMessage);
            RED.sidebar.removeTab("debug");
            RED.events.off("workspace:change", this.refreshMessageList);
            window.removeEventListener("message",this.handleWindowMessage);
            RED.actions.remove("core:show-debug-tab");
            RED.actions.remove("core:clear-debug-messages");
            delete RED._debug;
        },
        oneditprepare: function() {
            var autoType = {
                value: "auto",
                label: RED._("node-red:debug.autostatus"),
                hasValue: false
            };

            var counter = {
                value: "counter",
                label: RED._("node-red:debug.messageCount"),
                hasValue: false
            };

            $("#node-input-typed-status").typedInput({
                default: "auto",
                types:[autoType, "msg", "jsonata", counter],
                typeField: $("#node-input-statusType")
            });
            var that = this;
            var none = {
                value: "none",
                label: RED._("node-red:debug.none"),
                hasValue: false
            };
            if (this.tosidebar === undefined) {
                this.tosidebar = true;
                $("#node-input-tosidebar").prop('checked', true);
            }
            if (this.statusVal === undefined) {
                this.statusVal = (this.complete === "false") ? "payload" : ((this.complete === "true") ? "payload" : this.complete+"");
                $("#node-input-typed-status").typedInput('value',this.statusVal || "");
            }
            if (this.statusType === undefined) {
                this.statusType = "auto";
                $("#node-input-typed-status").typedInput('type',this.statusType || "auto");
            }
            if (typeof this.console === "string") {
                this.console = (this.console == 'true');
                $("#node-input-console").prop('checked', this.console);
                $("#node-input-tosidebar").prop('checked', true);
            }
            var fullType = {
                value: "full",
                label: RED._("node-red:debug.msgobj"),
                hasValue: false
            };

            $("#node-input-typed-complete").typedInput({
                default: "msg",
                types:['msg', fullType, "jsonata"],
                typeField: $("#node-input-targetType")
            });
            if (this.targetType === "jsonata") {
                var property = this.complete || "";
                $("#node-input-typed-complete").typedInput('type','jsonata');
                $("#node-input-typed-complete").typedInput('value',property);
            } else if ((this.targetType === "full") || this.complete === "true" || this.complete === true) {
                // show complete message object
                $("#node-input-typed-complete").typedInput('type','full');
            } else {
                var property = (!this.complete||(this.complete === "false")) ? "payload" : this.complete+"";
                $("#node-input-typed-complete").typedInput('type','msg');
                $("#node-input-typed-complete").typedInput('value',property);
            }
            $("#node-input-typed-complete").on('change',function() {
                if ($("#node-input-typed-complete").typedInput('type') === 'msg' &&
                    $("#node-input-typed-complete").typedInput('value') === ''
                ) {
                    $("#node-input-typed-complete").typedInput('value','payload');
                }
            });

            $("#node-input-tostatus").on('change',function() {
                if ($(this).is(":checked")) {
                    if (that.statusType === "counter") {
                        that.statusVal = "";
                    }
                    else if (!that.hasOwnProperty("statusVal") || that.statusVal === "") {
                        var type = $("#node-input-typed-complete").typedInput('type');
                        var comp = "payload";
                        if (type !== 'full') {
                            comp = $("#node-input-typed-complete").typedInput('value');
                        }
                        that.statusType = "auto";
                        that.statusVal = comp;
                    }
                    $("#node-input-typed-status").typedInput('type',that.statusType);
                    $("#node-input-typed-status").typedInput('value',that.statusVal);
                    $("#node-tostatus-line").show();
                }
                else {
                    $("#node-tostatus-line").hide();
                    that.statusType = "auto";
                    that.statusVal = "";
                    $("#node-input-typed-status").typedInput('type',that.statusType);
                    $("#node-input-typed-status").typedInput('value',that.statusVal);
                }
            });
        },
        oneditsave: function() {
            var type = $("#node-input-typed-complete").typedInput('type');
            if (type === 'full') {
                $("#node-input-complete").val("true");
            } else {
                $("#node-input-complete").val($("#node-input-typed-complete").typedInput('value'));
            }
            $("#node-input-statusVal").val($("#node-input-typed-status").typedInput('value'));
        },
        onadd: function() {
            if (this.name === '_DEFAULT_') {
                this.name = ''
                RED.actions.invoke("core:generate-node-names", this, {generateHistory: false})
            }
        }
    });
})();
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="debug">
    <p>Displays selected message properties in the debug sidebar tab and optionally the runtime log. By default it displays <code>msg.payload</code>, but can be configured to display any property, the full message or the result of a JSONata expression.</p>
    <h3>Details</h3>
    <p>The debug sidebar provides a structured view of the messages it is sent, making it easier to understand their structure.</p>
    <p>JavaScript objects and arrays can be collapsed and expanded as required. Buffer objects can be displayed as raw data or as a string if possible.</p>
    <p>Alongside each message, the debug sidebar includes information about the time the message was received, the node that sent it and the type of the message.
       Clicking on the source node id will reveal that node within the workspace.</p>
    <p>The button on the node can be used to enable or disable its output. It is recommended to disable or remove any Debug nodes that are not being used.</p>
    <p>The node can also be configured to send all messages to the runtime log, or to send short (32 characters) to the status text under the debug node.</p>
</script>

</div><div><!-- --- [red-module:node-red/complete] --- -->
<script type="text/html" data-template-name="complete">
    <div class="form-row node-input-target-row">
        <button type="button" id="node-input-complete-target-select" class="red-ui-button" data-i18n="common.label.selectNodes"></button>
    </div>
    <div class="form-row node-input-target-row node-input-target-list-row" style="position: relative; min-height: 100px">
        <div style="position: absolute; top: -30px; right: 0;"><input type="text" id="node-input-complete-target-filter"></div>
        <div id="node-input-complete-target-container-div"></div>
    </div>

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>
<script type="text/javascript">
    RED.nodes.registerType('complete',{
        category: 'common',
        color:"#c0edc0",
        defaults: {
            name: {value:""},
            scope: {
                value: [],
                type: "*[]",
                validate: function (v, opt) {
                    if (v.length > 0) {
                        return true;
                    }
                    return RED._("node-red:complete.errors.scopeUndefined");
                }
            },
            uncaught: {value:false}
        },
        inputs:0,
        outputs:1,
        icon: "alert.svg",
        label: function() {
            if (this.name) {
                return this.name;
            }
            return this._("complete.completeNodes",{number:this.scope.length});
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var node = this;
            var scope = node.scope || [];

            this._resize = function() {
                var rows = $("#dialog-form>div:not(.node-input-target-list-row)");
                var height = $("#dialog-form").height();
                for (var i=0;i<rows.length;i++) {
                    height -= $(rows[i]).outerHeight(true);
                }
                var editorRow = $("#dialog-form>div.node-input-target-list-row");
                editorRow.css("height",height+"px");
            };
            var search = $("#node-input-complete-target-filter").searchBox({
                style: "compact",
                delay: 300,
                change: function() {
                    var val = $(this).val().trim().toLowerCase();
                    if (val === "") {
                        dirList.treeList("filter", null);
                        search.searchBox("count","");
                    } else {
                        var count = dirList.treeList("filter", function(item) {
                            return item.label.toLowerCase().indexOf(val) > -1 || item.node.type.toLowerCase().indexOf(val) > -1
                        });
                        search.searchBox("count",count+" / "+candidateNodes.length);
                    }
                }
            });

            var dirList = $("#node-input-complete-target-container-div").css({width: "100%", height: "100%"})
                .treeList({multi:true}).on("treelistitemmouseover", function(e, item) {
                    item.node.highlighted = true;
                    item.node.dirty = true;
                    RED.view.redraw();
                }).on("treelistitemmouseout", function(e, item) {
                    item.node.highlighted = false;
                    item.node.dirty = true;
                    RED.view.redraw();
                })
            var candidateNodes = RED.nodes.filterNodes({z:node.z});
            var allChecked = true;
            var items = [];
            var nodeItemMap = {};

            candidateNodes.forEach(function(n) {
                if (n.id === node.id) {
                    return;
                }
                var isChecked = scope.indexOf(n.id) !== -1;

                allChecked = allChecked && isChecked;

                var nodeDef = RED.nodes.getType(n.type);
                var label;
                var sublabel;
                if (nodeDef) {
                    var l = nodeDef.label;
                    label = (typeof l === "function" ? l.call(n) : l)||"";
                    sublabel = n.type;
                    if (sublabel.indexOf("subflow:") === 0) {
                        var subflowId = sublabel.substring(8);
                        var subflow = RED.nodes.subflow(subflowId);
                        sublabel = "subflow : "+subflow.name;
                    }
                }
                if (!nodeDef || !label) {
                    label = n.type;
                }
                nodeItemMap[n.id] = {
                    node: n,
                    label: label,
                    sublabel: sublabel,
                    selected: isChecked,
                    checkbox: true
                };
                items.push(nodeItemMap[n.id]);
            });
            dirList.treeList('data',items);

            $("#node-input-complete-target-select").on("click", function(e) {
                e.preventDefault();
                var preselected = dirList.treeList('selected').map(function(n) {return n.node.id});
                RED.tray.hide();
                RED.view.selectNodes({
                    selected: preselected,
                    onselect: function(selection) {
                        RED.tray.show();
                        var newlySelected = {};
                        selection.forEach(function(n) {
                            newlySelected[n.id] = true;
                            if (nodeItemMap[n.id]) {
                                nodeItemMap[n.id].treeList.select(true);
                            }
                        })
                        preselected.forEach(function(id) {
                            if (!newlySelected[id]) {
                                nodeItemMap[id].treeList.select(false);
                            }
                        })
                    },
                    oncancel: function() {
                        RED.tray.show();
                    },
                    filter: function(n) {
                        return n.id !== node.id;
                    }
                });
            })

        },
        oneditsave: function() {
            this.scope = $("#node-input-complete-target-container-div").treeList('selected').map(function(i) { return i.node.id})
        },
        oneditresize: function(size) {
            this._resize();
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="complete">
    <p>Trigger a flow when another node completes its handling of a message.</p>
    <h3>Details</h3>
    <p>If a node tells the runtime when it has finished handling a message,
        this node can be used to trigger a second flow.</p>
    <p>For example, this can be used alongside a node with no output port,
        such as the Email sending node, to continue the flow.</p>
    <p>This node must be configured to handle the event for selected nodes in the
        flow. Unlike the Catch node, it does not provide a 'handle all' mode automatically
        applies to all nodes in the flow.</p>
    <p>Not all nodes will trigger this event - it will depend on whether they
        have been implemented to support this feature as introduced in Node-RED 1.0.</p>
</script>

</div><div><!-- --- [red-module:node-red/catch] --- -->

<script type="text/html" data-template-name="catch">
    <div class="form-row">
        <label style="width: auto" for="node-input-scope" data-i18n="catch.label.source"></label>
        <select id="node-input-scope-select">
            <option value="all" data-i18n="catch.scope.all"></option>
            <option value="group" data-i18n="catch.scope.group"></option>
            <option value="target" data-i18n="catch.scope.selected"></option>
        </select>
    </div>
    <div class="form-row node-input-uncaught-row">
        <input type="checkbox" id="node-input-uncaught" style="display: inline-block; width: auto; vertical-align: top; margin-left: 30px; margin-right: 5px;">
        <label for="node-input-uncaught" style="width: auto" data-i18n="catch.label.uncaught"></label>
    </div>
    <div class="form-row node-input-target-row">
        <button type="button" id="node-input-catch-target-select" class="red-ui-button" data-i18n="common.label.selectNodes"></button>
    </div>
    <div class="form-row node-input-target-row node-input-target-list-row" style="position: relative; min-height: 100px">
        <div style="position: absolute; top: -30px; right: 0;"><input type="text" id="node-input-catch-target-filter"></div>
        <div id="node-input-catch-target-container-div"></div>
    </div>

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>
<script type="text/javascript">
    RED.nodes.registerType('catch',{
        category: 'common',
        color:"#e49191",
        defaults: {
            name: {value:""},
            scope: {value:null, type:"*[]"},
            uncaught: {value:false}
        },
        inputs:0,
        outputs:1,
        icon: "alert.svg",
        label: function() {
            if (this.name) {
                return this.name;
            }
            if (this.scope === "group") {
                return this._("catch.catchGroup");
            } else if (Array.isArray(this.scope)) {
                return this._("catch.catchNodes",{number:this.scope.length});
            }
            return this.uncaught?this._("catch.catchUncaught"):this._("catch.catch")
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var node = this;
            var scope = node.scope || [];

            this._resize = function() {
                var rows = $("#dialog-form>div:not(.node-input-target-list-row)");
                var height = $("#dialog-form").height();
                for (var i=0;i<rows.length;i++) {
                    height -= $(rows[i]).outerHeight(true);
                }
                var editorRow = $("#dialog-form>div.node-input-target-list-row");
                editorRow.css("height",height+"px");
            };
            var search = $("#node-input-catch-target-filter").searchBox({
                style: "compact",
                delay: 300,
                change: function() {
                    var val = $(this).val().trim().toLowerCase();
                    if (val === "") {
                        dirList.treeList("filter", null);
                        search.searchBox("count","");
                    } else {
                        var count = dirList.treeList("filter", function(item) {
                            return item.label.toLowerCase().indexOf(val) > -1 || item.node.type.toLowerCase().indexOf(val) > -1
                        });
                        search.searchBox("count",count+" / "+candidateNodes.length);
                    }
                }
            });
            var dirList = $("#node-input-catch-target-container-div").css({width: "100%", height: "100%"})
                .treeList({multi:true}).on("treelistitemmouseover", function(e, item) {
                    item.node.highlighted = true;
                    item.node.dirty = true;
                    RED.view.redraw();
                }).on("treelistitemmouseout", function(e, item) {
                    item.node.highlighted = false;
                    item.node.dirty = true;
                    RED.view.redraw();
                })
            var candidateNodes = RED.nodes.filterNodes({z:node.z});
            var allChecked = true;
            var items = [];
            var nodeItemMap = {};

            candidateNodes.forEach(function(n) {
                if (n.id === node.id) {
                    return;
                }
                var isChecked = scope.indexOf(n.id) !== -1;

                allChecked = allChecked && isChecked;

                var nodeDef = RED.nodes.getType(n.type);
                var label;
                var sublabel;
                if (nodeDef) {
                    var l = nodeDef.label;
                    label = (typeof l === "function" ? l.call(n) : l)||"";
                    sublabel = n.type;
                    if (sublabel.indexOf("subflow:") === 0) {
                        var subflowId = sublabel.substring(8);
                        var subflow = RED.nodes.subflow(subflowId);
                        sublabel = "subflow : "+subflow.name;
                    }
                }
                if (!nodeDef || !label) {
                    label = n.type;
                }
                nodeItemMap[n.id] = {
                    node: n,
                    label: label,
                    sublabel: sublabel,
                    selected: isChecked,
                    checkbox: true
                };
                items.push(nodeItemMap[n.id]);
            });
            dirList.treeList('data',items);

            $("#node-input-catch-target-select").on("click", function(e) {
                e.preventDefault();
                var preselected = dirList.treeList('selected').map(function(n) {return n.node.id});
                RED.tray.hide();
                RED.view.selectNodes({
                    selected: preselected,
                    onselect: function(selection) {
                        RED.tray.show();
                        var newlySelected = {};
                        selection.forEach(function(n) {
                            newlySelected[n.id] = true;
                            if (nodeItemMap[n.id]) {
                                nodeItemMap[n.id].treeList.select(true);
                            }
                        })
                        preselected.forEach(function(id) {
                            if (!newlySelected[id]) {
                                nodeItemMap[id].treeList.select(false);
                            }
                        })
                    },
                    oncancel: function() {
                        RED.tray.show();
                    },
                    filter: function(n) {
                        return n.id !== node.id;
                    }
                });
            })

            $("#node-input-scope-select").on("change", function(e) {
                var scope = $(this).val();
                if (scope === "target") {
                    $(".node-input-target-row").show();
                    $(".node-input-uncaught-row").hide();
                } else {
                    $(".node-input-target-row").hide();
                    $(".node-input-uncaught-row").show();
                }
                node._resize();
            });
            if (this.scope === null) {
                $("#node-input-scope-select").val("all");
            } else if(this.scope === "group"){
                $("#node-input-scope-select").val("group");
            } else {
                $("#node-input-scope-select").val("target");
            }
            $("#node-input-scope-select").trigger("change");
        },
        oneditsave: function() {
            var scope = $("#node-input-scope-select").val();
            if (scope === 'all') {
                this.scope = null;
            } else if(scope === 'group') {
                this.scope = "group";
            } else {
                $("#node-input-uncaught").prop("checked",false);
                this.scope = $("#node-input-catch-target-container-div").treeList('selected').map(function(i) { return i.node.id})
            }
        },
        oneditresize: function(size) {
            this._resize();
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="catch">
    <p>Catch errors thrown by nodes on the same tab.</p>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>error.message <span class="property-type">string</span></dt>
        <dd>the error message.</dd>
        <dt>error.source.id <span class="property-type">string</span></dt>
        <dd>the id of the node that threw the error.</dd>
        <dt>error.source.type <span class="property-type">string</span></dt>
        <dd>the type of the node that threw the error.</dd>
        <dt>error.source.name <span class="property-type">string</span></dt>
        <dd>the name, if set, of the node that threw the error.</dd>
    </dl>
    <h3>Details</h3>
    <p>If a node throws an error whilst handling a message, the flow will typically
       halt. This node can be used to catch those errors and handle them with a
       dedicated flow.</p>
    <p>By default, the node will catch errors thrown by any node on the same tab. Alternatively
    it can be targetted at specific nodes, or configured to only catch errors that
    have not already been caught by a 'targeted' catch node.</p>
    <p>When an error is thrown, all matching catch nodes will receive the message.</p>
    <p>If an error is thrown within a subflow, the error will get handled by any
       catch nodes within the subflow. If none exists, the error will be propagated
       up to the tab the subflow instance is on.</p>
   <p>If the message already has a <code>error</code> property, it is copied to <code>_error</code>.</p>
</script>

</div><div><!-- --- [red-module:node-red/status] --- -->

<script type="text/html" data-template-name="status">
    <div class="form-row">
        <label style="width: auto" for="node-input-scope" data-i18n="status.label.source"></label>
        <select id="node-input-scope-select">
            <option value="all" data-i18n="status.scope.all"></option>
            <option value="group" data-i18n="status.scope.group"></option>
            <option value="target" data-i18n="status.scope.selected"></option>
        </select>
    </div>
    <div class="form-row node-input-target-row">
        <button type="button" id="node-input-status-target-select" class="red-ui-button" data-i18n="common.label.selectNodes"></button>
    </div>
    <div class="form-row node-input-target-row node-input-target-list-row" style="position: relative; min-height: 100px">
        <div style="position: absolute; top: -30px; right: 0;"><input type="text" id="node-input-status-target-filter"></div>
        <div id="node-input-status-target-container-div"></div>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('status',{
        category: 'common',
        color:"#94c1d0",
        defaults: {
            name: {value:""},
            scope: {value:null, type:"*[]"}
        },
        inputs:0,
        outputs:1,
        icon: "status.svg",
        label: function() {
            if (this.name) {
                return this.name;
            }
            if (this.scope === "group") {
                return this._("status.statusGroup");
            } else if (Array.isArray(this.scope)) {
                return this._("status.statusNodes",{number:this.scope.length});
            }
            return this._("status.status")
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var node = this;
            var scope = node.scope || [];
            this._resize = function() {
                var rows = $("#dialog-form>div:not(.node-input-target-list-row)");
                var height = $("#dialog-form").height();
                for (var i=0;i<rows.length;i++) {
                    height -= $(rows[i]).outerHeight(true);
                }
                var editorRow = $("#dialog-form>div.node-input-target-list-row");
                editorRow.css("height",height+"px");
            };
            var search = $("#node-input-status-target-filter").searchBox({
                style: "compact",
                delay: 300,
                change: function() {
                    var val = $(this).val().trim().toLowerCase();
                    if (val === "") {
                        dirList.treeList("filter", null);
                        search.searchBox("count","");
                    } else {
                        var count = dirList.treeList("filter", function(item) {
                            return item.label.toLowerCase().indexOf(val) > -1 || item.node.type.toLowerCase().indexOf(val) > -1
                        });
                        search.searchBox("count",count+" / "+candidateNodes.length);
                    }
                }
            });

            var dirList = $("#node-input-status-target-container-div").css({width: "100%", height: "100%"})
                .treeList({multi:true}).on("treelistitemmouseover", function(e, item) {
                    item.node.highlighted = true;
                    item.node.dirty = true;
                    RED.view.redraw();
                }).on("treelistitemmouseout", function(e, item) {
                    item.node.highlighted = false;
                    item.node.dirty = true;
                    RED.view.redraw();
                })
            var candidateNodes = RED.nodes.filterNodes({z:node.z});
            var allChecked = true;
            var items = [];
            var nodeItemMap = {};

            candidateNodes.forEach(function(n) {
                if (n.id === node.id) {
                    return;
                }
                var isChecked = scope.indexOf(n.id) !== -1;

                allChecked = allChecked && isChecked;

                var nodeDef = RED.nodes.getType(n.type);
                var label;
                var sublabel;
                if (nodeDef) {
                    var l = nodeDef.label;
                    label = (typeof l === "function" ? l.call(n) : l)||"";
                    sublabel = n.type;
                    if (sublabel.indexOf("subflow:") === 0) {
                        var subflowId = sublabel.substring(8);
                        var subflow = RED.nodes.subflow(subflowId);
                        sublabel = "subflow : "+subflow.name;
                    }
                }
                if (!nodeDef || !label) {
                    label = n.type;
                }
                nodeItemMap[n.id] = {
                    node: n,
                    label: label,
                    sublabel: sublabel,
                    selected: isChecked,
                    checkbox: true
                };
                items.push(nodeItemMap[n.id]);
            });
            dirList.treeList('data',items);

            $("#node-input-status-target-select").on("click", function(e) {
                e.preventDefault();
                var preselected = dirList.treeList('selected').map(function(n) {return n.node.id});
                RED.tray.hide();
                RED.view.selectNodes({
                    selected: preselected,
                    onselect: function(selection) {
                        RED.tray.show();
                        var newlySelected = {};
                        selection.forEach(function(n) {
                            newlySelected[n.id] = true;
                            if (nodeItemMap[n.id]) {
                                nodeItemMap[n.id].treeList.select(true);
                            }
                        })
                        preselected.forEach(function(id) {
                            if (!newlySelected[id]) {
                                nodeItemMap[id].treeList.select(false);
                            }
                        })
                    },
                    oncancel: function() {
                        RED.tray.show();
                    },
                    filter: function(n) {
                        return n.id !== node.id;
                    }
                });
            })

            $("#node-input-scope-select").on("change", function(e) {
                var scope = $(this).val();
                if (scope === "target") {
                    $(".node-input-target-row").show();
                } else {
                    $(".node-input-target-row").hide();
                }
                node._resize();
            });
            if (this.scope === null) {
                $("#node-input-scope-select").val("all");
            } else if(this.scope === "group"){
                $("#node-input-scope-select").val("group");
            } else {
                $("#node-input-scope-select").val("target");
            }
            $("#node-input-scope-select").trigger("change");
        },
        oneditsave: function() {
            var scope = $("#node-input-scope-select").val();
            if (scope === 'all') {
                this.scope = null;
            } else if(scope === 'group') {
                this.scope = "group";
            } else {
                this.scope = $("#node-input-status-target-container-div").treeList('selected').map(function(i) { return i.node.id})
            }
        },
        oneditresize: function(size) {
            this._resize();
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="status">
    <p>Report status messages from other nodes on the same tab.</p>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>status.text <span class="property-type">string</span></dt>
        <dd>the status text.</dd>
        <dt>status.source.type <span class="property-type">string</span></dt>
        <dd>the type of the node that reported status.</dd>
        <dt>status.source.id <span class="property-type">string</span></dt>
        <dd>the id of the node that reported status.</dd>
        <dt>status.source.name <span class="property-type">string</span></dt>
        <dd>the name, if set, of the node that reported status.</dd>
    </dl>
    <h3>Details</h3>
   <p>This node does not produce a <code>payload</code>.</p>
   <p>By default the node reports status for all nodes on the same workspace tab.
   It can be configured to selectively report status for individual nodes.</p>
</script>

</div><div><!-- --- [red-module:node-red/link] --- -->
<script type="text/html" data-template-name="link in">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div style="position:relative; height: 30px; text-align: right;"><div style="display:inline-block"><input type="text" id="node-input-link-target-filter"></div></div>
    <div class="form-row node-input-link-row"></div>
</script>
<script type="text/html" data-template-name="link out">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-mode"><span data-i18n="link.outMode"></span></label>
        <select id="node-input-mode" style="width: 70%">
            <option value="link" selected data-i18n="link.sendToAll"></option>
            <option value="return" data-i18n="link.returnToCaller"></option>
        </select>
    </div>
    <div class="node-input-link-rows" style="position:relative; height: 30px; text-align: right;"><div style="display:inline-block"><input type="text" id="node-input-link-target-filter"></div></div>
    <div class="form-row node-input-link-row node-input-link-rows"></div>
</script>

<script type="text/html" data-template-name="link call">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-timeout"><i class="fa fa-clock-o"></i> <span data-i18n="exec.label.timeout"></span></label>
        <input type="text" id="node-input-timeout" placeholder="30" style="width: 70px; margin-right: 5px;"><span data-i18n="inject.seconds"></span>
    </div>
    <div class="form-row">
        <label for="node-input-linkType" data-i18n="link.linkCallType"></label>
        <select id="node-input-linkType" style="width: 70%">
            <option value="static" data-i18n="link.staticLinkCall"></option>
            <option value="dynamic" data-i18n="link.dynamicLinkCall"></option>
        </select>
    </div>
    <div class="link-call-target-tree" style="position:relative; height: 30px; text-align: right;">
        <div style="display:inline-block"><input type="text" id="node-input-link-target-filter"></div>
    </div>
    <div class="form-row node-input-link-row link-call-target-tree"></div>
</script>

<script type="text/javascript">
(function() {

    let treeList;

    function onEditPrepare(node,targetType) {
        if (!node.links) {
            node.links = [];
        }
        node.oldLinks = [];

        const activeSubflow = RED.nodes.subflow(node.z);

        treeList = $("<div>")
            .css({width: "100%", height: "100%"})
            .appendTo(".node-input-link-row")
            .treeList({autoSelect:false})
            .on('treelistitemmouseover',function(e,item) {
                if (item.node) {
                    item.node.highlighted = true;
                    item.node.dirty = true;
                    RED.view.redraw();
                }
            })
            .on('treelistitemmouseout',function(e,item) {
                if (item.node) {
                    item.node.highlighted = false;
                    item.node.dirty = true;
                    RED.view.redraw();
                }
            });
        const candidateNodes = RED.nodes.filterNodes({type:targetType});
        let candidateNodesCount = 0;

        const search = $("#node-input-link-target-filter").searchBox({
            style: "compact",
            delay: 300,
            change: function() {
                var val = $(this).val().trim().toLowerCase();
                if (val === "") {
                    treeList.treeList("filter", null);
                    search.searchBox("count","");
                } else {
                    const count = treeList.treeList("filter", function(item) {
                        return item.label.toLowerCase().indexOf(val) > -1 || (item.node && item.node.type.toLowerCase().indexOf(val) > -1)
                    });
                    search.searchBox("count",count+" / "+candidateNodesCount);
                }
            }
        });

        const flows = [];
        const flowMap = {};

        if (activeSubflow) {
            flowMap[activeSubflow.id] = {
                id: activeSubflow.id,
                class: 'red-ui-palette-header',
                label: "Subflow : " + (activeSubflow.name || activeSubflow.id),
                expanded: true,
                children: []
            };
            flows.push(flowMap[activeSubflow.id])
        }
        if (!activeSubflow || node.type === "link call") {
            // Only "Link Call" can look outside of its own subflow
            // Link In and Link Out nodes outside of a subflow should be ignored
            RED.nodes.eachWorkspace(function (ws) {
                flowMap[ws.id] = {
                    id: ws.id,
                    class: 'red-ui-palette-header',
                    label: (ws.label || ws.id) + (node.z === ws.id ? " *" : ""),
                    expanded: true,
                    children: []
                }
                flows.push(flowMap[ws.id])
            })
        }

        candidateNodes.forEach(function (n) {
            if (flowMap[n.z]) {
                if (targetType === "link out" && n.mode === 'return') {
                    // Link In nodes looking for Link Out nodes should not
                    // include return-mode nodes.
                    return;
                }
                const isChecked = (node.links.indexOf(n.id) !== -1) || (n.links || []).indexOf(node.id) !== -1;
                if (isChecked) {
                    node.oldLinks.push(n.id);
                }
                flowMap[n.z].children.push({
                    id: n.id,
                    node: n,
                    label: n.name || n.id,
                    selected: isChecked,
                    checkbox: node.type !== "link call",
                    radio: node.type === "link call"
                })
                candidateNodesCount++;
            }
        });
        const flowsFiltered = flows.filter(function(f) { return f.children.length > 0 })
        treeList.treeList('data',flowsFiltered);
        setTimeout(function() {
            treeList.treeList('show',node.z);
        },100);
    }

    function resizeNodeList() {
        var rows = $("#dialog-form>div:not(.node-input-link-row)");
        var height = $("#dialog-form").height();
        for (var i=0;i<rows.length;i++) {
            height -= $(rows[i]).outerHeight(true);
        }
        var editorRow = $("#dialog-form>div.node-input-link-row");
        height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));
        $(".node-input-link-row").css("height",height+"px");
    }

    function onEditSave(node) {
        var flows = treeList.treeList('data');
        node.links = [];
        if (node.type !== "link out" || $("#node-input-mode").val() === 'link') {
            flows.forEach(function(f) {
                f.children.forEach(function(n) {
                    if (n.selected) {
                        node.links.push(n.id);
                    }
                })
            })
        }
        node.oldLinks.sort();
        node.links.sort();

        if (node.type === "link call") {
            return
        }

        var nodeMap = {};
        var length = Math.max(node.oldLinks.length,node.links.length);
        for (var i=0;i<length;i++) {
            if (i<node.oldLinks.length) {
                nodeMap[node.oldLinks[i]] = nodeMap[node.oldLinks[i]]||{};
                nodeMap[node.oldLinks[i]].old = true;
            }
            if (i<node.links.length) {
                nodeMap[node.links[i]] = nodeMap[node.links[i]]||{};
                nodeMap[node.links[i]].new = true;
            }
        }
        var n;
        for (var id in nodeMap) {
            if (nodeMap.hasOwnProperty(id)) {
                n = RED.nodes.node(id);
                if (n) {
                    if (nodeMap[id].old && !nodeMap[id].new) {
                        // Removed id
                        i = n.links.indexOf(node.id);
                        if (i > -1) {
                            n.links.splice(i,1);
                        }
                    } else if (!nodeMap[id].old && nodeMap[id].new) {
                        // Added id
                        i = n.links.indexOf(id);
                        if (i === -1) {
                            n.links.push(node.id);
                        }
                    }
                }
            }
        }
    }

    function onAdd() {
        if (this.name === '_DEFAULT_') {
            this.name = ''
            RED.actions.invoke("core:generate-node-names", this, {generateHistory: false})
        }
        for (var i=0;i<this.links.length;i++) {
            var n = RED.nodes.node(this.links[i]);
            if (n && n.links.indexOf(this.id) === -1) {
                n.links.push(this.id);
            }
        }
    }

    RED.nodes.registerType('link in',{
        category: 'common',
        color:"#ddd",//"#87D8CF",
        defaults: {
            name: { value: "_DEFAULT_" },
            links: { value: [], type:"link out[]" }
        },
        inputs:0,
        outputs:1,
        icon: "link-out.svg",
        outputLabels: function(i) {
            return this.name||this._("link.linkIn");
        },
        showLabel: false,
        label: function() {
            return this.name||this._("link.linkIn");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            onEditPrepare(this,"link out");
        },
        oneditsave: function() {
            onEditSave(this);
            // In case the name has changed, ensure any link call nodes on this
            // tab are redrawn with the updated name
            var localCallNodes = RED.nodes.filterNodes({z:RED.workspaces.active(), type:"link call"});
            localCallNodes.forEach(function(node) {
                node.dirty = true;
            });
        },
        onadd: onAdd,
        oneditresize: resizeNodeList
    });

    RED.nodes.registerType('link call',{
        category: 'common',
        color:"#ddd",//"#87D8CF",
        defaults: {
            name: { value: "" },
            links: {
                value: [],
                type: "link in[]",
                validate: function (v, opt) {
                    if (((this.linkType || "static") === "static" && v.length > 0)
                      || this.linkType === "dynamic") {
                        return true;
                    }
                    return RED._("node-red:link.errors.linkUndefined");
                }
            },
            linkType: { value:"static" },
            timeout: {
                value: "30",
                label: RED._("node-red:link.timeout"),
                validate:RED.validators.number(true)
            }
        },
        inputs: 1,
        outputs: 1,
        icon: "link-call.svg",
        inputLabels: function(i) {
            return this.name||this._("link.linkCall");
        },
        label: function() {
            if (this.name) {
                return this.name;
            }
            if (this.linkType === "dynamic") {
                return this._("link.dynamicLinkLabel");
            } else if (this.links.length > 0) {
                var targetNode = RED.nodes.node(this.links[0]);
                return targetNode && (targetNode.name || this._("link.linkCall"));
            }
            return this._("inject.none");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            const updateVisibility = function() {
                const static = $('#node-input-linkType').val() !== "dynamic";
                if(static) {
                    $("div.link-call-target-tree").show();
                } else {
                    $("div.link-call-target-tree").hide();
                }
            }
            $("#node-input-linkType").on("change",function(d){
                updateVisibility();
            });
            if (["static","dynamic"].indexOf(this.linkType) < 0) {
                $("#node-input-linkType").val('static');
            }
            updateVisibility();
            onEditPrepare(this,"link in");
        },
        oneditsave: function() {
            onEditSave(this);
        },
        oneditresize: resizeNodeList
    });

    RED.nodes.registerType('link out',{
        category: 'common',
        color:"#ddd",//"#87D8CF",
        defaults: {
            name: { value:"_DEFAULT_" },
            mode: { value: "link" },// link || return
            links: { value: [], type:"link in[]" }
        },
        align:"right",
        inputs:1,
        outputs:0,
        icon: function() {
            if (this.mode === "return") {
                return "link-return.svg";
            } else {
                return "link-out.svg";
            }
        },
        inputLabels: function(i) {
            return this.name||(this.mode === "return" ?this._("link.linkOutReturn"):this._("link.linkOut"));
        },
        showLabel: false,
        label: function() {
            return this.name||(this.mode === "return" ?this._("link.linkOutReturn"):this._("link.linkOut"));
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            onEditPrepare(this,"link in");
            $("#node-input-mode").on("change", function() {
                $(".node-input-link-rows").toggle(this.value === "link")
            })
            if (!this.mode) {
                $("#node-input-mode").val('link').trigger("change");
            }

        },
        oneditsave: function() {
            onEditSave(this);
        },
        onadd: onAdd,
        oneditresize: resizeNodeList
    });



})();
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="link in">
    <p>Create virtual wires between flows.</p>
    <h3>Details</h3>
    <p>The node can be connected to any <code>link out</code> node that exists on any tab.
       Once connected, they behave as if they were wired together.</p>
    <p>The wires between link nodes are only displayed when a link node is selected.
       If there are any wires to other tabs, a virtual node is shown that can be clicked
       on to jump to the appropriate tab.</p>
    <p><b>Note: </b>Links cannot be created going into, or out of, a subflow.</p>
</script>

<script type="text/html" data-help-name="link out">
    <p>Create virtual wires between flows.</p>
    <h3>Details</h3>
    <p>This node can be configured to either send messages to all <code>link in</code>
       nodes it is connected to, or to send a response back to the <code>link call</code>
       node that triggered the flow.</p>
    <p>When in 'send to all' mode, the wires between link nodes are only displayed when
       the node is selected. If there are any wires to other tabs, a virtual node
       is shown that can be clicked on to jump to the appropriate tab.</p>
    <p><b>Note: </b>Links cannot be created going into, or out of, a subflow.</p>
</script>

<script type="text/html" data-help-name="link call">
    <p>Calls a flow that starts with a <code>link in</code> node and passes on the response.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
      <dt class="optional">target<span class="property-type">string</span></dt>
      <dd>When the option <b>Link Type</b> is set to "Dynamic target", set <code>msg.target</code> to the name of the
          <code>link in</code> node you wish to call.</dd>
    </dl>
    <h3>Details</h3>
    <p>This node can be connected to a <code>link in</code> node that exists on any tab.
       The flow connected to that node must end with a <code>link out</code> node configured
       in 'return' mode.</p>
    <p>When this node receives a message, it is passed to the connected <code>link in</code> node.
       It then waits for a response which it then sends on.</p>
    <p>If no response is received within the configured timeout, default 30 seconds, the node
       will log an error that can be caught using the <code>catch</code> node.</p>
    <p>When the option <b>Link Type</b> is set to "Dynamic target" <code>msg.target</code> can be used to call a
       <code>link in</code> by name or id. 
    <ul>
      <li>If there is a <code>link in</code> nodes with the same id, it will be called</li>
      <li>If there are two or more <code>link in</code> nodes with the same name, an error will be raised</li>
      <li>A <code>link call</code> cannot call a <code>link in</code> node inside a subflow</li>
    </ul>
    </p>
    The flow connected to that node must end with a <code>link out</code> node configured
    in 'return' mode.</p>
</script>

</div><div><!-- --- [red-module:node-red/comment] --- -->

<script type="text/html" data-template-name="comment">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-row node-text-editor-row">
        <input type="hidden" id="node-input-info" autofocus="autofocus">
        <div style="height: 250px; min-height:150px;" class="node-text-editor" id="node-input-info-editor"></div>
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('comment',{
        category: 'common',
        color:"#ffffff",
        defaults: {
            name: {value:""},
            info: {value:""}
        },
        inputs:0,
        outputs:0,
        icon: "comment.svg",
        label: function() {
            return this.name||this._("comment.comment");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        info: function() {
            return this.name?"# "+this.name+"\n\n---\n\n":"";
        },
        oneditprepare: function() {
            var that = this;
            this.editor = RED.editor.createEditor({
                id: 'node-input-info-editor',
                mode: 'ace/mode/markdown',
                value: $("#node-input-info").val()
            });
            this.editor.focus();
        },
        oneditsave: function() {
            $("#node-input-info").val(this.editor.getValue());
            this.editor.destroy();
            delete this.editor;
        },
        oneditcancel: function() {
            this.editor.destroy();
            delete this.editor;
        },
        oneditresize: function(size) {
            var rows = $("#dialog-form>div:not(.node-text-editor-row)");
            var height = $("#dialog-form").height();
            for (var i=0; i<rows.length; i++) {
                height -= $(rows[i]).outerHeight(true);
            }
            var editorRow = $("#dialog-form>div.node-text-editor-row");
            height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));
            $(".node-text-editor").css("height",height+"px");
            this.editor.resize();
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="comment">
    <p>A node you can use to add comments to your flows.</p>
    <h3>Details</h3>
    <p>The edit panel will accept Markdown syntax. The text will be rendered into
    the information side panel.</p>
</script>

</div><div><!-- --- [red-module:node-red/global-config] --- -->
<script type="text/html" data-template-name="global-config">
　　<div class="form-row">
        <label style="width: 100%"><span data-i18n="global-config.label.open-conf"></span>:</label>
    </div>
    <div class="form-row">
        <button class="red-ui-button" type="button" id="node-input-edit-env-var" data-i18n="editor:env-var.header" style="margin-left: 20px"></button>
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('global-config',{
        category: 'config',
        defaults: {
            name: { value: "" },
            env: { value: [] },
        },
        credentials: {
            map: { type: "map" }
        },
        oneditprepare: function() {
            $('#node-input-edit-env-var').on('click', function(evt) {
                RED.actions.invoke('core:show-user-settings', 'envvar')
            });
        },
        hasUsers: false
    });
</script>
<script type="text/html" data-help-name="global-config">
    <p>A node for holding global configuration of flows.</p>
</script>

</div><div><!-- --- [red-module:node-red/unknown] --- -->

<script type="text/html" data-template-name="unknown">
    <div class="form-tips"><span data-i18n="[html]unknown.tip"></span></div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('unknown',{
        category: 'unknown',
        color:"#fff0f0",
        defaults: {
            name: {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "",
        label: function() {
            return "("+this.name+")"||this._("unknown.label.unknown");
        },
        labelStyle: function() {
            return "node_label_unknown";
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="unknown">
    <p>This node is a type unknown to your installation of Node-RED.</p>
    <h3>Details</h3>
    <p><i>If you deploy with the node in this state, its configuration will be preserved, but
    the flow will not start until the missing type is installed.</i></p>
    <p>Use the <code>Menu - Manage Palette</code> option
    to search for and install nodes, or <b>npm install &lt;module&gt;</b> to
    install, any missing modules and restart Node-RED and reimport the nodes.</p>
    <p>It is possible this node type is already installed, but is missing a dependency. Check the Node-RED start-up
    log for any error messages associated with the missing node type.</p>
    <p>Otherwise, you should contact the author of the flow to obtain a copy of the missing node type.</p>
</script>

</div><div><!-- --- [red-module:node-red/function] --- -->
<script type="text/html" data-template-name="function">
    <style>
        .func-tabs-row {
            margin-bottom: 0;
        }
        #node-input-libs-container-row .red-ui-editableList-container {
            padding: 0px;
        }
        #node-input-libs-container-row .red-ui-editableList-container li {
            padding:0px;
        }
        #node-input-libs-container-row .red-ui-editableList-item-remove {
            right: 5px;
        }

        #node-input-libs-container-row .red-ui-editableList-header {
            display: flex;
            background: var(--red-ui-tertiary-background);
            padding-right: 75px;
            border-top-left-radius: 3px;
            border-top-right-radius: 3px;
        }
        #node-input-libs-container-row .red-ui-editableList-header > div {
            flex-grow: 1;
        }

        .node-libs-entry {
            display: flex;
        }

        .node-libs-entry .red-ui-typedInput-container {
            border-radius: 0;
            border: none;
        }
        .node-libs-entry .red-ui-typedInput-type-select {
            border-radius: 0 !important;
            height: 34px;
        }
        .node-libs-entry > span > input[type=text] {
            border-radius: 0;
            border-top-color: var(--red-ui-form-background);
            border-bottom-color: var(--red-ui-form-background);
            border-right-color: var(--red-ui-form-background);
        }
        .node-libs-entry > span > input[type=text].input-error {
        }
        .node-libs-entry > span {
            flex-grow: 1;
            width: 50%;
            position: relative;
        }
        .node-libs-entry span .node-input-libs-var, .node-libs-entry span .red-ui-typedInput-container {
            width: 100%;
        }
        .node-libs-entry > span > span > i {
            display: none;
        }
        .node-libs-entry > span > span.input-error > i {
            display: inline;
        }

    </style>
    <input type="hidden" id="node-input-func">
    <input type="hidden" id="node-input-noerr">
    <input type="hidden" id="node-input-finalize">
    <input type="hidden" id="node-input-initialize">

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <div style="display: inline-block; width: calc(100% - 105px)"><input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name"></div>
    </div>


    <div class="form-row func-tabs-row">
        <ul style="min-width: 600px; margin-bottom: 20px;" id="func-tabs"></ul>
    </div>
    <div id="func-tabs-content" style="min-height: calc(100% - 95px);">

        <div id="func-tab-config" style="display:none">
            <div>
                <div class="form-row" style="display: inline-block; margin-right: 50px;">
                    <label for="node-input-outputs"><i class="fa fa-random"></i> <span data-i18n="function.label.outputs"></span></label>
                    <input id="node-input-outputs" style="width: 60px;" value="1">
                </div>
                <div class="form-row" style="display: inline-block;">
                    <label for="node-input-timeout"><i class="fa fa-clock-o"></i> <span data-i18n="function.label.timeout"></span></label>
                    <input id="node-input-timeout" style="width: 60px;" data-i18n="[placeholder]join.seconds">
                </div>
            </div>

            <div class="form-row node-input-libs-row hide" style="margin-bottom: 0px;">
                <label><i class="fa fa-cubes"></i> <span data-i18n="function.label.modules"></span></label>
            </div>
            <div class="form-row node-input-libs-row hide" id="node-input-libs-container-row">
                <ol id="node-input-libs-container"></ol>
            </div>
        </div>

        <div id="func-tab-init" style="display:none">
            <div class="form-row node-text-editor-row" style="position:relative">
                <div style="height: 250px; min-height:150px;" class="node-text-editor" id="node-input-init-editor" ></div>
                <div style="position: absolute; right:0; bottom: calc(100% - 20px); z-Index: 10;"><button type="button" id="node-init-expand-js" class="red-ui-button red-ui-button-small"><i class="fa fa-expand"></i></button></div>
            </div>
        </div>

        <div id="func-tab-body" style="display:none">
            <div class="form-row node-text-editor-row" style="position:relative">
                <div style="height: 220px; min-height:150px;" class="node-text-editor" id="node-input-func-editor" ></div>
                <div style="position: absolute; right:0; bottom: calc(100% - 20px); z-Index: 10;"><button type="button" id="node-function-expand-js" class="red-ui-button red-ui-button-small"><i class="fa fa-expand"></i></button></div>
            </div>
        </div>

        <div id="func-tab-finalize" style="display:none">
            <div class="form-row node-text-editor-row" style="position:relative">
                <div style="height: 250px; min-height:150px;" class="node-text-editor" id="node-input-finalize-editor" ></div>
                <div style="position: absolute; right:0; bottom: calc(100% - 20px); z-Index: 10;"><button type="button" id="node-finalize-expand-js" class="red-ui-button red-ui-button-small"><i class="fa fa-expand"></i></button></div>
            </div>
        </div>

    </div>
</script>

<script type="text/javascript">

(function() {

    var invalidModuleVNames = [
        'console',
        'util',
        'Buffer',
        'Date',
        'RED',
        'node',
        '__node__',
        'context',
        'flow',
        'global',
        'env',
        'setTimeout',
        'clearTimeout',
        'setInterval',
        'clearInterval',
        'promisify'
    ]

    var knownFunctionNodes = {};
    RED.events.on("nodes:add", function(n) {
        if (n.type === "function") {
            knownFunctionNodes[n.id] = n;
        }
    })
    RED.events.on("nodes:remove", function(n) {
        if (n.type === "function") {
            delete knownFunctionNodes[n.id];
        }
    })

    var missingModules = [];
    var missingModuleReasons = {};
    RED.events.on("runtime-state", function(event) {
        if (event.error === "missing-modules") {
            missingModules = event.modules.map(function(m) { missingModuleReasons[m.module] = m.error; return m.module });
            for (var id in knownFunctionNodes) {
                if (knownFunctionNodes.hasOwnProperty(id) && knownFunctionNodes[id].libs && knownFunctionNodes[id].libs.length > 0) {
                    RED.editor.validateNode(knownFunctionNodes[id])
                }
            }
        } else if (!event.text) {
            missingModuleReasons = {};
            missingModules = [];
            for (var id in knownFunctionNodes) {
                if (knownFunctionNodes.hasOwnProperty(id) && knownFunctionNodes[id].libs && knownFunctionNodes[id].libs.length > 0) {
                    RED.editor.validateNode(knownFunctionNodes[id])
                }
            }
        }
        RED.view.redraw();
    });

    var installAllowList = ['*'];
    var installDenyList = [];

    var modulesEnabled = true;
    if (RED.settings.get('externalModules.modules.allowInstall', true) === false) {
        modulesEnabled = false;
    }
    var settingsAllowList = RED.settings.get("externalModules.modules.allowList")
    var settingsDenyList = RED.settings.get("externalModules.modules.denyList")
    if (settingsAllowList || settingsDenyList) {
        installAllowList = settingsAllowList;
        installDenyList = settingsDenyList
    }
    installAllowList = RED.utils.parseModuleList(installAllowList);
    installDenyList = RED.utils.parseModuleList(installDenyList);


    // object that maps from library name to its descriptor
    var allLibs = [];

    function moduleName(module) {
        var match = /^([^@]+)@(.+)/.exec(module);
        if (match) {
            return [match[1], match[2]];
        }
        return [module, undefined];
    }

    function getAllUsedModules() {
        var moduleSet = new Set();
        for (var id in knownFunctionNodes) {
            if (knownFunctionNodes.hasOwnProperty(id)) {
                if (knownFunctionNodes[id].libs) {
                    for (var i=0, l=knownFunctionNodes[id].libs.length; i<l; i++) {
                        if (RED.utils.checkModuleAllowed(knownFunctionNodes[id].libs[i].module,null,installAllowList,installDenyList)) {
                            moduleSet.add(knownFunctionNodes[id].libs[i].module);
                        }
                    }
                }
            }
        }
        var modules = Array.from(moduleSet);
        modules.sort();
        return modules;
    }

    function prepareLibraryConfig(node) {
        $(".node-input-libs-row").show();
        var usedModules = getAllUsedModules();
        var typedModules = usedModules.map(function(l) {
            return {icon:"fa fa-cube", value:l,label:l,hasValue:false}
        })
        typedModules.push({
            value:"_custom_", label:RED._("editor:subflow.licenseOther"), icon:"red/images/typedInput/az.svg"
        })

        var libList = $("#node-input-libs-container").css('min-height','100px').css('min-width','450px').editableList({
            header: $('<div><div data-i18n="node-red:function.require.moduleName"></div><div data-i18n="node-red:function.require.importAs"></div></div>'),
            addItem: function(container,i,opt) {
                var parent = container.parent();
                var row0 = $("<div/>").addClass("node-libs-entry").appendTo(container);
                var fmoduleSpan = $("<span>").appendTo(row0);
                var fmodule = $("<input/>", {
                    class: "node-input-libs-val",
                    placeholder: RED._("node-red:function.require.module"),
                    type: "text"
                }).css({
                }).appendTo(fmoduleSpan).typedInput({
                    types: typedModules,
                    default: usedModules.indexOf(opt.module) > -1 ? opt.module : "_custom_"
                });
                if (usedModules.indexOf(opt.module) === -1) {
                    fmodule.typedInput('value', opt.module);
                }
                var moduleWarning = $('<span style="position: absolute;right:2px;top:7px; display:inline-block; width: 16px;"><i class="fa fa-warning"></i></span>').appendTo(fmoduleSpan);
                RED.popover.tooltip(moduleWarning.find("i"),function() {
                    var val = fmodule.typedInput("type");
                    if (val === "_custom_") {
                        val = fmodule.val();
                    }
                    var errors = [];

                    if (!RED.utils.checkModuleAllowed(val,null,installAllowList,installDenyList)) {
                        return RED._("node-red:function.error.moduleNotAllowed",{module:val});
                    } else {
                        return RED._("node-red:function.error.moduleLoadError",{module:val,error:missingModuleReasons[val]});
                    }
                })

                var fvarSpan = $("<span>").appendTo(row0);

                var fvar = $("<input/>", {
                    class: "node-input-libs-var red-ui-font-code",
                    placeholder: RED._("node-red:function.require.var"),
                    type: "text"
                }).css({
                }).appendTo(fvarSpan).val(opt.var);
                var vnameWarning = $('<span style="position: absolute; right:2px;top:7px;display:inline-block; width: 16px;"><i class="fa fa-warning"></i></span>').appendTo(fvarSpan);
                RED.popover.tooltip(vnameWarning.find("i"),function() {
                    var val = fvar.val();
                    if (invalidModuleVNames.indexOf(val) !== -1) {
                        return RED._("node-red:function.error.moduleNameReserved",{name:val})
                    } else {
                        return RED._("node-red:function.error.moduleNameError",{name:val})
                    }
                })



                fvar.on("change keyup paste", function (e) {
                    var v = $(this).val().trim();
                    if (v === "" || / /.test(v) || invalidModuleVNames.indexOf(v) !== -1) {
                        fvar.addClass("input-error");
                        vnameWarning.addClass("input-error");
                    } else {
                        fvar.removeClass("input-error");
                        vnameWarning.removeClass("input-error");
                    }
                });

                fmodule.on("change keyup paste", function (e) {
                    var val = $(this).typedInput("type");
                    if (val === "_custom_") {
                        val = $(this).val();
                    }
                    var varName = val.trim().replace(/^@/,"").replace(/@.*$/,"").replace(/[-_/\.].?/g, function(v) { return v[1]?v[1].toUpperCase():"" });
                    fvar.val(varName);
                    fvar.trigger("change");

                    if (RED.utils.checkModuleAllowed(val,null,installAllowList,installDenyList) && (missingModules.indexOf(val) === -1)) {
                        fmodule.removeClass("input-error");
                        moduleWarning.removeClass("input-error");
                    } else {
                        fmodule.addClass("input-error");
                        moduleWarning.addClass("input-error");
                    }
                });
                if (RED.utils.checkModuleAllowed(opt.module,null,installAllowList,installDenyList) && (missingModules.indexOf(opt.module) === -1)) {
                    fmodule.removeClass("input-error");
                    moduleWarning.removeClass("input-error");
                } else {
                    fmodule.addClass("input-error");
                    moduleWarning.addClass("input-error");
                }
                if (opt.var) {
                    fvar.trigger("change");
                }
            },
            removable: true
        });

        var libs = node.libs || [];
        for (var i=0,l=libs.length;i<l; i++) {
            libList.editableList('addItem',libs[i])
        }

    }

    function getLibsList() {
        var _libs = [];
        if (RED.settings.functionExternalModules !== false) {
            var libs = $("#node-input-libs-container").editableList("items");
            libs.each(function(i) {
                var item = $(this);
                var v = item.find(".node-input-libs-var").val();
                var n = item.find(".node-input-libs-val").typedInput("type");
                if (n === "_custom_") {
                    n = item.find(".node-input-libs-val").val();
                }
                if ((!v || (v === "")) ||
                    (!n || (n === ""))) {
                    return;
                }
                _libs.push({
                    var: v,
                    module: n
                });
            });
        }
        return _libs;
    }

    RED.nodes.registerType('function',{
        color:"#fdd0a2",
        category: 'function',
        defaults: {
            name: {value:"_DEFAULT_"},
            func: {value:"\nreturn msg;"},
            outputs: {value:1},
            timeout:{value:RED.settings.functionTimeout || 0},
            noerr: {value:0,required:true,
                    validate: function(v, opt) {
                        if (!v) {
                            return true;
                        }
                        return RED._("node-red:function.error.invalid-js");
                    }},
            initialize: {value:""},
            finalize: {value:""},
            libs: {value: [], validate: function(v, opt) {
                if (!v) { return true; }
                for (var i=0,l=v.length;i<l;i++) {
                    var m = v[i];
                    if (!RED.utils.checkModuleAllowed(m.module,null,installAllowList,installDenyList)) {
                        return RED._("node-red:function.error.moduleNotAllowed", {
                            module: m.module
                        });
                    }
                    if (m.var === "" || / /.test(m.var)) {
                        return RED._("node-red:function.error.moduleNameError", {
                            name: m.var
                        });
                    }
                    if (missingModules.indexOf(m.module) > -1) {
                        return RED._("node-red:function.error.missing-module", {
                            module: m.module
                        });
                    }
                    if (invalidModuleVNames.indexOf(m.var) !== -1){
                        return RED._("node-red:function.error.moduleNameError", {
                            name: m.var
                        });
                    }
                }
                return true;
            }}
        },
        inputs:1,
        outputs:1,
        icon: "function.svg",
        label: function() {
            return this.name||this._("function.function");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var that = this;

            var tabs = RED.tabs.create({
                id: "func-tabs",
                onchange: function(tab) {
                    $("#func-tabs-content").children().hide();
                    $("#" + tab.id).show();
                    let editor = $("#" + tab.id).find('.monaco-editor').first();
                    if(editor.length) {
                        if(that.editor.nodered && that.editor.type == "monaco") {
                            that.editor.nodered.refreshModuleLibs(getLibsList());
                        }
                        RED.tray.resize();
                        //auto focus editor on tab switch
                        if (that.initEditor.getDomNode() == editor[0]) {
                            that.initEditor.focus();
                        } else if (that.editor.getDomNode() == editor[0]) {
                            that.editor.focus();
                        } else if (that.finalizeEditor.getDomNode() == editor[0]) {
                            that.finalizeEditor.focus();
                        }
                    }
                }
            });
            tabs.addTab({
                id: "func-tab-config",
                iconClass: "fa fa-cog",
                label: that._("function.label.setup")
            });

            tabs.addTab({
                id: "func-tab-init",
                label: that._("function.label.initialize")
            });
            tabs.addTab({
                id: "func-tab-body",
                label: that._("function.label.function")
            });
            tabs.addTab({
                id: "func-tab-finalize",
                label: that._("function.label.finalize")
            });

            tabs.activateTab("func-tab-body");

            $( "#node-input-outputs" ).spinner({
                min: 0,
                max: 500,
                change: function(event, ui) {
                    var value = parseInt(this.value);
                    value = isNaN(value) ? 1 : value;
                    value = Math.max(value, parseInt($(this).attr("aria-valuemin")));
                    value = Math.min(value, parseInt($(this).attr("aria-valuemax")));
                    if (value !== this.value) { $(this).spinner("value", value); }
                }
            });

            // 4294967 is max in node.js timeout.
            $( "#node-input-timeout" ).spinner({
                min: 0,
                max: 4294967,
                change: function(event, ui) {
                    var value = this.value;
                    if(value == ""){
                        value = 0;
                    }
                    else
                    {
                        value = parseInt(value);
                    }
                    value = isNaN(value) ? 1 : value;
                    value = Math.max(value, parseInt($(this).attr("aria-valuemin")));
                    value = Math.min(value, parseInt($(this).attr("aria-valuemax")));
                    if (value !== this.value) { $(this).spinner("value", value); }
                }
            });

            var buildEditor = function(id, stateId, focus, value, defaultValue, extraLibs, offset) {
                var editor = RED.editor.createEditor({
                    id: id,
                    mode: 'ace/mode/nrjavascript',
                    value: value || defaultValue || "",
                    stateId: stateId,
                    focus: true,
                    globals: {
                        msg:true,
                        context:true,
                        RED: true,
                        util: true,
                        flow: true,
                        global: true,
                        console: true,
                        Buffer: true,
                        setTimeout: true,
                        clearTimeout: true,
                        setInterval: true,
                        clearInterval: true
                    },
                    extraLibs: extraLibs
                });
                if (defaultValue && value === "") {
                    editor.moveCursorTo(defaultValue.split("\n").length +offset, 0);
                }
                editor.__stateId = stateId;
                return editor;
            }
            this.initEditor = buildEditor('node-input-init-editor', this.id + "/" + "initEditor", false, $("#node-input-initialize").val(), RED._("node-red:function.text.initialize"), undefined, 0);
            this.editor = buildEditor('node-input-func-editor', this.id + "/" + "editor", true, $("#node-input-func").val(), undefined, that.libs || [], undefined, -1);
            this.finalizeEditor = buildEditor('node-input-finalize-editor', this.id + "/" + "finalizeEditor", false, $("#node-input-finalize").val(), RED._("node-red:function.text.finalize"), undefined, 0);

            RED.library.create({
                url:"functions", // where to get the data from
                type:"function", // the type of object the library is for
                editor:this.editor, // the field name the main text body goes to
                mode:"ace/mode/nrjavascript",
                fields:[
                    'name', 'outputs', 'timeout',
                    {
                        name: 'initialize',
                        get: function() {
                            return that.initEditor.getValue();
                        },
                        set: function(v) {
                            that.initEditor.setValue(v||RED._("node-red:function.text.initialize"), -1);
                        }
                    },
                    {
                        name: 'finalize',
                        get: function() {
                            return that.finalizeEditor.getValue();
                        },
                        set: function(v) {
                            that.finalizeEditor.setValue(v||RED._("node-red:function.text.finalize"), -1);
                        }
                    },
                    {
                        name: 'info',
                        get: function() {
                            return that.infoEditor.getValue();
                        },
                        set: function(v) {
                            that.infoEditor.setValue(v||"", -1);
                        }
                    }
                ],
                ext:"js"
            });

            var expandButtonClickHandler = function(editor) {
                return function (e) {
                    e.preventDefault();
                    var value = editor.getValue();
                    editor.saveView(`inside function-expandButtonClickHandler ${editor.__stateId}`);
                    var extraLibs = that.libs || [];
                    RED.editor.editJavaScript({
                        value: value,
                        width: "Infinity",
                        stateId: editor.__stateId,
                        mode: "ace/mode/nrjavascript",
                        focus: true,
                        cancel: function () {
                            setTimeout(function () {
                                editor.focus();
                            }, 250);
                        },
                        complete: function (v, cursor) {
                            editor.setValue(v, -1);
                            setTimeout(function () {
                                editor.restoreView();
                                editor.focus();
                            }, 250);
                        },
                        extraLibs: extraLibs
                    });
                }
            }
            $("#node-init-expand-js").on("click", expandButtonClickHandler(this.initEditor));
            $("#node-function-expand-js").on("click", expandButtonClickHandler(this.editor));
            $("#node-finalize-expand-js").on("click", expandButtonClickHandler(this.finalizeEditor));

            RED.popover.tooltip($("#node-init-expand-js"), RED._("node-red:common.label.expand"));
            RED.popover.tooltip($("#node-function-expand-js"), RED._("node-red:common.label.expand"));
            RED.popover.tooltip($("#node-finalize-expand-js"), RED._("node-red:common.label.expand"));

            if (RED.settings.functionExternalModules !== false) {
                prepareLibraryConfig(that);
            }
        },
        oneditsave: function() {
            var node = this;
            var noerr = 0;
            $("#node-input-noerr").val(0);

            var disposeEditor = function(editorName,targetName,defaultValue) {
                var editor = node[editorName];
                var annot = editor.getSession().getAnnotations();
                for (var k=0; k < annot.length; k++) {
                    if (annot[k].type === "error") {
                        noerr += annot.length;
                        break;
                    }
                }
                var val = editor.getValue();
                if (defaultValue) {
                    if (val.trim() == defaultValue.trim()) {
                        val = "";
                    }
                }
                editor.destroy();
                delete node[editorName];
                $("#"+targetName).val(val);
            }
            disposeEditor("editor","node-input-func");
            disposeEditor("initEditor","node-input-initialize", RED._("node-red:function.text.initialize"));
            disposeEditor("finalizeEditor","node-input-finalize", RED._("node-red:function.text.finalize"));

            $("#node-input-noerr").val(noerr);
            this.noerr = noerr;
            node.libs = getLibsList();
        },
        oneditcancel: function() {
            var node = this;

            node.editor.destroy();
            delete node.editor;

            node.initEditor.destroy();
            delete node.initEditor;

            node.finalizeEditor.destroy();
            delete node.finalizeEditor;
        },
        oneditresize: function(size) {
            var rows = $("#dialog-form>div:not(.node-text-editor-row)");
            var height = $("#dialog-form").height();
            for (var i=0; i<rows.length; i++) {
                height -= $(rows[i]).outerHeight(true);
            }
            var editorRow = $("#dialog-form>div.node-text-editor-row");
            height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));
            $("#dialog-form .node-text-editor").css("height",height+"px");

            var height = size.height;
            $("#node-input-init-editor").css("height", (height - 83)+"px");
            $("#node-input-func-editor").css("height", (height - 83)+"px");
            $("#node-input-finalize-editor").css("height", (height - 83)+"px");

            this.initEditor.resize();
            this.editor.resize();
            this.finalizeEditor.resize();

            $("#node-input-libs-container").css("height", (height - 192)+"px");
        },
        onadd: function() {
            if (this.name === '_DEFAULT_') {
                this.name = ''
                RED.actions.invoke("core:generate-node-names", this, {generateHistory: false})
            }
        }
    });
})();
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="function">
    <p>A JavaScript function to run against the messages being received by the node.</p>
    <p>The messages are passed in as a JavaScript object called <code>msg</code>.</p>
    <p>By convention it will have a <code>msg.payload</code> property containing
       the body of the message.</p>
    <p>The function is expected to return a message object (or multiple message objects), but can choose
       to return nothing in order to halt a flow.</p>
    <p>The <b>On Start</b> tab contains code that will be run whenever the node is started.
        The <b>On Stop</b> tab contains code that will be run when the node is stopped.</p>
    <p>If the On Start code returns a Promise object, the node will not start handling messages
        until the promise is resolved.</p>
    <h3>Details</h3>
    <p>See the <a target="_blank" href="https://nodered.org/docs/writing-functions.html">online documentation</a>
    for more information on writing functions.</p>
    <h4>Sending messages</h4>
    <p>The function can either return the messages it wants to pass on to the next nodes
    in the flow, or can call <code>node.send(messages)</code>.</p>
    <p>It can return/send:</p>
    <ul>
      <li>a single message object - passed to nodes connected to the first output</li>
      <li>an array of message objects - passed to nodes connected to the corresponding outputs</li>
    </ul>
    <p>Note: The setup code is executed during the initialization of nodes. Therefore, if <code>node.send</code> is called in the setup tab, subsequent nodes may not be able to receive the message.</p>
    <p>If any element of the array is itself an array of messages, multiple
          messages are sent to the corresponding output.</p>
    <p>If null is returned, either by itself or as an element of the array, no
          message is passed on.</p>
    <h4>Logging and Error Handling</h4>
    <p>To log any information, or report an error, the following functions are available:</p>
      <ul>
          <li><code>node.log("Log message")</code></li>
          <li><code>node.warn("Warning")</code></li>
          <li><code>node.error("Error")</code></li>
      </ul>
    </p>
    <p>The Catch node can also be used to handle errors. To invoke a Catch node,
    pass <code>msg</code> as a second argument to <code>node.error</code>:</p>
    <pre>node.error("Error",msg);</pre>
    <h4>Accessing Node Information</h4>
    <p>The following properties are available to access information about the node:</p>
    <ul>
        <li><code>node.id</code> - id of the node</li>
        <li><code>node.name</code> - name of the node</li>
        <li><code>node.outputCount</code> - number of node outputs</li>
    </ul>
    <h4>Using environment variables</h4>
    <p>Environment variables can be accessed using <code>env.get("MY_ENV_VAR")</code>.</p>
</script>

</div><div><!-- --- [red-module:node-red/switch] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="switch">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" style="width: calc(100% - 105px)" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-property"><i class="fa fa-ellipsis-h"></i> <span data-i18n="switch.label.property"></span></label>
        <input type="text" id="node-input-property" style="width: calc(100% - 105px)"/>
        <input type="hidden" id="node-input-outputs"/>
    </div>
    <div class="form-row node-input-rule-container-row">
        <ol id="node-input-rule-container"></ol>
    </div>
    <div class="form-row">
        <select id="node-input-checkall" style="width:100%; margin-right:5px;">
            <option value="true" data-i18n="switch.checkall"></option>
            <option value="false" data-i18n="switch.stopfirst"></option>
        </select>
    </div>
    <div class="form-row">
        <input type="checkbox" id="node-input-repair" style="display: inline-block; width: auto; vertical-align: top;">
        <label style="width: auto;" for="node-input-repair"><span data-i18n="switch.label.repair"></span></label></input>
    </div>
</script>

<script type="text/javascript">
(function() {
    var operators = [
        {v:"eq",t:"==",kind:'V'},
        {v:"neq",t:"!=",kind:'V'},
        {v:"lt",t:"<",kind:'V'},
        {v:"lte",t:"<=",kind:'V'},
        {v:"gt",t:">",kind:'V'},
        {v:"gte",t:">=",kind:'V'},
        {v:"hask",t:"switch.rules.hask",kind:'V'},
        {v:"btwn",t:"switch.rules.btwn",kind:'V'},
        {v:"cont",t:"switch.rules.cont",kind:'V'},
        {v:"regex",t:"switch.rules.regex",kind:'V'},
        {v:"true",t:"switch.rules.true",kind:'V'},
        {v:"false",t:"switch.rules.false",kind:'V'},
        {v:"null",t:"switch.rules.null",kind:'V'},
        {v:"nnull",t:"switch.rules.nnull",kind:'V'},
        {v:"istype",t:"switch.rules.istype",kind:'V'},
        {v:"empty",t:"switch.rules.empty",kind:'V'},
        {v:"nempty",t:"switch.rules.nempty",kind:'V'},
        {v:"head",t:"switch.rules.head",kind:'S'},
        {v:"index",t:"switch.rules.index",kind:'S'},
        {v:"tail",t:"switch.rules.tail",kind:'S'},
        {v:"jsonata_exp",t:"switch.rules.exp",kind:'O'},
        {v:"else",t:"switch.rules.else",kind:'O'}
    ];

    var previousValueType = {value:"prev",label:RED._("node-red:switch.previous"),hasValue:false};
    function clipValueLength(v) {
        if (v.length > 15) {
            return v.substring(0,15)+"...";
        }
        return v;
    }
    function prop2name(key) {
        var result = RED.utils.parseContextKey(key);
        return result.key;
    }
    function getValueLabel(t,v) {
        if (t === 'str') {
            return '"'+clipValueLength(v)+'"';
        } else if (t === 'msg') {
            return t+"."+clipValueLength(v);
        } else if (t === 'flow' || t === 'global') {
            return t+"."+clipValueLength(prop2name(v));
        }
        return clipValueLength(v);
    }

    function exportRule(rule) {
        var type = rule.find("select").val();
        var r = {t:type};
        if (!(type === "true" || type === "false" || type === "null" || type === "nnull" || type === "empty" || type === "nempty" || type === "else")) {
            if ((type === "btwn") || (type === "index")) {
                r.v = rule.find(".node-input-rule-btwn-value").typedInput('value');
                r.vt = rule.find(".node-input-rule-btwn-value").typedInput('type');
                r.v2 = rule.find(".node-input-rule-btwn-value2").typedInput('value');
                r.v2t = rule.find(".node-input-rule-btwn-value2").typedInput('type');
            } else if ((type === "head") || (type === "tail")) {
                r.v = rule.find(".node-input-rule-num-value").typedInput('value');
                r.vt = rule.find(".node-input-rule-num-value").typedInput('type');
            } else if (type === "istype") {
                r.v = rule.find(".node-input-rule-type-value").typedInput('type');
                r.vt = rule.find(".node-input-rule-type-value").typedInput('type');
            } else if (type === "jsonata_exp") {
                r.v = rule.find(".node-input-rule-exp-value").typedInput('value');
                r.vt = rule.find(".node-input-rule-exp-value").typedInput('type');
            } else {
                r.v = rule.find(".node-input-rule-value").typedInput('value');
                r.vt = rule.find(".node-input-rule-value").typedInput('type');
            }
            if (type === "regex") {
                r.case = rule.find(".node-input-rule-case").prop("checked");
            }
        }
        return r;
    }

    function createValueField(row, defaultType){
        return $('<input/>',{class:"node-input-rule-value",type:"text",style:"width: 100%;"}).appendTo(row)
            .typedInput({default:defaultType||'str',types:['msg','flow','global','str','num','jsonata','env',previousValueType]});
    }

    function createNumValueField(row, defaultType){
        return $('<input/>',{class:"node-input-rule-num-value",type:"text",style:"width: 100%;"}).appendTo(row)
            .typedInput({default:defaultType||'num',types:['flow','global','num','jsonata','env']});
    }

    function createExpValueField(row){
        return $('<input/>',{class:"node-input-rule-exp-value",type:"text",style:"width: 100%;"}).appendTo(row)
            .typedInput({default:'jsonata',types:['jsonata']});
    }

    function createBtwnValueField(row, defaultType){
        return $('<input/>',{class:"node-input-rule-btwn-value",type:"text",style:"width: 100%;"}).appendTo(row)
                .typedInput({default:defaultType||'num',types:['msg','flow','global','str','num','jsonata','env',previousValueType]});
    }

    function createBtwnValue2Field(row3, andLabel, defaultType){
        $('<div/>',{class:"node-input-rule-btwn-label", style:"width: 120px; text-align: right;"}).text(" "+andLabel+" ").appendTo(row3);
        var row3InputCell = $('<div/>',{style:"flex-grow:1; margin-left: 5px;"}).appendTo(row3);
        return $('<input/>',{class:"node-input-rule-btwn-value2",type:"text",style:"width: 100%"}).appendTo(row3InputCell)
            .typedInput({default:defaultType||'num',types:['msg','flow','global','str','num','jsonata','env',previousValueType]});
    }

    function createTypeValueField(row, defaultType){
        return $('<input/>',{class:"node-input-rule-type-value",type:"text",style:"width: 100%;"}).appendTo(row).typedInput({default:defaultType || 'string',types:[
            {value:"string",label:RED._("common.type.string"),hasValue:false,icon:"red/images/typedInput/az.svg"},
            {value:"number",label:RED._("common.type.number"),hasValue:false,icon:"red/images/typedInput/09.svg"},
            {value:"boolean",label:RED._("common.type.boolean"),hasValue:false,icon:"red/images/typedInput/bool.svg"},
            {value:"array",label:RED._("common.type.array"),hasValue:false,icon:"red/images/typedInput/json.svg"},
            {value:"buffer",label:RED._("common.type.buffer"),hasValue:false,icon:"red/images/typedInput/bin.svg"},
            {value:"object",label:RED._("common.type.object"),hasValue:false,icon:"red/images/typedInput/json.svg"},
            {value:"json",label:RED._("common.type.jsonString"),hasValue:false,icon:"red/images/typedInput/json.svg"},
            {value:"undefined",label:RED._("common.type.undefined"),hasValue:false},
            {value:"null",label:RED._("common.type.null"),hasValue:false}
        ]});
    }

    RED.nodes.registerType('switch', {
        color: "#E2D96E",
        category: 'function',
        defaults: {
            name: {value:""},
            property: {value:"payload", required:true,
                       label:RED._("node-red:common.label.payload"),
                       validate: RED.validators.typedInput("propertyType", false)},
            propertyType: { value:"msg" },
            rules: {
                value:[{t:"eq", v:"", vt:"str"}],
                validate: function (rules, opt) {
                    let msg;
                    const errors = []
                    if (!rules || rules.length === 0) { return true }
                    for (var i=0;i<rules.length;i++) {
                        const opt = { label: RED._('node-red:switch.label.rule')+' '+(i+1) }
                        const r = rules[i];
                        if (r.t !== 'istype') {
                            if (r.hasOwnProperty('v')) {
                                if ((msg = RED.utils.validateTypedProperty(r.v,r.vt,opt)) !== true) {
                                    errors.push(msg)
                                }
                            }
                            if (r.hasOwnProperty('v2')) {
                                if ((msg = RED.utils.validateTypedProperty(r.v2,r.v2t,opt)) !== true) {
                                    errors.push(msg)
                                }
                            }
                        }
                    }
                    if (errors.length) {
                        console.log(errors)
                        return errors
                    }
                    return true;
                }
            },
            checkall: {value:"true", required:true},
            repair: {value:false},
            outputs: {value:1}
        },
        inputs: 1,
        outputs: 1,
        outputLabels: function(index) {
            var rule = this.rules[index];
            var label = "";
            if (rule) {
                for (var i=0;i<operators.length;i++) {
                    if (operators[i].v === rule.t) {
                        label = /^switch/.test(operators[i].t)?this._(operators[i].t):operators[i].t;
                        break;
                    }
                }
                if ((rule.t === 'btwn') || (rule.t === 'index')) {
                    label += " "+getValueLabel(rule.vt,rule.v)+" & "+getValueLabel(rule.v2t,rule.v2);
                } else if (rule.t !== 'true' && rule.t !== 'false' && rule.t !== 'null' && rule.t !== 'nnull' && rule.t !== 'empty' && rule.t !== 'nempty' && rule.t !== 'else' ) {
                    label += " "+getValueLabel(rule.vt,rule.v);
                }
                return label;
            }
        },
        icon: "switch.svg",
        label: function() {
            return this.name||this._("switch.switch");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var node = this;


            $("#node-input-property").typedInput({default:this.propertyType||'msg',types:['msg','flow','global','jsonata','env']});
            var outputCount = $("#node-input-outputs").val("{}");

            var andLabel = this._("switch.and");
            var caseLabel = this._("switch.ignorecase");

            $("#node-input-rule-container").css('min-height','150px').css('min-width','450px').editableList({
                addItem: function(container,i,opt) {
                    var focusValueField = false;
                    if (!opt.hasOwnProperty('r')) {
                        opt.r = {};
                        if (i > 0) {
                            var lastRule = $("#node-input-rule-container").editableList('getItemAt',i-1);
                            var exportedRule = exportRule(lastRule.element);
                            if (exportedRule.t === "istype") {
                                opt.r.vt = (exportedRule.vt === "number") ? "num" : "str";
                            } else {
                                opt.r.vt = exportedRule.vt;
                            }
                            opt.r.v = "";
                            // We could copy the value over as well and preselect it (see the 'activeElement' code below)
                            // But not sure that feels right. Is copying over the last value 'expected' behaviour?
                            // It would make sense for an explicit 'copy' action, but not sure where the copy button would
                            // go for each rule without being wasted space for most users.
                            // opt.r.v = exportedRule.v;
                            focusValueField = true;
                        }
                    }

                    opt.element = container;
                    var rule = opt.r;
                    if (!rule.hasOwnProperty('t')) {
                        rule.t = 'eq';
                    }
                    if (!opt.hasOwnProperty('i')) {
                        opt._i = Math.floor((0x99999-0x10000)*Math.random()).toString();
                    }
                    container.css({
                        overflow: 'hidden',
                        whiteSpace: 'nowrap',
                        display: "flex",
                        "align-items":"center"
                    });
                    var inputRows = $('<div></div>',{style:"flex-grow:1"}).appendTo(container);
                    var row = $('<div></div>',{style:"display: flex;"}).appendTo(inputRows);
                    var row2 = $('<div/>',{style:"display: flex; padding-top: 5px; padding-left: 175px;"}).appendTo(inputRows);
                    var row3 = $('<div/>',{style:"display: flex; padding-top: 5px; align-items: center"}).appendTo(inputRows);

                    var row4 = $('<div/>',{style:"visibility: hidden; height: 0px;"}).appendTo(inputRows);
                    var textSpan = $("<span/>").appendTo(row4);
                    var selectField = $('<select/>',{style:"width:120px; text-align: center;"}).appendTo(row);
                    var group0 = $('<optgroup/>', { label: RED._("node-red:switch.label.value-rules") }).appendTo(selectField);
                    for (var d in operators) {
                        if(operators[d].kind === 'V') {
                            group0.append($("<option></option>").val(operators[d].v).text(/^switch/.test(operators[d].t)?node._(operators[d].t):operators[d].t));
                        }
                    }
                    var group1 = $('<optgroup/>', { label: RED._("node-red:switch.label.sequence-rules") }).appendTo(selectField);
                    for (var d in operators) {
                        if(operators[d].kind === 'S') {
                            group1.append($("<option></option>").val(operators[d].v).text(/^switch/.test(operators[d].t)?node._(operators[d].t):operators[d].t));
                        }
                    }
                    for (var d in operators) {
                        if(operators[d].kind === 'O') {
                            selectField.append($("<option></option>").val(operators[d].v).text(/^switch/.test(operators[d].t)?node._(operators[d].t):operators[d].t));
                        }
                    }

                    var rowInputCell = $('<div>',{style:"flex-grow:1; margin-left: 5px;"}).appendTo(row);


                    var valueField = null;
                    var numValueField = null;
                    var expValueField = null;
                    var btwnAndLabel = null;
                    var btwnValueField = null;
                    var btwnValue2Field = null;
                    var typeValueField = null;

                    var finalspan = $('<span/>',{style:"margin-left: 5px;"}).appendTo(container);
                    finalspan.append(' &#8594; <span class="node-input-rule-index">'+(i+1)+'</span> ');

                    var caseSensitive = $('<input/>',{id:"node-input-rule-case-"+i,class:"node-input-rule-case",type:"checkbox",style:"width:auto;vertical-align:top"}).appendTo(row2);
                    $('<label/>',{for:"node-input-rule-case-"+i,style:"margin-left: 3px;"}).text(caseLabel).appendTo(row2);

                    selectField.on("change", function() {
                        var fieldToFocus;
                        var type = selectField.val();
                        if (valueField) { valueField.typedInput('hide'); }
                        if (expValueField) { expValueField.typedInput('hide'); }
                        if (numValueField) { numValueField.typedInput('hide'); }
                        if (typeValueField) { typeValueField.typedInput('hide'); }
                        if (btwnValueField) { btwnValueField.typedInput('hide'); }
                        if (btwnValue2Field) { btwnValue2Field.typedInput('hide'); }

                        if ((type === "btwn") || (type === "index")) {
                            if (!btwnValueField){
                                btwnValueField = createBtwnValueField(rowInputCell);
                            }
                            btwnValueField.typedInput('show');
                            fieldToFocus = btwnValueField;
                        } else if ((type === "head") || (type === "tail")) {
                            if (!numValueField){
                                numValueField = createNumValueField(rowInputCell);
                            }
                            numValueField.typedInput('show');
                            fieldToFocus = numValueField;
                        } else if (type === "jsonata_exp") {
                            if (!expValueField){
                                expValueField = createExpValueField(rowInputCell);
                            }
                            expValueField.typedInput('show');
                            fieldToFocus = expValueField;

                        } else if (type === "istype") {
                            if (!typeValueField){
                                typeValueField = createTypeValueField(rowInputCell);
                            }
                            typeValueField.typedInput('show');
                            fieldToFocus = typeValueField;
                        } else if (! (type === "true" || type === "false" || type === "null" || type === "nnull" || type === "empty" || type === "nempty" || type === "else" )) {
                                if (!valueField){
                                    valueField = createValueField(rowInputCell);
                                }
                                valueField.typedInput('show');
                                fieldToFocus = valueField;
                        }
                        if (type === "regex") {
                            row2.show();
                            row3.hide();
                        } else if ((type === "btwn") || (type === "index")) {
                            row2.hide();
                            row3.show();
                            if (!btwnValue2Field){
                                btwnValue2Field = createBtwnValue2Field(row3, andLabel);
                            }
                            btwnValue2Field.typedInput('show');
                        } else {
                            row2.hide();
                            row3.hide();
                        }
                        var selectedLabel = selectField.find("option:selected").text();

                        textSpan.text(selectedLabel);
                        var width = textSpan.width();
                        if (width <= 30) {
                            selectField.outerWidth(60);
                        } else if (width <= 85) {
                            selectField.outerWidth(120);
                        } else {
                            selectField.width("auto")
                        }
                        if (fieldToFocus) {
                            fieldToFocus.typedInput("focus");
                        }
                        // Preselect the contents of the element
                        // if (focusValueField && document.activeElement) {
                        //     document.activeElement.selectionStart = 0;
                        //     document.activeElement.selectionEnd = document.activeElement.value.length;
                        // }
                    });
                    selectField.val(rule.t);

                    if ((rule.t == "btwn") || (rule.t == "index")) {
                        btwnValueField = createBtwnValueField(rowInputCell,rule.vt||'num');
                        btwnValueField.typedInput('value',rule.v);
                        btwnValue2Field = createBtwnValue2Field(row3, andLabel,rule.v2t||'num');
                        btwnValue2Field.typedInput('value',rule.v2);
                    } else if ((rule.t === "head") || (rule.t === "tail")) {
                        numValueField = createNumValueField(rowInputCell,rule.vt||'num');
                        numValueField.typedInput('value',rule.v);
                    } else if (rule.t === "istype") {
                        typeValueField = createTypeValueField(rowInputCell,rule.vt);
                        typeValueField.typedInput('value',rule.vt);
                    } else if (rule.t === "jsonata_exp") {
                        expValueField = createExpValueField(rowInputCell,rule.vt||'jsonata');
                        expValueField.typedInput('value',rule.v);
                    } else if (typeof rule.v != "undefined") {
                        valueField = createValueField(rowInputCell,rule.vt||'str');
                        valueField.typedInput('value',rule.v);
                    }
                    caseSensitive.prop('checked',!!rule.case);
                    selectField.change();

                    var currentOutputs = JSON.parse(outputCount.val()||"{}");
                    currentOutputs[opt.hasOwnProperty('i')?opt.i:opt._i] = i;
                    outputCount.val(JSON.stringify(currentOutputs));
                },
                removeItem: function(opt) {
                    var currentOutputs = JSON.parse(outputCount.val()||"{}");
                    if (opt.hasOwnProperty('i')) {
                        currentOutputs[opt.i] = -1;
                    } else {
                        delete currentOutputs[opt._i];
                    }
                    var rules = $("#node-input-rule-container").editableList('items');
                    rules.each(function(i) {
                        $(this).find(".node-input-rule-index").html(i+1);
                        var data = $(this).data('data');
                        currentOutputs[data.hasOwnProperty('i')?data.i:data._i] = i;
                    });
                    outputCount.val(JSON.stringify(currentOutputs));
                },
                sortItems: function(rules) {
                    var currentOutputs = JSON.parse(outputCount.val()||"{}");
                    var rules = $("#node-input-rule-container").editableList('items');
                    rules.each(function(i) {
                        $(this).find(".node-input-rule-index").html(i+1);
                        var data = $(this).data('data');
                        currentOutputs[data.hasOwnProperty('i')?data.i:data._i] = i;
                    });
                    outputCount.val(JSON.stringify(currentOutputs));
                },
                sortable: true,
                removable: true
            });

            for (var i=0;i<this.rules.length;i++) {
                var rule = this.rules[i];
                $("#node-input-rule-container").editableList('addItem',{r:rule,i:i});
            }
        },
        oneditsave: function() {
            var rules = $("#node-input-rule-container").editableList('items');
            var node = this;
            node.rules = [];
            rules.each(function(i) {
                node.rules.push(exportRule($(this)));
            });
            this.propertyType = $("#node-input-property").typedInput('type');
        },
        oneditresize: function(size) {
            var rows = $("#dialog-form>div:not(.node-input-rule-container-row)");
            var height = size.height;
            for (var i=0;i<rows.length;i++) {
                height -= $(rows[i]).outerHeight(true);
            }
            var editorRow = $("#dialog-form>div.node-input-rule-container-row");
            height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));
            height += 16;
            $("#node-input-rule-container").editableList('height',height);
        }
    });
})();
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="switch">
    <p>Route messages based on their property values or sequence position.</p>
    <h3>Details</h3>
    <p>When a message arrives, the node will evaluate each of the defined rules
    and forward the message to the corresponding outputs of any matching rules.</p>
    <p>Optionally, the node can be set to stop evaluating rules once it finds one
    that matches.</p>
    <p>The rules can be evaluated against an individual message property, a flow or global
    context property, environment variable or the result of a JSONata expression.</p>
    <h4>Rules</h4>
    <p>There are four types of rule:</p>
    <ol>
        <li><b>Value</b> rules are evaluated against the configured property</li>
        <li><b>Sequence</b> rules can be used on message sequences, such as those
            generated by the Split node</li>
        <li>A JSONata <b>Expression</b> can be provided that will be evaluated
            against the whole message and will match if the expression returns
            a true value.</li>
        <li>An <b>Otherwise</b> rule can be used to match if none of the preceeding
            rules have matched.</li>
    </ol>
    <h4>Notes</h4>
    <p>The <code>is true/false</code> and <code>is null</code> rules perform strict
       comparisons against those types. They do not convert between types.</p>
    <p>The <code>is empty</code> and <code>is not empty</code> rules can be used to test the length of Strings, Arrays and Buffers, or the number of properties an Object has. Neither rule will pass if the property being tested has a <code>boolean</code>, <code>null</code> 
       or <code>undefined</code> value.</p>
    <h4>Handling message sequences</h4>
    <p>By default, the node does not modify the <code>msg.parts</code> property of messages
       that are part of a sequence.</p>
    <p>The <b>recreate message sequences</b> option can be enabled to generate new message sequences
       for each rule that matches. In this mode, the node will buffer the entire incoming
       sequence before sending the new sequences on. The runtime setting <code>nodeMessageBufferMaxLength</code>
       can be used to limit how many messages nodes will buffer.</p>
</script>

</div><div><!-- --- [red-module:node-red/change] --- -->

<script type="text/html" data-template-name="change">
    <style>
        ol#node-input-rule-container .red-ui-typedInput-container {
            flex:1;
        }
    </style>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" style="width: calc(100% - 105px)"  data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-row" style="margin-bottom:0;">
        <label><i class="fa fa-list"></i> <span data-i18n="change.label.rules"></span></label>
    </div>
    <div class="form-row node-input-rule-container-row">
        <ol id="node-input-rule-container"></ol>
    </div>
</script>

<script type="text/javascript">
(function() {
    RED.nodes.registerType('change', {
        color: "#E2D96E",
        category: 'function',
        defaults: {
            name: {value:""},
            rules:{
                value:[{t:"set",p:"payload",pt:"msg",to:"",tot:"str"}],
                validate: function(rules, opt) {
                    let msg;
                    const errors = []
                    if (!rules || rules.length === 0) { return true }
                    for (var i=0;i<rules.length;i++) {
                        const opt = { label: RED._('node-red:change.label.rule')+' '+(i+1) }
                        const r = rules[i];
                        if (r.t === 'set' || r.t === 'change' || r.t === 'delete' || r.t === 'move') {
                            if ((msg = RED.utils.validateTypedProperty(r.p,r.pt,opt)) !== true) {
                                errors.push(msg)
                            }
                        }
                        if (r.t === 'set' || r.t === 'change' || r.t === 'move') {
                            if ((msg = RED.utils.validateTypedProperty(r.to,r.tot,opt)) !== true) {
                                errors.push(msg)
                            }
                        }
                        if (r.t === 'change') {
                            if ((msg = RED.utils.validateTypedProperty(r.from,r.fromt,opt)) !== true) {
                                errors.push(msg)
                            }
                        }
                    }
                    if (errors.length) {
                        return errors
                    }
                    return true;
                }
            },
            // legacy
            action: {value:""},
            property: {value:""},
            from: {value:""},
            to: {value:""},
            reg: {value:false}
        },
        inputs: 1,
        outputs: 1,
        icon: "swap.svg",
        label: function() {
            function prop2name(type, key) {
                var result = RED.utils.parseContextKey(key);
                return type +"." +result.key;
            }
            if (this.name) {
                return this.name;
            }
            if (!this.rules) {
                if (this.action === "replace") {
                    return this._("change.label.set",{property:"msg."+this.property});
                } else if (this.action === "change") {
                    return this._("change.label.change",{property:"msg."+this.property});
                } else if (this.action === "move") {
                    return this._("change.label.move",{property:"msg."+this.property});
                } else {
                    return this._("change.label.delete",{property:"msg."+this.property});
                }
            } else {
                if (this.rules.length == 1) {
                    if (this.rules[0].t === "set") {
                        return this._("change.label.set",{property:prop2name((this.rules[0].pt||"msg"), this.rules[0].p)});
                    } else if (this.rules[0].t === "change") {
                        return this._("change.label.change",{property:prop2name((this.rules[0].pt||"msg"), this.rules[0].p)});
                    } else if (this.rules[0].t === "move") {
                        return this._("change.label.move",{property:prop2name((this.rules[0].pt||"msg"), this.rules[0].p)});
                    } else {
                        return this._("change.label.delete",{property:prop2name((this.rules[0].pt||"msg"), this.rules[0].p)});
                    }
                } else {
                    return this._("change.label.changeCount",{count:this.rules.length});
                }
            }
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        },
        oneditprepare: function() {
            var set = this._("change.action.set");
            var change = this._("change.action.change");
            var del = this._("change.action.delete");
            var move = this._("change.action.move");
            var to = this._("change.action.to");
            var toValueLabel = this._("change.action.toValue",to);
            var search = this._("change.action.search");
            var replace = this._("change.action.replace");
            var regex = this._("change.label.regex");
            var deepCopyLabel = this._("change.label.deepCopy");

            function createPropertyValue(row2_1, row2_2, defaultType) {
                var propValInput = $('<input/>',{class:"node-input-rule-property-value",type:"text"})
                    .appendTo(row2_1)
                    .typedInput({default:defaultType||'str',types:['msg','flow','global','str','num','bool','json','bin','date','jsonata','env']});

                var dcLabel = $('<label style="padding-left: 130px;"></label>').appendTo(row2_2);
                var deepCopy = $('<input type="checkbox" class="node-input-rule-property-deepCopy" style="width: auto; margin: 0 6px 0 0">').appendTo(dcLabel)
                $('<span>').text(deepCopyLabel).appendTo(dcLabel)

                propValInput.on("change", function(evt,type,val) {
                    row2_2.toggle(type === "msg" || type === "flow" || type === "global" || type === "env");
                })
                return [propValInput, deepCopy];
            }
            function createFromValue(row3_1, defaultType) {
                return $('<input/>',{class:"node-input-rule-property-search-value",type:"text"})
                .appendTo(row3_1)
                .typedInput({default:defaultType||'str',types:['msg','flow','global','str','re','num','bool','env']});
            }
            function createToValue(row3_2, defaultType) {
                return $('<input/>',{class:"node-input-rule-property-replace-value",type:"text"})
                .appendTo(row3_2)
                .typedInput({default:defaultType||'str',types:['msg','flow','global','str','num','bool','json','bin','env']});
            }
            function createMoveValue(row4, defaultType) {
                return $('<input/>',{class:"node-input-rule-property-move-value",type:"text"})
                .appendTo(row4)
                .typedInput({default:defaultType||'msg',types:['msg','flow','global']});
            }

            $('#node-input-rule-container').css('min-height','150px').css('min-width','450px').editableList({
                addItem: function(container,i,opt) {
                    var rule = opt;
                    if (!rule.hasOwnProperty('t')) {
                        rule = {t:"set",p:"payload",to:"",tot:"str"};
                    }
                    if (rule.t === "change" && rule.re) {
                        rule.fromt = 're';
                        delete rule.re;
                    }
                    if (rule.t === "set" && !rule.tot) {
                        if (rule.to.indexOf("msg.") === 0 && !rule.tot) {
                            rule.to = rule.to.substring(4);
                            rule.tot = "msg";
                        } else {
                            rule.tot = "str";
                        }
                    }
                    if (rule.t === "move" && !rule.tot) {
                        rule.tot = "msg";
                    }
                    container.css({
                        overflow: 'hidden',
                        whiteSpace: 'nowrap'
                    });
                    let fragment = document.createDocumentFragment();
                    var row1 = $('<div/>',{style:"display:flex; align-items: baseline"}).appendTo(fragment);
                    var row2 = $('<div/>',{style:"margin-top:8px;"}).appendTo(fragment);
                    var row3 = $('<div/>',{style:"margin-top:8px;"}).appendTo(fragment);
                    var row4 = $('<div/>',{style:"display:flex;margin-top:8px;align-items: baseline"}).appendTo(fragment);

                    var selectField = $('<select/>',{class:"node-input-rule-type",style:"width:110px; margin-right:10px;"}).appendTo(row1);
                    var selectOptions = [{v:"set",l:set},{v:"change",l:change},{v:"delete",l:del},{v:"move",l:move}];
                    for (var i=0; i<4; i++) {
                        selectField.append($("<option></option>").val(selectOptions[i].v).text(selectOptions[i].l));
                    }

                    var propertyName = $('<input/>',{class:"node-input-rule-property-name",type:"text"})
                        .appendTo(row1)
                        .typedInput({types:['msg','flow','global']});

                    var row2_1 = $('<div/>', {style:"display:flex;align-items: baseline"}).appendTo(row2);
                    $('<div/>',{style:"display:inline-block;text-align:right; width:120px; padding-right:10px; box-sizing:border-box;"})
                        .text(toValueLabel)
                        .appendTo(row2_1);

                    var row2_2 = $('<div/>', {style:"margin-top: 4px;"}).appendTo(row2);

                    var row3_1 = $('<div/>', {style:"display:flex;align-items: baseline"}).appendTo(row3);
                    $('<div/>',{style:"display:inline-block;text-align:right; width:120px; padding-right:10px; box-sizing:border-box;"})
                        .text(search)
                        .appendTo(row3_1);

                    var row3_2 = $('<div/>',{style:"display:flex;margin-top:8px;align-items: baseline"}).appendTo(row3);
                    $('<div/>',{style:"display:inline-block;text-align:right; width:120px; padding-right:10px; box-sizing:border-box;"})
                        .text(replace)
                        .appendTo(row3_2);

                    $('<div/>',{style:"display:inline-block;text-align:right; width:120px; padding-right:10px; box-sizing:border-box;"})
                        .text(to)
                        .appendTo(row4);

                    let propertyValue = null;
                    let fromValue = null;
                    let toValue = null;
                    let moveValue = null;

                    selectField.on("change", function() {
                        var type = $(this).val();
                        if (propertyValue) {
                            propertyValue.typedInput('hide');
                        }
                        if (fromValue) {
                            fromValue.typedInput('hide');
                        }
                        if (toValue) {
                            toValue.typedInput('hide');
                        }
                        if (moveValue) {
                            moveValue.typedInput('hide');
                        }

                        if (type == "set") {
                            if(!propertyValue) {
                                var parts = createPropertyValue(row2_1, row2_2);
                                propertyValue = parts[0];
                                deepCopy = parts[1];
                            }
                            propertyValue.typedInput('show');
                            row2.show();
                            row3.hide();
                            row4.hide();
                        } else if (type == "change") {
                            if(!fromValue) {
                                fromValue = createFromValue(row3_1);
                            }
                            fromValue.typedInput('show');
                            if(!toValue) {
                                toValue = createToValue(row3_2);
                            }
                            toValue.typedInput('show');
                            row2.hide();
                            row3.show();
                            row4.hide();
                        } else if (type == "delete") {
                            row2.hide();
                            row3.hide();
                            row4.hide();
                        } else if (type == "move") {
                            if(!moveValue) {
                                moveValue = createMoveValue(row4);
                            }
                            moveValue.typedInput('show');
                            row2.hide();
                            row3.hide();
                            row4.show();
                        }
                    });

                    selectField.val(rule.t);
                    propertyName.typedInput('value',rule.p);
                    propertyName.typedInput('type',rule.pt);
                    if (rule.t == "set") {
                        var parts = createPropertyValue(row2_1, row2_2, rule.tot);
                        propertyValue = parts[0];
                        deepCopy = parts[1];
                        propertyValue.typedInput('value',rule.to);
                        deepCopy.prop("checked", !!rule.dc);
                    }
                    if (rule.t == "move") {
                        moveValue = createMoveValue(row4,rule.tot);
                        moveValue.typedInput('value',rule.to);
                    }
                    if (rule.t == "change") {
                        fromValue = createFromValue(row3_1, rule.fromt);
                        fromValue.typedInput('value',rule.from);

                        toValue = createToValue(row3_2,rule.tot);
                        toValue.typedInput('value',rule.to);
                    }
                    selectField.change();
                    container[0].appendChild(fragment);
                },
                removable: true,
                sortable: true
            });

            if (!this.rules) {
                var rule = {
                    t:(this.action=="replace"?"set":this.action),
                    p:this.property,
                    pt:"msg"
                };

                if ((rule.t === "set")||(rule.t === "move")) {
                    rule.to = this.to;
                } else if (rule.t === "change") {
                    rule.from = this.from;
                    rule.to = this.to;
                    rule.re = this.reg;
                }

                delete this.to;
                delete this.from;
                delete this.reg;
                delete this.action;
                delete this.property;

                this.rules = [rule];
            }

            for (var i=0; i<this.rules.length; i++) {
                var rule = this.rules[i];
                $("#node-input-rule-container").editableList('addItem',rule);
            }
        },
        oneditsave: function() {
            var rules = $("#node-input-rule-container").editableList('items');
            var node = this;
            node.rules= [];
            rules.each(function(i) {
                var rule = $(this);
                var type = rule.find(".node-input-rule-type").val();
                var r = {
                    t:type,
                    p:rule.find(".node-input-rule-property-name").typedInput('value'),
                    pt:rule.find(".node-input-rule-property-name").typedInput('type')
                };
                if (type === "set") {
                    r.to = rule.find(".node-input-rule-property-value").typedInput('value');
                    r.tot = rule.find(".node-input-rule-property-value").typedInput('type');
                    if (rule.find(".node-input-rule-property-deepCopy").prop("checked")) {
                        r.dc = true;
                    }
                } else if (type === "move") {
                    r.to = rule.find(".node-input-rule-property-move-value").typedInput('value');
                    r.tot = rule.find(".node-input-rule-property-move-value").typedInput('type');
                } else if (type === "change") {
                    r.from = rule.find(".node-input-rule-property-search-value").typedInput('value');
                    r.fromt = rule.find(".node-input-rule-property-search-value").typedInput('type');
                    r.to = rule.find(".node-input-rule-property-replace-value").typedInput('value');
                    r.tot = rule.find(".node-input-rule-property-replace-value").typedInput('type');
                }
                node.rules.push(r);
            });
        },
        oneditresize: function(size) {
            var rows = $("#dialog-form>div:not(.node-input-rule-container-row)");
            var height = size.height;
            for (var i=0; i<rows.length; i++) {
                height -= $(rows[i]).outerHeight(true);
            }
            var editorRow = $("#dialog-form>div.node-input-rule-container-row");
            height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));
            height += 16;
            $("#node-input-rule-container").editableList('height',height);
        }
    });
})();
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="change">
    <p>Set, change, delete or move properties of a message, flow context or global context.</p>
    <p>The node can specify multiple rules that will be applied in the order they are defined.</p>
    <h3>Details</h3>
    <p>The available operations are:</p>
    <dl class="message-properties">
    <dt>Set</dt>
    <dd>set a property. The value can be a variety of different types, or
            can be taken from an existing message or context property.</dd>
    <dt>Change</dt>
    <dd>search &amp; replace parts of the property. If regular expressions
        are enabled, the "replace with" property can include capture groups, for
        example <code>$1</code>. Replace will only change the type if there
        is a complete match.</dd>
    <dt>Delete</dt>
    <dd>delete a property.</dd>
    <dt>Move</dt>
    <dd>move or rename a property.</dd>
    </dl>
    <p>The "expression" type uses the <a href="http://jsonata.org/" target="_new">JSONata</a>
    query and expression language.
    </p>
</script>

</div><div><!-- --- [red-module:node-red/range] --- -->

<script type="text/html" data-template-name="range">
    <div class="form-row">
        <label for="node-input-property"><i class="fa fa-ellipsis-h"></i> <span data-i18n="common.label.property"></span></label>
        <input type="text" id="node-input-property" style="width:calc(70% - 1px)"/>
    </div>
    <div class="form-row">
        <label for="node-input-action"><i class="fa fa-dot-circle-o"></i> <span data-i18n="range.label.action"></span></label>
        <select id="node-input-action" style="width:70%;">
            <option value="scale" data-i18n="range.scale.payload"></option>
            <option value="clamp" data-i18n="range.scale.limit"></option>
            <option value="roll" data-i18n="range.scale.wrap"></option>
            <option value="drop" data-i18n="range.scale.drop"></option>
        </select>
    </div>
    <br/>
    <div class="form-row"><i class="fa fa-sign-in"></i> <span data-i18n="range.label.inputrange"></span>:</div>
    <div class="form-row"><label></label>
        <span data-i18n="range.label.from"></span>: <input type="text" id="node-input-minin" data-i18n="[placeholder]range.placeholder.min" style="width:100px;"/>
        &nbsp;&nbsp;<span data-i18n="range.label.to"></span>: <input type="text" id="node-input-maxin" data-i18n="[placeholder]range.placeholder.maxin" style="width:100px;"/>
    </div>
    <div class="form-row"><i class="fa fa-sign-out"></i> <span data-i18n="range.label.resultrange"></span>:</div>
    <div class="form-row"><label></label>
        <span data-i18n="range.label.from"></span>: <input type="text" id="node-input-minout" data-i18n="[placeholder]range.placeholder.min" style="width:100px;"/>
        &nbsp;&nbsp;<span data-i18n="range.label.to"></span>: <input type="text" id="node-input-maxout" data-i18n="[placeholder]range.placeholder.maxout" style="width:100px;"/>
    </div>
    <br/>
    <div class="form-row"><label></label>
        <input type="checkbox" id="node-input-round" style="display: inline-block; width: auto; vertical-align: top;">
        <label style="width: auto;" for="node-input-round"><span data-i18n="range.label.roundresult"></span></label></input>
    </div>
    <br/>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-tips" id="node-tip"><span data-i18n="range.tip"></span></div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('range', {
        color: "#E2D96E",
        category: 'function',
        defaults: {
            minin: {value:"", required: true,
                    label:RED._("node-red:range.label.minin"),
                    validate:RED.validators.number(false)},
            maxin: {value:"", required: true,
                    label:RED._("node-red:range.label.maxin"),
                    validate:RED.validators.number(false)},
            minout: {value:"", required:true,
                     label:RED._("node-red:range.label.minout"),
                     validate:RED.validators.number(false)},
            maxout: {value:"", required:true,
                     label:RED._("node-red:range.label.maxout"),
                     validate:RED.validators.number(false)},
            action: {value:"scale"},
            round: {value:false},
            property: {value:"payload",required:true,
                       label:RED._("node-red:common.label.property"),
                       validate: RED.validators.typedInput({ type: 'msg', allowBlank: true })
                    },
            name: {value:""}
        },
        inputs: 1,
        outputs: 1,
        icon: "range.svg",
        label: function() {
            if (this.minout !== "" && this.maxout !== "") { return this.name||this.minout + " - " + this.maxout; }
            else { return this.name||this._("range.range"); }
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        },
        oneditprepare: function() {
            if (this.property === undefined) {
                $("#node-input-property").val("payload");
            }
            $("#node-input-property").typedInput({default:'msg',types:['msg']});
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="range">
    <p>Maps a numeric value to a different range.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">number</span></dt>
        <dd>The payload <i>must</i> be a number. Anything else will try to be
        parsed into a number and rejected if that fails.</dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">number</span></dt>
        <dd>The value mapped to the new range.</dd>
    </dl>
    <h3>Details</h3>
    <p>This node will linearly scale the received value. By default, the result
    is not constrained to the range defined in the node.</p>
    <p><i>Scale and limit to target range</i> means that the result will never be outside
    the range specified within the target range.</p>
    <p><i>Scale and wrap within the target range</i> means that the result will
    be wrapped within the target range.</p>
    <p><i>Scale, but drop if outside input range</i> means that the result will
    be scaled, but any inputs outside of the inout range will be dropped.</p>
    <p>For example an input 0 - 10 mapped to 0 - 100.</p>
    <table style="outline-width:#888 solid thin">
        <tr><th width="80px">mode</th><th width="80px">input</th><th width="80px">output</th></tr>
        <tr><td><center>scale</center></td><td><center>12</center></td><td><center>120</center></td></tr>
        <tr><td><center>limit</center></td><td><center>12</center></td><td><center>100</center></td></tr>
        <tr><td><center>wrap</center></td><td><center>12</center></td><td><center>20</center></td></tr>
        <tr><td><center>drop</center></td><td><center>12</center></td><td><center><i>(no output)</i></center></td></tr>
    </table>
</script>

</div><div><!-- --- [red-module:node-red/template] --- -->

<script type="text/html" data-template-name="template">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <div style="display: inline-block; width: calc(100% - 105px)"><input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name"></div>
    </div>
    <div class="form-row">
        <label for="node-input-field"><i class="fa fa-ellipsis-h"></i> <span data-i18n="template.label.property"></span></label>
        <input type="text" id="node-input-field" placeholder="payload" style="width:250px;">
        <input type="hidden" id="node-input-fieldType">
    </div>
    <div class="form-row" style="position: relative; margin-bottom: 0px;">
        <label for="node-input-template"><i class="fa fa-file-code-o"></i> <span data-i18n="template.label.template"></span></label>
        <input type="hidden" id="node-input-template" autofocus="autofocus">
        <div style="position: absolute; right:0;display:inline-block; text-align: right; font-size: 0.8em;">
            <span data-i18n="template.label.format"></span>:
            <select id="node-input-format" style="width:110px; font-size: 10px !important;  height: 24px; padding:0;">
                <option value="handlebars">mustache</option>
                <option value="html">HTML</option>
                <option value="json">JSON</option>
                <option value="javascript">JavaScript</option>
                <option value="css">CSS</option>
                <option value="markdown">Markdown</option>
                <option value="php">PHP</option>
                <option value="python">Python</option>
                <option value="sql">SQL</option>
                <option value="yaml">YAML</option>
                <option value="text" data-i18n="template.label.none"></option>
            </select>
            <button type="button" id="node-template-expand-editor" class="red-ui-button red-ui-button-small"><i class="fa fa-expand"></i></button>
        </div>
    </div>
    <div class="form-row node-text-editor-row">
        <div style="height: 250px; min-height:150px;" class="node-text-editor" id="node-input-template-editor" ></div>
    </div>
    <div class="form-row">
        <label for="node-input-syntax"><i class="fa fa-code"></i> <span data-i18n="template.label.syntax"></span></label>
        <select id="node-input-syntax" style="width:180px;">
            <option value="mustache" data-i18n="template.label.mustache"></option>
            <option value="plain" data-i18n="template.label.plain"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-output"><i class="fa fa-long-arrow-right"></i> <span data-i18n="template.label.output"></span></label>
        <select id="node-input-output" style="width:180px;">
            <option value="str" data-i18n="template.label.plain"></option>
            <option value="json" data-i18n="template.label.json"></option>
            <option value="yaml" data-i18n="template.label.yaml"></option>
        </select>
    </div>

</script>

<script type="text/javascript">
    RED.nodes.registerType('template',{
        color:"rgb(243, 181, 103)",
        category: 'function',
        defaults: {
            name: {value:""},
            field: {value:"payload",
                    label:"payload",
                    validate:RED.validators.typedInput("fieldType", false)},
            fieldType: {value:"msg"},
            format: {value:"handlebars"},
            syntax: {value:"mustache"},
            template: {value:"This is the payload: {{payload}} !"},
            output: {value:"str"}
        },
        inputs:1,
        outputs:1,
        icon: "template.svg",
        label: function() {
            return this.name||this._("template.template");;
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            const that = this;
            const stateId = RED.editor.generateViewStateId("node", this, "");
            if (!this.field) {
                this.field = 'payload';
                $("#node-input-field").val("payload");
            }
            if (!this.fieldType) {
                this.fieldType = 'msg';
            }
            if (!this.syntax) {
                this.syntax = 'mustache';
                $("#node-input-syntax").val(this.syntax);
            }
            $("#node-input-field").typedInput({
                default: 'msg',
                types: ['msg','flow','global'],
                typeField: $("#node-input-fieldType")
            });
            this.editor = RED.editor.createEditor({
                id: 'node-input-template-editor',
                mode: 'ace/mode/html',
                stateId: stateId,
                value: $("#node-input-template").val()
            });
            RED.library.create({
                url:"templates", // where to get the data from
                type:"template", // the type of object the library is for
                editor:that.editor, // the field name the main text body goes to
                fields:['name','format','output','syntax'],
                ext: "txt"
            });

            $("#node-input-format").on("change", function() {
                var mod = "ace/mode/"+$("#node-input-format").val();
                that.editor.getSession().setMode({
                    path: mod,
                    v: Date.now()
                });
            });
            RED.popover.tooltip($("#node-template-expand-editor"), RED._("node-red:common.label.expand"));
            $("#node-template-expand-editor").on("click", function (e) {
                e.preventDefault();
                const value = that.editor.getValue();
                that.editor.saveView();
                RED.editor.editText({
                    mode: $("#node-input-format").val(),
                    value: value,
                    stateId: stateId,
                    width: "Infinity",
                    focus: true,
                    complete: function (v, cursor) {
                        that.editor.setValue(v, -1);
                        setTimeout(function () {
                            that.editor.restoreView();
                            that.editor.focus();
                        }, 250);
                    }
                })
            })
        },
        oneditsave: function() {
            $("#node-input-template").val(this.editor.getValue());
            this.editor.destroy();
            delete this.editor;
        },
        oneditcancel: function() {
            this.editor.destroy();
            delete this.editor;
        },
        oneditresize: function(size) {
            var rows = $("#dialog-form>div:not(.node-text-editor-row)");
            var height = $("#dialog-form").height();
            for (var i=0; i<rows.length; i++) {
                height -= $(rows[i]).outerHeight(true);
            }
            var editorRow = $("#dialog-form>div.node-text-editor-row");
            height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));
            $("#dialog-form .node-text-editor").css("height",height+"px");
            this.editor.resize();
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="template">
    <p>Sets a property based on the provided template.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>msg <span class="property-type">object</span></dt>
        <dd>A msg object containing information to populate the template.</dd>
        <dt class="optional">template <span class="property-type">string</span></dt>
        <dd>A template to be populated from <code>msg.payload</code>. If not configured in the edit panel,
         this can be set as a property of msg.</dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>msg <span class="property-type">object</span></dt>
        <dd>a msg with a property set by populating the configured template with properties from the incoming msg.</dd>
    </dl>
    <h3>Details</h3>
    <p>By default this uses the <i><a href="http://mustache.github.io/mustache.5.html" target="_blank">mustache</a></i>
    format, but this can be switched off if required.</p>
    <p>For example, when a template of:
    <pre>Hello {{payload.name}}. Today is {{date}}</pre>
    <p>receives a message containing:
    <pre>{
  date: "Monday",
  payload: {
    name: "Fred"
  }
}</pre>
    <p>The resulting property will be:
    <pre>Hello Fred. Today is Monday</pre>
    <p>It is possible to use a property from the flow context or global context. Just use <code>{{flow.name}}</code> or
    <code>{{global.name}}</code>, or for persistable store <code>store</code> use <code>{{flow[store].name}}</code> or
    <code>{{global[store].name}}</code>.
    <p><b>Note: </b>By default, <i>mustache</i> will escape any non-alphanumeric or HTML entities in the values it substitutes.
       To prevent this, use <code>{{{triple}}}</code> braces.</p>
    <p>If you need to use <code>{{ }}</code> within your content, you can change the characters
       used to mark the templated sections. For example, to use <code>[[ ]]</code>
       instead, add the following line to the top of the template:</p>
    <pre>{{=[[ ]]=}}</pre>
    <h4>Using environment variables</h4>
    <p>The template node can access environment variables using the syntax:</p>
    <pre>My favourite colour is {{env.COLOUR}}.</pre>
</script>

</div><div><!-- --- [red-module:node-red/delay] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="delay">
    <div class="form-row">
        <label for="node-input-delay-action"><i class="fa fa-tasks"></i> <span data-i18n="delay.action"></span></label>
        <select id="node-input-delay-action" style="width:270px !important">
            <option value="delay" data-i18n="delay.delaymsg"></option>
            <option value="rate" data-i18n="delay.limitrate"></option>
        </select>
    </div>

    <div id="delay-details">
        <div class="form-row">
            <label></label>
            <select id="node-input-delay-type" style="width:270px !important">
                <option value="delay" data-i18n="delay.delayfixed"></option>
                <option value="random" data-i18n="delay.randomdelay"></option>
                <option value="delayv" data-i18n="delay.delayvarmsg"></option>
            </select>
        </div>
        <div class="form-row" id="delay-details-for">
            <label for="node-input-timeout"><i class="fa fa-clock-o"></i> <span data-i18n="delay.for"></span></label>
            <input type="text" id="node-input-timeout" style="text-align:end; width:50px !important">
            <select id="node-input-timeoutUnits" style="width:200px !important">
              <option value="milliseconds" data-i18n="delay.milisecs"></option>
              <option value="seconds" data-i18n="delay.secs"></option>
              <option value="minutes" data-i18n="delay.mins"></option>
              <option value="hours" data-i18n="delay.hours"></option>
              <option value="days" data-i18n="delay.days"></option>
            </select>
        </div>
        <div id="random-details" class="form-row">
            <label for="node-input-randomFirst"><i class="fa fa-clock-o"></i> <span data-i18n="delay.between"></span></label>
            <input type="text" id="node-input-randomFirst" placeholder="" style="text-align:end; width:50px !important">
            &nbsp;<span data-i18n="delay.and"></span>&nbsp;
            <input type="text" id="node-input-randomLast" placeholder="" style="text-align:end; width:50px !important">
            <select id="node-input-randomUnits" style="width:140px !important">
              <option value="milliseconds" data-i18n="delay.milisecs"></option>
              <option value="seconds" data-i18n="delay.secs"></option>
              <option value="minutes" data-i18n="delay.mins"></option>
              <option value="hours" data-i18n="delay.hours"></option>
              <option value="days" data-i18n="delay.days"></option>
            </select>
        </div>
    </div>

    <div id="rate-details">
        <div class="form-row">
            <label></label>
            <select id="node-input-rate-type" style="width:270px !important">
                <option value="all" data-i18n="delay.limitall"></option>
                <option value="topic" data-i18n="delay.limittopic"></option>
            </select>
        </div>
        <div class="form-row">
            <label for="node-input-rate"><i class="fa fa-clock-o"></i> <span data-i18n="delay.rate"></span></label>
            <input type="text" id="node-input-rate" placeholder="1" style="text-align:end; width:40px !important">
            <label for="node-input-rateUnits"><span data-i18n="delay.msgper"></span></label>
            <input type="text" id="node-input-nbRateUnits" placeholder="1" style="text-align:end; width:40px !important">
            <select id="node-input-rateUnits" style="width:90px !important">
              <option value="second" data-i18n="delay.label.units.second.singular"></option>
              <option value="minute" data-i18n="delay.label.units.minute.singular"></option>
              <option value="hour" data-i18n="delay.label.units.hour.singular"></option>
              <option value="day" data-i18n="delay.label.units.day.singular"></option>
            </select>
        </div>
        <div class="form-row" id="rate-override" style="display: flex; align-items: center">
            <label></label><input style="width:30px; margin:0" type="checkbox" id="node-input-allowrate"><label style="margin:0;width: auto;" for="node-input-allowrate" data-i18n="delay.allowrate"></label>
        </div>
        <div class="form-row" id="rate-details-drop">
            <input type="hidden" id="node-input-outputs" value="1">
            <label></label>
            <select id="node-input-drop-select" style="width: 70%">
                <option id="node-input-drop-select-queue" value="queue" data-i18n="delay.queuemsg"></option>
                <option value="drop" data-i18n="delay.dropmsg"></option>
                <option value="emit" data-i18n="delay.sendmsg"></option>
            </select>
        </div>
        <div class="form-row" id="rate-details-per-topic">
            <label></label>
            <select id="node-input-rate-topic-type" style="width:270px !important">
                <option value="queue" data-i18n="delay.fairqueue"></option>
                <option value="timed" data-i18n="delay.timedqueue"></option>
            </select>
        </div>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('delay',{
        category: 'function',
        color:"#E6E0F8",
        defaults: {
            name: {value:""},
            pauseType: {value:"delay", required:true},
            timeout: {
                value:"5", required:true,
                label:RED._("node-red:delay.label.delay"),
                validate:function(v,opt) {
                    if (RED.validators.number(v) && (v >= 0)) {
                        return true;
                    }
                    return RED._("node-red:delay.errors.invalid-timeout");
                }},
            timeoutUnits: {value:"seconds"},
            rate: {
                value:"1",
                required:true,
                label:RED._("node-red:delay.label.rate"),
                validate:function(v,opt) {
                    if (RED.validators.number(v) && (v >= 0)) {
                        return true;
                    }
                    return RED._("node-red:delay.errors.invalid-rate");
                }
            },
            nbRateUnits: {
                value:"1",
                required:false,
                validate:function(v,opt) {
                    if (v === undefined || (RED.validators.number(v) && (v >= 0))) {
                        return true;
                    }
                    return RED._("node-red:delay.errors.invalid-rate-unit");
                }
            },
            rateUnits: {value: "second"},
            randomFirst: {
                value:"1", required:true,
                validate:function(v,opt) {
                    if (RED.validators.number(v) && (v >= 0)) {
                        return true;
                    }
                    return RED._("node-red:delay.errors.invalid-random-first");
                }},
            randomLast: {
                value:"5", required:true,
                validate:function(v,opt) {
                    if (RED.validators.number(v) && (v >= 0)) {
                        return true;
                    }
                    return RED._("node-red:delay.errors.invalid-random-last");
                }},
            randomUnits: {value: "seconds"},
            drop: {value:false},
            allowrate: {value:false},
            outputs: { value: 1},
        },
        inputs:1,
        outputs:1,
        icon: "timer.svg",
        label: function() {
            if (this.name) {
                return this.name;
            }
            if (this.pauseType == "delayv") {
                return this._("delay.label.variable");
            } else if (this.pauseType == "delay") {
                var units = this.timeoutUnits ? this.timeoutUnits.charAt(0) : "s";
                if (this.timeoutUnits == "milliseconds") { units = "ms"; }
                return this._("delay.label.delay")+" "+this.timeout+units;
            } else if (this.pauseType == "random") {
                return this._("delay.label.random");
            } else {
                var rate = this.rate+" msg/"+(this.rateUnits ? (this.nbRateUnits > 1 ? this.nbRateUnits : '') + this.rateUnits.charAt(0) : "s");
                if (this.pauseType == "rate") {
                    return this._("delay.label.limit")+" "+rate;
                } else if (this.pauseType == "timed") {
                    return this._("delay.label.limitTopic")+" "+rate;
                } else {
                    return this._("delay.label.limitTopic")+" "+rate;
                }
            }
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var node = this;
            $( "#node-input-timeout" ).spinner({min:1});
            $( "#node-input-rate" ).spinner({min:1});
            $( "#node-input-nbRateUnits" ).spinner({min:1});

            $( "#node-input-randomFirst" ).spinner({min:0});
            $( "#node-input-randomLast" ).spinner({min:1});

            $('.ui-spinner-button').on("click", function() {
                $(this).siblings('input').trigger("change");
            });

            $( "#node-input-nbRateUnits" ).on('change keyup', function() {
                var $this = $(this);
                var val = parseInt($this.val());
                var type = "singular";
                if (val > 1) {
                    type = "plural";
                }
                if ($this.attr("data-type") == type) {
                    return;
                }
                $this.attr("data-type", type);
                $("#node-input-rateUnits option").each(function () {
                    var $option = $(this);
                    var key = "delay.label.units." + $option.val() + "." + type;
                    $option.attr('data-i18n', 'node-red:' + key);
                    $option.html(node._(key));
                });
            });

            if (this.pauseType == "delay") {
                $("#node-input-delay-action").val('delay');
                $("#node-input-delay-type").val('delay');
            } else if (this.pauseType == "delayv") {
                $("#node-input-delay-action").val('delay');
                $("#node-input-delay-type").val('delayv');
            } else if (this.pauseType == "random") {
                $("#node-input-delay-action").val('delay');
                $("#node-input-delay-type").val('random');
            } else if (this.pauseType == "rate") {
                $("#node-input-delay-action").val('rate');
                $("#node-input-rate-type").val('all');
            } else if (this.pauseType == "queue") {
                $("#node-input-delay-action").val('rate');
                $("#node-input-rate-type").val('topic');
                $("#node-input-rate-topic-type").val('queue');
            } else if (this.pauseType == "timed") {
                $("#node-input-delay-action").val('rate');
                $("#node-input-rate-type").val('topic');
                $("#node-input-rate-topic-type").val('timed');
            }

            if (!this.timeoutUnits) {
                $("#node-input-timeoutUnits option").filter(function() {
                    return $(this).val() == 'seconds';
                }).attr('selected', true);
            }

            if (!this.randomUnits) {
                $("#node-input-randomUnits option").filter(function() {
                    return $(this).val() == 'seconds';
                }).attr('selected', true);
            }

            $("#node-input-delay-action").on("change",function() {
                if (this.value === "delay") {
                    $("#delay-details").show();
                    $("#rate-details").hide();
                } else if (this.value === "rate") {
                    $("#delay-details").hide();
                    $("#rate-details").show();
                }
            }).trigger("change");

            $("#node-input-delay-type").on("change", function() {
                if (this.value === "delay") {
                    $("#delay-details-for").show();
                    $("#random-details").hide();
                } else if (this.value === "delayv") {
                    $("#delay-details-for").show();
                    $("#random-details").hide();
                } else if (this.value === "random") {
                    $("#delay-details-for").hide();
                    $("#random-details").show();
                }
            }).trigger("change");

            if (this.outputs === 2) {
                $("#node-input-drop-select").val("emit");
            } else if (this.drop) {
                $("#node-input-drop-select").val("drop");
            } else {
                $("#node-input-drop-select").val("queue");
            }

            $("#node-input-rate-type").on("change", function() {
                if (this.value === "all") {
                    $("#rate-details-per-topic").hide();
                    $("#node-input-drop-select-queue").attr('disabled', false);
                } else if (this.value === "topic") {
                    if ($("#node-input-drop-select").val() === "queue") {
                        $("#node-input-drop-select").val("drop");
                    }
                    $("#node-input-drop-select-queue").attr('disabled', true);
                    $("#rate-details-per-topic").show();
                }
            }).trigger("change");
        },
        oneditsave: function() {
            var action = $("#node-input-delay-action").val();
            if (action === "delay") {
                this.pauseType = $("#node-input-delay-type").val();
                $("#node-input-outputs").val(1);
            } else if (action === "rate") {
                action = $("#node-input-rate-type").val();
                if (action === "all") {
                    this.pauseType = "rate";
                } else {
                    this.pauseType = $("#node-input-rate-topic-type").val();
                }
                var dropType = $("#node-input-drop-select").val();
                this.drop = dropType !== "queue";
                $("#node-input-outputs").val(dropType === "emit"?2:1);
            }
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="delay">
    <p>Delays each message passing through the node or limits the rate at which they can pass.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt class="optional">delay <span class="property-type">number</span></dt>
        <dd>Sets the delay, in milliseconds, to be applied to the message. This
            option only applies if the node is configured to allow the message to
            override the configured default delay interval.</dd>
        <dt class="optional">rate <span class="property-type">number</span></dt>
        <dd>Sets the rate value in milliseconds between messages.
            This node overwrites the existing rate value defined in the node configuration
            when it receives the message which contains <code>msg.rate</code> value in milliSeconds.
            This option only applies if the node is configured to allow the message to
            override the configured default rate interval.</dd>
        <dt class="optional">reset</dt>
        <dd>If the received message has this property set to any value, all
            outstanding messages held by the node are cleared without being sent.</dd>
        <dt class="optional">flush</dt>
        <dd>If the received message has this property set to a numeric value then that many messages
            will be released immediately. If set to any other type (e.g. boolean), then all
            outstanding messages held by the node are sent immediately.</dd>
        <dt class="optional">toFront</dt>
        <dd>When in rate limit mode, if the received message has this property set to boolean <code>true</code>,
            then the message is pushed to the front of the queue and will be released next.
            This can be used in combination with <code>msg.flush=1</code> to resend immediately.
        </dd>
    </dl>
    <h3>Details</h3>
    <p>When configured to delay messages, the delay interval can be a fixed value,
        a random value within a range or dynamically set for each message.
        Each message is delayed independently of any other message, based on
        the time of its arrival.
    </p>
    <p>When configured to rate limit messages, their delivery is spread across
        the configured time period. The status shows the number of messages currently in the queue.
        It can optionally discard intermediate messages as they arrive.</p>
    </p>
    <p>If set to allow override of the rate, the new rate will be applied immediately,
        and will remain in effect until changed again, the node is reset, or the flow is restarted.</p>
    <p>The rate limiting can be applied to all messages, or group them according to
        their <code>msg.topic</code> value. When grouping, intermediate messages are
        automatically dropped. At each time interval, the node can either release
        the most recent message for all topics, or release the most recent message
        for the next topic.
    </p>
    <p><b>Note</b>: In rate limit mode the maximum queue depth can be set by a property in your
        <i>settings.js</i> file. For example <code>nodeMessageBufferMaxLength: 1000,</code></p>
</script>

</div><div><!-- --- [red-module:node-red/trigger] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="trigger">
    <div class="form-row">
        <label data-i18n="trigger.send" for="node-input-op1"></label>
        <input type="hidden" id="node-input-op1type">
        <input style="width:70%" type="text" id="node-input-op1" placeholder="1">
    </div>
    <div class="form-row">
        <label data-i18n="trigger.then"></label>
        <select id="node-then-type" style="width:70%;">
            <option value="block" data-i18n="trigger.wait-reset"></option>
            <option value="wait" data-i18n="trigger.wait-for"></option>
            <option id="node-trigger-wait-loop" value="loop" data-i18n="trigger.wait-loop"></option>
        </select>
    </div>
    <div class="form-row node-type-duration">
        <label></label>
        <input type="text" id="node-input-duration" style="text-align:end; width:70px !important">
        <select id="node-input-units" style="width:140px !important">
            <option value="ms" data-i18n="trigger.duration.ms"></option>
            <option value="s" data-i18n="trigger.duration.s"></option>
            <option value="min" data-i18n="trigger.duration.m"></option>
            <option value="hr" data-i18n="trigger.duration.h"></option>
        </select>
    </div>
    <div class="form-row node-type-wait">
    <label></label>
        <input type="checkbox" id="node-input-extend" style="margin-left:0px; vertical-align:top; width:auto !important;"> <label style="width:auto !important;" for="node-input-extend" data-i18n="trigger.extend"></label>
    </div>
    <div class="form-row node-type-override">
    <label></label>
        <input type="checkbox" id="node-input-overrideDelay" style="margin-left:0px; vertical-align:top; width:auto !important;"> <label style="width:auto !important;" for="node-input-overrideDelay" data-i18n="trigger.override"></label>
    </div>
    <div class="form-row node-type-wait">
        <label data-i18n="trigger.then-send"></label>
        <input type="hidden" id="node-input-op2type">
        <input style="width:70%" type="text" id="node-input-op2" placeholder="0">
    </div>
    <div class="form-row" id="node-second-output">
        <label></label>
            <input type="checkbox" id="node-input-second" style="margin-left: 0px; vertical-align: top; width: auto !important;"> <label style="width:auto !important;" for="node-input-second" data-i18n="trigger.second"></label>
        </div>
    <div class="form-row">
        <label data-i18n="trigger.label.reset" style="width:auto"></label>
        <div style="display:inline-block; width:70%;vertical-align:top">
        <ul>
            <li data-i18n="trigger.label.resetMessage"></li>
            <li><span data-i18n="trigger.label.resetPayload"></span> <input type="text" id="node-input-reset" style="width:150px" data-i18n="[placeholder]trigger.label.resetprompt"></li>
        </ul>
    </div>
    <br/>
    <div class="form-row">
        <label data-i18n="trigger.for" for="node-input-bytopic"></label>
        <select id="node-input-bytopic" style="width:120px;">
            <option value="all" data-i18n="trigger.alltopics"></option>
            <option value="topic" data-i18n="trigger.bytopics"></option>
        </select>
        <span class="form-row" id="node-stream-topic">
            <input type="text" id="node-input-topic" style="width:46%;"/>
        </span>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name"></input>
        <input type="hidden" id="node-input-outputs" value="1">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('trigger',{
        category: 'function',
        color:"#E6E0F8",
        defaults: {
            name: {value:""},
            op1: {value:"1",
                  label: RED._("node-red:trigger.send"),
                  validate: RED.validators.typedInput("op1type", false)},
            op2: {value:"0",
                  label: RED._("node-red:trigger.then-send"),
                  validate: RED.validators.typedInput("op2type", false)},
            op1type: {value:"val"},
            op2type: {value:"val"},
            duration: {
                value:"250", required:true,
                label:RED._("node-red:trigger.label.duration"),
                validate:RED.validators.number(false)},
            extend: {value:"false"},
            overrideDelay: {value:"false"},
            units: {value:"ms"},
            reset: {value:""},
            bytopic: {value:"all"},
            topic: {value:"topic", required:true,
                    label:RED._("node-red:trigger.label.topic")},
            outputs: {value:1}
        },
        inputs:1,
        outputs:1,
        icon: "trigger.svg",
        label: function() {
            if (this.duration > 0) {
                return this.name|| this._("trigger.label.trigger")+" "+this.duration+this.units;
            }
            if (this.duration < 0) {
                return this.name|| this._("trigger.label.trigger-loop")+" "+(this.duration * -1)+this.units;
            }
            else {
                return this.name|| this._("trigger.label.trigger-block");
            }
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var that = this;
            if (this.topic === undefined) { $("#node-input-topic").val("topic"); }
            $("#node-input-topic").typedInput({default:'msg',types:['msg']});
            $("#node-input-bytopic").on("change", function() {
                if ($("#node-input-bytopic").val() === "all") {
                    $("#node-stream-topic").hide();
                } else {
                    $("#node-stream-topic").show();
                }
            });

            if (this.outputs == 2) { $("#node-input-second").prop('checked', true) }
            else { $("#node-input-second").prop('checked', false) }

            $("#node-input-second").change(function() {
                if ($("#node-input-second").is(":checked")) {
                    $("#node-input-outputs").val(2);
                }
                else  {
                    $("#node-input-outputs").val(1);
                }
            });
            $("#node-then-type").on("change", function() {
                if ($(this).val() == "block") {
                    $(".node-type-wait").hide();
                    $(".node-type-override").hide();
                    $(".node-type-duration").hide();
                    $("#node-second-output").hide();
                    $("#node-input-second").prop('checked', false);
                    $("#node-input-outputs").val(1);
                }
                else if ($(this).val() == "loop") {
                    if ($("#node-input-duration").val() == 0) { $("#node-input-duration").val(250); }
                    $(".node-type-wait").hide();
                    $(".node-type-override").show();
                    $(".node-type-duration").show();
                    $("#node-second-output").hide();
                    $("#node-input-second").prop('checked', false);
                    $("#node-input-outputs").val(1);
                } else {
                    if ($("#node-input-duration").val() == 0) { $("#node-input-duration").val(250); }
                    $(".node-type-wait").show();
                    $(".node-type-override").show();
                    $(".node-type-duration").show();
                    $("#node-second-output").show();
                }
            });

            if (this.op1type === 'val') {
                $("#node-input-op1type").val('str');
            }
            if (this.op2type === 'val') {
                $("#node-input-op2type").val('str');
            }

            $("#node-input-op1").on("change", function() {
                if ($("#node-input-op1type").val() === "nul") {
                    $("#node-trigger-wait-loop").hide();
                }
                else { $("#node-trigger-wait-loop").show(); }
            });

            var optionNothing = {value:"nul",label:this._("trigger.output.nothing"),hasValue:false};
            var optionPayload = {value:"pay",label:this._("trigger.output.existing"),hasValue:false};
            var optionOriginalPayload = {value:"pay",label:this._("trigger.output.original"),hasValue:false};
            var optionLatestPayload = {value:"payl",label:this._("trigger.output.latest"),hasValue:false};

            $("#node-input-op1").typedInput({
                default: 'str',
                typeField: $("#node-input-op1type"),
                types:['flow','global','str','num','bool','json','bin','date','env',
                    optionPayload,
                    optionNothing
                ]
            });
            $("#node-input-op2").typedInput({
                default: 'str',
                typeField: $("#node-input-op2type"),
                types:['flow','global','str','num','bool','json','bin','date','env',
                    optionOriginalPayload,
                    optionLatestPayload,
                    optionNothing
                ]
            });

            if (this.bytopic === undefined) {
                $("#node-input-bytopic").val("all");
            }

            if (this.duration == "0") {
                $("#node-then-type").val("block");
            }
            else if ((this.duration * 1) < 0) {
                $("#node-then-type").val("loop");
                $("#node-input-duration").val(this.duration*-1);
            } else {
                $("#node-then-type").val("wait");
            }
            $("#node-then-type").trigger("change");

            if (this.extend === "true" || this.extend === true) {
                $("#node-input-extend").prop("checked",true);
            } else {
                $("#node-input-extend").prop("checked",false);
            }
            if (this.overrideDelay === "true" || this.overrideDelay === true) {
                $("#node-input-overrideDelay").prop("checked",true);
            } else {
                $("#node-input-overrideDelay").prop("checked",false);
            }
        },
        oneditsave: function() {
            if ($("#node-then-type").val() == "block") {
                $("#node-input-duration").val("0");
            }
            if ($("#node-then-type").val() == "loop") {
                $("#node-input-duration").val($("#node-input-duration").val() * -1);
            }
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="trigger">
    <p>When triggered, can send a message, and then optionally a second message, unless extended or reset.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt class="optional">delay <span class="property-type">number</span></dt>
        <dd>Sets the delay, in milliseconds, to be applied to the message. This option only applies if the node is configured to allow the message to override the configured default delay interval.</dd>
        <dt class="optional">reset</dt>
        <dd>If a message is received with this property, any timeout or repeat
        currently in progress will be cleared and no message triggered.</dd>
    </dl>

    <h3>Details</h3>
    <p>This node can be used to create a timeout within a flow. By default, when
    it receives a message, it sends on a message with a <code>payload</code> of <code>1</code>.
    It then waits 250ms before sending a second message with a <code>payload</code> of <code>0</code>.
    This could be used, for example, to blink an LED attached to a Raspberry Pi GPIO pin.</p>
    <p>The payloads of each message sent can be configured to a variety of values, including
    the option to not send anything. For example, setting the initial message to <i>nothing</i> and
    selecting the option to extend the timer with each received message, the node will
    act as a watchdog timer; only sending a message if nothing is received within the
    set interval.</p>
    <p>If set to a <i>string</i> type, the node supports the mustache template syntax.</p>
    <p>The delay between sending messages can be overridden by <code>msg.delay</code> if that option is enabled in the node. The value must be provided in milliseconds.</p>
    <p>If the node receives a message with a <code>reset</code> property, or a <code>payload</code>
    that matches that configured in the node, any timeout or repeat currently in
    progress will be cleared and no message triggered.</p>
    <p>The node can be configured to resend a message at a regular interval until it
    is reset by a received message.</p>
    <p>Optionally, the node can be configured to treat messages as if they are separate streams,
    using a msg property to identify each stream. Default <code>msg.topic</code>.</p>
    <p>The status indicates the node is currently active. If multiple streams are used the status
    indicates the number of streams being held.</p>
</script>

</div><div><!-- --- [red-module:node-red/exec] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="exec">
    <div class="form-row">
        <label for="node-input-command"><i class="fa fa-file"></i> <span data-i18n="exec.label.command"></span></label>
        <input type="text" id="node-input-command" data-i18n="[placeholder]exec.label.command">
    </div>
    <div class="form-row">
        <label><i class="fa fa-plus"></i> <span data-i18n="exec.label.append"></span></label>
        <input type="checkbox" id="node-input-addpay-cb" style="display:inline-block; width:auto;">
        <input type="text" id="node-input-addpay" style="margin-left: 5px; width:160px;">
    </div>
    <div class="form-row">
        <label for="node-input-append"> </label>
        <input type="text" id="node-input-append" data-i18n="[placeholder]exec.placeholder.extraparams">
    </div>
    <div class="form-row">
        <label><i class="fa fa-sign-out"></i> <span data-i18n="exec.label.return"></span></label>
        <select type="text" id="node-input-useSpawn" style="width:70%">
            <option value="false" data-i18n="exec.opt.exec"></option>
            <option value="true" data-i18n="exec.opt.spawn"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-timer"><i class="fa fa-clock-o"></i> <span data-i18n="exec.label.timeout"></span></label>
        <input type="text" id="node-input-timer" style="width:65px;" data-i18n="[placeholder]exec.label.timeoutplace">
        <span data-i18n="exec.label.seconds"></span>
    </div>
    <div class="form-row">
        <label for="node-input-winHide" style="width: auto !important; padding-right:10px"><i class="fa fa-windows"></i> <span data-i18n="exec.label.winHide"></span></label>
        <input type="checkbox" id="node-input-winHide" style="margin-top: 0; display:inline-block; width:auto;">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('exec',{
        category: 'function',
        color:"darksalmon",
        defaults: {
            command: {value:""},
            addpay: {value:"", validate: RED.validators.typedInput({ type: 'msg', allowBlank: true })},
            append: {value:""},
            useSpawn: {value:"false"},
            timer: {value:""},
            winHide: {value:false},
            oldrc: {value:false},
            name: {value:""}
        },
        inputs:1,
        outputs:3,
        outputLabels: function(i) {
            return [
                this._("exec.label.stdout"),
                this._("exec.label.stderr"),
                this._("exec.label.retcode")
            ][i];
        },
        icon: "cog.svg",
        label: function() {
            return this.name||this.command.replace(/\\n /g,"\\\\n ")||(this.useSpawn=="true"?this._("exec.spawn"):this._("exec.exec"));
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            if ($("#node-input-useSpawn").val() === null) {
                $("#node-input-useSpawn").val(this.useSpawn.toString());
            }
            $("#node-input-addpay-cb").prop("checked", this.addpay === true || (this.addpay !== false && this.addpay !== ""))
            var addpayValue = (this.addpay === true)?"payload":((this.addpay === false || this.addpay === "")?"payload":this.addpay);
            $("#node-input-addpay-cb").on("change", function(evt) {
                $("#node-input-addpay").typedInput("disable",!$("#node-input-addpay-cb").prop("checked"));
            });

            $("#node-input-addpay").val(addpayValue);
            $("#node-input-addpay").typedInput({
                default: "msg",
                types: ["msg"]
            });

            $("#node-input-addpay-cb").trigger("change")

            if (this.winHide === "true" || this.winHide === true) {
                $("#node-input-winHide").prop("checked",true);
            } else {
                $("#node-input-winHide").prop("checked",false);
            }
        },
        oneditsave: function() {
            if (!$("#node-input-addpay-cb").prop("checked")) {
                $("#node-input-addpay").val("");
            }
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="exec">
    <p>Runs a system command and returns its output.</p>
    <p>The node can be configured to either wait until the command completes, or to
    send its output as the command generates it.</p>
    <p>The command that is run can be configured in the node or provided by the received
    message.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt class="optional">payload <span class="property-type">string</span></dt>
        <dd>if configured to do so, will be appended to the executed command.</dd>
        <dt class="optional">kill <span class="property-type">string</span></dt>
        <dd>the type of kill signal to send an existing exec node process.</dd>
        <dt class="optional">pid <span class="property-type">number|string</span></dt>
        <dd>the process ID of an existing exec node process to kill.</dd>
    </dl>

    <h3>Outputs</h3>
    <ol class="node-ports">
        <li>Standard output
            <dl class="message-properties">
                <dt>payload <span class="property-type">string</span></dt>
                <dd>the standard output of the command.</dd>
            </dl>
            <dl class="message-properties">
                <dt>rc <span class="property-type">object</span></dt>
                <dd>exec mode only, a copy of the return code object (also available on port 3)</dd>
            </dl>
        </li>
        <li>Standard error
            <dl class="message-properties">
                <dt>payload <span class="property-type">string</span></dt>
                <dd>the standard error of the command.</dd>
            </dl>
            <dl class="message-properties">
                <dt>rc <span class="property-type">object</span></dt>
                <dd>exec mode only, a copy of the return code object (also available on port 3)</dd>
            </dl>
        </li>
        <li>Return code
            <dl class="message-properties">
                <dt>payload <span class="property-type">object</span></dt>
                <dd>an object containing the return code, and possibly <code>message</code>, <code>signal</code> properties.</dd>
            </dl>
        </li>
    </ol>
    <h3>Details</h3>
    <p>By default uses the <code>exec</code> system call which calls the command, waits for it to complete, and then
    returns the output. For example a successful command should have a return code of <code>{ code: 0 }</code>.</p>
    <p>Optionally can use <code>spawn</code> instead, which returns the output from stdout and stderr
    as the command runs, usually one line at a time. On completion it then returns an object
    on the 3rd port. For example, a successful command should return <code>{ code: 0 }</code>.</p>
    <p>Errors may return extra information on the 3rd port <code>msg.payload</code>, such as a <code>message</code> string,
    <code>signal</code> string.</p>
    <p>The command that is run is defined within the node, with an option to append <code>msg.payload</code> and a further set of parameters.</p>
    <p>Commands or parameters with spaces should be enclosed in quotes - <code>"This is a single parameter"</code></p>
    <p>The returned <code>payload</code> is usually a <i>string</i>, unless non-UTF8 characters are detected, in which
    case it is a <i>buffer</i>.</p>
    <p>The node&apos;s status icon and PID will be visible while the node is active. Changes to this can be read by the <code>Status</code> node.</p>
    <p>The <code>Hide console</code> option will hide the process console normally shown on Windows systems.</p>
    <h4>Killing processes</h4>
    <p>Sending <code>msg.kill</code> will kill a single active process. <code>msg.kill</code> should be a string containing
    the type of signal to be sent, for example, <code>SIGINT</code>, <code>SIGQUIT</code> or <code>SIGHUP</code>.
    Defaults to <code>SIGTERM</code> if set to an empty string.</p>
    <p>If the node has more than one process running then <code>msg.pid</code> must also be set with the value of the PID to be killed.</p>
    <p>If a value is provided in the <code>Timeout</code> field then, if the process has not completed when the specified number of seconds has elapsed, the process will be killed automatically</p>
    <p>Tip: if running a Python app you may need to use the <code>-u</code> parameter to stop the output being buffered.</p>
</script>

</div><div><!-- --- [red-module:node-red/rbe] --- -->

<script type="text/html" data-template-name="rbe">
    <div class="form-row">
        <label for="node-input-func"><i class="fa fa-wrench"></i> <span data-i18n="rbe.label.func"></span></label>
        <select type="text" id="node-input-func" style="width:70%;">
            <option value="rbe" data-i18n="rbe.opts.rbe"></option>
            <option value="rbei" data-i18n="rbe.opts.rbei"></option>
            <option value="deadbandEq" data-i18n="rbe.opts.deadbandEq"></option>
            <option value="deadband" data-i18n="rbe.opts.deadband"></option>
            <option value="narrowbandEq" data-i18n="rbe.opts.narrowbandEq"></option>
            <option value="narrowband" data-i18n="rbe.opts.narrowband"></option>
        </select>
    </div>
    <div class="form-row" id="node-bandgap">
        <label for="node-input-gap">&nbsp;</label>
        <input type="text" id="node-input-gap" data-i18n="[placeholder]rbe.placeholder.bandgap" style="width:95px;">
        <select type="text" id="node-input-inout" style="width:54%;">
            <option value="out" data-i18n="rbe.opts.out"></option>
            <option value="in" data-i18n="rbe.opts.in"></option>
        </select>
    </div>
    <div class="form-row" id="node-startvalue">
        <label for="node-input-start"><i class="fa fa-thumb-tack"></i> <span data-i18n="rbe.label.start"></span></label>
        <input type="text" id="node-input-start" data-i18n="[placeholder]rbe.placeholder.start" style="width:70%;">
    </div>
    <div class="form-row">
        <label for="node-input-property"><i class="fa fa-ellipsis-h"></i> <span data-i18n="node-red:common.label.property"></span></label>
        <input type="text" id="node-input-property" style="width:70%;"/>
    </div>
    <div class="form-row" style="margin-bottom: 0px;">
        <label> </label>
        <input type="checkbox" id="node-input-septopics" style="display:inline-block; width:20px; vertical-align:baseline;">
        <label style="width: auto" for="node-input-septopics" data-i18n="rbe.label.septopics"></label>
    </div>
    <div class="form-row">
        <label> </label>
        <input type="text" id="node-input-topi"  style="width:70%;"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="rbe.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]rbe.label.name" style="width:70%;">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType("rbe", {
        color:"#E2D96E",
        category: 'function',
        defaults: {
            name: {value:""},
            func: {value:"rbe"},
            gap: {value:"",
                  label: RED._("node-red:rbe.label.gap"),
                  validate:RED.validators.regex(/^(\d*[.]*\d*|)(%|)$/)},
            start: {value:""},
            inout: {value:"out"},
            septopics: {value:true},
            property: {value:"payload", required:true,
                       label:RED._("node-red:rbe.label.property"),
                       validate: RED.validators.typedInput({ type: 'msg', allowUndefined: true })},
            topi: {value:"topic", required:true,
                   label:RED._("node-red:rbe.label.topic"),
                   validate: RED.validators.typedInput({ type: 'msg', allowUndefined: true })}
        },
        inputs:1,
        outputs:1,
        icon: "rbe.png",
        paletteLabel: "filter",
        label: function() {
            var ll = (this.func||"").replace("Eq","").replace("rbei",this._("rbe.rbe")).replace("rbe",this._("rbe.rbe"))||this._("rbe.rbe");
            return this.name||ll||this._("rbe.rbe");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            if (this.property === undefined) {
                $("#node-input-property").val("payload");
            }
            if (this.septopics === undefined) {
                $("#node-input-septopics").prop('checked', true);
            }
            if (this.topi === undefined) {
                $("#node-input-topi").val("topic");
            }

            $("#node-input-property").typedInput({default:'msg',types:['msg']});
            $("#node-input-topi").typedInput({default:'msg',types:['msg']});
            //$( "#node-input-gap" ).spinner({min:0});
            if ($("#node-input-inout").val() === null) {
                $("#node-input-inout").val("out");
            }
            $("#node-input-func").on("change",function() {
                if (($("#node-input-func").val() === "rbe")||($("#node-input-func").val() === "rbei")) {
                    $("#node-bandgap").hide();
                } else {
                    $("#node-bandgap").show();
                }
                if (($("#node-input-func").val() === "narrowband")||($("#node-input-func").val() === "narrowbandEq")) {
                    $("#node-startvalue").show();
                } else {
                    $("#node-startvalue").hide();
                }
            });
            $("#node-input-septopics").on("change", function() {
                $("#node-input-topi").typedInput("disable",!this.checked);
            })
            $("#node-input-topi").typedInput("disable",!!!this.septopics);

        }
    });
</script>
<script type="text/html" data-help-name="rbe">
    <p>Report by Exception (RBE) node - only passes on data if the payload has changed.
       It can also block unless, or ignore if the value changes by a specified amount (Dead- and Narrowband mode).</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload
            <span class="property-type">number | string | (object)</span>
        </dt>
        <dd>RBE mode will accept numbers, strings, and simple objects.
            Other modes must provide a parseable number.</dd>
        <dt class="optional">topic <span class="property-type">string</span>
        </dt>
        <dd>if specified the function will work on a per topic basis. This property can be set by configuration.</dd>
        <dt class="optional">reset<span class="property-type">any</span></dt>
        <dd>if set clears the stored value for the specified msg.topic, or
            all topics if msg.topic is not specified.</dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload
            <span class="property-type">as per input</span>
        </dt>
        <dd>If triggered the output will be the same as the input.</dd>
    </dl>
    <h3>Details</h3>
    <p>In RBE mode this node will block until the <code>msg.payload</code>,
       (or selected property) value is different to the previous one.
       If required it can ignore the initial value, so as not to send anything at start.</p>
    <p>The <a href="https://en.wikipedia.org/wiki/Deadband" target="_blank">Deadband</a> modes will block the incoming value
       <i>unless</i> its change is greater or greater-equal than &plusmn; the band gap away from a previous value.</p>
    <p>The Narrowband modes will block the incoming value,
       <i>if</i> its change is greater or greater-equal than &plusmn; the band gap away from the previous value.
       It is useful for ignoring outliers from a faulty sensor for example.</p>
    <p>Both in Deadband and Narrowband modes the incoming value must contain a parseable number and
       both also supports % - only sends if/unless the input differs by more than x% of the original value.</p>
    <p>Both Deadband and Narrowband allow comparison against either the previous valid output value, thus
    ignoring any values out of range, or the previous input value, which resets the set point, thus allowing
    gradual drift (deadband), or a step change (narrowband).</p>
    <p><b>Note:</b> This works on a per <code>msg.topic</code> basis, though this can be changed to another property if desired.
       This means that a single filter node can handle multiple different topics at the same time.</p>
</script>

</div><div><!-- --- [red-module:node-red/tls] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="tls-config">
    <div class="form-row" class="hide" id="node-config-row-uselocalfiles">
        <input type="checkbox" id="node-config-input-uselocalfiles" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-config-input-uselocalfiles" style="width: 70%;"><span data-i18n="tls.label.use-local-files"></label>
    </div>
    <div class="form-row">
        <label style="width: 120px;"><i class="fa fa-file-text-o"></i> <span data-i18n="tls.label.cert"></span></label>
        <span class="tls-config-input-data">
            <label class="red-ui-button" for="node-config-input-certfile"><i class="fa fa-upload"></i> <span data-i18n="tls.label.upload"></span></label>
            <input class="hide" type="file" id="node-config-input-certfile">
            <span id="tls-config-certname" style="width: calc(100% - 280px); overflow: hidden; line-height:34px; height:34px; text-overflow: ellipsis; white-space: nowrap; display: inline-block; vertical-align: middle;"> </span>
            <button type="button" class="red-ui-button red-ui-button-small" id="tls-config-button-cert-clear" style="margin-left: 10px"><i class="fa fa-times"></i></button>
        </span>
        <input type="hidden" id="node-config-input-certname">
        <input type="hidden" id="node-config-input-certdata">
        <input class="hide tls-config-input-path" style="width: calc(100% - 170px);" type="text" id="node-config-input-cert" data-i18n="[placeholder]tls.placeholder.cert">
    </div>
    <div class="form-row">
        <label style="width: 120px;" for="node-config-input-key"><i class="fa fa-file-text-o"></i> <span data-i18n="tls.label.key"></span></label>
        <span class="tls-config-input-data">
            <label class="red-ui-button" for="node-config-input-keyfile"><i class="fa fa-upload"></i> <span data-i18n="tls.label.upload"></span></label>
            <input class="hide" type="file" id="node-config-input-keyfile">
            <span id="tls-config-keyname" style="width: calc(100% - 280px); overflow: hidden; line-height:34px; height:34px; text-overflow: ellipsis; white-space: nowrap; display: inline-block; vertical-align: middle;"> </span>
            <button type="button" class="red-ui-button red-ui-button-small" id="tls-config-button-key-clear" style="margin-left: 10px"><i class="fa fa-times"></i></button>
        </span>
        <input type="hidden" id="node-config-input-keyname">
        <input type="hidden" id="node-config-input-keydata">
        <input class="hide tls-config-input-path" style="width: calc(100% - 170px);" type="text" id="node-config-input-key" data-i18n="[placeholder]tls.placeholder.key">
    </div>
    <div class="form-row">
        <label style="width: 100px; margin-left: 20px;" for="node-config-input-passphrase"> <span data-i18n="tls.label.passphrase"></span></label>
        <input type="password" style="width: calc(100% - 170px);" id="node-config-input-passphrase" data-i18n="[placeholder]tls.placeholder.passphrase">
    </div>
    <div class="form-row">
        <label style="width: 120px;" for="node-config-input-ca"><i class="fa fa-file-text-o"></i> <span data-i18n="tls.label.ca"></span></label>
        <span class="tls-config-input-data">
            <label class="red-ui-button" for="node-config-input-cafile"><i class="fa fa-upload"></i> <span data-i18n="tls.label.upload"></span></label>
            <input class="hide" type="file" title=" " id="node-config-input-cafile">
            <span id="tls-config-caname" style="width: calc(100% - 280px); overflow: hidden; line-height:34px; height:34px; text-overflow: ellipsis; white-space: nowrap; display: inline-block; vertical-align: middle;"> </span>
            <button type="button" class="red-ui-button red-ui-button-small" id="tls-config-button-ca-clear" style="margin-left: 10px"><i class="fa fa-times"></i></button>
        </span>
        <input type="hidden" id="node-config-input-caname">
        <input type="hidden" id="node-config-input-cadata">
        <input class="hide tls-config-input-path" style="width: calc(100% - 170px);" type="text" id="node-config-input-ca" data-i18n="[placeholder]tls.placeholder.ca">
    </div>
    <div class="form-row">
        <input type="checkbox" id="node-config-input-verifyservercert" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-config-input-verifyservercert" style="width: calc(100% - 170px);" data-i18n="tls.label.verify-server-cert"></label>
    </div>
    <div class="form-row">
        <label style="width: 126px;" for="node-config-input-servername"><i class="fa fa-server"></i> <span data-i18n="tls.label.servername"></span></label>
        <input style="width: calc(100% - 176px);" type="text" id="node-config-input-servername" data-i18n="[placeholder]tls.placeholder.servername">
    </div>
    <div class="form-row">
        <label style="width: 126px;" for="node-config-input-alpnprotocol"><i class="fa fa-cogs"></i> <span data-i18n="tls.label.alpnprotocol"></span></label>
        <input style="width: calc(100% - 176px);" type="text" id="node-config-input-alpnprotocol" data-i18n="[placeholder]tls.placeholder.alpnprotocol">
    </div>
    <hr>
    <div class="form-row">
        <label style="width: 120px;" for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input style="width: calc(100% - 170px);" type="text" id="node-config-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('tls-config',{
        category: 'config',
        defaults: {
            name: {value:""},
            cert: {value:"", validate: function(v,opt) {
                var currentKey = $("#node-config-input-key").val();
                if (currentKey === undefined) {
                    currentKey = this.key;
                }
                if (currentKey === '' || v != '') {
                    return true;
                }
                return RED._("node-red:tls.error.invalid-cert");
            }},
            key: {value:"", validate: function(v,opt) {
                var currentCert = $("#node-config-input-cert").val();
                if (currentCert === undefined) {
                    currentCert = this.cert;
                }
                if (currentCert === '' || v != '') {
                    return true;
                }
                return RED._("node-red:tls.error.invalid-key");
            }},
            ca: {value:""},
            certname: {value:""},
            keyname: {value:""},
            caname: {value:""},
            servername: {value:""},
            verifyservercert: {value: true},
            alpnprotocol: {value: ""}
        },
        credentials: {
            certdata: {type:"text"},
            keydata: {type:"text"},
            cadata: {type:"text"},
            passphrase: {type:"password"}
        },
        label: function() {
            return this.name || this._("tls.tls");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            function updateFileUpload() {
                if ($("#node-config-input-uselocalfiles").is(':checked')) {
                    $(".tls-config-input-path").show();
                    $(".tls-config-input-data").hide();
                } else {
                    $(".tls-config-input-data").show();
                    $(".tls-config-input-path").hide();
                }
            }
            $("#node-config-input-uselocalfiles").on("click",function() {
                updateFileUpload();
            });

            function saveFile(property, file) {
                var dataInputId = "#node-config-input-"+property+"data";
                var filenameInputId = "#node-config-input-"+property+"name";
                var filename = file.name;
                var reader = new FileReader();
                reader.onload = function(event) {
                    $("#tls-config-"+property+"name").text(filename);
                    $(filenameInputId).val(filename);
                    $(dataInputId).val(event.target.result);
                }
                reader.readAsText(file,"UTF-8");
            }
            $("#node-config-input-certfile" ).on("change", function() {
                saveFile("cert", this.files[0]);
            });
            $("#node-config-input-keyfile" ).on("change", function() {
                saveFile("key", this.files[0]);
            });
            $("#node-config-input-cafile" ).on("change", function() {
                saveFile("ca", this.files[0]);
            });

            function clearNameData(prop) {
                $("#tls-config-"+prop+"name").text("");
                $("#node-config-input-"+prop+"data").val("");
                $("#node-config-input-"+prop+"name").val("");
            }
            $("#tls-config-button-cert-clear").on("click", function() {
                clearNameData("cert");
            });
            $("#tls-config-button-key-clear").on("click", function() {
                clearNameData("key");
            });
            $("#tls-config-button-ca-clear").on("click", function() {
                clearNameData("ca");
            });

            if (RED.settings.tlsConfigDisableLocalFiles) {
                $("#node-config-row-uselocalfiles").hide();
            } else {
                $("#node-config-row-uselocalfiles").show();
            }
            // in case paths were set from old TLS config
            if(this.cert || this.key || this.ca) {
                $("#node-config-input-uselocalfiles").prop('checked',true);
            }
            $("#tls-config-certname").text(this.certname);
            $("#tls-config-keyname").text(this.keyname);
            $("#tls-config-caname").text(this.caname);
            updateFileUpload();
        },
        oneditsave: function() {
            if ($("#node-config-input-uselocalfiles").is(':checked')) {
                clearNameData("ca");
                clearNameData("cert");
                clearNameData("key");
            } else {
                $("#node-config-input-ca").val("");
                $("#node-config-input-cert").val("");
                $("#node-config-input-key").val("");
            }
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="tls-config">
    <p>Configuration options for TLS connections.</p>
</script>

</div><div><!-- --- [red-module:node-red/httpproxy] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="http proxy">
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-config-input-name">
    </div>
    <div class="form-row">
        <label for="node-config-input-url"><i class="fa fa-globe"></i> <span data-i18n="httpin.label.url"></span></label>
        <input type="text" id="node-config-input-url" placeholder="http://hostname:port">
    </div>
    <div class="form-row">
        <input type="checkbox" id="node-config-input-useAuth" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-config-input-useAuth" style="width: 70%;"><span data-i18n="httpin.use-proxyauth"></span></label>
        <div style="margin-left: 20px" class="node-config-input-useAuth-row hide">
            <div class="form-row">
                <label for="node-config-input-username"><i class="fa fa-user"></i> <span data-i18n="common.label.username"></span></label>
                <input type="text" id="node-config-input-username">
            </div>
            <div class="form-row">
                <label for="node-config-input-password"><i class="fa fa-lock"></i> <span data-i18n="common.label.password"></span></label>
                <input type="password" id="node-config-input-password">
            </div>
        </div>
    </div>
    <div class="form-row" style="margin-bottom:0;">
        <label><i class="fa fa-list"></i> <span data-i18n="httpin.noproxy-hosts"></span></label>
    </div>
    <div class="form-row node-config-input-noproxy-container-row">
        <ol id="node-config-input-noproxy-container"></ol>
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('http proxy', {
        category: 'config',
        defaults: {
            name: {value:''},
            url: {
                value:'',
                validate:function(v, opt) {
                    if ((v && (v.indexOf('://') !== -1) &&
                         (v.trim().indexOf('http') === 0))) {
                        return true;
                    }
                    return RED._("node-red:httpin.errors.invalid-url");
                }
            },
            noproxy: {value:[]}
        },
        credentials: {
            username: {type:'text'},
            password: {type:'password'}
        },
        label: function() {
            return this.name || this.url || ('http proxy:' + this.id);
        },
        oneditprepare: function() {
            $('#node-config-input-useAuth').on("change", function() {
                if ($(this).is(":checked")) {
                    $('.node-config-input-useAuth-row').show();
                } else {
                    $('.node-config-input-useAuth-row').hide();
                    $('#node-config-input-username').val('');
                    $('#node-config-input-password').val('');
                }
            });
            if (this.credentials.username || this.credentials.has_password) {
                $('#node-config-input-useAuth').prop('checked', true);
            } else {
                $('#node-config-input-useAuth').prop('checked', false);
            }
            $('#node-config-input-useAuth').change();

            var hostList = $('#node-config-input-noproxy-container')
                .css({'min-height':'150px','min-width':'450px'})
                .editableList({
                    addItem: function(container, index, data) {
                        var row = $('<div/>')
                            .css({overflow: 'hidden',whiteSpace: 'nowrap'})
                            .appendTo(container);

                        var hostField = $('<input/>',{class:'node-config-input-host',type:'text',placeholder:'hostname'})
                            .css({width:'100%'})
                            .appendTo(row);
                        if (data.host) {
                            hostField.val(data.host);
                        }
                    },
                    sortable: true,
                    removable: true
                });
            if (this.noproxy) {
                for (var i in this.noproxy) {
                    hostList.editableList('addItem', {host:this.noproxy[i]});
                }
            }
            if (hostList.editableList('items').length == 0) {
                hostList.editableList('addItem', {host:''});
            }
        },
        oneditsave: function() {
            var hosts = $('#node-config-input-noproxy-container').editableList('items');
            var node = this;
            node.noproxy = [];
            hosts.each(function(i) {
                var host = $(this).find('.node-config-input-host').val().trim();
                if (host) {
                    node.noproxy.push(host);
                }
            });
        },
        oneditresize: function(size) {
            var rows = $('#node-config-dialog-edit-form>div:not(.node-config-input-noproxy-container-row)');
            var height = size.height;
            for (var i = 0; i < rows.length; i++) {
                height -= $(rows[i]).outerHeight(true);
            }

            var editorRow = $('#node-config-dialog-edit-form>div.node-config-input-noproxy-container-row');
            height -= (parseInt(editorRow.css('margin-top')) + parseInt(editorRow.css('margin-bottom')));
            $('#node-config-input-noproxy-container').editableList('height',height);
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="http proxy">
    <p>Configuration options for HTTP proxy.</p>

    <h3>Details</h3>
    <p>When accessing to the host in the ignored host list, no proxy will be used.</p>
</script>

</div><div><!-- --- [red-module:node-red/mqtt] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<style>

    .mqtt-form-row-cols2 > input.mqtt-form-row-col1 {
        width: calc(35% - 75px);
    }
    .mqtt-form-row-cols2 > select.mqtt-form-row-col1 {
        width: calc(35% - 75px);
    }

    .mqtt-form-row-cols2 > label.mqtt-form-row-col2 {
        width: 100px;
        margin-left: 42px;
        display: inline-block;
    }
    .mqtt-form-row-cols2 > input.mqtt-form-row-col2 {
        width: calc(35% - 75px);
        display: inline-block;
    }
    .mqtt-form-row-cols2 > select.mqtt-form-row-col2 {
        width: calc(35% - 75px);
        display: inline-block;
    }
    .form-row.mqtt5-out > label {
        width: 130px;
    }
    .form-row.mqtt-flags-row > label {
        vertical-align: top;
    }
    .form-row.mqtt-flags-row > .mqtt-flags {
        display: inline-block;
        width: 70%
    }

    .form-row.mqtt-flags-row > .mqtt-flags > .mqtt-flag > label {
        display: block;
        width: 100%;
    }
    .form-row.mqtt-flags-row > .mqtt-flags > .mqtt-flag > label > input {
        position: relative;
        vertical-align: bottom;
        top: -2px;
        width: 15px;
        height: 15px;
    }
    .form-row-mqtt5 {
        display: none;
    }
    .form-row-mqtt5.form-row-mqtt5-active:not(.form-row-mqtt-static-disabled) {
        display: block
    }
    .form-row-mqtt-static-disabled {
        display: none;
        /* opacity: 0.3;
        pointer-events: none; */
    }
    .form-row.form-row-mqtt-datatype-tip > .form-tips {
        width: calc(70% - 18px);
        display: inline-block;
        margin-top: -8px;
    }

</style>

<script type="text/html" data-template-name="mqtt in">
    <div class="form-row">
        <label for="node-input-broker"><i class="fa fa-globe"></i> <span data-i18n="mqtt.label.broker"></span></label>
        <input type="text" id="node-input-broker">
    </div>
    <div class="form-row">
        <label for="node-input-topicType" data-i18n="mqtt.label.action"></label>
        <select id="node-input-topicType" style="width: 70%">
            <option value="topic" data-i18n="mqtt.label.staticTopic"></option>
            <option value="dynamic" data-i18n="mqtt.label.dynamicTopic"></option>
        </select>
        <input type="hidden" id="node-input-inputs">
    </div>
    <div class="form-row form-row-mqtt-static">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> <span data-i18n="common.label.topic"></span></label>
        <input type="text" id="node-input-topic" data-i18n="[placeholder]common.label.topic">
    </div>
    <div class="form-row form-row-mqtt-static">
        <label for="node-input-qos"><i class="fa fa-empire"></i> <span data-i18n="mqtt.label.qos"></span></label>
        <select id="node-input-qos" style="width:125px !important">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
        </select>
    </div>
    <div class="form-row mqtt-flags-row form-row-mqtt5 form-row-mqtt-static">
        <label for="node-input-nl" ><i class="fa fa-flag"></i> <span data-i18n="mqtt.label.flags">Flags</span></label>
        <div class="mqtt-flags">
            <div class="mqtt-flag">
                <label for="node-input-nl">
                    <input type="checkbox" id="node-input-nl">
                    <span data-i18n="mqtt.label.nl"></span>
                </label>
            </div>
            <div class="mqtt-flag">
                <label for="node-input-rap">
                    <input type="checkbox" id="node-input-rap">
                    <span data-i18n="mqtt.label.rap"></span>
                </label>
            </div>
        </div>
    </div>
    <div class="form-row form-row-mqtt5 form-row-mqtt-static">
        <label for="node-input-rh" style="width:100%"><i class="fa fa-tag"></i> <span data-i18n="mqtt.label.rh"></span></label>
        <select id="node-input-rh" style="margin-left: 104px; width: 70%">
            <option value="0" data-i18n="mqtt.label.rh0"></option>
            <option value="1" data-i18n="mqtt.label.rh1"></option>
            <option value="2" data-i18n="mqtt.label.rh2"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-datatype"><i class="fa fa-sign-out"></i> <span data-i18n="mqtt.label.output"></span></label>
        <select id="node-input-datatype" style="width:70%;">
            <option value="auto-detect" data-i18n="mqtt.output.auto-detect"></option>
            <option value="auto" data-i18n="mqtt.output.auto"></option>
            <option value="buffer" data-i18n="mqtt.output.buffer"></option>
            <option value="utf8" data-i18n="mqtt.output.string"></option>
            <option value="json" data-i18n="mqtt.output.json"></option>
            <option value="base64" data-i18n="mqtt.output.base64"></option>
        </select>
    </div>
    <div class="form-row form-row-mqtt-datatype-tip">
        <label> &nbsp; </label>
        <div class="form-tips" id="mqtt-in-datatype-depreciated-tip"><span data-i18n="mqtt.label.auto-mode-depreciated"></span></div>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/html" data-template-name="mqtt out">
    <div class="form-row">
        <label for="node-input-broker"><i class="fa fa-globe"></i> <span data-i18n="mqtt.label.broker"></span></label>
        <input type="text" id="node-input-broker">
    </div>
    <div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> <span data-i18n="common.label.topic"></span></label>
        <input type="text" id="node-input-topic" data-i18n="[placeholder]common.label.topic">
    </div>

    <div class="form-row mqtt-form-row-cols2">
        <label for="node-input-qos" class="mqtt-form-row-col1"><i class="fa fa-empire"></i> <span data-i18n="mqtt.label.qos"></span></label>
        <select id="node-input-qos" class="mqtt-form-row-col1">
            <option value=""></option>
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
        </select>

        <label for="node-input-retain" class="mqtt-form-row-col2"><i class="fa fa-history"></i> <span data-i18n="mqtt.retain"></span></label>
        <select id="node-input-retain" class="mqtt-form-row-col2" >
            <option value=""></option>
            <option value="false" data-i18n="mqtt.false"></option>
            <option value="true" data-i18n="mqtt.true"></option>
        </select>
    </div>
    <div class="form-row mqtt5 mqtt5-out">
        <label for="node-input-userProps"><span data-i18n="mqtt.label.userProperties"></span></label>
        <input type="text" id="node-input-userProps" style="width: calc(100% - 166px);">
    </div>
    <div class="form-row mqtt5 mqtt5-out">
        <label for="node-input-respTopic"><span data-i18n="mqtt.label.responseTopic"></span></label>
        <input type="text" id="node-input-respTopic" style="width: calc(100% - 166px);">
    </div>
    <div class="form-row mqtt5 mqtt5-out">
        <label for="node-input-correl"><span data-i18n="mqtt.label.correlationData"></span></label>
        <input type="text" id="node-input-correl" style="width: calc(100% - 166px);">
    </div>
    <div class="form-row mqtt5 mqtt5-out">
        <label for="node-input-contentType"><span data-i18n="mqtt.label.contentType"></span></label>
        <input type="text" id="node-input-contentType" style="width: calc(100% - 166px);">
    </div>

    <div class="form-row mqtt-form-row-cols2 mqtt5 mqtt5-out">
        <label for="node-input-expiry" class="mqtt-form-row-col1"><span data-i18n="mqtt.label.expiry"></span></label>
        <input id="node-input-expiry"  style="width: calc(100% - 166px);" class="mqtt-form-row-col1" >
    </div>

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-tips"><span data-i18n="mqtt.tip"></span></div>
</script>

<script type="text/html" data-template-name="mqtt-broker">
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-config-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-row">
        <ul style="min-width: 600px; margin-bottom: 20px;" id="node-config-mqtt-broker-tabs"></ul>
    </div>
    <div id="node-config-mqtt-broker-tabs-content" style="min-height:150px;">
        <div id="mqtt-broker-tab-connection" style="display:none">
            <div class="form-row node-input-broker">
                <label for="node-config-input-broker"><i class="fa fa-globe"></i> <span data-i18n="mqtt.label.broker"></span></label>
                <input type="text" id="node-config-input-broker" style="width: calc(100% - 300px);" data-i18n="[placeholder]mqtt.label.example">
                <label for="node-config-input-port" style="margin-left:20px; width:43px; "> <span data-i18n="mqtt.label.port"></span></label>
                <input type="text" id="node-config-input-port" data-i18n="[placeholder]mqtt.label.port" style="width:55px">
            </div>
            <div class="form-row" style="margin-bottom:0">
                <input type="checkbox" id="node-config-input-autoConnect" style="margin: 0 5px 0 104px; display: inline-block; width: auto;">
                <label for="node-config-input-autoConnect" style="width: auto"><span data-i18n="mqtt.label.auto-connect"></span></label>
            </div>
            <div class="form-row" style="height: 34px;">
                <input type="checkbox" id="node-config-input-usetls" style="height: 34px; margin: 0 5px 0 104px; display: inline-block; width: auto; vertical-align: top;">
                <label for="node-config-input-usetls" style="width: 100px; line-height: 34px;"><span data-i18n="mqtt.label.use-tls"></span></label>
                <span id="node-config-row-tls" class="hide"><input style="width: 320px;" type="text" id="node-config-input-tls"></span>
            </div>
            <div class="form-row">
                <label for="node-config-input-protocolVersion"><i class="fa fa-cog"></i> <span data-i18n="mqtt.label.protocolVersion"></span></label>
                <select id="node-config-input-protocolVersion" style="width:70%;">
                    <option value="3" data-i18n="mqtt.label.protocolVersion3"></option>
                    <option value="4" data-i18n="mqtt.label.protocolVersion4"></option>
                    <option value="5" data-i18n="mqtt.label.protocolVersion5"></option>
                </select>
            </div>
            <div class="form-row">
                <label for="node-config-input-clientid"><i class="fa fa-tag"></i> <span data-i18n="mqtt.label.clientid"></span></label>
                <input type="text" id="node-config-input-clientid" data-i18n="[placeholder]mqtt.placeholder.clientid">
            </div>
            <div class="form-row">
                <label for="node-config-input-keepalive"><i class="fa fa-heartbeat"></i> <span data-i18n="mqtt.label.keepalive"></span></label>
                <input type="number" min="0" id="node-config-input-keepalive" style="width: 100px">
            </div>
            <div class="form-row" style="margin-bottom:0">
                <label style="vertical-align:top;"><i class="fa fa-info"></i> <span data-i18n="mqtt.label.session"></span></label>
                <div style="display: inline-block; width:calc(100% - 110px)">
                    <div class="form-row">
                        <label for="node-config-input-cleansession" style="width: auto;">
                            <input type="checkbox" id="node-config-input-cleansession" style="position: relative;vertical-align: bottom; top: -2px; width: 15px;height: 15px;">
                            <span id="node-config-input-cleansession-label" data-i18n="mqtt.label.cleansession"></span>
                        </label>
                    </div>
                    <div class="form-row mqtt-persistence">
                        <label for="node-config-input-autoUnsubscribe" style="width: auto;">
                            <input type="checkbox" id="node-config-input-autoUnsubscribe" style="position: relative;vertical-align: bottom; top: -2px; width: 15px;height: 15px;">
                            <span id="node-config-input-autoUnsubscribe-label" data-i18n="mqtt.label.autoUnsubscribe"></span>
                        </label>
                    </div>
                    <div class="form-row mqtt5">
                        <label style="width:auto" for="node-config-input-sessionExpiry"><span data-i18n="mqtt.label.sessionExpiry"></span></label>
                        <input type="number" min="0" id="node-config-input-sessionExpiry" style="width: 100px" >
                    </div>
                </div>
            </div>
            <div class="form-row mqtt5">
                <label style="width: 125px;" for="node-config-input-userProps"><span data-i18n="mqtt.label.userProperties"></span></label>
                <input type="text" id="node-config-input-userProps" style="width: calc(100% - 166px);">
            </div>
            <br>
        </div>
        <div id="mqtt-broker-tab-security" style="display:none">
            <div class="form-row">
                <label for="node-config-input-user"><i class="fa fa-user"></i> <span data-i18n="common.label.username"></span></label>
                <input type="text" id="node-config-input-user">
            </div>
            <div class="form-row">
                <label for="node-config-input-password"><i class="fa fa-lock"></i> <span data-i18n="common.label.password"></span></label>
                <input type="password" id="node-config-input-password">
            </div>
        </div>
        <div id="mqtt-broker-tab-messages" style="display:none">
            <div id="mqtt-broker-section-birth">
                <div class="red-ui-palette-header">
                    <i class="fa fa-angle-down"></i><span data-i18n="mqtt.sections-label.birth-message"></span>
                </div>
                <div class="section-content" style="padding:10px 0 0 10px">
                    <div class="form-row">
                        <label style="width: 100px !important;" for="node-config-input-birthTopic"><i class="fa fa-tasks"></i> <span data-i18n="common.label.topic"></span></label>
                        <input style="width: calc(100% - 300px) !important" type="text" id="node-config-input-birthTopic" data-i18n="[placeholder]mqtt.placeholder.birth-topic">
                        <label style="margin-left: 10px; width: 90px !important;" for="node-config-input-birthRetain"><i class="fa fa-history"></i> <span data-i18n="mqtt.label.retain"></span></label>
                        <select id="node-config-input-birthRetain" style="width:75px !important">
                            <option value="false" data-i18n="mqtt.false"></option>
                            <option value="true" data-i18n="mqtt.true"></option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label style="width: 100px !important;" for="node-config-input-birthPayload"><i class="fa fa-envelope"></i> <span data-i18n="common.label.payload"></span></label>
                        <input style="width: calc(100% - 300px) !important" type="text" id="node-config-input-birthPayload" style="width:300px" data-i18n="[placeholder]common.label.payload">
                        <label style="margin-left: 10px; width: 90px !important;" for="node-config-input-birthQos"><i class="fa fa-empire"></i> <span data-i18n="mqtt.label.qos"></span></label>
                        <select id="node-config-input-birthQos" style="width:75px !important">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                        </select>
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-birth-contentType" data-i18n="mqtt.label.contentType"></label>
                        <input type="text" style="width:calc(100% - 200px);" id="node-config-input-birth-contentType">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-birth-props" data-i18n="mqtt.label.userProperties"></label>
                        <input type="text" style="width:calc(100% - 200px);" id="node-config-input-birth-props">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-birth-respTopic"><span data-i18n="mqtt.label.responseTopic"></span></label>
                        <input type="text" id="node-config-input-birth-respTopic" style="width: calc(100% - 200px);">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-birth-correl"><span data-i18n="mqtt.label.correlationData"></span></label>
                        <input type="text" id="node-config-input-birth-correl" style="width: calc(100% - 200px);">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-birth-expiry"><span data-i18n="mqtt.label.expiry"></span></label>
                        <input id="node-config-input-birth-expiry"  style="width: calc(100% - 200px);">
                    </div>
                </div>
            </div>
            <div id="mqtt-broker-section-close">
                <div class="red-ui-palette-header">
                    <i class="fa fa-angle-down"></i><span data-i18n="mqtt.sections-label.close-message"></span>
                </div>
                <div class="section-content" style="padding:10px 0 0 10px">
                    <div class="form-row">
                        <label style="width: 100px !important;" for="node-config-input-closeTopic"><i class="fa fa-tasks"></i> <span data-i18n="common.label.topic"></span></label>
                        <input style="width: calc(100% - 300px) !important" type="text" id="node-config-input-closeTopic" style="width:300px" data-i18n="[placeholder]mqtt.placeholder.close-topic">
                        <label style="margin-left: 10px; width: 90px !important;" for="node-config-input-closeRetain"><i class="fa fa-history"></i> <span data-i18n="mqtt.label.retain"></span></label>
                        <select id="node-config-input-closeRetain" style="width:75px !important">
                            <option value="false" data-i18n="mqtt.false"></option>
                            <option value="true" data-i18n="mqtt.true"></option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label style="width: 100px !important;" for="node-config-input-closePayload"><i class="fa fa-envelope"></i> <span data-i18n="common.label.payload"></span></label>
                        <input style="width: calc(100% - 300px) !important" type="text" id="node-config-input-closePayload" style="width:300px" data-i18n="[placeholder]common.label.payload">
                        <label style="margin-left: 10px; width: 90px !important;" for="node-config-input-closeQos"><i class="fa fa-empire"></i> <span data-i18n="mqtt.label.qos"></span></label>
                        <select id="node-config-input-closeQos" style="width:75px !important">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                        </select>
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-close-contentType" data-i18n="mqtt.label.contentType"></label>
                        <input type="text" style="width:calc(100% - 200px);" id="node-config-input-close-contentType">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-close-props" data-i18n="mqtt.label.userProperties"></label>
                        <input type="text" style="width:calc(100% - 200px);" id="node-config-input-close-props">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-close-respTopic"><span data-i18n="mqtt.label.responseTopic"></span></label>
                        <input type="text" id="node-config-input-close-respTopic" style="width: calc(100% - 200px);">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-close-correl"><span data-i18n="mqtt.label.correlationData"></span></label>
                        <input type="text" id="node-config-input-close-correl" style="width: calc(100% - 200px);">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-close-expiry"><span data-i18n="mqtt.label.expiry"></span></label>
                        <input id="node-config-input-close-expiry"  style="width: calc(100% - 200px);">
                    </div>
                </div>
            </div>
            <div id="mqtt-broker-section-will">
                <div class="red-ui-palette-header">
                    <i class="fa fa-angle-down"></i><span data-i18n="mqtt.sections-label.will-message"></span>
                </div>
                <div class="section-content" style="padding:10px 0 0 10px">
                    <div class="form-row">
                        <label style="width: 100px !important;" for="node-config-input-willTopic"><i class="fa fa-tasks"></i> <span data-i18n="common.label.topic"></span></label>
                        <input style="width: calc(100% - 300px) !important" type="text" id="node-config-input-willTopic" style="width:300px" data-i18n="[placeholder]mqtt.placeholder.will-topic">
                        <label style="margin-left: 10px; width: 90px !important;" for="node-config-input-willRetain"><i class="fa fa-history"></i> <span data-i18n="mqtt.label.retain"></span></label>
                        <select id="node-config-input-willRetain" style="width:75px !important">
                            <option value="false" data-i18n="mqtt.false"></option>
                            <option value="true" data-i18n="mqtt.true"></option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label style="width: 100px !important;" for="node-config-input-willPayload"><i class="fa fa-envelope"></i> <span data-i18n="common.label.payload"></span></label>
                        <input style="width: calc(100% - 300px) !important" type="text" id="node-config-input-willPayload" style="width:300px" data-i18n="[placeholder]common.label.payload">
                        <label style="margin-left: 10px; width: 90px !important;" for="node-config-input-willQos"><i class="fa fa-empire"></i> <span data-i18n="mqtt.label.qos"></span></label>
                        <select id="node-config-input-willQos" style="width:75px !important">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                        </select>
                    </div>
                    <div class="form-row mqtt5">
                        <label><span data-i18n="mqtt.label.delay"></span></label>
                        <input type="number" min="0" id="node-config-input-will-delay" style="width: 100px" >
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-will-contentType" data-i18n="mqtt.label.contentType"></label>
                        <input type="text" style="width:calc(100% - 200px);" id="node-config-input-will-contentType">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-will-props" data-i18n="mqtt.label.userProperties"></label>
                        <input type="text" style="width:calc(100% - 200px);" id="node-config-input-will-props">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-will-respTopic"><span data-i18n="mqtt.label.responseTopic"></span></label>
                        <input type="text" id="node-config-input-will-respTopic" style="width: calc(100% - 200px);">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-will-correl"><span data-i18n="mqtt.label.correlationData"></span></label>
                        <input type="text" id="node-config-input-will-correl" style="width: calc(100% - 200px);">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-will-expiry"><span data-i18n="mqtt.label.expiry"></span></label>
                        <input id="node-config-input-will-expiry"  style="width: calc(100% - 200px);">
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/javascript">
(function() {

    var typedInputNoneOpt = {
        value: 'none',
        label: RED._("node-red:mqtt.label.none"),
        hasValue: false
    };
    var makeTypedInputOpt = function(value){
        return {
            value: value,
            label:value,
            hasValue: false
        }
    }
    var contentTypeOpts = [
        typedInputNoneOpt,
        makeTypedInputOpt("application/json"),
        makeTypedInputOpt("application/octet-stream"),
        makeTypedInputOpt("text/csv"),
        makeTypedInputOpt("text/html"),
        makeTypedInputOpt("text/plain"),
        {
            value: "other",
            label: RED._("node-red:mqtt.label.other"),
            icon: "red/images/typedInput/az.svg"
        }
    ];

    function getDefaultContentType(value) {
        var defaultContentType;
        var matchedContentType = contentTypeOpts.filter(function(v) {
            return v.value === value;
        })
        if (matchedContentType.length > 0) {
            defaultContentType = matchedContentType[0].value;
        }
        if (value && !defaultContentType) {
            defaultContentType = 'other';
        }
        return defaultContentType || 'none'
    }
    /**
     * Test a topic string is valid for publishing
     * @param {string} topic
     * @returns `true` if it is a valid topic
     */
    function validateMQTTPublishTopic(topic, opts) {
        if(!topic || topic == "" || !/[\+#\b\f\n\r\t\v\0]/.test(topic)) {
            return true;
        }
        return RED._("node-red:mqtt.errors.invalid-topic");
    }
    RED.nodes.registerType('mqtt-broker',{
        category: 'config',
        defaults: {
            name: {value:""},
            broker: {value:"",required:true},
            port: {
                value:1883,required:false,
                label: RED._("node-red:mqtt.label.port"),
                validate:RED.validators.number(true)},
            tls: {type:"tls-config",required: false,
                  label:RED._("node-red:mqtt.label.use-tls") },
            clientid: {value:"", validate: function(v, opt) {
                let ok = true;
                if ($("#node-config-input-clientid").length) {
                    // Currently editing the node
                    let needClientId = !$("#node-config-input-cleansession").is(":checked")
                    if (needClientId) {
                        ok = (v||"").length > 0;
                    }
                } else {
                    let needClientId = !(this.cleansession===undefined || this.cleansession)
                    if (needClientId) {
                        ok = (v||"").length > 0;
                    }
                }
                if (!ok) {
                    return RED._("node-red:mqtt.errors.invalid-client-id");
                }
                return true;
            }},
            autoConnect: {value: true},
            usetls: {value: false},
            verifyservercert: { value: false},
            compatmode: { value: false},
            protocolVersion: { value: 4},
            keepalive: {
                value:60,
                label: RED._("node-red:mqtt.label.keepalive"),
                validate:RED.validators.number(false)},
            cleansession: {value: true},
            autoUnsubscribe: {value: true},
            birthTopic: {value:"", validate:validateMQTTPublishTopic},
            birthQos: {value:"0"},
            birthRetain: {value:"false"},
            birthPayload: {value:""},
            birthMsg: { value: {}},
            closeTopic: {value:"", validate:validateMQTTPublishTopic},
            closeQos: {value:"0"},
            closeRetain: {value:"false"},
            closePayload: {value:""},
            closeMsg: { value: {}},
            willTopic: {value:"", validate:validateMQTTPublishTopic},
            willQos: {value:"0"},
            willRetain: {value:"false"},
            willPayload: {value:""},
            willMsg: { value: {}},
            userProps: { value: ""},
            sessionExpiry: {value:0}
        },
        credentials: {
            user: {type:"text"},
            password: {type: "password"}
        },
        label: function() {
            if (this.name) {
                return this.name;
            }
            var b = this.broker;
            if (!b) { b = "undefined"; }
            var lab = "";
            lab = (this.clientid?this.clientid+"@":"")+b;
            if (b.indexOf("://") === -1){
                if (!this.port){ lab = lab + ":1883"; }
                else { lab = lab + ":" + this.port; }
            }
            return lab;
        },
        oneditprepare: function () {
            var tabs = RED.tabs.create({
                id: "node-config-mqtt-broker-tabs",
                onchange: function(tab) {
                    $("#node-config-mqtt-broker-tabs-content").children().hide();
                    $("#" + tab.id).show();
                }
            });
            tabs.addTab({
                id: "mqtt-broker-tab-connection",
                label: this._("mqtt.tabs-label.connection")
            });
            tabs.addTab({
                id: "mqtt-broker-tab-security",
                label: this._("mqtt.tabs-label.security")
            });

            tabs.addTab({
                id: "mqtt-broker-tab-messages",
                label: this._("mqtt.tabs-label.messages")
            });

            function setUpSection(sectionId, v5Opts, isExpanded) {
                var birthMessageSection = $("#mqtt-broker-section-"+sectionId);
                var paletteHeader = birthMessageSection.find('.red-ui-palette-header');
                var twistie = paletteHeader.find('i');
                var sectionContent = birthMessageSection.find('.section-content');

                function toggleSection(expanded) {
                    twistie.toggleClass('expanded', expanded);
                    sectionContent.toggle(expanded);
                }
                paletteHeader.on("click", function(e) {
                    e.preventDefault();
                    var isExpanded = twistie.hasClass('expanded');
                    toggleSection(!isExpanded);
                });
                toggleSection(isExpanded);
                $("#node-config-input-"+sectionId+"-contentType").val(v5Opts?v5Opts.contentType:"").typedInput({
                    default: getDefaultContentType(v5Opts?v5Opts.contentType:""),
                    types: contentTypeOpts,
                });

                $("#node-config-input-"+sectionId+"-props").val(v5Opts?v5Opts.userProps:"").typedInput({
                    default:  !(v5Opts?v5Opts.userProps:null)? 'none':'json',
                    types: [typedInputNoneOpt, 'json'],
                });
                $("#node-config-input-"+sectionId+"-respTopic").val(v5Opts?v5Opts.respTopic:"").typedInput({
                    default:  !(v5Opts?v5Opts.respTopic:null)? 'none':'str',
                    types: [typedInputNoneOpt, 'str'],
                });
                $("#node-config-input-"+sectionId+"-correl").val(v5Opts?v5Opts.correl:"").typedInput({
                    default:  !(v5Opts?v5Opts.correl:null)? 'none':'str',
                    types: [typedInputNoneOpt, 'str'],
                });
                $("#node-config-input-"+sectionId+"-expiry").val(v5Opts?v5Opts.expiry:"").typedInput({
                    default:  !(v5Opts?v5Opts.expiry:null)? 'none':'num',
                    types: [typedInputNoneOpt, 'num'],
                });
            }

            // show first section if none are set so the user gets the idea
            var showBirthSection = this.birthTopic !== ""
                || this.willTopic === ""
                && this.birthTopic === ""
                && this.closeTopic == "";
            setUpSection('birth', this.birthMsg, showBirthSection);
            setUpSection('close', this.closeMsg, this.closeTopic !== "");
            setUpSection('will', this.willMsg, this.willTopic !== "");

            if (this.willMsg) {
                $("#node-config-input-will-delay").val(this.willMsg.delay);
            }

            setTimeout(function() { tabs.resize(); },0);
            if (typeof this.cleansession === 'undefined') {
                this.cleansession = true;
                $("#node-config-input-cleansession").prop("checked",true);
            }
            if (typeof this.autoUnsubscribe === 'undefined') {
                this.autoUnsubscribe = true;
                $("#node-config-input-autoUnsubscribe").prop("checked",true);
            }
            if (typeof this.usetls === 'undefined') {
                this.usetls = false;
                $("#node-config-input-usetls").prop("checked",false);
            }
            if (typeof this.autoConnect === 'undefined') {
                this.autoConnect = true;
                $("#node-config-input-autoConnect").prop("checked",true);
            }
            if (this.compatmode === 'true' || this.compatmode === true) {
                delete this.compatmode;
                this.protocolVersion = 4;
            }
            if (typeof this.protocolVersion === 'undefined') {
                this.protocolVersion = 4;
            }
            $("#node-config-input-cleansession").on("change", function() {
                const useCleanSession = $("#node-config-input-cleansession").is(':checked');
                if(useCleanSession) {
                    $("div.form-row.mqtt-persistence").hide();
                } else {
                    $("div.form-row.mqtt-persistence").show();
                }
            });
            $("#node-config-input-protocolVersion").on("change", function() {
                var v5 = $("#node-config-input-protocolVersion").val() == "5";
                if(v5) {
                    $("#node-config-input-cleansession-label").text(RED._("node-red:mqtt.label.cleanstart"))
                    $("div.form-row.mqtt5").show();
                } else {
                    $("#node-config-input-cleansession-label").text(RED._("node-red:mqtt.label.cleansession"))
                    $("div.form-row.mqtt5").hide();
                }
            });
            $("#node-config-input-protocolVersion").val(this.protocolVersion);
            $("#node-config-input-userProps").typedInput({
                default:  !this.userProps ? 'none':'json',
                types: [typedInputNoneOpt, 'json']
            });
            $("#node-config-input-userProps").typedInput('value',this.userProps);
            if (typeof this.keepalive === 'undefined') {
                this.keepalive = 15;
                $("#node-config-input-keepalive").val(this.keepalive);
            }
            if (typeof this.birthQos === 'undefined') {
                this.birthQos = "0";
                $("#node-config-input-birthQos").val("0");
            }
            if (typeof this.closeQos === 'undefined') {
                this.willQos = "0";
                $("#node-config-input-willQos").val("0");
            }
            if (typeof this.willQos === 'undefined') {
                this.willQos = "0";
                $("#node-config-input-willQos").val("0");
            }


            function updateTLSOptions() {
                if ($("#node-config-input-usetls").is(':checked')) {
                    $("#node-config-row-tls").show();
                } else {
                    $("#node-config-row-tls").hide();
                }
            }
            updateTLSOptions();
            $("#node-config-input-usetls").on("click",function() {
                updateTLSOptions();
            });
            var node = this;
            function updateClientId() {
                if ($("#node-config-input-cleansession").is(":checked")) {
                    $("#node-config-input-clientid").attr("placeholder",node._("mqtt.placeholder.clientid"));
                } else {
                    $("#node-config-input-clientid").attr("placeholder",node._("mqtt.placeholder.clientid-nonclean"));
                }
                $("#node-config-input-clientid").trigger("change");
            }
            setTimeout(updateClientId,0);
            $("#node-config-input-cleansession").on("click",function() {
                updateClientId();
            });

            function updatePortEntry(){
                var disabled = $("#node-config-input-port").prop("disabled");
                if ($("#node-config-input-broker").val().indexOf("://") === -1){
                    if (disabled){
                        $("#node-config-input-port").prop("disabled", false);
                    }
                }
                else {
                    if (!disabled){
                        $("#node-config-input-port").prop("disabled", true);
                    }
                }
            }
            $("#node-config-input-broker").on("change", function() {
                updatePortEntry();
            });
            $("#node-config-input-broker").on( "keyup", function() {
                updatePortEntry();
            });
            setTimeout(updatePortEntry,50);
            setTimeout(function() {
                $("#node-config-input-protocolVersion").trigger("change");
            },50);

        },
        oneditsave: function() {
            if (!$("#node-config-input-usetls").is(':checked')) {
                $("#node-config-input-tls").val("");
            }

            var v5 = $("#node-config-input-protocolVersion").val() == "5";

            function saveV5Message(section) {
                var msg = {};
                if ($("#node-config-input-"+section+"Topic").val().trim().length > 0) {
                    var contentType = $("#node-config-input-"+section+"-contentType").val().trim();
                    if (contentType === '') {
                        contentType = $("#node-config-input-"+section+"-contentType").typedInput('type');
                        if (contentType === 'none' || contentType === 'other') {
                            contentType = "";
                        }
                    }
                    if (contentType) {
                        msg.contentType = contentType;
                    }
                    var props = $("#node-config-input-"+section+"-props").val().trim();
                    if (props) {
                        msg.userProps = props;
                    }
                    var resp = $("#node-config-input-"+section+"-respTopic").val().trim();
                    if (props) {
                        msg.respTopic = resp;
                    }
                    var correl = $("#node-config-input-"+section+"-correl").val().trim();
                    if (correl) {
                        msg.correl = correl;
                    }
                    var expiry = $("#node-config-input-"+section+"-expiry").val().trim();
                    if (expiry) {
                        msg.expiry = expiry;
                    }
                }
                return msg;
            }

            if (v5) {
                this.userProps = "";
                const userPropsType = $("#node-config-input-userProps").typedInput("type");
                if(userPropsType == "json") {
                    const userProps = $("#node-config-input-userProps").val();
                    if (userProps && typeof userProps === "string") {
                        this.userProps = userProps.trim();
                    }
                }
                this.birthMsg = saveV5Message("birth");
                this.closeMsg = saveV5Message("close");
                this.willMsg = saveV5Message("will");
                var willDelay = $("#node-config-input-will-delay").val();
                if (willDelay) {
                    this.willMsg.delay = willDelay;
                }
            } else {
                this.willMsg = {};
                this.birthMsg = {};
                this.closeMsg = {};
            }

        }
    });

    RED.nodes.registerType('mqtt in',{
        category: 'network',
        defaults: {
            name: {value:""},
            topic: {
                value:"",
                validate: function(v, opt) {
                    var isDynamic = this.inputs === 1;
                    var topicTypeSelect = $("#node-input-topicType");
                    if (topicTypeSelect.length) {
                        isDynamic = topicTypeSelect.val()==='dynamic'
                    }
                    if (isDynamic || ((!!v) && RED.validators.regex(/^(#$|(\+|[^+#]*)(\/(\+|[^+#]*))*(\/(\+|#|[^+#]*))?$)/)(v))) {
                        return true;
                    }
                    return RED._("node-red:mqtt.errors.invalid-topic");
                }
            },
            qos: {value: "2"},
            datatype: {value:"auto-detect",required:true},
            broker: {type:"mqtt-broker", required:true, label:RED._("node-red:mqtt.label.broker")},
            // subscriptionIdentifier: {value:0},
            nl: {value:false},
            rap: {value:true},
            rh: {value:0},
            inputs: {value:0},
        },
        color:"#d8bfd8",
        inputs:0,
        outputs:1,
        icon: "bridge.svg",
        label: function() {
            var label = "mqtt";
            if(this.topicType !== "dynamic" && this.topic) {
                label = this.topic;
            }
            return this.name || label;
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            const node = this;
            const isV5Broker = function() {
                var confNode = RED.nodes.node($("#node-input-broker").val());
                return confNode && confNode.protocolVersion === "5";
            }
            const isDynamic = function() {
                return $('#node-input-topicType').val() === "dynamic";
            }
            const updateVisibility = function() {
                var v5 = isV5Broker();
                var dynamic = isDynamic();
                $("div.form-row-mqtt5").toggleClass("form-row-mqtt5-active",!!v5);
                $("div.form-row.form-row-mqtt-static").toggleClass("form-row-mqtt-static-disabled", !!dynamic)
            }

            $("#node-input-datatype").on("change", function() {
                if($(this).val() === "auto") {
                    $(".form-row.form-row-mqtt-datatype-tip").show();
                } else {
                    $(".form-row.form-row-mqtt-datatype-tip").hide();
                }
            })
            $("#node-input-datatype").trigger("change");

            $("#node-input-broker").on("change",function(d){
                updateVisibility();
            });

            $('#node-input-topicType').on("change", function () {
                $("#node-input-inputs").val(isDynamic() ? 1 : 0);
                updateVisibility();
            });

            if (this.inputs === 1) {
                $('#node-input-topicType').val('dynamic')
            } else {
                $('#node-input-topicType').val('topic')
            }
            $('#node-input-topicType').trigger("change");

            if (this.qos === undefined) {
                $("#node-input-qos").val("2");
            }
            if (this.datatype === undefined) {
                $("#node-input-datatype").val("auto-detect");
            }
        },
        oneditsave: function() {
            if ($('#node-input-topicType').val() === "dynamic") {
                $('#node-input-topic').val("");
            }
        }
    });

    RED.nodes.registerType('mqtt out',{
        category: 'network',
        defaults: {
            name: {value:""},
            topic: {value:"", validate:validateMQTTPublishTopic},
            qos: {value:""},
            retain: {value:""},
            respTopic: {value:""},
            contentType: {value:""},
            userProps: {value:''},
            correl: {value:''},
            expiry: {value:''},
            broker: {type:"mqtt-broker", required:true,
                     label:RED._("node-red:mqtt.label.broker") }
        },
        color:"#d8bfd8",
        inputs:1,
        outputs:0,
        icon: "bridge.svg",
        align: "right",
        label: function() {
            return this.name||this.topic||"mqtt";
        },
        oneditprepare: function() {
            var that = this;

            function showHideDynamicFields() {
                var confNode = RED.nodes.node($("#node-input-broker").val());
                var v5 = confNode && confNode.protocolVersion == "5";
                if(v5) {
                    $("div.form-row.mqtt5").show();
                    var t = $("#node-input-respTopic").typedInput("type");
                    if (t == 'none') {
                        $("#node-input-correl").parent().hide();
                    } else {
                        $("#node-input-correl").parent().show();
                    }
                } else {
                    $("div.form-row.mqtt5").hide();
                }
            }

            $("#node-input-broker").on("change",function(d){
                showHideDynamicFields();
            });

            var respTopicTI = $("#node-input-respTopic").typedInput({
                default: !this.respTopic ? 'none':'str',
                types: [typedInputNoneOpt,  'str'],
            });

            var correlTI = $("#node-input-correl").typedInput({
                default: !this.correl ? 'none':'str',
                types: [typedInputNoneOpt,  'str']
            });
            //show / hide correlation data depending on respTopic
            respTopicTI.on("change", showHideDynamicFields);
            respTopicTI.triggerHandler("change");

            $("#node-input-userProps").typedInput({
                default:  !this.userProps ? 'none':'json',
                types: [typedInputNoneOpt, 'json'],
            });
            $("#node-input-expiry").typedInput({
                default: !this.expiry ? 'none':'num',
                types: [typedInputNoneOpt,  'num']
            });
            $("#node-input-contentType").typedInput({
                default: getDefaultContentType(this.contentType),
                types: contentTypeOpts
            })
        },
        oneditsave: function() {

            var contentType = $("#node-input-contentType").val().trim();
            if (contentType === '') {
                contentType = $("#node-input-contentType").typedInput('type');
                if (contentType === 'none' || contentType === 'other') {
                    contentType = "";
                }
            }
            $("#node-input-contentType").val(contentType)

        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
})();
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="mqtt in">
<p>Connects to a MQTT broker and subscribes to messages from the specified topic.</p>
    <h3>Outputs</h3>
    <dl class="message-properties">
       <dt>payload <span class="property-type">string | buffer</span></dt>
       <dd>a string unless detected as a binary buffer.</dd>
       <dt>topic <span class="property-type">string</span></dt>
       <dd>the MQTT topic, uses / as a hierarchy separator.</dd>
       <dt>qos <span class="property-type">number</span> </dt>
       <dd>0, fire and forget - 1, at least once - 2, once and once only.</dd>
       <dt>retain <span class="property-type">boolean</span></dt>
       <dd>true indicates the message was retained and may be old.</dd>

       <dt class="optional">responseTopic <span class="property-type">string</span></dt>
       <dd><b>MQTTv5</b>: the MQTT response topic for the message</dd>
       <dt class="optional">correlationData <span class="property-type">Buffer</span></dt>
       <dd><b>MQTTv5</b>: the correlation data for the message</dd>
       <dt class="optional">contentType <span class="property-type">string</span></dt>
       <dd><b>MQTTv5</b>: the content-type of the payload</dd>
       <dt class="optional">userProperties <span class="property-type">object</span></dt>
       <dd><b>MQTTv5</b>: any user properties of the message</dd>
       <dt class="optional">messageExpiryInterval <span class="property-type">number</span></dt>
       <dd><b>MQTTv5</b>: the expiry time, in seconds, of the message</dd>
    </dl>
    <h3>Details</h3>
    The subscription topic can include MQTT wildcards, + for one level, # for multiple levels.</p>
    <p>This node requires a connection to a MQTT broker to be configured. This is configured by clicking
    the pencil icon.</p>
    <p>Several MQTT nodes (in or out) can share the same broker connection if required.</p>
    <h4>Dynamic Subscription</h4>
    The node can be configured to dynamically control the MQTT connection and its subscriptions. When
    enabled, the node will have an input and can be controlled by passing it messages.
    <h3>Inputs</h3>
    <p>These only apply when the node has been configured for dynamic subscriptions.</p>
    <dl class="message-properties">
       <dt>action <span class="property-type">string</span></dt>
       <dd>the name of the action the node should perform. Available actions are: <code>"connect"</code>,
       <code>"disconnect"</code>, <code>"subscribe"</code> and <code>"unsubscribe"</code>.</dd>
       <dt class="optional">topic <span class="property-type">string|object|array</span></dt>
       <dd>For the <code>"subscribe"</code> and <code>"unsubscribe"</code> actions, this property
           provides the topic. It can be set as either:<ul>
           <li>a String containing the topic filter</li>
           <li>an Object containing <code>topic</code> and <code>qos</code> properties</li>
           <li>an array of either strings or objects to handle multiple topics in one</li>
            </ul>
        </dd>
       <dt class="optional">broker <span class="property-type">broker</span> </dt>
       <dd>For the <code>"connect"</code> action, this property can override any
           of the individual broker configuration settings, including: <ul>
               <li><code>broker</code></li>
               <li><code>port</code></li>
               <li><code>url</code> - overrides broker/port to provide a complete connection url</li>
               <li><code>username</code></li>
               <li><code>password</code></li>
           </ul>
           <p>If this property is set and the broker is already connected an error
              will be logged unless it has the <code>force</code> property set - in which case it will
              disconnect from the broker, apply the new settings and reconnect.</p>
       </dd>
    </dl>

</script>

<script type="text/html" data-help-name="mqtt out">
    <p>Connects to a MQTT broker and publishes messages.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
       <dt>payload <span class="property-type">string | buffer</span></dt>
       <dd> the payload to publish. If this property is not set, no message will be sent. To send a blank message, set this property to an empty String.</dd>
       <dt class="optional">topic <span class="property-type">string</span></dt>
       <dd> the MQTT topic to publish to.</dd>
       <dt class="optional">qos <span class="property-type">number</span></dt>
       <dd>0, fire and forget - 1, at least once - 2, once and once only. Default 0.</dd>
       <dt class="optional">retain <span class="property-type">boolean</span></dt>
       <dd>set to true to retain the message on the broker. Default false.</dd>
       <dt class="optional">responseTopic <span class="property-type">string</span></dt>
       <dd><b>MQTTv5</b>: the MQTT response topic for the message</dd>
       <dt class="optional">correlationData <span class="property-type">Buffer</span></dt>
       <dd><b>MQTTv5</b>: the correlation data for the message</dd>
       <dt class="optional">contentType <span class="property-type">string</span></dt>
       <dd><b>MQTTv5</b>: the content-type of the payload</dd>
       <dt class="optional">userProperties <span class="property-type">object</span></dt>
       <dd><b>MQTTv5</b>: any user properties of the message</dd>
       <dt class="optional">messageExpiryInterval <span class="property-type">number</span></dt>
       <dd><b>MQTTv5</b>: the expiry time, in seconds, of the message</dd>
       <dt class="optional">topicAlias <span class="property-type">number</span></dt>
       <dd><b>MQTTv5</b>: the MQTT topic alias to use</dd>
    </dl>
    <h3>Details</h3>
    <code>msg.payload</code> is used as the payload of the published message.
    If it contains an Object it will be converted to a JSON string before being sent.
    If it contains a binary Buffer the message will be published as-is.</p>
    <p>The topic used can be configured in the node or, if left blank, can be set by <code>msg.topic</code>.</p>
    <p>Likewise the QoS and retain values can be configured in the node or, if left
    blank, set by <code>msg.qos</code> and <code>msg.retain</code> respectively. To clear a previously
    retained topic from the broker, send a blank message to that topic with the retain flag set.</p>
    <p>This node requires a connection to a MQTT broker to be configured. This is configured by clicking
    the pencil icon.</p>
    <p>Several MQTT nodes (in or out) can share the same broker connection if required.</p>

    <h4>Dynamic Control</h4>
    The connection shared by the node can be controlled dynamically. If the node receives
    one of the following control messages, it will not publish the message payload as well.
    <h3>Inputs</h3>
    <dl class="message-properties">
       <dt>action <span class="property-type">string</span></dt>
       <dd>the name of the action the node should perform. Available actions are: <code>"connect"</code>,
       and <code>"disconnect"</code>.</dd>
       <dt class="optional">broker <span class="property-type">broker</span> </dt>
       <dd>For the <code>"connect"</code> action, this property can override any
           of the individual broker configuration settings, including: <ul>
               <li><code>broker</code></li>
               <li><code>port</code></li>
               <li><code>url</code> - overrides broker/port to provide a complete connection url</li>
               <li><code>username</code></li>
               <li><code>password</code></li>
           </ul>
           <p>If this property is set and the broker is already connected an error
              will be logged unless it has the <code>force</code> property set - in which case it will
              disconnect from the broker, apply the new settings and reconnect.</p>
       </dd>
    </dl>

</script>

<script type="text/html" data-help-name="mqtt-broker">
    <p>Configuration for a connection to an MQTT broker.</p>
    <p>This configuration will create a single connection to the broker which can
       then be reused by <code>MQTT In</code> and <code>MQTT Out</code> nodes.</p>
    <p>The node will generate a random Client ID if one is not set and the
       node is configured to use a Clean Session connection. If a Client ID is set,
       it must be unique to the broker you are connecting to.</p>
    <h4>Birth Message</h4>
    <p>This is a message that will be published on the configured topic whenever the
       connection is established.</p>
    <h4>Close Message</h4>
    <p>This is a message that will be published on the configured topic before the
       connection is closed normally, either by re-deploying the node, or by shutting down.</p>
    <h4>Will Message</h4>
    <p>This is a message that will be published by the broker in the event the node
       unexpectedly loses its connection.</p>
    <h4>WebSockets</h4>
    <p>The node can be configured to use a WebSocket connection. To do so, the Server
       field should be configured with a full URI for the connection. For example:</p>
    <pre>ws://example.com:4000/mqtt</pre>

</script>

</div><div><!-- --- [red-module:node-red/httpin] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="http in">
    <div class="form-row">
        <label for="node-input-method"><i class="fa fa-tasks"></i> <span data-i18n="httpin.label.method"></span></label>
        <select type="text" id="node-input-method" style="width:70%;">
        <option value="get">GET</option>
        <option value="post">POST</option>
        <option value="put">PUT</option>
        <option value="delete">DELETE</option>
        <option value="patch">PATCH</option>
        </select>
    </div>
    <div class="form-row form-row-http-in-upload hide">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-upload" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-upload" style="width: 70%;" data-i18n="httpin.label.upload"></label>
    </div>
    <div class="form-row">
        <label for="node-input-url"><i class="fa fa-globe"></i> <span data-i18n="httpin.label.url"></span></label>
        <input id="node-input-url" type="text" placeholder="/url">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-row row-swagger-doc">
        <label for="node-input-swaggerDoc"><i class="fa fa-file-text-o"></i> <span data-i18n="httpin.label.doc"></span></label>
        <input type="text" id="node-input-swaggerDoc">
    </div>
    <div id="node-input-tip" class="form-tips"><span data-i18n="httpin.tip.in"></span><code><span id="node-input-path"></span></code>.</div>
</script>

<script type="text/html" data-template-name="http response">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-statusCode"><i class="fa fa-long-arrow-left"></i> <span data-i18n="httpin.label.status"></span></label>
        <input type="text" id="node-input-statusCode" placeholder="msg.statusCode">
    </div>
    <div class="form-row" style="margin-bottom:0;">
        <label><i class="fa fa-list"></i> <span data-i18n="httpin.label.headers"></span></label>
    </div>
    <div class="form-row node-input-headers-container-row">
        <ol id="node-input-headers-container"></ol>
    </div>
    <div class="form-tips"><span data-i18n="[html]httpin.tip.res"></span></div>
</script>

<script type="text/javascript">
(function() {
    RED.nodes.registerType('http in',{
        category: 'network',
        color:"rgb(231, 231, 174)",
        defaults: {
            name: {value:""},
            url: {value:"", required:true,
                  label:RED._("node-red:httpin.label.url")},
            method: {value:"get",required:true},
            upload: {value:false},
            swaggerDoc: {type:"swagger-doc", required:false}
        },
        inputs:0,
        outputs:1,
        icon: "white-globe.svg",
        label: function() {
            if (this.name) {
                return this.name;
            } else if (this.url) {
                var root = RED.settings.httpNodeRoot;
                if (root.slice(-1) != "/") {
                    root = root+"/";
                }
                if (this.url.charAt(0) == "/") {
                    root += this.url.slice(1);
                } else {
                    root += this.url;
                }
                return "["+this.method+"] "+root;
            } else {
                return "http";
            }
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var root = RED.settings.httpNodeRoot;
            if (root.slice(-1) == "/") {
                root = root.slice(0,-1);
            }
            if (root == "") {
                $("#node-input-tip").hide();
            } else {
                $("#node-input-path").html(root);
                $("#node-input-tip").show();
            }
            if(!RED.nodes.getType("swagger-doc")){
                $('.row-swagger-doc').hide();
            }
            $("#node-input-method").on("change", function() {
                if ($(this).val() === "post") {
                    $(".form-row-http-in-upload").show();
                } else {
                    $(".form-row-http-in-upload").hide();
                }
            }).change();


        }

    });
    var headerTypes = [
        {value:"content-type",label:"Content-Type",hasValue: false},
        {value:"location",label:"Location",hasValue: false},
        {value:"other",label:RED._("node-red:httpin.label.other"),icon:"red/images/typedInput/az.svg"}
       ]
    var contentTypes = [
        {value:"application/json",label:"application/json",hasValue: false},
        {value:"application/xml",label:"application/xml",hasValue: false},
        {value:"text/css",label:"text/css",hasValue: false},
        {value:"text/html",label:"text/html",hasValue: false},
        {value:"text/plain",label:"text/plain",hasValue: false},
        {value:"image/gif",label:"image/gif",hasValue: false},
        {value:"image/png",label:"image/png",hasValue: false},
        {value:"other",label:RED._("node-red:httpin.label.other"),icon:"red/images/typedInput/az.svg"}
    ];

    RED.nodes.registerType('http response',{
        category: 'network',
        color:"rgb(231, 231, 174)",
        defaults: {
            name: {value:""},
            statusCode: {
                value:"",
                label: RED._("node-red:httpin.label.status"),
                validate: RED.validators.number(true)},
            headers: {value:{}}
        },
        inputs:1,
        outputs:0,
        align: "right",
        icon: "white-globe.svg",
        label: function() {
            return this.name||("http"+(this.statusCode?" ("+this.statusCode+")":""));
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var headerList = $("#node-input-headers-container").css('min-height','150px').css('min-width','450px').editableList({
                addItem: function(container,i,header) {
                    var row = $('<div/>').css({
                        overflow: 'hidden',
                        whiteSpace: 'nowrap',
                        display: 'flex'
                    }).appendTo(container);
                    var propertNameCell = $('<div/>').css({'flex-grow':1}).appendTo(row);
                    var propertyName = $('<input/>',{class:"node-input-header-name",type:"text", style:"width: 100%"})
                        .appendTo(propertNameCell)
                        .typedInput({types:headerTypes});

                    var propertyValueCell = $('<div/>').css({'flex-grow':1,'margin-left':'10px'}).appendTo(row);
                    var propertyValue = $('<input/>',{class:"node-input-header-value",type:"text",style:"width: 100%"})
                        .appendTo(propertyValueCell)
                        .typedInput({types:
                            header.h === 'content-type'?contentTypes:[{value:"other",label:"other",icon:"red/images/typedInput/az.svg"}]
                        });

                    var matchedType = headerTypes.filter(function(ht) {
                        return ht.value === header.h
                    });
                    if (matchedType.length === 0) {
                        propertyName.typedInput('type','other');
                        propertyName.typedInput('value',header.h);
                        propertyValue.typedInput('value',header.v);
                    } else {
                        propertyName.typedInput('type',header.h);

                        if (header.h === "content-type") {
                            matchedType = contentTypes.filter(function(ct) {
                                return ct.value === header.v;
                            });
                            if (matchedType.length === 0) {
                                propertyValue.typedInput('type','other');
                                propertyValue.typedInput('value',header.v);
                            } else {
                                propertyValue.typedInput('type',header.v);
                            }
                        } else {
                            propertyValue.typedInput('value',header.v);
                        }
                    }

                    matchedType = headerTypes.filter(function(ht) {
                        return ht.value === header.h
                    });
                    if (matchedType.length === 0) {
                        propertyName.typedInput('type','other');
                        propertyName.typedInput('value',header.h);
                    } else {
                        propertyName.typedInput('type',header.h);
                    }

                    propertyName.on('change',function(event) {
                        var type = propertyName.typedInput('type');
                        if (type === 'content-type') {
                            propertyValue.typedInput('types',contentTypes);
                        } else {
                            propertyValue.typedInput('types',[{value:"other",label:"other",icon:"red/images/typedInput/az.svg"}]);
                        }
                    });
                },
                sortable: true,
                removable: true
            });

            if (this.headers) {
                for (var key in this.headers) {
                    if (this.headers.hasOwnProperty(key)) {
                        headerList.editableList('addItem',{h:key,v:this.headers[key]});
                    }
                }
            }
        },
        oneditsave: function() {
            var headers = $("#node-input-headers-container").editableList('items');
            var node = this;
            node.headers = {};
            headers.each(function(i) {
                var header = $(this);
                var keyType = header.find(".node-input-header-name").typedInput('type');
                var keyValue = header.find(".node-input-header-name").typedInput('value');
                var valueType = header.find(".node-input-header-value").typedInput('type');
                var valueValue = header.find(".node-input-header-value").typedInput('value');
                var key = keyType;
                var value = valueType;
                if (keyType === 'other') {
                    key = keyValue;
                }
                if (valueType === 'other') {
                    value = valueValue;
                }
                if (key !== '') {
                    node.headers[key] = value;
                }
            });
        },
        oneditresize: function(size) {
            var rows = $("#dialog-form>div:not(.node-input-headers-container-row)");
            var height = size.height;
            for (var i=0; i<rows.length; i++) {
                height -= $(rows[i]).outerHeight(true);
            }
            var editorRow = $("#dialog-form>div.node-input-headers-container-row");
            height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));

            $("#node-input-headers-container").editableList('height',height);
        }
    });
})();
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="http in">
    <p>Creates an HTTP end-point for creating web services.</p>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload</dt>
        <dd>For a GET request, contains an object of any query string parameters.
            Otherwise, contains the body of the HTTP request.</dd>
        <dt>req<span class="property-type">object</span></dt>
        <dd>An HTTP request object. This object contains multiple properties that
            provide information about the request.
            <ul>
             <li><code>body</code> - the body of the incoming request. The format
                 will depend on the request.</li>
             <li><code>headers</code> - an object containing the HTTP request headers.</li>
             <li><code>query</code> - an object containing any query string parameters.</li>
             <li><code>params</code> - an object containing any route parameters.</li>
             <li><code>cookies</code> - an object containing the cookies for the request.</li>
             <li><code>files</code> - if enabled within the node, an object containing
                 any files uploaded as part of a POST request.</li>
            </ul>
        </dd>
        <dt>res<span class="property-type">object</span></dt>
        <dd>An HTTP response object. This property should not be used directly;
            the <code>HTTP Response</code> node documents how to respond to a request.
            This property must remain attached to the message passed to the response node.</dd>
    </dl>
    <h3>Details</h3>
    <p>The node will listen on the configured path for requests of a particular type.
       The path can be fully specified, such as <code>/user</code>, or include
       named parameters that accept any value, such as <code>/user/:name</code>.
       When named parameters are used, their actual value in a request can be accessed under <code>msg.req.params</code>.</p>
    <p>For requests that include a body, such as a POST or PUT, the contents of
       the request is made available as <code>msg.payload</code>.</p>
    <p>If the content type of the request can be determined, the body will be parsed to
       any appropriate type. For example, <code>application/json</code> will be parsed to
       its JavaScript object representation.</p>
    <p><b>Note:</b> this node does not send any response to the request. The flow
       must include an HTTP Response node to complete the request.</p>
</script>

<script type="text/html" data-help-name="http response">
    <p>Sends responses back to requests received from an HTTP Input node.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string</span></dt>
        <dd>The body of the response.</dd>
        <dt class="optional">statusCode <span class="property-type">number</span></dt>
        <dd>If set, this is used as the response status code. Default: 200.</dd>
        <dt class="optional">headers <span class="property-type">object</span></dt>
        <dd>If set, provides HTTP headers to include in the response.</dd>
        <dt class="optional">cookies <span class="property-type">object</span></dt>
        <dd>If set, can be used to set or delete cookies.</dd>
    </dl>
    <h3>Details</h3>
    <p>The <code>statusCode</code> and <code>headers</code> can also be set within
    the node itself. If a property is set within the node, it cannot be overridden
    by the corresponding message property.</p>
    <h4>Cookie handling</h4>
    <p>The <code>cookies</code> property must be an object of name/value pairs.
    The value can be either a string to set the value of the cookie with default
    options, or it can be an object of options.</p>
    <p>The following example sets two cookies - one called <code>name</code> with
    a value of <code>nick</code>, the other called <code>session</code> with a
    value of <code>1234</code> and an expiry set to 15 minutes.</p>
    <pre>
msg.cookies = {
    name: 'nick',
    session: {
        value: '1234',
        maxAge: 900000
    }
}</pre>
    <p>The valid options include:</p>
    <ul>
    <li><code>domain</code> - (String) domain name for the cookie</li>
    <li><code>expires</code> - (Date) expiry date in GMT. If not specified or set to 0, creates a session cookie</li>
    <li><code>maxAge</code> - (String) expiry date as relative to the current time in milliseconds</li>
    <li><code>path</code> - (String) path for the cookie. Defaults to /</li>
    <li><code>value</code> - (String) the value to use for the cookie</li>
    </ul>
    <p>To delete a cookie, set its <code>value</code> to <code>null</code>.</p>

</script>

</div><div><!-- --- [red-module:node-red/httprequest] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="http request">
    <div class="form-row">
        <label for="node-input-method"><i class="fa fa-tasks"></i> <span data-i18n="httpin.label.method"></span></label>
        <select type="text" id="node-input-method" style="width:70%;">
        <option value="GET">GET</option>
        <option value="POST">POST</option>
        <option value="PUT">PUT</option>
        <option value="DELETE">DELETE</option>
        <option value="HEAD">HEAD</option>
        <option value="use" data-i18n="httpin.setby"></option>
        </select>
    </div>

    <div class="form-row">
        <label for="node-input-url"><i class="fa fa-globe"></i> <span data-i18n="httpin.label.url"></span></label>
        <input id="node-input-url" type="text" placeholder="http://">
    </div>

    <div class="form-row node-input-paytoqs-row">
        <label for="node-input-paytoqs"><span data-i18n="common.label.payload"></span></label>
        <select id="node-input-paytoqs" style="width: 70%;">
            <option value="ignore" data-i18n="httpin.label.paytoqs.ignore"></option>
            <option value="query" data-i18n="httpin.label.paytoqs.query"></option>
            <option value="body" data-i18n="httpin.label.paytoqs.body"></option>
        </select>
    </div>

    <div class="form-row">
        <input type="checkbox" id="node-input-usetls" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-usetls" style="width: auto" data-i18n="httpin.use-tls"></label>
        <div id="node-row-tls" class="hide">
            <label style="width: auto; margin-left: 20px; margin-right: 10px;" for="node-input-tls"><span data-i18n="httpin.tls-config"></span></label><input type="text" style="width: 300px" id="node-input-tls">
        </div>
    </div>

    <div class="form-row">
        <input type="checkbox" id="node-input-useAuth" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-useAuth" style="width: 70%;"><span data-i18n="httpin.basicauth"></span></label>
        <div style="margin-left: 20px" class="node-input-useAuth-row hide">
            <div class="form-row">
                <label for="node-input-authType-select"><i class="fa fa-user-secret "></i> <span data-i18n="httpin.label.authType"></span></label>
                <select type="text" id="node-input-authType-select" style="width:70%;">
                    <option value="basic"  data-i18n="httpin.basic"></option>
                    <option value="digest" data-i18n="httpin.digest"></option>
                    <option value="bearer" data-i18n="httpin.bearer"></option>
                </select>
                <input type="hidden" id="node-input-authType">
            </div>
            <div class="form-row node-input-basic-row">
                <label for="node-input-user"><i class="fa fa-user"></i> <span data-i18n="common.label.username"></span></label>
                <input type="text" id="node-input-user">
            </div>
            <div class="form-row">
                <label for="node-input-password"> <i class="fa fa-lock"></i> <span data-i18n="common.label.password" id="node-span-password"></span><span data-i18n="httpin.label.bearerToken" id="node-span-token" style="display:none"></span></label>
                <input type="password" id="node-input-password">
            </div>
        </div>
    </div>

    <div class="form-row">
        <input type="checkbox" id="node-input-persist" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-persist" style="width: auto" data-i18n="httpin.persist"></label>
    </div>

    <div class="form-row">
        <input type="checkbox" id="node-input-useProxy" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-useProxy" style="width: auto;"><span data-i18n="httpin.use-proxy"></span></label>
        <div id="node-input-useProxy-row" class="hide">
            <label style="width: auto; margin-left: 20px; margin-right: 10px;" for="node-input-proxy"><i class="fa fa-globe"></i> <span data-i18n="httpin.proxy-config"></span></label><input type="text" style="width: 270px" id="node-input-proxy">
        </div>
    </div>

    <div class="form-row">
        <input type="checkbox" id="node-input-senderr" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-senderr" style="width: auto" data-i18n="httpin.senderr"></label>
    </div>

    <div class="form-row">
        <input type="checkbox" id="node-input-insecureHTTPParser" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-insecureHTTPParser" style="width: auto;" data-i18n="httpin.insecureHTTPParser"></label>
    </div>


    <div class="form-row">
        <label for="node-input-ret"><i class="fa fa-arrow-left"></i> <span data-i18n="httpin.label.return"></span></label>
        <select type="text" id="node-input-ret" style="width:70%;">
        <option value="txt" data-i18n="httpin.utf8"></option>
        <option value="bin" data-i18n="httpin.binary"></option>
        <option value="obj" data-i18n="httpin.json"></option>
        </select>
    </div>

    <div class="form-row form-tips" id="tip-json" hidden><span data-i18n="httpin.tip.req"></span></div>

    <div class="form-row" style="margin-bottom:0;">
        <label><i class="fa fa-list"></i> <span data-i18n="httpin.label.headers"></span></label>
    </div>
    <div class="form-row node-input-headers-container-row">
        <ol id="node-input-headers-container"></ol>
    </div>

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
(function() {
    const headerTypes = [
        { value: "Accept", label: "Accept", hasValue: false },
        { value: "Accept-Encoding", label: "Accept-Encoding", hasValue: false },
        { value: "Accept-Language", label: "Accept-Language", hasValue: false },
        { value: "Authorization", label: "Authorization", hasValue: false },
        { value: "Content-Type", label: "Content-Type", hasValue: false },
        { value: "Cache-Control", label: "Cache-Control", hasValue: false },
        { value: "User-Agent", label: "User-Agent", hasValue: false },
        { value: "Location", label: "Location", hasValue: false },
        { value: "other", label: RED._("node-red:httpin.label.other"),
          hasValue: true, icon: "red/images/typedInput/az.svg" },
        { value: "msg", label: "msg.", hasValue: true },
    ]
    const headerOptions = {};
    const defaultOptions = [
        { value: "other", label: RED._("node-red:httpin.label.other"),
          hasValue: true, icon: "red/images/typedInput/az.svg" },
        { value: "msg", label: "msg.", hasValue: true },
    ];
    headerOptions["accept"] = [
        { value: "text/plain", label: "text/plain", hasValue: false },
        { value: "text/html", label: "text/html", hasValue: false },
        { value: "application/json", label: "application/json", hasValue: false },
        { value: "application/xml", label: "application/xml", hasValue: false },
        ...defaultOptions,
    ];
    headerOptions["accept-encoding"] = [
        { value: "gzip", label: "gzip", hasValue: false },
        { value: "deflate", label: "deflate", hasValue: false },
        { value: "compress", label: "compress", hasValue: false },
        { value: "br", label: "br", hasValue: false },
        { value: "gzip, deflate", label: "gzip, deflate", hasValue: false },
        { value: "gzip, deflate, br", label: "gzip, deflate, br", hasValue: false },
        ...defaultOptions,
    ];
    headerOptions["accept-language"] = [
        { value: "*", label: "*", hasValue: false },
        { value: "en-GB, en-US, en;q=0.9", label: "en-GB, en-US, en;q=0.9", hasValue: false },
        { value: "de-AT, de-DE;q=0.9, en;q=0.5", label: "de-AT, de-DE;q=0.9, en;q=0.5", hasValue: false },
        { value: "es-mx,es,en;q=0.5", label: "es-mx,es,en;q=0.5", hasValue: false },
        { value: "fr-CH, fr;q=0.9, en;q=0.8", label: "fr-CH, fr;q=0.9, en;q=0.8", hasValue: false },
        { value: "zh-CN, zh-TW; q = 0.9, zh-HK; q = 0.8, zh; q = 0.7, en; q = 0.6", label: "zh-CN, zh-TW; q = 0.9, zh-HK; q = 0.8, zh; q = 0.7, en; q = 0.6", hasValue: false },
        { value: "ja-JP, jp", label: "ja-JP, jp", hasValue: false },
        ...defaultOptions,
    ];
    headerOptions["content-type"] = [
        { value: "text/css", label: "text/css", hasValue: false },
        { value: "text/plain", label: "text/plain", hasValue: false },
        { value: "text/html", label: "text/html", hasValue: false },
        { value: "application/json", label: "application/json", hasValue: false },
        { value: "application/octet-stream", label: "application/octet-stream", hasValue: false },
        { value: "application/pdf", label: "application/pdf", hasValue: false },
        { value: "application/xml", label: "application/xml", hasValue: false },
        { value: "application/zip", label: "application/zip", hasValue: false },
        { value: "multipart/form-data", label: "multipart/form-data", hasValue: false },
        { value: "audio/aac", label: "audio/aac", hasValue: false },
        { value: "audio/ac3", label: "audio/ac3", hasValue: false },
        { value: "audio/basic", label: "audio/basic", hasValue: false },
        { value: "audio/mp4", label: "audio/mp4", hasValue: false },
        { value: "audio/ogg", label: "audio/ogg", hasValue: false },
        { value: "image/bmp", label: "image/bmp", hasValue: false },
        { value: "image/gif", label: "image/gif", hasValue: false },
        { value: "image/jpeg", label: "image/jpeg", hasValue: false },
        { value: "image/png", label: "image/png", hasValue: false },
        { value: "image/tiff", label: "image/tiff", hasValue: false },
        ...defaultOptions,
    ];
    headerOptions["cache-control"] = [
        { value: "max-age=0", label: "max-age=0", hasValue: false },
        { value: "max-age=86400", label: "max-age=86400", hasValue: false },
        { value: "no-cache", label: "no-cache", hasValue: false },
        ...defaultOptions,
    ];

    headerOptions["user-agent"] = [
        { value: "Mozilla/5.0", label: "Mozilla/5.0", hasValue: false },
        ...defaultOptions,
    ];

    function getHeaderOptions(headerName) {
        const lc = (headerName || "").toLowerCase();
        let opts = headerOptions[lc];
        return opts || defaultOptions;
    }

    RED.nodes.registerType('http request',{
        category: 'network',
        color:"rgb(231, 231, 174)",
        defaults: {
            name: {value:""},
            method:{value:"GET"},
            ret: {value:"txt"},
            paytoqs: {value: false},
            url:{
                value:"",
                validate: function(v, opt) {
                    if ((v.trim().length === 0) ||
                        (v.indexOf("://") === -1) ||
                        (v.trim().indexOf("http") === 0)) {
                        return true;
                    }
                    return RED._("node-red:httpin.errors.invalid-url");
                }
            },
            tls: {type:"tls-config",required: false,
                  label:RED._("node-red:httpin.tls-config") },
            persist: {value:false},
            proxy: {type:"http proxy",required: false,
                    label:RED._("node-red:httpin.proxy-config") },
            insecureHTTPParser: {value: false},
            authType: {value: ""},
            senderr: {value: false},
            headers: { value: [] }
        },
        credentials: {
            user: {type:"text"},
            password: {type: "password"}
        },
        inputs:1,
        outputs:1,
        outputLabels: function(i) {
            return ({
                txt: this._("httpin.label.utf8String"),
                bin: this._("httpin.label.binaryBuffer"),
                obj: this._("httpin.label.jsonObject")
            }[this.ret]);
        },
        icon: "white-globe.svg",
        label: function() {
            return this.name||this._("httpin.httpreq");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            const node = this;
            $("#node-input-useAuth").on("change", function() {
                if ($(this).is(":checked")) {
                    $(".node-input-useAuth-row").show();
                    // Nodes (< version 0.20.x) with credentials but without authentication type, need type 'basic'
                    if (!$('#node-input-authType').val()) {
                        $("#node-input-authType-select").val('basic').trigger("change");
                    }
                } else {
                    $(".node-input-useAuth-row").hide();
                    $('#node-input-authType').val('');
                    $('#node-input-user').val('');
                    $('#node-input-password').val('');
                }
                RED.tray.resize();
            });
            $("#node-input-authType-select").on("change", function() {
                const val = $(this).val();
                $("#node-input-authType").val(val);
                if (val === "basic" || val === "digest") {
                    $(".node-input-basic-row").show();
                    $('#node-span-password').show();
                    $('#node-span-token').hide();
                } else if (val === "bearer") {
                    $(".node-input-basic-row").hide();
                    $('#node-span-password').hide();
                    $('#node-span-token').show();
                    $('#node-input-user').val('');
                }
                RED.tray.resize();
            });
            $("#node-input-method").on("change", function() {
                if ($(this).val() == "GET") {
                    $(".node-input-paytoqs-row").show();
                } else {
                    $(".node-input-paytoqs-row").hide();
                }
                RED.tray.resize();
            });
            if (node.paytoqs === true || node.paytoqs == "query") {
                $("#node-input-paytoqs").val("query");
            } else if (node.paytoqs === "body") {
                $("#node-input-paytoqs").val("body");
            } else {
                $("#node-input-paytoqs").val("ignore");
            }
            if (node.authType) {
                $('#node-input-useAuth').prop('checked', true);
                $("#node-input-authType-select").val(node.authType);
                $("#node-input-authType-select").change();
            } else {
                $('#node-input-useAuth').prop('checked', false);
            }
            $("#node-input-useAuth").change();

            function updateTLSOptions() {
                if ($("#node-input-usetls").is(':checked')) {
                    $("#node-row-tls").show();
                } else {
                    $("#node-row-tls").hide();
                }
                RED.tray.resize();
            }
            if (node.tls) {
                $('#node-input-usetls').prop('checked', true);
            } else {
                $('#node-input-usetls').prop('checked', false);
            }
            updateTLSOptions();
            $("#node-input-usetls").on("click",function() {
                updateTLSOptions();
            });

            function updateProxyOptions() {
                if ($("#node-input-useProxy").is(":checked")) {
                    $("#node-input-useProxy-row").show();
                } else {
                    $("#node-input-useProxy-row").hide();
                }
                RED.tray.resize();
            }
            if (node.proxy) {
                $("#node-input-useProxy").prop("checked", true);
            } else {
                $("#node-input-useProxy").prop("checked", false);
            }

            if (node.insecureHTTPParser) {
                $("node-intput-insecureHTTPParser").prop("checked", true)
            } else {
                $("node-intput-insecureHTTPParser").prop("checked", false)
            }
            updateProxyOptions();
            $("#node-input-useProxy").on("click", function() {
                updateProxyOptions();
            });

            $("#node-input-ret").on("change", function() {
                if ($("#node-input-ret").val() === "obj") {
                    $("#tip-json").show();
                } else {
                    $("#tip-json").hide();
                }
                RED.tray.resize();
            });
            const hasMatch = function (arr, value) {
                return arr.some(function (ht) {
                    return ht.value === value
                });
            }
            const headerList = $("#node-input-headers-container").css('min-height', '150px').css('min-width', '450px').editableList({
                addItem: function (container, i, header) {
                    const row = $('<div/>').css({
                        overflow: 'hidden',
                        whiteSpace: 'nowrap',
                        display: 'flex'
                    }).appendTo(container);
                    const propertNameCell = $('<div/>').css({ 'flex-grow': 1 }).appendTo(row);
                    const propertyName = $('<input/>', { class: "node-input-header-name", type: "text", style: "width: 100%" })
                        .appendTo(propertNameCell)
                        .typedInput({ types: headerTypes });

                    const propertyValueCell = $('<div/>').css({ 'flex-grow': 1, 'margin-left': '10px' }).appendTo(row);
                    const propertyValue = $('<input/>', { class: "node-input-header-value", type: "text", style: "width: 100%" })
                        .appendTo(propertyValueCell)
                        .typedInput({
                            types: getHeaderOptions(header.keyType)
                        });

                    const setup = function(_header) {
                        const headerTypeIsAPreset = function(h) {return hasMatch(headerTypes, h) };
                        const headerValueIsAPreset = function(h, v) {return hasMatch(getHeaderOptions(h), v) };
                        const {keyType, keyValue, valueType, valueValue} = header;
                        if(keyType == "msg" || keyType == "other") {
                            propertyName.typedInput('type', keyType);
                            propertyName.typedInput('value', keyValue);
                        } else if (headerTypeIsAPreset(keyType)) {
                            propertyName.typedInput('type', keyType);
                        } else {
                            propertyName.typedInput('type', "other");
                            propertyName.typedInput('value', keyValue);
                        }
                        if(valueType == "msg" || valueType == "other") {
                            propertyValue.typedInput('type', valueType);
                            propertyValue.typedInput('value', valueValue);
                        } else if (headerValueIsAPreset(propertyName.typedInput('type'), valueType)) {
                            propertyValue.typedInput('type', valueType);
                        } else {
                            propertyValue.typedInput('type', "other");
                            propertyValue.typedInput('value', valueValue);
                        }
                    }
                    setup(header);

                    propertyName.on('change', function (event) {
                        propertyValue.typedInput('types', getHeaderOptions(propertyName.typedInput('type')));
                    });

                },
                sortable: true,
                removable: true
            });
            if (node.headers) {
                for (let index = 0; index < node.headers.length; index++) {
                    const element = node.headers[index];
                    headerList.editableList('addItem', node.headers[index]);
                }
            }
        },
        oneditsave: function() {
            if (!$("#node-input-usetls").is(':checked')) {
                $("#node-input-tls").val("_ADD_");
            }
            if (!$("#node-input-useProxy").is(":checked")) {
                $("#node-input-proxy").val("_ADD_");
            }
            const headers = $("#node-input-headers-container").editableList('items');
            const node = this;
            node.headers = [];
            headers.each(function(i) {
                const header = $(this);
                const keyType = header.find(".node-input-header-name").typedInput('type');
                const keyValue = header.find(".node-input-header-name").typedInput('value');
                const valueType = header.find(".node-input-header-value").typedInput('type');
                const valueValue = header.find(".node-input-header-value").typedInput('value');
                if (keyType !== '' || keyType === 'other' || keyType === 'msg') {
                    node.headers.push({
                        keyType, keyValue, valueType, valueValue
                    })
                }
            });
        },
        oneditresize: function(size) {
            const dlg = $("#dialog-form");
            const expandRow = dlg.find('.node-input-headers-container-row');
            let height = dlg.height() - 5;
            if(expandRow && expandRow.length){
                const siblingRows = dlg.find('> .form-row:not(.node-input-headers-container-row)');
                for (let i = 0; i < siblingRows.size(); i++) {
                    const cr = $(siblingRows[i]);
                    if(cr.is(":visible"))
                        height -= cr.outerHeight(true);
                }
                $("#node-input-headers-container").editableList('height',height);
            } 
        }
    });
})();    
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="http request">
    <p>Sends HTTP requests and returns the response.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt class="optional">url <span class="property-type">string</span></dt>
        <dd>If not configured in the node, this optional property sets the url of the request.</dd>
        <dt class="optional">method <span class="property-type">string</span></dt>
        <dd>If not configured in the node, this optional property sets the HTTP method of the request.
            Must be one of <code>GET</code>, <code>PUT</code>, <code>POST</code>, <code>PATCH</code> or <code>DELETE</code>.</dd>
        <dt class="optional">headers <span class="property-type">object</span></dt>
        <dd>Sets the HTTP headers of the request. NOTE: Any headers set in the node configuration will overwrite any matching headers in <code>msg.headers</code> </dd>
        <dt class="optional">cookies <span class="property-type">object</span></dt>
        <dd>If set, can be used to send cookies with the request.</dd>
        <dt class="optional">payload</dt>
        <dd>Sent as the body of the request.</dd>
        <dt class="optional">rejectUnauthorized</dt>
        <dd>If set to <code>false</code>, allows requests to be made to https sites that use
            self signed certificates.</dd>
        <dt class="optional">followRedirects</dt>
        <dd>If set to <code>false</code> prevent following Redirect (HTTP 301).<code>true</code> by default</dd>
        <dt class="optional">requestTimeout</dt>
        <dd>If set to a positive number of milliseconds, will override the globally set <code>httpRequestTimeout</code> parameter.</dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string | object | buffer</span></dt>
        <dd>The body of the response. The node can be configured to return the body
             as a string, attempt to parse it as a JSON string or leave it as a
             binary buffer.</dd>
        <dt>statusCode <span class="property-type">number</span></dt>
        <dd>The status code of the response, or the error code if the request could not be completed.</dd>
        <dt>headers <span class="property-type">object</span></dt>
        <dd>An object containing the response headers.</dd>
        <dt>responseUrl <span class="property-type">string</span></dt>
        <dd>In case any redirects occurred while processing the request, this property is the final redirected url.
            Otherwise, the url of the original request.</dd>
        <dt>responseCookies <span class="property-type">object</span></dt>
        <dd>If the response includes cookies, this property is an object of name/value pairs for each cookie.</dd>
        <dt>redirectList <span class="property-type">array</span></dt>
        <dd>If the request was redirected one or more times, the accumulated information will be added to this property. `location` is the next redirect destination. `cookies` is the cookies returned from the redirect source.</dd>
    </dl>
    <h3>Details</h3>
    <p>When configured within the node, the URL property can contain <a href="http://mustache.github.io/mustache.5.html" target="_blank">mustache-style</a> tags. These allow the
    url to be constructed using values of the incoming message. For example, if the url is set to
    <code>example.com/{{{topic}}}</code>, it will have the value of <code>msg.topic</code> automatically inserted.
    Using {{{...}}} prevents mustache from escaping characters like / & etc.</p>
    <p>The node can optionally automatically encode <code>msg.payload</code> as query string parameters for a GET request, in which case <code>msg.payload</code> has to be an object.</p>
    <p><b>Note</b>: If running behind a proxy, the standard <code>http_proxy=...</code> environment variable should be set and Node-RED restarted, or use Proxy Configuration. If Proxy Configuration was set, the configuration take precedence over environment variable.</p>
    <h4>Using multiple HTTP Request nodes</h4>
    <p>In order to use more than one of these nodes in the same flow, care must be taken with
    the <code>msg.headers</code> property. The first node will set this property with
    the response headers. The next node will then use those headers for its request - this
    is not usually the right thing to do. If <code>msg.headers</code> property is left unchanged
    between nodes, it will be ignored by the second node. To set custom headers, <code>msg.headers</code>
    should first be deleted or reset to an empty object: <code>{}</code>.
    <h4>Cookie handling</h4>
    <p>The <code>cookies</code> property passed to the node must be an object of name/value pairs.
    The value can be either a string to set the value of the cookie or it can be an
    object with a single <code>value</code> property.</p>
    <p>Any cookies returned by the request are passed back under the <code>responseCookies</code> property.</p>
    <h4>Content type handling</h4>
    <p>If <code>msg.payload</code> is an Object, the node will automatically set the content type
    of the request to <code>application/json</code> and encode the body as such.</p>
    <p>To encode the request as form data, <code>msg.headers["content-type"]</code> should be set to <code>application/x-www-form-urlencoded</code>.</p>
    <h4>File Upload</h4>
    <p>To perform a file upload, <code>msg.headers["content-type"]</code> should be set to <code>multipart/form-data</code>
        and the <code>msg.payload</code> passed to the node must be an object with the following structure:</p>
    <pre><code>{
    "KEY": {
        "value": FILE_CONTENTS,
        "options": {
            "filename": "FILENAME"
        }
    }
}</code></pre>
    <p>The values of <code>KEY</code>, <code>FILE_CONTENTS</code> and <code>FILENAME</code>
    should be set to the appropriate values.</p>

</script>

</div><div><!-- --- [red-module:node-red/websocket] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!-- WebSocket Input Node -->
<script type="text/html" data-template-name="websocket in">
    <div class="form-row">
        <label for="node-input-mode"><i class="fa fa-dot-circle-o"></i> <span data-i18n="websocket.label.type"></span></label>
        <select id="node-input-mode">
            <option value="server" data-i18n="websocket.listenon"></option>
            <option value="client" data-i18n="websocket.connectto"></option>
        </select>
    </div>
    <div class="form-row" id="websocket-server-row">
        <label for="node-input-server"><i class="fa fa-bookmark"></i> <span data-i18n="websocket.label.path"></span></label>
        <input type="text" id="node-input-server">
    </div>
    <div class="form-row" id="websocket-client-row">
        <label for="node-input-client"><i class="fa fa-bookmark"></i> <span data-i18n="websocket.label.url"></span></label>
        <input type="text" id="node-input-client">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">

(function() {

    function ws_oneditprepare() {
        $("#websocket-client-row").hide();
        $("#node-input-mode").on("change", function() {
            if ( $("#node-input-mode").val() === 'client') {
                $("#websocket-server-row").hide();
                $("#websocket-client-row").show();
            }
            else {
                $("#websocket-server-row").show();
                $("#websocket-client-row").hide();
            }
        });

        if (this.client) {
            $("#node-input-mode").val('client').change();
        }
        else {
            $("#node-input-mode").val('server').change();
        }
    }

    function ws_oneditsave() {
        if ($("#node-input-mode").val() === 'client') {
            $("#node-input-server").append('<option value="">Dummy</option>');
            $("#node-input-server").val('');
        }
        else {
            $("#node-input-client").append('<option value="">Dummy</option>');
            $("#node-input-client").val('');
        }
    }

    function ws_label() {
        var nodeid = (this.client)?this.client:this.server;
        var wsNode = RED.nodes.node(nodeid);
        return this.name||(wsNode?"[ws] "+wsNode.label():"websocket");
    }

    function ws_validateserver() {
        if ($("#node-input-mode").val() === 'client' || (this.client && !this.server)) {
            return true;
        }
        else {
            if (RED.nodes.node(this.server) != null) {
                return true;
            }
            return RED._("node-red:websocket.errors.missing-server");
        }
    }

    function ws_validateclient() {
        if ($("#node-input-mode").val() === 'client' || (this.client && !this.server)) {
            if (RED.nodes.node(this.client) != null) {
                return true;
            }
            return RED._("node-red:websocket.errors.missing-client");
        }
        else {
            return true;
        }
    }

    RED.nodes.registerType('websocket in',{
        category: 'network',
        defaults: {
            name: {value:""},
            server: {type:"websocket-listener", validate: ws_validateserver},
            client: {type:"websocket-client", validate: ws_validateclient}
        },
        color:"rgb(215, 215, 160)",
        inputs:0,
        outputs:1,
        icon: "white-globe.svg",
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        label: ws_label,
        oneditsave: ws_oneditsave,
        oneditprepare: ws_oneditprepare
    });

    RED.nodes.registerType('websocket out',{
        category: 'network',
        defaults: {
            name: {value:""},
            server: {type:"websocket-listener", validate: ws_validateserver},
            client: {type:"websocket-client", validate: ws_validateclient}
        },
        color:"rgb(215, 215, 160)",
        inputs:1,
        outputs:0,
        icon: "white-globe.svg",
        align: "right",
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        label: ws_label,
        oneditsave: ws_oneditsave,
        oneditprepare: ws_oneditprepare
    });

    RED.nodes.registerType('websocket-listener',{
        category: 'config',
        defaults: {
            path: {value:"",required:true,
                   label:RED._("node-red:websocket.label.path"),
                   validate:RED.validators.regex(/^((?!\/debug\/ws).)*$/)},
            wholemsg: {value:"false"}
        },
        inputs:0,
        outputs:0,
        label: function() {
            var root = RED.settings.httpNodeRoot;
            if (root.slice(-1) != "/") {
                root = root+"/";
            }
            if (this.path) {
                if (this.path.charAt(0) == "/") {
                    root += this.path.slice(1);
                } else {
                    root += this.path;
                }
            }
            return root;
        },
        oneditprepare: function() {
            var root = RED.settings.httpNodeRoot;
            if (root.slice(-1) == "/") {
                root = root.slice(0,-1);
            }
            if (root === "") {
                $("#node-config-ws-tip").hide();
            } else {
                $("#node-config-ws-path").html(RED._("node-red:websocket.tip.path2", { path: root }));
                $("#node-config-ws-tip").show();
            }
        }
    });

    RED.nodes.registerType('websocket-client',{
        category: 'config',
        defaults: {
            path: {
                value:"",required:true,
                label:RED._("node-red:websocket.label.path"),
                validate:RED.validators.regex(/^((?!\/debug\/ws).)*$/)},
            tls: {type:"tls-config",required: false},
            wholemsg: {value:"false"},
            hb: {
                value: "",
                label:RED._("node-red:websocket.sendheartbeat"),
                validate: RED.validators.number(/*blank allowed*/true) },
            subprotocol: {value:"",required: false}
        },
        inputs:0,
        outputs:0,
        label: function() {
            return this.path;
        },
        oneditprepare: function() {
            $("#node-config-input-path").on("change keyup paste",function() {
                $(".node-config-row-tls").toggle(/^wss:/i.test($(this).val()))
            });
            $("#node-config-input-path").change();

            var heartbeatActive = (this.hb && this.hb != "0");
            $("#node-config-input-hb-cb").prop("checked",heartbeatActive);
            $("#node-config-input-hb-cb").on("change", function(evt) {
                $("#node-config-input-hb-row").toggle(this.checked);
            })
            $("#node-config-input-hb-cb").trigger("change");
            if (!heartbeatActive) {
                $("#node-config-input-hb").val("");
            }
        },
        oneditsave: function() {
            if (!/^wss:/i.test($("#node-config-input-path").val())) {
                $("#node-config-input-tls").val("_ADD_");
            }
            if (!$("#node-config-input-hb-cb").prop("checked")) {
                $("#node-config-input-hb").val("0");
            }
        }
    });

})();
</script>

<!-- WebSocket out Node -->
<script type="text/html" data-template-name="websocket out">
    <div class="form-row">
        <label for="node-input-mode"><i class="fa fa-dot-circle-o"></i> <span data-i18n="websocket.label.type"></span></label>
        <select id="node-input-mode">
            <option value="server" data-i18n="websocket.listenon"></option>
            <option value="client" data-i18n="websocket.connectto"></option>
        </select>
    </div>
    <div class="form-row" id="websocket-server-row">
        <label for="node-input-server"><i class="fa fa-bookmark"></i> <span data-i18n="websocket.label.path"></span></label>
        <input type="text" id="node-input-server">
    </div>
    <div class="form-row" id="websocket-client-row">
        <label for="node-input-client"><i class="fa fa-bookmark"></i> <span data-i18n="websocket.label.url"></span></label>
        <input type="text" id="node-input-client">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<!-- WebSocket Server configuration node -->
<script type="text/html" data-template-name="websocket-listener">
    <div class="form-row">
        <label for="node-config-input-path"><i class="fa fa-bookmark"></i> <span data-i18n="websocket.label.path"></span></label>
        <input id="node-config-input-path" type="text" placeholder="/ws/example">
    </div>
    <div class="form-row">
        <label for="node-config-input-wholemsg" data-i18n="websocket.sendrec"></label>
        <select type="text" id="node-config-input-wholemsg" style="width: 70%;">
            <option value="false" data-i18n="websocket.payload"></option>
            <option value="true" data-i18n="websocket.message"></option>
        </select>
    </div>
    <div class="form-tips">
        <span data-i18n="[html]websocket.tip.path1"></span>
        <p id="node-config-ws-tip"><span id="node-config-ws-path"></span></p>
    </div>
</script>

<!-- WebSocket Client configuration node -->
<script type="text/html" data-template-name="websocket-client">
    <div class="form-row">
        <label for="node-config-input-path"><i class="fa fa-bookmark"></i> <span data-i18n="websocket.label.url"></span></label>
        <input id="node-config-input-path" type="text" placeholder="ws://example.com/ws">
    </div>
    <div class="form-row node-config-row-tls hide">
        <label for="node-config-input-tls" data-i18n="httpin.tls-config"></label>
        <input type="text" id="node-config-input-tls">
    </div>
    <div class="form-row">
        <label for="node-config-input-subprotocol"><i class="fa fa-tag"></i> <span data-i18n="websocket.label.subprotocol"></span></label>
        <input type="text" id="node-config-input-subprotocol">
    </div>
    <div class="form-row">
        <label for="node-config-input-wholemsg" data-i18n="websocket.sendrec"></label>
        <select type="text" id="node-config-input-wholemsg" style="width: 70%;">
            <option value="false" data-i18n="websocket.payload"></option>
            <option value="true" data-i18n="websocket.message"></option>
        </select>
    </div>
    <div class="form-row" style="display: flex; align-items: center; min-height: 34px">
        <label for="node-config-input-hb-cb" data-i18n="websocket.sendheartbeat"></label>
        <input type="checkbox" style="margin: 0 8px; width:auto" id="node-config-input-hb-cb">
        <span id="node-config-input-hb-row" class="hide" >
            <input type="text" style="width: 70px; margin-right: 3px" id="node-config-input-hb">
            <span  data-i18n="inject.seconds"></span>
        </span>
    </div>
    <div class="form-tips">
        <p><span data-i18n="[html]websocket.tip.url1"></span></p>
        <span data-i18n="[html]websocket.tip.url2"></span>
    </div>
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="websocket in">
    <p>WebSocket input node.</p>
    <p>By default, the data received from the WebSocket will be in <code>msg.payload</code>.
    The socket can be configured to expect a properly formed JSON string, in which
    case it will parse the JSON and send on the resulting object as the entire message.</p>
</script>

<script type="text/html" data-help-name="websocket out">
    <p>WebSocket out node.</p>
    <p>By default, <code>msg.payload</code> will be sent over the WebSocket. The socket
    can be configured to encode the entire <code>msg</code> object as a JSON string and send that
    over the WebSocket.</p>

    <p>If the message arriving at this node started at a WebSocket In node, the message
    will be sent back to the client that triggered the flow. Otherwise, the message
    will be broadcast to all connected clients.</p>
    <p>If you want to broadcast a message that started at a WebSocket In node, you
    should delete the <code>msg._session</code> property within the flow.</p>
</script>

<script type="text/html" data-help-name="websocket-listener">
   <p>This configuration node creates a WebSocket Server endpoint using the specified path.</p>
</script>

<script type="text/html" data-help-name="websocket-client">
   <p>This configuration node connects a WebSocket client to the specified URL.</p>
</script>

</div><div><!-- --- [red-module:node-red/tcpin] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="tcp in">
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-dot-circle-o"></i> <span data-i18n="tcpin.label.type"></span></label>
        <select id="node-input-server" style="width:120px; margin-right:5px;">
            <option value="server" data-i18n="tcpin.type.listen"></option>
            <option value="client" data-i18n="tcpin.type.connect"></option>
        </select>
        <span data-i18n="tcpin.label.port"></span> <input type="text" id="node-input-port" style="width:65px">
    </div>
    <div class="form-row hidden" id="node-input-host-row" style="padding-left:110px;">
        <span data-i18n="tcpin.label.host"></span> <input type="text" id="node-input-host" placeholder="localhost" style="width: 60%;">
    </div>
    <div class="form-row" id="node-input-tls-enable">
        <label> </label>
        <input type="checkbox" id="node-input-usetls" style="display: inline-block; width:auto; vertical-align:top;">
        <label for="node-input-usetls" style="width:auto" data-i18n="httpin.use-tls"></label>
        <div id="node-row-tls" class="hide">
            <label style="width:auto; margin-left:20px; margin-right:10px;" for="node-input-tls"><span data-i18n="httpin.tls-config"></span></label><input type="text" style="width: 300px" id="node-input-tls">
        </div>
    </div>

    <div class="form-row">
        <label><i class="fa fa-sign-out"></i> <span data-i18n="tcpin.label.output"></span></label>
        <select id="node-input-datamode" style="width:110px;">
            <option value="stream" data-i18n="tcpin.output.stream"></option>
            <option value="single" data-i18n="tcpin.output.single"></option>
        </select>
        <select id="node-input-datatype" style="width:140px;">
            <option value="buffer" data-i18n="tcpin.output.buffer"></option>
            <option value="utf8" data-i18n="tcpin.output.string"></option>
            <option value="base64" data-i18n="tcpin.output.base64"></option>
        </select>
        <span data-i18n="tcpin.label.payload"></span>
    </div>

    <div id="node-row-newline" class="form-row hidden" style="padding-left:110px;">
        <span data-i18n="tcpin.label.delimited"></span> <input type="text" id="node-input-newline" style="width:110px;" data-i18n="[placeholder]tcpin.label.optional"><br/>
        <input type="checkbox" id="node-input-trim" style="display:inline-block; width:auto; vertical-align:top;"> <span data-i18n="tcpin.label.reattach"></span>
    </div>

    <div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> <span data-i18n="common.label.topic"></span></label>
        <input type="text" id="node-input-topic" data-i18n="[placeholder]common.label.topic">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('tcp in',{
        category: 'network',
        color: "Silver",
        defaults: {
            name: {value:""},
            server: {value:"server", required:true},
            host: {
                value:"",
                validate:function(v, opt) {
                    if ((this.server == "server")||v.length > 0) {
                        return true;
                    }
                    return RED._("node-red:tcpin.errors.invalid-host");
                }
            },
            port: {
                value:"", required:true,
                label:RED._("node-red:tcpin.label.port"),
                validate:RED.validators.number(false)},
            datamode:{value:"stream"},
            datatype:{value:"buffer"},
            newline:{value:""},
            topic: {value:""},
            trim: {value:false},
            base64: {/*deprecated*/ value:false, required:true},
            tls: {type:"tls-config", value:'', required:false,
                  label:RED._("node-red:httpin.tls-config") }
        },
        inputs:0,
        outputs:1,
        icon: "bridge-dash.svg",
        label: function() {
            return this.name || "tcp:"+(this.host?this.host+":":"")+this.port;
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        },
        oneditprepare: function() {
            var updateOptions = function() {
                var sockettype = $("#node-input-server").val();
                if (sockettype == "client") {
                    $("#node-input-host-row").show();
                } else {
                    $("#node-input-host-row").hide();
                }
                var datamode = $("#node-input-datamode").val();
                var datatype = $("#node-input-datatype").val();
                if (datamode == "stream") {
                    if (datatype == "utf8") {
                        $("#node-row-newline").show();
                    } else {
                        $("#node-row-newline").hide();
                    }
                } else {
                    $("#node-row-newline").hide();
                }
            };
            updateOptions();
            $("#node-input-server").change(updateOptions);
            $("#node-input-datatype").change(updateOptions);
            $("#node-input-datamode").change(updateOptions);
            function updateTLSOptions() {
                if ($("#node-input-usetls").is(':checked')) {
                    $("#node-row-tls").show();
                } else {
                    $("#node-row-tls").hide();
                }
            }
            if (this.tls) {
                $('#node-input-usetls').prop('checked', true);
            } else {
                $('#node-input-usetls').prop('checked', false);
            }
            updateTLSOptions();
            $("#node-input-usetls").on("click",function() {
                updateTLSOptions();
            });
        },
        oneditsave: function() {
            if (!$("#node-input-usetls").is(':checked')) {
                $("#node-input-tls").val("_ADD_");
            }
        }
    });
</script>


<script type="text/html" data-template-name="tcp out">
    <div class="form-row">
        <label for="node-input-beserver"><i class="fa fa-dot-circle-o"></i> <span data-i18n="tcpin.label.type"></span></label>
        <select id="node-input-beserver" style="width:150px; margin-right:5px;">
            <option value="server" data-i18n="tcpin.type.listen"></option>
            <option value="client" data-i18n="tcpin.type.connect"></option>
            <option value="reply" data-i18n="tcpin.type.reply"></option>
        </select>
        <span id="node-input-port-row"><span data-i18n="tcpin.label.port"></span> <input type="text" id="node-input-port" style="width: 65px"></span>
    </div>

    <div class="form-row hidden" id="node-input-host-row" style="padding-left: 110px;">
        <span data-i18n="tcpin.label.host"></span> <input type="text" id="node-input-host" style="width: 60%;">
    </div>

    <div class="form-row" id="node-input-tls-enable">
        <label> </label>
        <input type="checkbox" id="node-input-usetls" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-usetls" style="width: auto" data-i18n="httpin.use-tls"></label>
        <div id="node-row-tls" class="hide">
            <label style="width: auto; margin-left: 20px; margin-right: 10px;" for="node-input-tls"><span data-i18n="httpin.tls-config"></span></label><input type="text" style="width: 300px" id="node-input-tls">
        </div>
    </div>

    <div class="form-row hidden" id="node-input-end-row">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-end" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-end" style="width: 70%;"><span data-i18n="tcpin.label.close-connection"></span></label>
    </div>

    <div class="form-row">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-base64" placeholder="base64" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-base64" style="width: 70%;"><span data-i18n="tcpin.label.decode-base64"></span></label>
    </div>

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('tcp out',{
        category: 'network',
        color: "Silver",
        defaults: {
            name: {value:""},
            host: {
                value:"",
                validate:function(v, opt) {
                    if ((this.beserver != "client")||v.length > 0) {
                        return true;
                    }
                    return RED._("node-red:tcpin.errors.invalid-host");
                }
            },
            port: {
                value:"",
                validate:function(v) {
                    if ((this.beserver == "reply")||RED.validators.number()(v)) {
                        return true;
                    }
                    return RED._("node-red:tcpin.errors.invalid-port");
                }
            },
            beserver: {value:"client", required:true},
            base64: {value:false, required:true},
            end: {value:false, required:true},
            tls: {type:"tls-config", value:'', required:false,
                  label:RED._("node-red:httpin.tls-config") }
        },
        inputs:1,
        outputs:0,
        icon: "bridge-dash.svg",
        align: "right",
        label: function() {
            return this.name || "tcp:"+(this.host?this.host+":":"")+this.port;
        },
        labelStyle: function() {
            return (this.name)?"node_label_italic":"";
        },
        oneditprepare: function() {
            var updateOptions = function() {
                var sockettype = $("#node-input-beserver").val();
                if (sockettype == "reply") {
                    $("#node-input-port-row").hide();
                    $("#node-input-host-row").hide();
                    $("#node-input-end-row").hide();
                    $("#node-input-tls-enable").hide();
                } else if (sockettype == "client"){
                    $("#node-input-port-row").show();
                    $("#node-input-host-row").show();
                    $("#node-input-end-row").show();
                    $("#node-input-tls-enable").show();
                } else {
                    $("#node-input-port-row").show();
                    $("#node-input-host-row").hide();
                    $("#node-input-end-row").show();
                    $("#node-input-tls-enable").show();
                }
            };
            updateOptions();
            $("#node-input-beserver").change(updateOptions);
            function updateTLSOptions() {
                if ($("#node-input-usetls").is(':checked')) {
                    $("#node-row-tls").show();
                } else {
                    $("#node-row-tls").hide();
                }
            }
            if (this.tls) {
                $('#node-input-usetls').prop('checked', true);
            } else {
                $('#node-input-usetls').prop('checked', false);
            }
            updateTLSOptions();
            $("#node-input-usetls").on("click",function() {
                updateTLSOptions();
            });
        },
        oneditsave: function() {
            if (!$("#node-input-usetls").is(':checked')) {
                $("#node-input-tls").val("_ADD_");
            }
        }
    });
</script>


<script type="text/html" data-template-name="tcp request">
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-globe"></i> <span data-i18n="tcpin.label.server"></span></label>
        <input type="text" id="node-input-server" placeholder="ip.address" style="width:45%">
        <span data-i18n="tcpin.label.port"></span>
        <input type="text" id="node-input-port" style="width:60px">
    </div>
    <div class="form-row" id="node-input-tls-enable">
        <label> </label>
        <input type="checkbox" id="node-input-usetls" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-usetls" style="width: auto" data-i18n="httpin.use-tls"></label>
        <div id="node-row-tls" class="hide">
            <label style="width: auto; margin-left: 20px; margin-right: 10px;" for="node-input-tls"><span data-i18n="httpin.tls-config"></span></label><input type="text" style="width: 300px" id="node-input-tls">
        </div>
    </div>
    <div class="form-row">
        <label for="node-input-ret"><i class="fa fa-sign-out"></i> <span data-i18n="tcpin.label.return"></span></label>
        <select type="text" id="node-input-ret" style="width:54%;">
            <option value="buffer" data-i18n="tcpin.output.buffer"></option>
            <option value="string" data-i18n="tcpin.output.string"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-out"><i class="fa fa-sign-out fa-rotate-90"></i> <span data-i18n="tcpin.label.close"></span></label>
        <select type="text" id="node-input-out" style="width:54%;">
            <option value="time" data-i18n="tcpin.return.timeout"></option>
            <option value="char" data-i18n="tcpin.return.character"></option>
            <option value="count" data-i18n="tcpin.return.number"></option>
            <option value="sit" data-i18n="tcpin.return.never"></option>
            <option value="immed" data-i18n="tcpin.return.immed"></option>
        </select>
        <input type="text" id="node-input-splitc" style="width:50px;">
        <span id="node-units"></span>
    </div>
    <div id="node-row-newline" class="form-row hidden" style="padding-left:162px;">
        <span data-i18n="tcpin.label.delimited"></span> <input type="text" id="node-input-newline" style="width:110px;" data-i18n="[placeholder]tcpin.label.optional"><br/>
        <input type="checkbox" id="node-input-trim" style="display:inline-block; width:auto; vertical-align:top;"> <span data-i18n="tcpin.label.reattach"></span>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('tcp request',{
        category: 'network',
        color: "Silver",
        defaults: {
            name: {value:""},
            server: {value:""},
            port: {
                value:"",
                label: RED._("node-red:tcpin.label.port"),
                validate:RED.validators.regex(/^(\d*|)$/)
            },
            out: {value:"time", required:true},
            ret: {value:"buffer"},
            splitc: {value:"0", required:true},
            newline: {value:""},
            trim: {value:false},
            tls: {type:"tls-config", value:'', required:false, label:RED._("node-red:httpin.tls-config")}
        },
        inputs:1,
        outputs:1,
        icon: "bridge-dash.svg",
        label: function() {
            return this.name || "tcp:"+(this.server?this.server+":":"")+this.port;
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var previous = null;
            if ($("#node-input-ret").val() == undefined) {
                $("#node-input-ret").val("buffer");
                this.ret = "buffer";
            }
            $("#node-input-ret").on("change", function() {
                if ($("#node-input-ret").val() === "string" && $("#node-input-out").val() === "sit") { $("#node-row-newline").show(); }
                else { $("#node-row-newline").hide(); }
            });
            $("#node-input-out").on("change", function() {
                if ($("#node-input-ret").val() === "string" && $("#node-input-out").val() === "sit") { $("#node-row-newline").show(); }
                else { $("#node-row-newline").hide(); }
            });
            $("#node-input-out").on('focus', function () { previous = this.value; }).on("change", function() {
                $("#node-input-splitc").show();
                if (previous === null) { previous = $("#node-input-out").val(); }
                if ($("#node-input-out").val() == "char") {
                    if (previous != "char") { $("#node-input-splitc").val("\\n"); }
                    $("#node-units").text("");
                }
                else if ($("#node-input-out").val() == "time") {
                    if (previous != "time") { $("#node-input-splitc").val("0"); }
                    $("#node-units").text(RED._("node-red:tcpin.label.ms"));
                }
                else if ($("#node-input-out").val() == "immed") {
                    if (previous != "immed") { $("#node-input-splitc").val(" "); }
                    $("#node-units").text("");
                    $("#node-input-splitc").hide();
                }
                else if ($("#node-input-out").val() == "count") {
                    if (previous != "count") { $("#node-input-splitc").val("12"); }
                    $("#node-units").text(RED._("node-red:tcpin.label.chars"));
                }
                else {
                    if (previous != "sit") { $("#node-input-splitc").val(" "); }
                    $("#node-units").text("");
                    $("#node-input-splitc").hide();
                }
            });
            function updateTLSOptions() {
                if ($("#node-input-usetls").is(':checked')) {
                    $("#node-row-tls").show();
                } else {
                    $("#node-row-tls").hide();
                }
            }
            if (this.tls) {
                $('#node-input-usetls').prop('checked', true);
            } else {
                $('#node-input-usetls').prop('checked', false);
            }
            updateTLSOptions();
            $("#node-input-usetls").on("click",function() {
                updateTLSOptions();
            });
        },
        oneditsave: function() {
            if (!$("#node-input-usetls").is(':checked')) {
                $("#node-input-tls").val("_ADD_");
            }
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="tcp in">
    <p>Provides a choice of TCP inputs. Can either connect to a remote TCP port,
       or accept incoming connections.</p>
    <p><b>Note: </b>On some systems you may need root or administrator access
    to access ports below 1024.</p>
</script>

<script type="text/html" data-help-name="tcp out">
    <p>Provides a choice of TCP outputs. Can either connect to a remote TCP port,
    accept incoming connections, or reply to messages received from a TCP In node.</p>
    <p>Only the <code>msg.payload</code> is sent.</p>
    <p>If <code>msg.payload</code> is a string containing a Base64 encoding of binary
    data, the Base64 decoding option will cause it to be converted back to binary
    before being sent.</p>
    <p>If <code>msg._session</code> is not present the payload is
    sent to <b>all</b> connected clients.</p>
    <p><b>Note: </b>On some systems you may need root or administrator access
    to access ports below 1024.</p>
</script>

<script type="text/html" data-help-name="tcp request">
    <p>A simple TCP request node - sends the <code>msg.payload</code> to a server tcp port and expects a response.</p>
    <p>Connects, sends the "request", and reads the "response". It can either count a number of
    returned characters into a fixed buffer, match a specified character before returning,
    wait a fixed timeout from first reply and then return, sit and wait for data, or send then close the connection
    immediately, without waiting for a reply.</p>
    <p>The response will be output in <code>msg.payload</code> as a buffer, so you may want to .toString() it.</p>
    <p>If you leave tcp host or port blank they must be set by using the <code>msg.host</code> and <code>msg.port</code> properties in every message sent to the node.</p>
</script>

</div><div><!-- --- [red-module:node-red/udp] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<!--  The Input Node  -->
<script type="text/html" data-template-name="udp in">
    <div class="form-row">
        <label for="node-input-port"><i class="fa fa-sign-in"></i> <span data-i18n="udp.label.listen"></span></label>
        <select id="node-input-multicast" style='width:70%'>
          <option value="false" data-i18n="udp.udpmsgs"></option>
          <option value="true" data-i18n="udp.mcmsgs"></option>
        </select>
    </div>
    <div class="form-row node-input-group">
        <label for="node-input-group"><i class="fa fa-list"></i> <span data-i18n="udp.label.group"></span></label>
        <input type="text" id="node-input-group" placeholder="225.0.18.83">
    </div>
    <div class="form-row node-input-iface">
        <label for="node-input-iface"><i class="fa fa-random"></i> <span data-i18n="udp.label.interface"></span></label>
        <input type="text" id="node-input-iface" data-i18n="[placeholder]udp.placeholder.interfaceprompt">
    </div>
    <div class="form-row">
        <label for="node-input-port"><i class="fa fa-sign-in"></i> <span data-i18n="udp.label.onport"></span></label>
        <input type="text" id="node-input-port" style="width:80px">
        &nbsp;&nbsp;<span data-i18n="udp.label.using"></span> <select id="node-input-ipv" style="width:80px">
          <option value="udp4">ipv4</option>
          <option value="udp6">ipv6</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-datatype"><i class="fa fa-sign-out"></i> <span data-i18n="udp.label.output"></span></label>
        <select id="node-input-datatype" style="width:70%;">
            <option value="buffer" data-i18n="udp.output.buffer"></option>
            <option value="utf8" data-i18n="udp.output.string"></option>
            <option value="base64" data-i18n="udp.output.base64"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-tips"><span data-i18n="udp.tip.in"></span></div>
    <div class="form-tips" id="udpporttip"><span data-i18n="[html]udp.tip.port"></span></div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('udp in',{
        category: 'network',
        color:"Silver",
        defaults: {
            name: {value:""},
            iface: {value:""},
            port: {
                value:"", required:true,
                label:RED._("node-red:udp.label.port"),
                validate:RED.validators.number(false)
            },
            ipv: {value:"udp4"},
            multicast: {value:"false"},
            group: {
                value:"",
                validate:function(v,opt) {
                    if ((this.multicast !== "true")||v.length > 0) {
                        return true;
                    }
                    return RED._("node-red:udp.errors.invalid-group");
                }
            },
            datatype: {value:"buffer",required:true}
        },
        inputs:0,
        outputs:1,
        icon: "bridge-dash.svg",
        label: function() {
            if (this.multicast=="false") {
                return this.name||"udp "+this.port;
            }
            else {
                return this.name||"udp "+(this.group+":"+this.port);
            }
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            $("#node-input-multicast").on("change", function() {
                var id = $("#node-input-multicast").val();
                if (id == "false") {
                    $(".node-input-group").hide();
                    $(".node-input-iface").hide();
                }
                else {
                    $(".node-input-group").show();
                    $(".node-input-iface").show();
                }
            });
            $("#node-input-multicast").change();

            var porttip = this._("udp.tip.port");
            var alreadyused = this._("udp.errors.alreadyused");
            var portsInUse = {};
            $.getJSON('udp-ports/'+this.id,function(data) {
                portsInUse = data || {};
                $('#udpporttip').html(porttip + data);
            });
            $("#node-input-port").on("change", function() {
                var portnew = $("#node-input-port").val();
                if (portsInUse.hasOwnProperty($("#node-input-port").val())) {
                    RED.notify(alreadyused+" "+$("#node-input-port").val(),"warn");
                }
            });
        }
    });
</script>


<!--  The Output Node  -->
<script type="text/html" data-template-name="udp out">
    <div class="form-row">
        <label for="node-input-port"><i class="fa fa-envelope"></i> <span data-i18n="udp.label.send"></span></label>
        <select id="node-input-multicast" style="width:40%">
          <option value="false" data-i18n="udp.udpmsg"></option>
          <option value="broad" data-i18n="udp.bcmsg"></option>
          <option value="multi" data-i18n="udp.mcmsg"></option>
        </select>
        <span data-i18n="udp.label.toport"></span> <input type="text" id="node-input-port" style="width:70px">
    </div>
    <div class="form-row node-input-addr">
        <label for="node-input-addr" id="node-input-addr-label"><i class="fa fa-list"></i> <span data-i18n="udp.label.address"></span></label>
        <input type="text" id="node-input-addr" data-i18n="[placeholder]udp.placeholder.address" style="width:50%;">
        <select id="node-input-ipv" style="width:70px">
          <option value="udp4">ipv4</option>
          <option value="udp6">ipv6</option>
        </select>
    </div>
    <div class="form-row node-input-iface">
        <label for="node-input-iface"><i class="fa fa-random"></i> <span data-i18n="udp.label.interface"></span></label>
        <input type="text" id="node-input-iface" data-i18n="[placeholder]udp.placeholder.interface">
    </div>
    <div class="form-row">
        <label for="node-input-outport-type">&nbsp;</label>
        <select id="node-input-outport-type">
          <option id="node-input-outport-type-random" value="random" data-i18n="udp.bind.random"></option>
          <option value="fixed" data-i18n="udp.bind.local"></option>
        </select>
        <input type="text" id="node-input-outport" style="width:70px;">
    </div>
    <div class="form-row">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-base64" style="display:inline-block; width:auto; vertical-align:top;">
        <label for="node-input-base64" style="width:70%;"><span data-i18n="udp.label.decode-base64"></span></label>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-tips"><span data-i18n="[html]udp.tip.out"></span></div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('udp out',{
        category: 'network',
        color:"Silver",
        defaults: {
            name: {value:""},
            addr: {value:""},
            iface: {value:""},
            port: {value:""},
            ipv: {value:"udp4"},
            outport: {value:""},
            base64: {value:false,required:true},
            multicast: {value:"false"}
        },
        inputs:1,
        outputs:0,
        icon: "bridge-dash.svg",
        align: "right",
        label: function() {
            return this.name||"udp "+(this.addr+":"+this.port);
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var addresslabel = this._("udp.label.address");
            var addressph = this._("udp.placeholder.address");
            var grouplabel = this._("udp.label.group");
            var bindrandom = this._("udp.bind.random");
            var bindtarget = this._("udp.bind.target");

            var type = this.outport===""?"random":"fixed";
            $("#node-input-outport-type").val(type);

            $("#node-input-outport-type").on("change", function() {
                var type = $(this).val();
                if (type == "random") {
                    $("#node-input-outport").val("").hide();
                } else {
                    $("#node-input-outport").show();
                }
            });
            $("#node-input-outport-type").change();

            $("#node-input-multicast").on("change", function() {
                var id = $("#node-input-multicast").val();
                if (id === "multi") {
                    $(".node-input-iface").show();
                    $("#node-input-addr-label").html('<i class="fa fa-list"></i> ' + grouplabel);
                    $("#node-input-addr")[0].placeholder = '225.0.18.83';
                }
                else if (id === "broad") {
                    $(".node-input-iface").hide();
                    $("#node-input-addr-label").html('<i class="fa fa-list"></i> ' + addresslabel);
                    $("#node-input-addr")[0].placeholder = '255.255.255.255';
                }
                else {
                    $(".node-input-iface").hide();
                    $("#node-input-addr-label").html('<i class="fa fa-list"></i> ' + addresslabel);
                    $("#node-input-addr")[0].placeholder = addressph;
                }
                var type = $(this).val();
                if (type == "false") {
                    $("#node-input-outport-type-random").html(bindrandom);
                } else {
                    $("#node-input-outport-type-random").html(bindtarget);
                }
            });
            $("#node-input-multicast").change();
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="udp in">
    <p>A UDP input node, that produces a <code>msg.payload</code> containing a
    Buffer, string, or base64 encoded string. Supports multicast.</p>
    <p>It also provides <code>msg.ip</code> and <code>msg.port</code> set to the
    ip address and port from which the message was received.</p>
    <p><b>Note</b>: On some systems you may need root or administrator access to use
    ports below 1024 and/or broadcast.</p>
</script>

<script type="text/html" data-help-name="udp out">
    <p>This node sends <code>msg.payload</code> to the designated UDP host and port. Supports multicast.</p>
    <p>You may also use <code>msg.ip</code> and <code>msg.port</code> to set the destination values, but the statically configured values have precedence.</p>
    <p>If you select broadcast either set the address to the local broadcast ip address, or maybe try 255.255.255.255, which is the global broadcast address.</p>
    <p><b>Note</b>: On some systems you may need to be root to use ports below 1024 and/or broadcast.</p>
</script>

</div><div><!-- --- [red-module:node-red/CSV] --- -->

<script type="text/html" data-template-name="csv">
    <div class="form-row">
        <label for="node-input-temp"><i class="fa fa-list"></i> <span data-i18n="csv.label.columns"></span></label>
        <input type="text" id="node-input-temp" data-i18n="[placeholder]csv.placeholder.columns">
    </div>
    <div class="form-row">
        <label for="node-input-select-sep"><i class="fa fa-text-width"></i> <span data-i18n="csv.label.separator"></span></label>
            <select style="width:150px" id="node-input-select-sep">
                <option value="," data-i18n="csv.separator.comma"></option>
                <option value="\t" data-i18n="csv.separator.tab"></option>
                <option value=" " data-i18n="csv.separator.space"></option>
                <option value=";" data-i18n="csv.separator.semicolon"></option>
                <option value=":" data-i18n="csv.separator.colon"></option>
                <option value="#" data-i18n="csv.separator.hashtag"></option>
                <option value="" data-i18n="csv.separator.other"></option>
           </select>
           <input style="width:40px;" type="text" id="node-input-sep" pattern=".">
    </div>

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <hr align="middle"/>
    <div class="form-row">
        <label style="width:100%;"><span data-i18n="csv.label.c2o"></span></label>
    </div>
    <div class="form-row" style="padding-left:20px;">
        <label><i class="fa fa-sign-in"></i> <span data-i18n="csv.label.input"></span></label>
        <span data-i18n="csv.label.skip-s"></span>&nbsp;<input type="text" id="node-input-skip" style="width:40px; height:25px;"/>&nbsp;<span data-i18n="csv.label.skip-e"></span><br/>
        <label>&nbsp;</label>
        <input style="width:20px; vertical-align:baseline; margin-right:5px;" type="checkbox" id="node-input-hdrin"><label style="width:auto; margin-top:7px;" for="node-input-hdrin"><span data-i18n="csv.label.firstrow"></span></label><br/>
        <label>&nbsp;</label>
        <input style="width:20px; vertical-align:baseline; margin-right:5px;" type="checkbox" id="node-input-strings"><label style="width:auto; margin-top:7px;" for="node-input-strings"><span data-i18n="csv.label.usestrings"></span></label><br/>
        <label>&nbsp;</label>
        <input style="width:20px; vertical-align:baseline; margin-right:5px;" type="checkbox" id="node-input-include_empty_strings"><label style="width:auto; margin-top:7px;" for="node-input-include_empty_strings"><span data-i18n="csv.label.include_empty_strings"></span></label><br/>
        <label>&nbsp;</label>
        <input style="width:20px; vertical-align:baseline; margin-right:5px;" type="checkbox" id="node-input-include_null_values"><label style="width:auto; margin-top:7px;" for="node-input-include_null_values"><span data-i18n="csv.label.include_null_values"></span></label><br/>
    </div>
    <div class="form-row" style="padding-left:20px;">
        <label><i class="fa fa-sign-out"></i> <span data-i18n="csv.label.output"></span></label>
        <select type="text" id="node-input-multi" style="width:250px;">
            <option value="one" data-i18n="csv.output.row"></option>
            <option value="mult" data-i18n="csv.output.array"></option>
        </select>
    </div>
    <div class="form-row" style="margin-top:20px">
        <label style="width:100%;"><span data-i18n="csv.label.o2c"></span></label>
    </div>
    <div class="form-row" style="padding-left:20px;">
        <label><i class="fa fa-sign-out"></i> <span data-i18n="csv.label.output"></span></label>
        <!-- <input style="width:20px; vertical-align:top; margin-right:5px;" type="checkbox" id="node-input-hdrout"><label style="width:auto;" for="node-input-hdrout"><span data-i18n="csv.label.includerow"></span></span> -->
        <select style="width:60%" id="node-input-hdrout">
            <option value="none" data-i18n="csv.hdrout.none"></option>
            <option value="all" data-i18n="csv.hdrout.all"></option>
            <option value="once" data-i18n="csv.hdrout.once"></option>
        </select>
    </div>
    <div class="form-row" style="padding-left:20px;">
        <label></label>
        <label style="width:auto; margin-right:10px;" for="node-input-ret"><span data-i18n="csv.label.newline"></span></label>
        <select style="width:150px;" id="node-input-ret">
            <option value='\n' data-i18n="csv.newline.linux"></option>
            <option value='\r' data-i18n="csv.newline.mac"></option>
            <option value='\r\n' data-i18n="csv.newline.windows"></option>
       </select>
    </div>
</script>


<script type="text/javascript">
    RED.nodes.registerType('csv',{
        category: 'parser',
        color:"#DEBD5C",
        defaults: {
            name: {value:""},
            sep: {
                value:',', required:true,
                label:RED._("node-red:csv.label.separator"),
                validate:RED.validators.regex(/^.{1,2}$/)},
            //quo: {value:'"',required:true},
            hdrin: {value:""},
            hdrout: {value:"none"},
            multi: {value:"one",required:true},
            ret: {value:'\\n'},
            temp: {value:""},
            skip: {value:"0"},
            strings: {value:true},
            include_empty_strings: {value:""},
            include_null_values: {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "parser-csv.svg",
        label: function() {
            return this.name||"csv";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            if (this.hdrout === false) { this.hdrout = "none"; $("#node-input-hdrout").val("none"); }
            if (this.hdrout === true) { this.hdrout = "all"; $("#node-input-hdrout").val("all");}
            if (this.strings === undefined) { this.strings = true; $("#node-input-strings").prop('checked', true); }
            if (this.skip === undefined) { this.skip = 0; $("#node-input-skip").val("0");}
            $("#node-input-skip").spinner({ min:0 });
            if (this.sep == "," || this.sep == "\\t" || this.sep == ";" || this.sep == ":" || this.sep == " " || this.sep == "#") {
                $("#node-input-select-sep").val(this.sep);
                $("#node-input-sep").hide();
            } else {
                $("#node-input-select-sep").val("");
                $("#node-input-sep").val(this.sep);
                $("#node-input-sep").show();
            }
            $("#node-input-select-sep").on("change", function() {
                var v = $("#node-input-select-sep").val();
                $("#node-input-sep").val(v);
                if (v == "") {
                    $("#node-input-sep").val("");
                    $("#node-input-sep").show().focus();
                } else {
                    $("#node-input-sep").hide();
                }
            });
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="csv">
    <p>Converts between a CSV formatted string and its JavaScript object representation, in either direction.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | array | string</span></dt>
        <dd>A JavaScript object, array or CSV string.</dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | array | string</span></dt>
        <dd>
        <ul>
            <li>If the input is a string it tries to parse it as CSV and creates a JavaScript object of key/value pairs for each line.
                The node will then either send a message for each line, or a single message containing an array of objects.</li>
            <li>If the input is a JavaScript object it tries to build a CSV string.</li>
            <li>If the input is an array of simple values, it builds a single line CSV string.</li>
            <li>If the input is an array of arrays, or an array of objects, a multiple-line CSV string is created.</li>
        </ul>
        </dd>
    </dl>
    <h3>Details</h3>
    <p>The column template can contain an ordered list of column names. When converting CSV to an object, the column names
    will be used as the property names. Alternatively, the column names can be taken from the first row of the CSV.</p>
    <p>When converting to CSV, the columns template is used to identify which properties to extract from the object and in what order.</p>
    <p>If the columns template is blank then you can use a simple comma separated list of properties supplied in <code>msg.columns</code> to
    determine what to extract and in what order. If neither are present then all the object properties are output in the order
    in which the properties are found in the first row.</p>
    <p>If the input is an array then the columns template is only used to optionally generate a row of column titles.</p>
    <p>If 'parse numerical values' option is checked, string numerical values will be returned as numbers, ie. middle value '1,"1.5",2'.</p>
    <p>If 'include empty strings' option is checked, empty strings will be returned in result, ie. middle value '"1","",3'.</p>
    <p>If 'include null values' option is checked, null values will be returned in result, ie. middle value '"1",,3'.</p>
    <p>The node can accept a multi-part input as long as the <code>parts</code> property is set correctly, for example from a file-in node or split node.</p>
    <p>If outputting multiple messages they will have their <code>parts</code> property set and form a complete message sequence.</p>
    <p>If the node is set to only send column headers once, then setting <code>msg.reset</code> to any value will cause the node to resend the headers.</p>
    <p><b>Note:</b> the column template must be comma separated - even if a different separator is chosen for the data.</p>
</script>

</div><div><!-- --- [red-module:node-red/HTML] --- -->

<script type="text/html" data-template-name="html">
    <div class="form-row">
        <label for="node-input-property"><i class="fa fa-ellipsis-h"></i> <span data-i18n="common.label.property"></span></label>
        <input type="text" id="node-input-property" style="width:70%">
    </div>
    <div class="form-row">
        <label for="node-input-tag"><i class="fa fa-filter"></i> <span data-i18n="html.label.select"></span></label>
        <input type="text" id="node-input-tag" placeholder="h1">
    </div>
    <div class="form-row">
        <label for="node-input-ret"><i class="fa fa-sign-out"></i> <span data-i18n="html.label.output"></span></label>
        <select id="node-input-ret" style="width:70%">
            <option value="html" data-i18n="html.output.html"></option>
            <option value="text" data-i18n="html.output.text"></option>
            <option value="attr" data-i18n="html.output.attr"></option>
            <!-- <option value="val">return the value from a form element</option> -->
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-as">&nbsp;</label>
        <select id="node-input-as" style="width:70%">
            <option value="single" data-i18n="html.format.single"></option>
            <option value="multi" data-i18n="html.format.multi"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-outproperty">&nbsp;</label>
        <span data-i18n="html.label.in" style="padding-left:8px; padding-right:2px; vertical-align:-1px;"></span> <input type="text" id="node-input-outproperty" style="width:64%">
    </div>
    <br/>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" style="width:70%" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('html',{
        category: 'parser',
        color:"#DEBD5C",
        defaults: {
            name: {value:""},
            property: {value:"payload", validate: RED.validators.typedInput({ type: 'msg', allowUndefined: true }) },
            outproperty: {value:"payload", validate: RED.validators.typedInput({ type: 'msg', allowUndefined: true }) },
            tag: {value:""},
            ret: {value:"html"},
            as: {value:"single"}
        },
        inputs:1,
        outputs:1,
        icon: "parser-html.svg",
        label: function() {
            return this.name||this.tag||"html";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            $("#node-input-property").typedInput({default:'msg',types:['msg']});
            $("#node-input-outproperty").typedInput({default:'msg',types:['msg']});
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="html">
    <p>Extracts elements from an html document held in <code>msg.payload</code> using a CSS selector.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
    <dt>payload <span class="property-type">string</span></dt>
    <dd>the html string from which to extract elements.</dd>
    <dt class="optional">select <span class="property-type">string</span></dt>
    <dd>if not configured in the edit panel the selector can be set as a property of msg.</dd>
</dl>
    <h3>Output</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">array | string</span></dt>
        <dd>the result can be either a single message with a payload containing an array of the matched elements, or multiple
           messages that each contain a matched element. If multiple messages are sent they will also have <code>parts</code> set.</dd>
    </dl>
    <h3>Details</h3>
    <p>This node supports a combination of CSS and jQuery selectors. See the
    <a href="https://github.com/fb55/CSSselect#user-content-supported-selectors" target="_blank">css-select documentation</a> for more information
    on the supported syntax.</p>
</script>

</div><div><!-- --- [red-module:node-red/JSON] --- -->

<script type="text/html" data-template-name="json">
    <div class="form-row">
        <label for="node-input-action"><i class="fa fa-dot-circle-o"></i> <span data-i18n="json.label.action"></span></label>
        <select style="width:70%" id="node-input-action">
            <option value=""    data-i18n="json.label.actions.toggle"></option>
            <option value="str" data-i18n="json.label.actions.str"></option>
            <option value="obj" data-i18n="json.label.actions.obj"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-property"><i class="fa fa-ellipsis-h"></i> <span data-i18n="json.label.property"></span></label>
        <input type="text" id="node-input-property" style="width:70%;"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <hr align="middle"/>
    <div class="form-row node-json-to-json-options">
        <label style="width:100%;"><span data-i18n="json.label.o2j"></span></label>
    </div>
    <div class="form-row node-json-to-json-options" style="padding-left: 20px;">
        <input style="width:20px; vertical-align:top; margin-right: 5px;" type="checkbox" id="node-input-pretty"><label style="width: auto;" for="node-input-pretty" data-i18n="json.label.pretty"></label>
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('json',{
        category: 'parser',
        color:"#DEBD5C",
        defaults: {
            name: {value:""},
            property: {value:"payload",required:true,
                       validate: RED.validators.typedInput({ type: 'msg', allowUndefined: true}),
                       label:RED._("node-red:json.label.property")},
            action: {value:""},
            pretty: {value:false}
        },
        inputs:1,
        outputs:1,
        icon: "parser-json.svg",
        label: function() {
            return this.name||"json";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            if (this.property === undefined) {
                $("#node-input-property").val("payload");
            }
            $("#node-input-property").typedInput({default:'msg',types:['msg']});
            $("#node-input-action").on("change", function() {
                if (this.value === "" || this.value === "str") {
                    $(".node-json-to-json-options").show();
                } else {
                    $(".node-json-to-json-options").hide();
                }
            });
            $("#node-input-action").change();
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="json">
    <p>Converts between a JSON string and its JavaScript object representation, in either direction.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | string</span></dt>
        <dd>A JavaScript object or JSON string.</dd>
        <dt>schema<span class="property-type">object</span></dt>
        <dd>An optional JSON Schema object to validate the payload against.
        The property will be deleted before the <code>msg</code> is sent to the next node.</dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | string</span></dt>
        <dd>
            <ul>
                <li>If the input is a JSON string it tries to parse it to a JavaScript object.</li>
                <li>If the input is a JavaScript object it creates a JSON string. The string can optionally be well-formatted.</li>
            </ul>
        </dd>
        <dt>schemaError<span class="property-type">array</span></dt>
        <dd>If JSON schema validation fails, the catch node will have a <code>schemaError</code> property
            containing an array of errors.</dd>
    </dl>
    <h3>Details</h3>
    <p>By default, the node operates on <code>msg.payload</code>, but can be configured
       to convert any message property.</p>
    <p>The node can also be configured to ensure a particular encoding instead of toggling
       between the two. This can be used, for example, with the <code>HTTP In</code>
       node to ensure the payload is a parsed object even if an incoming request
       did not set its content-type correctly for the HTTP In node to do the conversion.</p>
    <p>If the node is configured to ensure the property is encoded as a String and it
       receives a String, no further checks will be made of the property. It will
       not check the String is valid JSON nor will it reformat it if the format option
       is selected.</p>
    <p>For more details about JSON Schema you can consult the specification
    <a href="http://json-schema.org/latest/json-schema-validation.html">here</a>.</p>
</script>

</div><div><!-- --- [red-module:node-red/XML] --- -->

<script type="text/html" data-template-name="xml">
    <div class="form-row">
        <label for="node-input-property"><i class="fa fa-ellipsis-h"></i> <span data-i18n="common.label.property"></span></label>
        <input type="text" id="node-input-property" style="width:70%;"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <hr align="middle"/>
    <div class="form-row">
        <label style="width:100%;"><span data-i18n="xml.label.x2o"></span></label>
    </div>
    <div class="form-row" style="padding-left: 20px;">
        <label style="width:250px;" for="node-input-attr" data-i18n="xml.label.represent"></label> <input type="text" id="node-input-attr" style="text-align:center; width:40px" placeholder="$">
    </div>
    <div class="form-row" style="padding-left: 20px;">
        <label style="width:250px;" for="node-input-chr" data-i18n="xml.label.prefix"></label> <input type="text" id="node-input-chr" style="text-align:center; width:40px" placeholder="_">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('xml',{
        category: 'parser',
        color:"#DEBD5C",
        defaults: {
            name: {value:""},
            property: {value:"payload",required:true,
                       label:RED._("node-red:common.label.property"),
                       validate: RED.validators.typedInput({ type: 'msg', allowUndefined: true })},
            attr: {value:""},
            chr: {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "parser-xml.svg",
        label: function() {
            return this.name||"xml";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            if (this.property === undefined) {
                $("#node-input-property").val("payload");
            }
            $("#node-input-property").typedInput({default:'msg',types:['msg']});
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="xml">
    <p>Converts between an XML string and its JavaScript object representation, in either direction.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | string</span></dt>
        <dd>A JavaScript object or XML string.</dd>
        <dt class="optional">options <span class="property-type">object</span></dt>
        <dd>This optional property can be used to pass in any of the options supported by the underlying
            library used to convert to and from XML. See <a href="https://github.com/Leonidas-from-XIV/node-xml2js/blob/master/README.md#options" target="_blank">the xml2js docs</a>
            for more information.</dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | string</span></dt>
        <dd>
            <ul>
                <li>If the input is a string it tries to parse it as XML and creates a JavaScript object.</li>
                <li>If the input is a JavaScript object it tries to build an XML string.</li>
            </ul>
        </dd>
    </dl>
    <h3>Details</h3>
    <p>When converting between XML and an object, any XML attributes are added as a property named <code>$</code> by default.
    Any text content is added as a property named <code>_</code>. These property names can be specified in the node configuration.</p>
    <p>For example, the following XML will be converted as shown:</p>
    <pre>&lt;p class="tag"&gt;Hello World&lt;/p&gt;</pre>
    <pre>{
  "p": {
    "$": {
      "class": "tag"
    },
    "_": "Hello World"
  }
}</pre>
</script>

</div><div><!-- --- [red-module:node-red/YAML] --- -->

<script type="text/html" data-template-name="yaml">
    <div class="form-row">
        <label for="node-input-property"><i class="fa fa-ellipsis-h"></i> <span data-i18n="common.label.property"></span></label>
        <input type="text" id="node-input-property" style="width:70%;"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('yaml',{
        category: 'parser',
        color:"#DEBD5C",
        defaults: {
            property: {value:"payload",required:true,
                       validate: RED.validators.typedInput({ type: 'msg', allowUndefined: true }),
                       label:RED._("node-red:common.label.property")},
            name: {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "parser-yaml.svg",
        label: function() {
            return this.name||"yaml";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            if (this.property === undefined) {
                $("#node-input-property").val("payload");
            }
            $("#node-input-property").typedInput({default:'msg',types:['msg']});
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="yaml">
    <p>Converts between a YAML formatted string and its JavaScript object representation, in either direction.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | string</span></dt>
        <dd>A JavaScript object or YAML string.</dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | string</span></dt>
        <dd>
            <ul>
                <li>If the input is a YAML string it tries to parse it to a JavaScript object.</li>
                <li>If the input is a JavaScript object it creates a YAML string.</li>
            </ul>
        </dd>
    </dl>
</script>

</div><div><!-- --- [red-module:node-red/split] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="split">
    <div class="form-row"><span data-i18n="[html]split.intro"></span></div>
    <div class="form-row"><span data-i18n="[html]split.strBuff"></span></div>
    <div class="form-row">
        <label for="node-input-splt" style="padding-left:10px; margin-right:-10px;" data-i18n="split.splitUsing"></label>
        <input type="text" id="node-input-splt" style="width:70%">
        <input type="hidden" id="node-input-spltType">
    </div>
    <div class="form-row">
        <input type="checkbox" id="node-input-stream" style="margin-left:10px; vertical-align:top; width:auto;">
        <label for="node-input-stream" style="width:auto;" data-i18n="split.stream"></label>
    </div>
    <div class="form-row"><span data-i18n="[html]split.array"></span></div>
    <div class="form-row">
        <label for="node-input-arraySplt" style="padding-left:10px; margin-right:-10px;" data-i18n="split.splitUsing"></label>
        <input type="text" id="node-input-arraySplt" style="width:70%">
        <input type="hidden" id="node-input-arraySpltType">
    </div>
    <div class="form-row"><span data-i18n="[html]split.object"></span></div>
    <div class="form-row" style="padding-left: 10px"><span data-i18n="[html]split.objectSend"></span></div>
    <div class="form-row">
        <input type="checkbox" id="node-input-addname-cb" style="margin-left:10px; vertical-align:baseline; width:auto;">
        <label for="node-input-addname-cb" style="width:auto;" data-i18n="split.addname"></label>
        <input type="text" id="node-input-addname" style="width:70%">
    </div>
    <hr/>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('split',{
        category: 'sequence',
        color:"#E2D96E",
        defaults: {
            name: {value:""},
            splt: {value:"\\n"},
            spltType: {value:"str"},
            arraySplt: {value:1},
            arraySpltType: {value:"len"},
            stream: {value:false},
            addname: {value:"", validate: RED.validators.typedInput({ type: 'msg', allowBlank: true })}
        },
        inputs:1,
        outputs:1,
        icon: "split.svg",
        label: function() {
            return this.name||this._("split.split");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            $("#node-input-splt").typedInput({
                default: 'str',
                typeField: $("#node-input-spltType"),
                types:[
                    'str',
                    'bin',
                    {value:"len", label:RED._("node-red:split.splitLength"),validate:/^\d+$/}
                ]
            });
            if (this.arraySplt === undefined) {
                $("#node-input-arraySplt").val(1);
            }
            $("#node-input-arraySplt").typedInput({
                default: 'len',
                typeField: $("#node-input-arraySpltType"),
                types:[
                    {value:"len", label:RED._("node-red:split.splitLength"),validate:/^\d+$/}
                ]
            });
            $("#node-input-addname").typedInput({
                typeField: $("#node-input-fnameType"),
                types:['msg']
            });

            $("#node-input-addname-cb").on("change", function() {
                $("#node-input-addname").prop('disabled',!this.checked);
            })
            if (this.addname === "") {
                $("#node-input-addname-cb").prop('checked',false);
                $("#node-input-addname").val('topic');
            } else {
                $("#node-input-addname-cb").prop('checked',true);
            }
            $("#node-input-addname-cb").change();
        },
        oneditsave: function() {
            if (!$("#node-input-addname-cb").prop('checked')) {
                $("#node-input-addname").val('');
            }
        }
    });
</script>


<script type="text/html" data-template-name="join">
    <div class="form-row">
        <label data-i18n="join.mode.mode"></label>
        <select id="node-input-mode" style="width:200px;">
            <option value="auto" data-i18n="join.mode.auto"></option>
            <option value="custom" data-i18n="join.mode.custom"></option>
            <option value="reduce" data-i18n="join.mode.reduce"></option>
        </select>
    </div>
    <div class="node-row-custom">
        <div class="form-row node-row-property">
            <label data-i18n="join.combine"> </label>
            <input type="text" id="node-input-property" style="width:70%;">
            <input type="hidden" id="node-input-propertyType">
        </div>
        <div class="form-row">
            <label data-i18n="join.create"></label>
            <select id="node-input-build" style="width:70%;">
                <option value="string" data-i18n="join.type.string"></option>
                <option value="buffer" data-i18n="join.type.buffer"></option>
                <option value="array" data-i18n="join.type.array"></option>
                <option value="object" data-i18n="join.type.object"></option>
                <option value="merged" data-i18n="join.type.merged"></option>
            </select>
        </div>
        <div class="form-row node-row-key">
            <label style="vertical-align:top; margin-top:7px; width:auto; margin-right: 5px;" data-i18n="join.using"></label>
            <div style="display:inline-block">
                <input type="text" id="node-input-key" style="width:220px;"> <span data-i18n="join.key"></span>
            </div>
        </div>
        <div class="form-row node-row-joiner">
            <label for="node-input-joiner" data-i18n="join.joinedUsing"></label>
            <input type="text" id="node-input-joiner" style="width:70%">
            <input type="hidden" id="node-input-joinerType">
        </div>
        <div class="form-row node-row-trigger" id="trigger-row">
            <label style="width:auto;" data-i18n="join.send"></label>
            <ul>
                <li>
                    <label style="width:280px;" for="node-input-count" data-i18n="join.afterCount"></label> <input id="node-input-count" data-i18n="[placeholder]join.count" type="text" style="width:75px;">
                </li>
                <li class="node-row-accumulate" style="list-style-type:none;">
                    <input type="checkbox" id="node-input-accumulate" style="display:inline-block; width:20px; margin-left:20px; vertical-align:top;">  <label style="width: auto" for="node-input-accumulate" data-i18n="join.subsequent"></label>
                </li>
                <li>
                    <label style="width:280px;" for="node-input-timeout" data-i18n="join.afterTimeout"></label> <input id="node-input-timeout" data-i18n="[placeholder]join.seconds" type="text" style="width:75px;">
                </li>
                <li>
                    <label style="width:auto; padding-top:6px;" data-i18n="[html]join.complete"></label>
                </li>
            </ul>
        </div>
    </div>
    <div class="node-row-reduce">
        <div class="form-row">
            <label for="node-input-reduceExp" data-i18n="join.reduce.exp" style="margin-left:10px;"></label>
            <input type="text" id="node-input-reduceExp" data-i18n="[placeholder]join.reduce.exp-value" style="width:65%">
        </div>
        <div class="form-row">
            <label for="node-input-reduceInit" data-i18n="join.reduce.init" style="margin-left:10px;"></label>
            <input type="text" id="node-input-reduceInit" data-i18n="[placeholder]join.reduce.init" style="width:65%">
            <input type="hidden" id="node-input-reduceInitType">
        </div>
        <div class="form-row">
            <label for="node-input-reduceFixup" data-i18n="join.reduce.fixup" style="margin-left:10px;"></label>
            <input type="text" id="node-input-reduceFixup" data-i18n="[placeholder]join.reduce.exp-value" style="width:65%">
        </div>
        <div class="form-row">
            <label>&nbsp;</label>
            <input type="checkbox" id="node-input-reduceRight" style="display:inline-block; width:auto; vertical-align:top; margin-left:10px;">
            <label for="node-input-reduceRight" style="width:70%;" data-i18n="join.reduce.right" style="margin-left:10px;"/>
        </div>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-tips form-tips-auto hide" data-i18n="[html]join.tip"></div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('join',{
        category: 'sequence',
        color:"#E2D96E",
        defaults: {
            name: {value:""},
            mode: {value:"auto"},
            build: { value:"object"},
            property: {
                value:"payload",
                label: RED._("node-red:join.message-prop"),
                validate:RED.validators.typedInput("propertyType", false)
            },
            propertyType: { value:"msg"},
            key: {value:"topic", validate: (function () {
                const typeValidator = RED.validators.typedInput({ type: 'msg' })
                return function(v, opt) {
                    const joinMode = $("#node-input-mode").val() || this.mode
                    if (joinMode !== 'custom') {
                        return true
                    }
                    const buildType = $("#node-input-build").val() || this.build
                    if (buildType !== 'object') {
                        return true
                    } else {
                        return typeValidator(v, opt)
                    }
                }
                })()
            },
            joiner: { value:"\\n"},
            joinerType: { value:"str"},
            accumulate: { value:"false" },
            timeout: {value:""},
            count: {value:""},
            reduceRight: {value:false},
            reduceExp: {value:undefined},
            reduceInit: {value:undefined},
            reduceInitType: {value:undefined},
            reduceFixup: {value:undefined}
        },
        inputs:1,
        outputs:1,
        icon: "join.svg",
        label: function() {
            var nam = this.name||this._("join.join");
            if (this.mode === "custom" && !isNaN(Number(this.count))) {
                nam += " "+this.count;
                if (this.accumulate === true) { nam+= "+"; }
            }
            return nam;
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var node = this;

            $("#node-input-mode").on("change", function(e) {
                var val = $(this).val();
                $(".node-row-custom").toggle(val==='custom');
                $(".node-row-reduce").toggle(val==='reduce');
                $(".form-tips-auto").toggle((val==='auto') || (val==='reduce'));
                if (val === "auto") {
                    $("#node-input-accumulate").attr('checked', false);
                }
                else if (val === "custom") {
                    $("#node-input-build").change();
                }
                else if (val === "reduce") {
                    var jsonata_or_empty = {
                        value: "jsonata",
                        label: "expression",
                        icon: "red/images/typedInput/expr.svg",
                        validate: function(v) {
                            try{
                                if(v !== "") {
                                    jsonata(v);
                                }
                                return true;
                            }
                            catch(e){
                                return false;
                            }
                        },
                        expand:function() {
                            var that = this;
                            RED.editor.editExpression({
                                value: this.value().replace(/\t/g,"\n"),
                                complete: function(v) {
                                    that.value(v.replace(/\n/g,"\t"));
                                }
                            })
                        }
                    };
                    $("#node-input-reduceExp").typedInput({types:[jsonata_or_empty]});
                    $("#node-input-reduceInit").typedInput({
                        default: 'num',
                        types:['flow','global','str','num','bool','json','bin','date','jsonata','env'],
                        typeField: $("#node-input-reduceInitType")
                    });
                    $("#node-input-reduceFixup").typedInput({types:[jsonata_or_empty]});
                }
            });

            $("#node-input-build").on("change", function(e) {
                var val = $(this).val();
                $(".node-row-key").toggle(val==='object');
                $(".node-row-accumulate").toggle(val==='object' || val==='merged');
                $(".node-row-joiner").toggle(val==='string' || val==='buffer');
                $(".node-row-trigger").toggle(val!=='auto');
                if (val === 'string' || val==='buffer') {
                    $("#node-input-property").typedInput('types',['msg']);
                    $("#node-input-joiner").typedInput("show");
                } else {
                    $("#node-input-property").typedInput('types', ['msg', {
                        value: "full",
                        label: RED._("node-red:join.completeMessage"),
                        hasValue: false
                    }]);
                }
            });

            $("#node-input-joiner").typedInput({
                default: 'str',
                typeField: $("#node-input-joinerType"),
                types:['str', 'bin']
            });

            $("#node-input-property").typedInput({
                typeField: $("#node-input-propertyType"),
                types: ['msg', {
                    value: "full",
                    label: RED._("node-red:join.completeMessage"),
                    hasValue: false
                }]
            });

            $("#node-input-key").typedInput({
                types:['msg']
            });

            $("#node-input-build").change();
            $("#node-input-mode").change();
        },
        oneditsave: function() {
            var build = $("#node-input-build").val();
            if (build !== 'object' && build !== 'merged') {
                $("#node-input-accumulate").prop("checked",false);
            }
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="split">
    <p>Splits a message into a sequence of messages.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | string | array | buffer</span></dt>
        <dd>The behaviour of the node is determined by the type of <code>msg.payload</code>:
            <ul>
                <li><b>string</b>/<b>buffer</b> - the message is split using the specified character (default: <code>\n</code>), buffer sequence or into fixed lengths.</li>
                <li><b>array</b> - the message is split into either individual array elements, or arrays of a fixed-length.</li>
                <li><b>object</b> - a message is sent for each key/value pair of the object.</li>
            </ul>
        </dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>parts<span class="property-type">object</span></dt>
        <dd>This property contains information about how the message was split from
        the original message. If passed to the <b>join</b> node, the sequence can be
        reassembled into a single message. The property has the following properties:
        <ul>
            <li><code>id</code> - an identifier for the group of messages</li>
            <li><code>index</code> - the position within the group</li>
            <li><code>count</code> - if known, the total number of messages in the group. See 'streaming mode' below.</li>
            <li><code>type</code> - the type of message - string/array/object/buffer</li>
            <li><code>ch</code> - for a string or buffer, the data used to the split the message as either the string or an array of bytes</li>
            <li><code>key</code> - for an object, the key of the property this message was created from. The node can be configured to also copy this value to another message properties, such as <code>msg.topic</code>.</li>
            <li><code>len</code> - the length of each message when split using a fixed length value</li>
        </ul>
        </dd>
    </dl>
    <h3>Details</h3>
    <p>This node makes it easy to create a flow that performs common actions across
    a sequence of messages before, using the <b>join</b> node, recombining the
    sequence into a single message.</p>
    <p>It uses the <code>msg.parts</code> property to track the individual parts
    of a sequence.</p>
    <h4>Streaming mode</h4>
    <p>The node can also be used to reflow a stream of messages. For example, a
    serial device that sends newline-terminated commands may deliver a single message
    with a partial command at its end. In 'streaming mode', this node will split
    a message and send each complete segment. If there is a partial segment at the end,
    the node will hold on to it and prepend it to the next message that is received.
    </p>
    <p>When operating in this mode, the node will not set the <code>msg.parts.count</code>
    property as it does not know how many messages to expect in the stream. This
    means it cannot be used with the <b>join</b> node in its automatic mode.</p>
</script>

<script type="text/html" data-help-name="join">
    <p>Joins sequences of messages into a single message.</p>
    <p>There are three modes available:</p>
    <dl>
        <dt>automatic</dt>
        <dd>When paired with the <b>split</b> node, it will automatically join the messages to reverse the split that was performed.</dd>
        <dt>manual</dt>
        <dd>Join sequences of messages in a variety of ways.</dd>
        <dt>reduce sequence</dt>
        <dd>Apply an expression against all messages in a sequence to reduce it to a single message.</dd>
    </dl>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt class="optional">parts<span class="property-type">object</span></dt>
        <dd>To automatically join a sequence of messages, they should all have
        this property set. The <b>split</b> node generates this property but it
        can be manually created. It has the following properties:
        <ul>
            <li><code>id</code> - an identifier for the group of messages</li>
            <li><code>index</code> - the position within the group</li>
            <li><code>count</code> - the total number of messages in the group</li>
            <li><code>type</code> - the type of message - string/array/object/buffer</li>
            <li><code>ch</code> - for a string or buffer, the data used to the split the message as either the string or an array of bytes</li>
            <li><code>key</code> - for an object, the key of the property this message was created from</li>
            <li><code>len</code> - the length of each message when split using a fixed length value</li>
        </ul>
        </dd>
        <dt class="optional">complete</dt>
        <dd>If set, the node will append the payload, and then send the output message in its current state.
            If you don't wish to append the payload, delete it from the msg.</dd>
        <dt class="optional">reset</dt>
        <dd>If set, the node will clear any partially complete message and not send it.</dd>
        <dt class="optional">restartTimeout</dt>
        <dd>If set, and the node has a timeout configured, that timeout will be restarted.</dd>
    </dl>
    <h3>Details</h3>

    <h4>Automatic mode</h4>
    <p>Automatic mode uses the <code>parts</code> property of incoming messages to
       determine how the sequence should be joined. This allows it to automatically
       reverse the action of a <b>split</b> node.

    <h4>Manual mode</h4>
    <p>When configured to join in manual mode, the node is able to join sequences
     of messages into a number of different results:</p>
    <ul>
        <li>a <b>string</b> or <b>buffer</b> - created by joining the selected property of each message with the specified join characters or buffer.</li>
        <li>an <b>array</b> - created by adding each selected property, or entire message, to the output array.</li>
        <li>a <b>key/value object</b> - created by using a property of each message to determine the key under which
        the required value is stored.</li>
        <li>a <b>merged object</b> - created by merging the property of each message under a single object.</li>
    </ul>
    <p>The other properties of the output message are taken from the last message received before the result is sent.</p>
    <p>A <i>count</i> can be set for how many messages should be received before generating the output message.
    For object outputs, once this count has been reached, the node can be configured to send a message for each subsequent message
    received.</p>
    <p>A <i>timeout</i> can be set to trigger sending the new message using whatever has been received so far.
     This timeout can be restarted by sending a message with the <code>msg.restartTimeout</code> property set.</p>
    <p>If a message is received with the <code>msg.complete</code> property set, the output message is finalised and sent.
    This resets any part counts.</p>
    <p>If a message is received with the <code>msg.reset</code> property set, the partly complete message is deleted and not sent.
    This resets any part counts.</p>

    <h4>Reduce Sequence mode</h4>
    <p>When configured to join in reduce mode, an expression is applied to each
       message in a sequence and the result accumulated to produce a single message.</p>

    <dl class="message-properties">
        <dt>Initial value</dt>
        <dd>The initial value of the accumulated value (<code>$A</code>).</dd>
        <dt>Reduce expression</dt>
        <dd>A JSONata expression that is called for each message in the sequence.
            The result is passed to the next call of the expression as the accumulated value.
            In the expression, the following special variables can be used:
            <ul>
                <li><code>$A</code>: the accumulated value, </li>
                <li><code>$I</code>: index of the message in the sequence, </li>
                <li><code>$N</code>: number of messages in the sequence.</li>
            </ul>
        </dd>
        <dt>Fix-up expression</dt>
        <dd>An optional JSONata expression that is applied after the reduce expression
            has been applied to all messages in the sequence.
            In the expression, following special variables can be used:
            <ul>
                <li><code>$A</code>: the accumulated value, </li>
                <li><code>$N</code>: number of messages in the sequence.</li>
            </ul>
        </dd>
        <p>By default, the reduce expression is applied in order, from the first
           to the last message of the sequence. It can optionally be applied in
           reverse order.</p>
        <p>$N is the number of messages that arrive - even if they are identical.</p>
    </dl>
    <p><b>Example:</b> the following settings, given a sequence of numeric values,
       calculates the average value:
        <ul>
            <li><b>Reduce expression</b>: <code>$A+payload</code></li>
            <li><b>Initial value</b>: <code>0</code></li>
            <li><b>Fix-up expression</b>: <code>$A/$N</code></li>
        </ul>
    </p>
    <h4>Storing messages</h4>
    <p>This node will buffer messages internally in order to work across sequences. The
       runtime setting <code>nodeMessageBufferMaxLength</code> can be used to limit how many messages nodes
       will buffer.</p>
</script>

</div><div><!-- --- [red-module:node-red/sort] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="sort">

    <div class="form-row">
        <label for="node-input-target"><i class="fa fa-dot-circle-o"></i> <span data-i18n="sort.target"></span></label>
        <input type="text" id="node-input-target" style="width:70%;">
        <input type="hidden" id="node-input-targetType">
    </div>

    <div class="node-row-sort-msg-key">
        <div class="form-row">
            <label for="node-input-msgKey"><i class="fa fa-filter"></i> <span data-i18n="sort.key"></span></label>
            <input type="text" id="node-input-msgKey" style="width:70%;">
            <input type="hidden" id="node-input-msgKeyType">
        </div>
    </div>

    <div class="node-row-sort-seq-key">
        <div class="form-row">
            <label for="node-input-seqKey"><i class="fa fa-filter"></i> <span data-i18n="sort.key"></span></label>
            <input type="text" id="node-input-seqKey" style="width:70%;">
            <input type="hidden" id="node-input-seqKeyType">
        </div>
    </div>

    <div class="form-row">
        <label><i class="fa fa-random"></i>  <span data-i18n="sort.order"></span></label>
        <select id="node-input-order" style="width:200px;">
            <option value="ascending" data-i18n="sort.ascending"></option>
            <option value="descending" data-i18n="sort.descending"></option>
        </select>
    </div>

    <div class="form-row" id="node-as_num">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-as_num" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-as_num" style="width: 70%;" data-i18n="sort.as-number"></label>
    </div>

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('sort',{
        category: 'sequence',
        color:"#E2D96E",
        defaults: {
            name: { value:"" },
            order: { value:"ascending" },
            as_num: { value:false },
            target: { value:"payload" },
            targetType: { value:"msg" },
            msgKey: { value:"payload" },
            msgKeyType: { value:"elem" },
            seqKey: { value:"payload" },
            seqKeyType: { value:"msg" }
        },
        inputs:1,
        outputs:1,
        icon: "sort.svg",
        label: function() {
            return this.name||this._("sort.sort");
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        },
        oneditprepare: function() {
            var seq = {
                value: "seq",
                label: RED._("node-red:sort.seq"),
                hasValue: false
            };
            var elem = {
                value: "elem",
                label: RED._("node-red:sort.elem"),
                hasValue: false
            };
            $("#node-input-target").typedInput({
                default:'msg',
                typeField: $("#node-input-targetType"),
                types:['msg', seq]
            });
            $("#node-input-msgKey").typedInput({
                default:'elem',
                typeField: $("#node-input-msgKeyType"),
                types:[elem, 'jsonata']
            });
            $("#node-input-seqKey").typedInput({
                default:'msg',
                typeField: $("#node-input-seqKeyType"),
                types:['msg', 'jsonata']
            });
            $("#node-input-target").on("change", function(e) {
                var val = $("#node-input-target").typedInput('type');
                $(".node-row-sort-msg-key").toggle(val === "msg");
                $(".node-row-sort-seq-key").toggle(val === "seq");
            });
            $("#node-input-target").change();
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="sort">
    <p>A function that sorts message property or a sequence of messages.</p>
    <p>When configured to sort message property, the node sorts array data pointed to by specified message property.</p>
    <p>When configured to sort a sequence of messages, it will reorder the messages.</p>
    <p>The sorting order can be:</p>
    <ul>
        <li><b>ascending</b>,</li>
        <li><b>descending</b>.</li>
    </ul>
    <p>For numbers, numerical ordering can be specified by a checkbox.</p>
    <p>Sort key can be element value or JSONata expression for sorting property value, or message property or JSONata expression for sorting a message sequence.<p>
    <p>When sorting a message sequence, the sort node relies on the received messages to have <code>msg.parts</code> set.  The split node generates this property, but can be manually created.  It has the following properties:</p>
    <p>
        <ul>
            <li><code>id</code> - an identifier for the group of messages</li>
            <li><code>index</code> - the position within the group</li>
            <li><code>count</code> - the total number of messages in the group</li>
        </ul>
    </p>
    <p><b>Note:</b> This node internally keeps messages for its operation.  In order to prevent unexpected memory usage, maximum number of messages kept can be specified.  Default is no limit on number of messages.
        <ul>
            <li><code>nodeMessageBufferMaxLength</code> property set in <b>settings.js</b>.</li>
        </ul>
    </p>
</script>

</div><div><!-- --- [red-module:node-red/batch] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="batch">
    <div class="form-row">
        <label for="node-input-mode"><span data-i18n="batch.mode.label"></span></label>
        <select type="text" id="node-input-mode" style="width: 300px;">
            <option value="count" data-i18n="batch.mode.num-msgs"></option>
            <option value="interval" data-i18n="batch.mode.interval"></option>
            <option value="concat" data-i18n="batch.mode.concat"></option>
        </select>
    </div>

    <div class="node-row-msg-count">
        <div class="form-row node-row-count">
            <label style="margin-left: 10px; width: 175px;" for="node-input-count" data-i18n="batch.count.label"></label>
            <input type="text" id="node-input-count" style="width: 50px;">
        </div>
    </div>

    <div class="node-row-msg-overlap">
        <div class="form-row node-row-overlap">
            <label style="margin-left: 10px; width: 175px;" for="node-input-overlap" data-i18n="batch.count.overlap"></label>
            <input type="text" id="node-input-overlap" style="width: 50px;">
        </div>
    </div>

    <div class="node-row-msg-interval">
        <div class="form-row node-row-interval">
            <label style="margin-left: 10px; width: 175px;" for="node-input-interval"> <span data-i18n="batch.interval.label"></span></label>
            <input type="text" id="node-input-interval" style="width: 50px;">
            <span data-i18n="batch.interval.seconds"></span>
        </div>
        <div class="form-row">
            <input type="checkbox" id="node-input-allowEmptySequence" style="margin-left:20px; margin-right: 10px; vertical-align:top; width:auto;">
            <label for="node-input-allowEmptySequence" style="width:auto;" data-i18n="batch.interval.empty"></label>
        </div>
    </div>

    <div class="node-row-msg-concat">
        <div class="form-row">
            <label data-i18n="batch.concat.topics-label"></label>
            <div class="form-row node-input-topics-container-row">
                <ol id="node-input-topics-container"></ol>
            </div>
        </div>
    </div>

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>

</script>

<script type="text/javascript">
    RED.nodes.registerType("batch",{
        category: "sequence",
        color:"#E2D96E",
        defaults: {
            name: {value:""},
            mode: {value:"count"},
            count: {
                value:10,
                validate:function(v, opt) {
                    if (RED.validators.number(v) && (v >= 1)) {
                        return true;
                    }
                    return RED._("node-red:batch.error.invalid-count");
                }
            },
            overlap: {
                value:0,
                validate:function(v, opt) {
                    if (RED.validators.number(v) && (v >= 0)) {
                        return true;
                    }
                    return RED._("node-red:batch.error.invalid-overlap");
                }
            },
            interval: {
                value:10,
                validate:function(v, opt) {
                    if (RED.validators.number(v) && (v >= 1)) {
                        return true;
                    }
                    return RED._("node-red:batch.error.invalid-interval");
                }
            },
            allowEmptySequence: {value:false},
            topics: {value:[{topic:""}]}
        },
        inputs:1,
        outputs:1,
        icon: "batch.svg",
        label: function() {
            var nam = this.name||this._("batch.batch");
            if (this.mode === "count" && !isNaN(Number(this.count))) {
                nam += " "+this.count;
            }
            if (this.mode === "interval" && !isNaN(Number(this.interval))) {
                nam += " "+this.interval+"s";
            }
            return nam;
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        },
        oneditprepare: function() {
            var node = this;
            var topic_str = node._("batch.concat.topic");

            function resizeTopics(topic) {
                var newWidth = topic.width();
                topic.find('.red-ui-typedInput')
                     .typedInput("width",newWidth-15);
            }

            $("#node-input-topics-container")
                .css('min-height','150px').css('min-width','430px')
                .editableList({
                    addItem: function(container, i, opt) {
                        if (!opt.hasOwnProperty('topic')) {
                            opt.topic = "";
                        }
                        var row = $('<div/>').appendTo(container);
                        var valueField = $('<input/>',{
                            class:"node-input-topic-value",
                            type:"text",
                            style:"margin-left: 5px;"
                        }).appendTo(row)
                        .typedInput({default:'str', types:['str']});
                        valueField.typedInput('value', opt.topic);
                        valueField.typedInput('type', 'str');
                        valueField.attr('placeholder', topic_str);
                        resizeTopics(container);
                    },
                    resizeItem: resizeTopics,
                    sortable: true,
                    removable: true
                });

            $("#node-input-count").spinner({min:1});
            $("#node-input-overlap").spinner({min:0});
            $("#node-input-interval").spinner({min:1});
            $("#node-input-mode").on("change", function(e) {
                var val = $(this).val();
                $(".node-row-msg-count").toggle(val==="count");
                $(".node-row-msg-overlap").toggle(val==="count");
                $(".node-row-msg-interval").toggle(val==="interval");
                $(".node-row-msg-concat").toggle(val==="concat");
                if (val==="concat") {
                    var topics = node.topics;
                    var container = $("#node-input-topics-container");
                    container.editableList('empty');
                    for (var i = 0; i < topics.length; i++) {
                        var topic = topics[i];
                        container.editableList('addItem', topic);
                    }
                }
            });
        },
        oneditsave: function() {
            var topics = $("#node-input-topics-container").editableList('items');
            var node = this;
            node.topics = [];
            topics.each(function(i) {
                var topicData = $(this).data('data');
                var topic = $(this);
                var vf = topic.find(".node-input-topic-value");
                var value = vf.typedInput('value');
                var type = vf.typedInput('type');
                var r = {topic:value};
                node.topics.push(r);
            });
        },
        oneditresize: function(size) {
            var rows = $("#dialog-form>div:not(.node-input-topics-container-row)");
            var height = size.height;
            for (var i = 0; i < rows.length; i++) {
                height -= $(rows[i]).outerHeight(true);
            }
            var editorRow = $("#dialog-form>div.node-input-topics-container-row");
            height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));
            $("#node-input-topics-container").editableList('height',height);
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="batch">
    <p>Creates sequences of messages based on various rules.</p>
    <h3>Details</h3>
    <p>There are three modes for creating message sequences:</p>
    <dl>
        <dt>Number of messages</dt>
        <dd>groups messages into sequences of a given length. The <b>overlap</b>
        option specifies how many messages at the end of one sequence should be
        repeated at the start of the next sequence.</dd>

        <dt>Time interval</dt>
        <dd>groups messages that arrive within the specified interval. If no messages
            arrive within the interval, the node can optionally send on an empty message.</dd>

        <dt>Concatenate Sequences</dt>
        <dd>creates a message sequence by concatenating incoming sequences. Each message
            must have a <code>msg.topic</code> property and a <code>msg.parts</code> property
            identifying its sequence. The node is configured with a list of <code>topic</code>
            values to identify the order sequences are concatenated.
        </dd>
    </dl>
    <h4>Storing messages</h4>
    <p>This node will buffer messages internally in order to work across sequences. The
       runtime setting <code>nodeMessageBufferMaxLength</code> can be used to limit how many messages nodes
       will buffer.</p>
    <p>If a message is received with the <code>msg.reset</code> property set, the buffered messages are deleted and not sent.</p>
</script>

</div><div><!-- --- [red-module:node-red/file] --- -->

<script type="text/html" data-template-name="file">
    <div class="form-row node-input-filename">
         <label for="node-input-filename"><i class="fa fa-file"></i> <span data-i18n="file.label.filename"></span></label>
         <input id="node-input-filename" type="text">
         <input type="hidden" id="node-input-filenameType">
    </div>
    <div class="form-row">
        <label for="node-input-overwriteFile"><i class="fa fa-random"></i> <span data-i18n="file.label.action"></span></label>
        <select type="text" id="node-input-overwriteFile" style="width: 250px;">
            <option value="false" data-i18n="file.action.append"></option>
            <option value="true" data-i18n="file.action.overwrite"></option>
            <option value="delete" data-i18n="file.action.delete"></option>
        </select>
    </div>
    <div class="form-row form-row-file-write-options">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-appendNewline" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-appendNewline" style="width: 70%;"><span data-i18n="file.label.addnewline"></span></label>
    </div>
    <div class="form-row form-row-file-write-options">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-createDir" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-createDir" style="width: 70%;"><span data-i18n="file.label.createdir"></span></label>
    </div>
    <div class="form-row form-row-file-encoding">
        <label for="node-input-encoding"><i class="fa fa-flag"></i> <span data-i18n="file.label.encoding"></span></label>
        <select type="text" id="node-input-encoding" style="width: 250px;">
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name">
    </div>
    <div class="form-tips"><span data-i18n="file.tip"></span></div>
</script>

<script type="text/html" data-template-name="file in">
    <div class="form-row">
         <label for="node-input-filename"><i class="fa fa-file"></i> <span data-i18n="file.label.filename"></span></label>
         <input id="node-input-filename" type="text">
         <input type="hidden" id="node-input-filenameType">
    </div>
    <div class="form-row">
        <label for="node-input-format"><i class="fa fa-sign-out"></i> <span data-i18n="file.label.outputas"></span></label>
        <select id="node-input-format" style="width: 250px;">
            <option value="utf8" data-i18n="file.output.utf8"></option>
            <option value="lines" data-i18n="file.output.lines"></option>
            <option value="" data-i18n="file.output.buffer"></option>
            <option value="stream" data-i18n="file.output.stream"></option>
        </select>
    </div>
    <div class="form-row" id="file-allprops">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-allProps" style="display:inline-block; width:auto; vertical-align:top;">
        <label for="node-input-allProps" style="width: 70%;"><span data-i18n="file.label.allProps"></span></label>
    </div>
    <div class="form-row" id="encoding-spec">
        <label for="node-input-encoding"><i class="fa fa-flag"></i> <span data-i18n="file.label.encoding"></span></label>
        <select type="text" id="node-input-encoding" style="width:250px;">
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name">
    </div>
    <div class="form-tips"><span data-i18n="file.tip"></span></div>
</script>

<script type="text/javascript">
(function(){
    var encodings = [
        [ "file.encoding.native",
          "utf8",
          "ucs2",
          "utf-16le",
          "ascii",
          "binary",
          "base64",
          "hex"
        ],
        [ "file.encoding.unicode",
          "utf-16be",
        ],
        [ "file.encoding.japanese",
          "Shift_JIS",
          "Windows-31j",
          "Windows932",
          "EUC-JP"
        ],
        [ "file.encoding.chinese",
          "GB2312",
          "GBK",
          "GB18030",
          "Windows936",
          "EUC-CN"
        ],
        [ "file.encoding.korean",
          "KS_C_5601",
          "Windows949",
          "EUC-KR"
        ],
        [ "file.encoding.taiwan",
          "Big5",
          "Big5-HKSCS",
          "Windows950"
        ],
        [ "file.encoding.windows",
          "cp874",
          "cp1250",
          "cp1251",
          "cp1252",
          "cp1253",
          "cp1254",
          "cp1255",
          "cp1256",
          "cp1257",
          "cp1258"
        ],
        [ "file.encoding.iso",
          "ISO-8859-1",
          "ISO-8859-2",
          "ISO-8859-3",
          "ISO-8859-4",
          "ISO-8859-5",
          "ISO-8859-6",
          "ISO-8859-7",
          "ISO-8859-8",
          "ISO-8859-9",
          "ISO-8859-10",
          "ISO-8859-11",
          "ISO-8859-12",
          "ISO-8859-13",
          "ISO-8859-14",
          "ISO-8859-15",
          "ISO-8859-16"
        ],
        [ "file.encoding.ibm",
          "cp437",
          "cp737",
          "cp775",
          "cp808",
          "cp850",
          "cp852",
          "cp855",
          "cp856",
          "cp857",
          "cp858",
          "cp860",
          "cp861",
          "cp866",
          "cp869",
          "cp922",
          "cp1046",
          "cp1124",
          "cp1125",
          "cp1129",
          "cp1133",
          "cp1161",
          "cp1162",
          "cp1163"
        ],
        [ "file.encoding.mac",
          "maccroatian",
          "maccyrillic",
          "macgreek",
          "maciceland",
          "macroman",
          "macromania",
          "macthai",
          "macturkish",
          "macukraine",
          "maccenteuro",
          "macintosh"
        ],
        [ "file.encoding.koi8",
          "koi8-r",
          "koi8-u",
          "koi8-ru",
          "koi8-t"
        ],
        [ "file.encoding.misc",
          "armscii8",
          "rk1048",
          "tcvn",
          "georgianacademy",
          "georgianps",
          "pt154",
          "viscii",
          "iso646cn",
          "iso646jp",
          "hproman8",
          "tis620"
        ]
    ];

    RED.nodes.registerType('file',{
        category: 'storage',
        defaults: {
            name: {value:""},
            filename: {value:"", validate: RED.validators.typedInput({ typeField: 'filenameType' })},
            filenameType: {value:"str"},
            appendNewline: {value:true},
            createDir: {value:false},
            overwriteFile: {value:"false"},
            encoding: {value:"none"}
        },
        color:"BurlyWood",
        inputs:1,
        outputs:1,
        icon: "file-out.svg",
        label: function() {
            var fn = this.filename;
            if(this.filenameType != "str" && this.filenameType != "env" ) { fn = ""; }
            if(this.filenameType === "env") { fn = "env."+fn; }
            if (this.overwriteFile === "delete") {
                return this.name||this._("file.label.deletelabel",{file:fn});
            } else {
                return this.name||fn||this._("file.label.write");
            }
        },
        paletteLabel: RED._("node-red:file.label.write"),
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var node = this;
            var encSel = $("#node-input-encoding");
            var label = node._("file.encoding.none");
            $("<option/>", {
                value: "none",
                label: label
            }).text(label).appendTo(encSel);
            $("<option/>", {
                value: "setbymsg",
                label: node._("file.encoding.setbymsg")
            }).text(label).appendTo(encSel);
            $("#node-input-filename").typedInput({
                default: "str",
                types: [{label:RED._("node-red:file.label.path"), value:"str", icon:""}, "msg", "jsonata", "env"],
                typeField: $("#node-input-filenameType")
            });
            if(typeof node.filenameType == 'undefined') {
                //existing node AND filenameType is not set - inplace (compatible) upgrade to new typedInput
                if(node.filename == "") { //was using empty value to denote msg.filename - set typedInput to match
                    node.filename = "filename";
                    node.filenameType = "msg";
                    $("#node-input-filename").typedInput("type", node.filenameType);
                    $("#node-input-filename").typedInput("value", node.filename);
                } else if(/^\${[^}]+}$/.test(node.filename)) { //was using an ${ENV_VAR}
                    node.filenameType = "env";
                    node.filename = node.filename.replace(/\${([^}]+)}/g, function(match, name) {
                        return (name === undefined)?"":name;
                    });
                    $("#node-input-filename").typedInput("type", node.filenameType);
                    $("#node-input-filename").typedInput("value", node.filename);
                } else { //was using a static filename - set typedInput type to str
                    node.filenameType = "str";
                    $("#node-input-filename").typedInput("type", node.filenameType);
                    $("#node-input-filename").typedInput("value", node.filename);
                }
            }
            encodings.forEach(function(item) {
                if(Array.isArray(item)) {
                    var group = $("<optgroup/>", {
                        label: node._(item[0])
                    }).appendTo(encSel);
                    for (var i = 1; i < item.length; i++) {
                        var enc = item[i];
                        $("<option/>", {
                            value: enc,
                            label: enc
                        }).text(enc).appendTo(group);
                    }
                }
                else {
                    $("<option/>", {
                        value: item,
                        label: item
                    }).text(item).appendTo(encSel);
                }
            });
            encSel.val(node.encoding);
            $("#node-input-overwriteFile").on("change",function() {
                if (this.value === "delete") {
                    $(".form-row-file-write-options").hide();
                    $(".form-row-file-encoding").hide();
                } else {
                    $(".form-row-file-write-options").show();
                    $(".form-row-file-encoding").show();
                }
            });
        }
    });

    RED.nodes.registerType('file in',{
        category: 'storage',
        defaults: {
            name: {value:""},
            filename: {value:"", validate: RED.validators.typedInput({ typeField: 'filenameType' }) },
            filenameType: {value:"str"},
            format: {value:"utf8"},
            chunk: {value:false},
            sendError: {value: false},
            encoding: {value: "none"},
            allProps: {value: false}
        },
        color:"BurlyWood",
        inputs:1,
        outputs:1,
        outputLabels: function(i) {
            var l;
            if (this.format === "utf8") {
                l = "file.label.utf8String";
            } else if (this.format === "lines") {
                l = "file.label.utf8String_plural";
            } else if (this.format === "stream") {
                l = "file.label.binaryBuffer_plural";
            } else {
                l = "file.label.binaryBuffer";
            }
            return this._(l);
        },
        icon: "file-in.svg",
        label: function() {
            var fn = this.filename;
            if(this.filenameType != "str" && this.filenameType != "env" ) { fn = ""; }
            if(this.filenameType === "env") { fn = "env."+fn; }
            return this.name||fn||this._("file.label.read");
        },
        paletteLabel: RED._("node-red:file.label.read"),
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var node = this;
            var encSel = $("#node-input-encoding");
            var label = node._("file.encoding.none");
            $("<option/>", {
                value: "none",
                label: label
            }).text(label).appendTo(encSel);
            $("#node-input-filename").typedInput({
                default: "str",
                types: [{label:RED._("node-red:file.label.path"), value:"str", icon:""}, "msg", "jsonata", "env"],
                typeField: $("#node-input-filenameType")
            });
            if(typeof node.filenameType == 'undefined') {
                //existing node AND filenameType is not set - inplace (compatible) upgrade to new typedInput
                if(node.filename == "") { //was using empty value to denote msg.filename - set typedInput to match
                    node.filename = "filename";
                    node.filenameType = "msg";
                    $("#node-input-filename").typedInput("type", node.filenameType);
                    $("#node-input-filename").typedInput("value", node.filename);
                } else if(/^\${[^}]+}$/.test(node.filename)) { //was using an ${ENV_VAR}
                    node.filenameType = "env";
                    node.filename = node.filename.replace(/\${([^}]+)}/g, function(match, name) {
                        return (name === undefined)?"":name;
                    });
                    $("#node-input-filename").typedInput("type", node.filenameType);
                    $("#node-input-filename").typedInput("value", node.filename);
                } else { //was using a static filename - set typedInput type to str
                    node.filenameType = "str";
                    $("#node-input-filename").typedInput("type", node.filenameType);
                    $("#node-input-filename").typedInput("value", node.filename);
                }
            }
            encodings.forEach(function(item) {
                if(Array.isArray(item)) {
                    var group = $("<optgroup/>", {
                        label: node._(item[0])
                    }).appendTo(encSel);
                    for (var i = 1; i < item.length; i++) {
                        var enc = item[i];
                        $("<option/>", {
                            value: enc,
                            label: enc
                        }).text(enc).appendTo(group);
                    }
                }
                else {
                    $("<option/>", {
                        value: item,
                        label: item
                    }).text(item).appendTo(encSel);
                }
            });
            encSel.val(node.encoding);
            $("#node-input-format").on("change",function() {
                var format = $("#node-input-format").val();
                if ((format === "utf8") || (format === "lines")) {
                    $("#encoding-spec").show();
                }
                else {
                    $("#encoding-spec").hide();
                }
                if ((format === "lines") || (format === "stream")) {
                    $("#file-allprops").show();
                }
                else {
                    $("#file-allprops").hide();
                }
            });
        }
    });
})();
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="file">
    <p>Writes <code>msg.payload</code> to a file, either adding to the end or replacing the existing content.
       Alternatively, it can delete the file.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt class="optional">filename <span class="property-type">string</span></dt>
        <dd>The name of the file to be updated can be provided in the node configuration, or as a message property. 
            By default it will use <code>msg.filename</code> but this can be customised in the node.
        </dd>
        <dt class="optional">encoding <span class="property-type">string</span></dt>
        <dd>If encoding is configured to be set by msg, then this optional property can set the encoding.</dt>
    </dl>
    <h3>Output</h3>
    <p>On completion of write, input message is sent to output port.</p>
    <h3>Details</h3>
    <p>Each message payload will be added to the end of the file, optionally appending
    a newline (\n) character between each one.</p>
    <p>If <code>msg.filename</code> is used the file will be closed after every write.
    For best performance use a fixed filename.</p>
    <p>It can be configured to overwrite the entire file rather than append. For example,
    when writing binary data to a file, such as an image, this option should be used
    and the option to append a newline should be disabled.</p>
    <p>Encoding of data written to a file can be specified from list of encodings.</p>
    <p>Alternatively, this node can be configured to delete the file.</p>
</script>

<script type="text/html" data-help-name="file in">
    <p>Reads the contents of a file as either a string or binary buffer.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt class="optional">filename <span class="property-type">string</span></dt>
        <dd>The name of the file to be read can be provided in the node configuration, or as a message property. 
            By default it will use <code>msg.filename</code> but this can be customised in the node.
        </dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string | buffer</span></dt>
        <dd>The contents of the file as either a string or binary buffer.</dd>
        <dt class="optional">filename <span class="property-type">string</span></dt>
        <dd>If not configured in the node, this optional property sets the name of the file to be read.</dd>
    </dl>
    <h3>Details</h3>
    <p>The filename should be an absolute path, otherwise it will be relative to
    the working directory of the Node-RED process.</p>
    <p>On Windows, path separators may need to be escaped, for example: <code>\\Users\\myUser</code>.</p>
    <p>Optionally, a text file can be split into lines, outputting one message per line, or a binary file
    split into smaller buffer chunks - the chunk size being operating system dependant, but typically 64k (Linux/Mac) or 41k (Windows).</p>
    <p>When split into multiple messages, each message will have a <code>parts</code>
    property set, forming a complete message sequence.</p>
    <p>Encoding of input data can be specified from list of encodings if output format is string.</p>
    <p>Errors should be caught and handled using a Catch node.</p>
</script>

</div><div><!-- --- [red-module:node-red/watch] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="watch">
    <div class="form-row node-input-filename">
         <label for="node-input-files"><i class="fa fa-file"></i> <span data-i18n="watch.label.files"></span></label>
         <input id="node-input-files" type="text" tabindex="1" data-i18n="[placeholder]watch.placeholder.files">
    </div>
    <div class="form-row">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-recursive" style="display:inline-block; width:auto; vertical-align:top;">
        <label for="node-input-recursive" style="width:70%;"> <span data-i18n="watch.label.recursive"></span></label>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
     <div id="node-input-tip" class="form-tips"><span data-i18n="watch.tip"></span></div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('watch',{
        category: 'storage',
        defaults: {
            name: {value:""},
            files: {value:"",required:true,
                    label:RED._("node-red:watch.label.files")},
            recursive: {value:""}
        },
        color:"BurlyWood",
        inputs:0,
        outputs:1,
        icon: "watch.svg",
        label: function() {
            return this.name||this.files||this._("watch.watch");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="watch">
    <p>Watches a directory or file for changes.</p>
    <p>You can enter a list of comma separated directories and/or files. You will
    need to put quotes "..." around any that have spaces in.</p>
    <p>On Windows you must use double back-slashes \\ in any directory names.</p>
    <p>The full filename of the file that actually changed is put into <code>msg.payload</code> and <code>msg.filename</code>,
    while a stringified version of the watch list is returned in <code>msg.topic</code>.</p>
    <p><code>msg.file</code> contains just the short filename of the file that changed.
    <code>msg.type</code> has the type of thing changed, usually <i>file</i> or <i>directory</i>,
    while <code>msg.size</code> holds the file size in bytes.</p>
    <p>Of course in Linux, <i>everything</i> is a file and thus can be watched...</p>
    <p><b>Note: </b>The directory or file must exist in order to be watched. If the file
    or directory gets deleted it may no longer be monitored even if it gets re-created.</p>
</script>

</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-base] --- -->
<style>
    .red-ui-editor {
        --nrdb-node-light: rgb(160, 230, 236);
        --nrdb-node-medium: rgb(90, 210, 220);
        --nrdb-node-dark: rgb(39, 183, 195);
        --nrdb-node-darkest: rgb(32 160 170);
    }
    .red-ui-editor .form-row-flex {
        display: flex;
        align-items: baseline;
        gap: 4px;
    }
    .red-ui-editor .form-row-flex input,
    .red-ui-editor .form-row-flex label:not(:first-child) {
        margin: 0;
        width: auto;
    }
    .nrdb2-helptext {
        font-size: 0.75rem;
        line-height: 0.825rem;
        color: #aaa;
        font-style: italic;
    }
    .w-16 {
        width: 16px;
    }
    #ff-node-red-dashboard {
        --ff-grey-50: #F9FAFB;
        --ff-grey-100: #F3F4F6;
        --ff-grey-200: #E5E7EB;
        position: absolute;
        top: 1px;
        bottom: 2px;
        left: 1px;
        right: 1px;
        overflow-y: auto;
    }
    #ff-node-red-dashboard .red-ui-sidebar-header {
        display: flex;
        justify-content: space-between;
    }
    #ff-node-red-dashboard .red-ui-sidebar-header label {
        margin-bottom: 0;
    }
    #ff-node-red-dashboard .red-ui-sidebar-header-actions {
        gap: 4px;
        display: flex;
    }
    #ff-node-red-dashboard .red-ui-editableList-container {
        padding: 0;
    }
    /* don't show border for nexted editable lists */
    .red-ui-editableList-border .red-ui-editableList-border {
        border: 0;
    }
    #node-config-stateless-nodes .red-ui-treeList-label.selected {
        background-color: #e3f2fd;
    }
    /* Dashboard 2.0 Sidebar */
    .nrdb2-sb-list-button-group {
        display: flex;
        gap: 4px;
    }
    .nrdb2-sidebar-tab-content {
        padding: 8px 10px;
        height: 100%;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
    }
    .nrdb2-layout-helptext {
        padding: 0 0 9px;
        font-style: italic;
        color: #a2a2a2;
        font-size: 8pt;
        line-height: 12pt;
    }
    .nrdb2-sidebar-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 9px;
    }
    .nrdb2-sb-pages-list li {
        padding: 0;
        border-bottom: 0;
    }
    .nrdb2-sb-unattached-groups-list li {
        padding: 0;
        border-bottom: 0;
        background-color: #ffefef;
    }
    .nrdb2-sb-list-header {
        display: flex;
        gap: 6px;
        align-items: center;
        padding: 9px 6px;
        cursor: pointer;
    }
    .nrdb2-sb-list-header.nrdb2-sb-pages-list-header {
        border-top: 1px solid var(--red-ui-primary-border-color, --ff-grey-200);
        border-bottom: 1px solid var(--red-ui-primary-border-color, --ff-grey-200);
    }
    .nrdb2-sb-list-header .nrdb2-sb-title {
        text-overflow: ellipsis;
        overflow: hidden;
        white-space: nowrap;
    }
    .nrdb2-sb-list-header .nrdb2-sb-info {
        font-size: 0.75rem;
        opacity: 0.5;
    }
    .nrdb2-sb-list-header .nrdb2-sb-palette {
        display: flex;
        gap: 2px;
    }
    .nrdb2-sb-list-header .nrdb2-sb-palette-color {
        width: 12px;
        height: 12px;
        background-color: black;
        border: 1px solid #d4d4d4;
        border-radius: 2px;
    }
    .nrdb2-sb-list-header-actions {
        position: absolute;
        gap: 4px; 
        right: 1rem;
        display: flex;
        gap: 4px;
    }
    .nrdb2-sb-list-header-actions a {
        cursor: pointer;
    }
    .nrdb2-sb-list-header-state-options {
        display: flex;
        gap: 4px;
    }
    .nrdb2-sb-list-header-button-group {
        right: 1rem;
        display: flex;
        gap: 4px;
    }
    .nrdb2-sb-list-header-button-group,
    .nrdb2-sb-list-handle {
        opacity: 0;
        transition: 0.15s opacity;
    }
    .nrdb2-sb-list-header:hover {
        background-color: var(--red-ui-secondary-background-hover, --ff-grey-100);
    }
    .nrdb2-sb-list-header:hover .nrdb2-sb-list-handle, 
    .nrdb2-sb-list-header:hover .nrdb2-sb-list-header-button-group {
        opacity: 1;
    }
    /* indent the groups */
    .nrdb2-sb-groups-list-header .nrdb2-sb-list-chevron {
        margin-left: 1.5rem;
    }
    /* indent the widgets */
    .nrdb2-sb-widgets-list-header .nrdb2-sb-widget-icon {
        margin-left: 3.5rem;
    }
    /* apply subflow icon */
    .nrdb2-sb-widgets-list-header .nrdb2-sb-widget-icon.nrdb2-sb-subflow-icon {
        background-color: currentColor;
        display: inline-block;
        mask-image: url(red/images/subflow_tab.svg);
        mask-size: contain;
        mask-position: center;
        height: 18px;
        width: 18px;
        margin-left: 3.42rem;
    }
</style>


<script type="text/javascript">
// #region typedefs for intellisense and better code completion/DX

/**
 * @typedef {Object} DashboardItem - A widget/group/page/subflow item
 * @property {String} itemType - The type of item (e.g. 'widget', 'group', 'page', 'link')
 * @property {String} id - The unique id of the item
 * @property {String} name - The name of the item
 * @property {String} type - The type of the item (e.g. 'ui-button', 'ui-template', 'ui-group', 'ui-page')
 * @property {Number} order
 * @property {String} label
 * @property {String} color
 * @property {String} [group] - The group id that this widget belongs to
 * @property {String} [page] - The page id that this group belongs to
 * @property {String} [theme] - The theme id that this page belongs to
 * @property {Boolean} [isSubflowInstance] - Whether or not this item is a subflow instance
 * @property {String} [subflowName] - The name give to the subflow template (only applicable when `isSubflowInstance` is `true`)
 * @property {Object} node - The actual node or subflow instance that this DashboardItem represents
 * @global
 */

/** @typedef {Object<string, Array<DashboardItem>>} DashboardItemLookup */
// #endregion

(function () {
    const sidebarContainer = '<div style="position: relative; height: 100%;"></div>'
    const sidebarContentTemplate = $('<div id="ff-node-red-dashboard"></div>').appendTo(sidebarContainer)
    const sidebar = $(sidebarContentTemplate)

    // convert to i18 text
    function c_ (x) {
        return RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.' + x)
    }

    function hasProperty (obj, prop) {
        return Object.prototype.hasOwnProperty.call(obj, prop)
    }
    function debounce (func, wait, immediate) {
        let timeout
        return function () {
            const context = this; const args = arguments
            const later = function () {
                timeout = null
                if (!immediate) func.apply(context, args)
            }
            const callNow = immediate && !timeout
            clearTimeout(timeout)
            timeout = setTimeout(later, wait)
            if (callNow) func.apply(context, args)
        }
    }

    RED.nodes.registerType('ui-base', {
        category: 'config',
        defaults: {
            name: {
                value: c_('label.uiName'),
                required: true
            },
            path: {
                value: '/dashboard',
                required: true
            },
            includeClientData: {
                value: true
            },
            acceptsClientConfig: {
                value: ['ui-notification', 'ui-control']
            },
            showPathInSidebar: {
                value: false
            },
            navigationStyle: {
                value: 'default'
            }
        },
        label: function () {
            return `${this.name} [${this.path}]` || 'UI Config'
        },
        onpaletteadd: function () {
            // add the Dashboard 2.0 sidebar
            if (RED._db2debug) { console.log('dashboard 2: ui_base.html: onpaletteadd ()') }
            addSidebar()
        }
    })

    /**
     * Utility function to convert a dashboard node to a DashboardItem
     * Provides a better DX with type checking and intellisense
     * @param {Object} node - The node to convert
     * @returns {DashboardItem}
     */
    function toDashboardItem (node) {
        if (RED._db2debug) { console.log('dashboard 2: ui_base.html: toDashboardItem (node)', node) }
        /** @type {DashboardItem} */
        const item = {
            itemType: 'widget',
            id: node.id,
            name: node.name,
            type: node.type,
            order: node.order,
            label: null,
            icon: null,
            color: null,
            isSubflowInstance: false,
            node
        }
        if (hasProperty(node, 'group')) { item.group = node.group }
        if (hasProperty(node, 'page')) { item.page = node.page }
        if (hasProperty(node, 'link')) { item.link = node.link }
        if (hasProperty(node, 'theme')) { item.theme = node.theme }
        if (hasProperty(node, 'env') && Array.isArray(node.env) && /subflow:.+/.test(node.type)) {
            const envOrder = node.env.find(e => e.key === 'DB2_SF_ORDER')
            if (envOrder) {
                item.order = envOrder.value
            }
        }
        switch (node.type) {
        case 'ui-page':
        case 'ui-link':
        case 'ui-group':
        case 'ui-theme':
        case 'ui-base':
            item.itemType = node.type.replace('ui-', '')
            break
        default:
            item.itemType = 'widget'
            break
        }
        try {
            item.order = parseInt(item.order)
        } finally {
            item.order = isNaN(item.order) ? 0 : item.order
        }
        try {
            item.label = RED.utils.getNodeLabel(node)
        } finally {
            item.label = item.label || node.type || node.id
        }
        try {
            item.color = RED.utils.getNodeColor(node)
        } catch (_err) { }
        return item
    }

    /**
     * Add Custom Dashboard Side Menu
     * */

    function dashboardLink (id, name, path) {
        const base = RED.settings.httpNodeRoot || '/'
        const basePart = base.endsWith('/') ? base : `${base}/`
        const dashPart = path.startsWith('/') ? path.slice(1) : path
        const fullPath = `${basePart}${dashPart}`

        const header = $('<div class="red-ui-sidebar-header"></div>')
        const label = $('<label></label>').text(name)

        const actions = $('<div class="red-ui-sidebar-header-actions"></div>')

        const editSettingsButton = $('<a id="edit-ui-base" class="editor-button editor-button-small nr-db-sb-list-header-button">' +
            c_('label.editSettings') + ' <i style="margin-left: 3px;" class="fa fa-cog"></i></a>')

        editSettingsButton.on('click', function () {
            RED.editor.editConfig('', 'ui-base', id)
        })

        const openDashboardButton = $(`<a id="open-dashboard" href="${fullPath}" target="nr-dashboard" class="editor-button editor-button-small nr-db-sb-list-header-button">` +
            c_('label.openDashboard') + ' <i style="margin-left: 3px;" class="fa fa-external-link"></i></a>')

        label.appendTo(header)
        editSettingsButton.appendTo(actions)
        openDashboardButton.appendTo(actions)
        actions.appendTo(header)
        return header
    }

    /**
     * Add an editor to control the ordering of groups & widgets
     */
    function updateItemOrder (items, events) {
        if (RED._db2debug) { console.log('dashboard 2: ui_base.html: updateItemOrder (items, events)', items, events) }
        items.each((i, el) => {
            /** @type {DashboardItem} */
            const dbItem = el.data('data')
            const node = dbItem?.node || {}
            const setNodeOrder = (newOrder) => {
                dbItem.order = newOrder
                if (dbItem.isSubflowInstance) {
                    node.env = node.env || []
                    const envOrder = node.env.find(e => e.key === 'DB2_SF_ORDER')
                    if (envOrder) {
                        envOrder.value = newOrder
                    } else {
                        node.env.push({ key: 'DB2_SF_ORDER', value: '' + newOrder, type: 'str' }) // db2 sort order
                    }
                } else {
                    node.order = newOrder
                }
            }
            const getNodeOrder = () => {
                let order = dbItem.order // node.order
                if (dbItem.isSubflowInstance && node.env) {
                    const envOrder = node.env.find(e => e.key === 'DB2_SF_ORDER')
                    if (envOrder) { order = envOrder.value }
                }
                if (typeof order === 'string') { order = parseInt(order) }
                if (isNaN(order)) { order = 0 }
                return order || 0
            }
            const oldOrder = getNodeOrder()
            if (oldOrder !== i + 1) {
                const wasDirty = node.dirty
                const wasChanged = node.changed
                // update Node-RED node properties
                setNodeOrder(i + 1)
                node.dirty = true
                node.changed = true
                // generate a history event
                const hev = {
                    t: 'edit',
                    node,
                    changes: {
                        order: oldOrder
                    },
                    dirty: wasDirty,
                    changed: wasChanged
                }
                events.push(hev)
            }
        })
    }

    // toggle slide tab group content
    const titleToggle = function (id, content, chevron) {
        return function (evt) {
            if (content.is(':visible')) {
                content.slideUp()
                chevron.css({ transform: 'rotate(-90deg)' })
                content.addClass('nr-db-sb-collapsed')
            } else {
                content.slideDown()
                chevron.css({ transform: '' })
                content.removeClass('nr-db-sb-collapsed')
            }
        }
    }

    // Utility function to store events in NR history, trigger a redraw, and detect if a re-deploy is necessary
    function recordEvents (events) {
        if (events.length === 0) { return } // nothing to record

        // note the state of the editor before pushing to history
        const isDirty = RED.nodes.dirty()
        if (RED._db2debug) { console.log('dashboard 2: recordEvents ()', isDirty, events) }

        // add our changes to NR history and trigger whether or not we need to redeploy
        RED.history.push({
            t: 'multi',
            events,
            dirty: isDirty
        })
        RED.nodes.dirty(true)
        RED.view.redraw()
    }

    function checkDuplicateUiBases () {
        // check how many ui-bases we have and trim if already too many
        const bases = []
        const pages = []
        RED.nodes.eachConfig((n) => {
            if (n.type === 'ui-base') { bases.push(n) }
            if (n.type === 'ui-page') { pages.push(n) }
        })

        // the eachConfig is in creation order, so we can remove from the end
        // and keep the oldest ones
        while (bases.length > 1) {
            const n = bases.pop()
            if (RED._db2debug) { console.log('ui-base removed', n) }
            RED.nodes.remove(n.id)
            RED.nodes.dirty(true)
        }

        if (bases.length > 0) {
            const baseId = bases[0].id
            // loop over pages and re-map the ui-base to the only ui-base available
            pages.forEach((page) => {
                page.ui = baseId
            })

            RED.nodes.eachNode((node) => {
                if (node.type.startsWith('ui-')) {
                    // check if the widgets are ui-scoped, and have a ui set to the removed ui-base nodes
                    if (node.ui && node.ui !== '' && node.ui !== baseId) {
                        node.ui = baseId
                    }
                }
            })
        }
    }

    function addConfigNode (node) {
        if (!node.users) {
            node.users = []
        }
        node.dirty = true
        RED.nodes.add(node)
        RED.editor.validateNode(node)
        RED.history.push({
            t: 'add',
            nodes: [node.id],
            dirty: RED.nodes.dirty()
        })
        RED.nodes.dirty(true)
    }

    function mapDefaults (defaults) {
        const values = {}
        for (const key in defaults) {
            if (Object.prototype.hasOwnProperty.call(defaults, key)) {
                values[key] = defaults[key].value
            }
        }
        return values
    }

    function getConfigNodesByType (type) {
        const nodes = []
        RED.nodes.eachConfig((n) => {
            if ((type instanceof String) && type === n.type) {
                nodes.push(n)
            } else {
                // we have an array of types
                if (type.includes(n.type)) {
                    nodes.push(n)
                }
            }
        })
        return nodes
    }

    function addDefaultPage (baseId, themeId) {
        const page = RED.nodes.getType('ui-page')
        // get all pages
        const entries = getConfigNodesByType(['ui-page', 'ui-link'])
        const pageNumber = entries.length + 1
        const pageNode = {
            _def: page,
            id: RED.nodes.id(),
            type: 'ui-page',
            ...mapDefaults(page.defaults),
            path: `/page${pageNumber}`, // TODO: generate a unique path
            name: `Page ${pageNumber}`,
            ui: baseId,
            theme: themeId,
            layout: 'grid',
            order: pageNumber
        }

        addConfigNode(pageNode)
        return pageNode
    }

    function addDefaultLink (baseId) {
        const link = RED.nodes.getType('ui-link')
        const linkNode = {
            _def: link,
            id: RED.nodes.id(),
            type: 'ui-link',
            ...mapDefaults(link.defaults),
            path: '/',
            name: 'Link',
            ui: baseId
        }

        addConfigNode(linkNode)
        return linkNode
    }

    function addDefaultGroup (pageId) {
        const group = RED.nodes.getType('ui-group')
        const groupNode = {
            _def: group,
            id: RED.nodes.id(),
            type: 'ui-group',
            ...mapDefaults(group.defaults),
            name: 'My Group',
            page: pageId
        }

        addConfigNode(groupNode)
        return groupNode
    }

    function addDefaultTheme () {
        const theme = RED.nodes.getType('ui-theme')
        const themeNode = {
            _def: theme,
            id: RED.nodes.id(),
            type: 'ui-theme',
            ...mapDefaults(theme.defaults),
            name: 'Default Theme'
        }

        addConfigNode(themeNode)
        return themeNode
    }

    function addLayoutsDefaults () {
        const cNodes = ['ui-base', 'ui-page', 'ui-group', 'ui-theme']
        let exists = false
        RED.nodes.eachConfig((n) => {
            if (cNodes.includes(n.type)) {
                exists = true
            }
        })

        // check if we haven't got any of these yet
        if (!exists) {
            // Add Single Base Node
            const base = RED.nodes.getType('ui-base')
            const baseNode = {
                _def: base,
                id: RED.nodes.id(),
                type: 'ui-base',
                ...mapDefaults(base.defaults),
                name: 'My Dashboard'
            }

            addConfigNode(baseNode)

            const theme = addDefaultTheme()
            const page = addDefaultPage(baseNode.id, theme.id)
            const group = addDefaultGroup(page.id)

            // update existing `ui-` nodes to use the new base/page/theme/group
            RED.nodes.eachNode((node) => {
                if (node.type.startsWith('ui-')) {
                    // if node has a group property
                    if (hasProperty(node._def.defaults, 'group') && !node.group) {
                        // group-scoped widgets - which is most of them
                        node.group = group.id
                    } else if (hasProperty(node._def.defaults, 'page') && !node.page) {
                        // page-scoped widgets
                        node.page = page.id
                    } else if (hasProperty(node._def.defaults, 'ui') && !node.ui) {
                        // base-scoped widgets, e.g. ui-notification/control
                        node.ui = baseNode.id
                    }
                    RED.editor.validateNode(node)
                }
            })

            RED.view.redraw()
            RED.sidebar.config.refresh()
        }
    }

    // watch for nodes changed, added, removed - use this to refresh the sidebar
    let refreshBusy = false // this is set/reset inside refreshSidebarEditors
    const refreshSidebarEditorDebounced = debounce(refreshSidebarEditors, 300)
    /**
     * Conditional refresh of the sidebar editor
     * The refresh is only triggered if the event is a ui- node or a subflow that contains a ui- node
     * Calls are debounced to prevent multiple calls to refreshSidebarEditors
     * @param {Object} node - The node that was changed/added/removed
     * @param {String} eventName - The name of the event that was fired
     */
    const conditionalSidebarRefresh = function (node, eventName) {
        // if the layout editor is not in view, don't refresh
        if ($('#ff-node-red-dashboard').parent().css('display') === 'none') { return }
        // if a refresh is in progress, don't refresh
        if (refreshBusy) { return }
        if (RED._db2debug) { console.log('dashboard 2: conditionalSidebarRefresh (node, eventName)', node, eventName) }

        // first, check if the node.dirty flag is set or if the event is a nodes:remove (also ensure the node has a type property)
        if ((node.dirty || eventName === 'nodes:remove') && node.type) {
            // check if the node is a ui- node
            let refresh = node.type.startsWith('ui-')
            // if this is not a ui- node, it is perhaps a subflow?
            if (!refresh && node.type.startsWith('subflow:')) {
                // lets see if it has env vars linked to a `ui-` config or it has a DB2_SF_ORDER sort order key?
                const subflowId = node.type.split(':')[1]
                if (node.env && node.env.find(e => e.type?.startsWith('ui-') || node.env.find(e => e.key === 'DB2_SF_ORDER'))) {
                    refresh = true
                }
                if (!refresh) {
                    // check if the subflow definition contains any ui- nodes
                    const subflowChildren = RED.nodes.filterNodes({ z: subflowId })
                    if (subflowChildren.some(n => n.type.startsWith('ui-'))) {
                        refresh = true
                    }
                }
            }
            if (refresh) {
                if (RED._db2debug) { console.log(`dashboard 2: ${eventName} - this is a ui- node! queuing a call to refreshSidebarEditors`) }
                // debounce the call to refreshSidebarEditors as multiple events can be fired in quick succession
                refreshSidebarEditorDebounced()
            }
        }
    }

    RED.events.on('nodes:change', function (event) {
        conditionalSidebarRefresh(event, 'nodes:change')
    })

    const addLayoutsDefaultsDebounced = debounce(addLayoutsDefaults, 25)
    const checkDuplicateUiBasesDebounced = debounce(checkDuplicateUiBases, 25)
    RED.events.on('nodes:add', function (node) {
        if (RED._db2debug) { console.log('nodes:add', node) }
        if (node.dirty && node.type && node.type.startsWith('ui-')) {
            if (RED._db2debug) { console.log('nodes:add - this is a ui- node! queuing a call to refreshSidebarEditors') }
            // debounce the call to refreshSidebarEditors as multiple events can be fired in quick succession
            refreshSidebarEditorDebounced()
        }

        // if we're adding a ui-base
        if (node.type.startsWith('ui-')) {
            // action on all ui- elements to ensure we've remapped (now) missing ui-base nodes
            checkDuplicateUiBasesDebounced()
            addLayoutsDefaultsDebounced()
        }
    })

    RED.events.on('nodes:remove', function (event) {
        conditionalSidebarRefresh(event, 'nodes:remove')
    })

    /**
     * Add group of actions to the right-side of a row in the sidebar editable list.
     * @param {Object} parent - jQuery object to add this button group as a child element to
     * @param {DashboardItem} item - The page/group/widget that these actions are bound to
     */
    function addRowActions (parent, item, list) {
        const configNodes = ['ui-base', 'ui-page', 'ui-link', 'ui-group', 'ui-theme']
        const btnGroup = $('<div>', { class: 'nrdb2-sb-list-header-button-group', id: item.id }).appendTo(parent)
        if (!configNodes.includes(item.type)) {
            const focusButton = $('<a href="#" class="nr-db-sb-tab-focus-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-bullseye"></i> ' + c_('layout.focus') + '</a>').appendTo(btnGroup)
            focusButton.on('click', function (evt) {
                RED.view.reveal(item.id)
                evt.stopPropagation()
                evt.preventDefault()
            })
        }
        const editButton = $('<a href="#" class="nr-db-sb-tab-edit-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> ' + c_('layout.edit') + '</a>').appendTo(btnGroup)
        editButton.on('click', function (evt) {
            if (configNodes.includes(item.type)) {
                RED.editor.editConfig('', item.type, item.id)
            } else {
                RED.editor.edit(item?.node)
            }
            evt.stopPropagation()
            evt.preventDefault()
        })
        if (item.type === 'ui-page') {
            // add the "+ group" button
            $('<a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> ' + c_('layout.group') + '</a>')
                .click(function (evt) {
                    list.editableList('addItem')
                    evt.preventDefault()
                })
                .appendTo(btnGroup)
        }
    }

    /**
     * Add group of actions to the right-side of a row in the sidebar editable list.
     * @param {Object} parent - jQuery object to add this button group as a child element to
     * @param {DashboardItem} dashboardItem - The page/group/widget that these actions are bound to
     */
    function addRowStateOptions (parent, dashboardItem) {
        const item = dashboardItem.node
        const nodes = ['ui-page', 'ui-link', 'ui-group']
        const btnGroup = $('<div>', { class: 'nrdb2-sb-list-header-state-options', id: item.id }).appendTo(parent)
        if (nodes.includes(item.type)) {
            const visibleIcon = (item.visible === 'false' || item.visible === false) ? 'fa-eye-slash' : 'fa-eye'
            const visibleBtn = $('<a href="#" title="Hide" class="nr-db-sb-tab-visible-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa ' + visibleIcon + '"></i></a>').appendTo(btnGroup)
            visibleBtn.on('click', function (evt) {
                const events = []

                evt.stopPropagation()
                evt.preventDefault()

                if (item.visible === 'true' || item.visible === true || item.visible === undefined) {
                    // toggle to hidden
                    item.visible = false
                    $(this).prop('title', 'Show')
                    $(this).find('i').addClass('fa-eye-slash').removeClass('fa-eye')
                    events.push({
                        t: 'edit',
                        node: item,
                        changes: {
                            visible: true
                        },
                        dirty: item.dirty,
                        changed: item.changed
                    })
                } else {
                    // toggle to shown
                    item.visible = true
                    $(this).prop('title', 'Hide')
                    $(this).find('i').addClass('fa-eye').removeClass('fa-eye-slash')
                    events.push({
                        t: 'edit',
                        node: item,
                        changes: {
                            visible: false
                        },
                        dirty: item.dirty,
                        changed: item.changed
                    })
                }
                recordEvents(events)
            })
            const disabledIcon = (item.disabled === 'true' || item.disabled === true) ? 'fa-lock' : 'fa-unlock'
            const disabledBtn = $('<a href="#" class="nr-db-sb-tab-visible-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa ' + disabledIcon + '"></i></a>').appendTo(btnGroup)
            disabledBtn.on('click', function (evt) {
                const events = []

                evt.stopPropagation()
                evt.preventDefault()

                if (item.disabled === 'true' || item.disabled === true) {
                    // toggle to hidden
                    item.disabled = false
                    $(this).prop('title', 'Disable')
                    $(this).find('i').addClass('fa-unlock').removeClass('fa-lock')
                    events.push({
                        t: 'edit',
                        node: item,
                        changes: {
                            disabled: true
                        },
                        dirty: item.dirty,
                        changed: item.changed
                    })
                } else {
                    // toggle to shown
                    item.disabled = true
                    $(this).prop('title', 'Enable')
                    $(this).find('i').addClass('fa-lock').removeClass('fa-unlock')
                    events.push({
                        t: 'edit',
                        node: item,
                        changes: {
                            disabled: false
                        },
                        dirty: item.dirty,
                        changed: item.changed
                    })
                }
                recordEvents(events)
            })
        }
    }

    /**
     * Adds child list of groups for a given page
     * @param {String} pageId - The id of the page that these groups belong to
     * @param {Object} container - The jQuery object to append the groups list to
     * @param {Object[]} groups - The list of groups to add to the list
     * @param {DashboardItemLookup} widgetsByGroup - The lookup of widgets by group
     */
    function addGroupOrderingList (pageId, container, groups, widgetsByGroup) {
        // ordered list of groups to live within a container (e.g. page list item)
        const groupsOL = $('<ol>', { class: 'nrdb2-sb-group-list' }).appendTo(container).editableList({
            sortable: '.nrdb2-sb-groups-list-header',
            addButton: false,
            height: 'auto',
            connectWith: '.nrdb2-sb-group-list',
            addItem: function (container, i, group) {
                if (!group || !group.id) {
                    // this is a new page that's been added and we need to setup the basics
                    group = addDefaultGroup(pageId)
                    RED.editor.editConfig('', group.type, group.id)
                }

                const widgets = widgetsByGroup[group.id] || []
                const titleRow = $('<div>', { class: 'nrdb2-sb-list-header nrdb2-sb-groups-list-header' }).appendTo(container)
                $('<i class="nrdb2-sb-list-handle nrdb2-sb-group-list-handle fa fa-bars"></i>').appendTo(titleRow)
                const chevron = $('<i class="fa fa-angle-down nrdb2-sb-list-chevron">', { style: 'width:10px;' }).appendTo(titleRow)
                const groupicon = 'fa-table'
                $('<i>', { class: 'nrdb2-sb-icon nrdb2-sb-group-icon fa ' + groupicon }).appendTo(titleRow)
                $('<span>', { class: 'nrdb2-sb-title' }).text(group.name || group.id).appendTo(titleRow)
                $('<span>', { class: 'nrdb2-sb-info' }).text(`${widgets.length} Widgets`).appendTo(titleRow)

                const actions = $('<div>', { class: 'nrdb2-sb-list-header-actions' }).appendTo(titleRow)
                addRowActions(actions, group)
                addRowStateOptions(actions, group)

                // adds widgets within this group
                const widgetsList = $('<div>', { class: 'nrdb2-sb-widget-list-container' }).appendTo(container)

                // add chevron/list toggle
                titleRow.click(titleToggle(group.id, widgetsList, chevron))

                addWidgetToList(group.id, widgetsList, widgets)
            },
            sortItems: function (items) {
                // track any changes
                const events = []

                // check if we have any new widgets added to this list
                items.each((i, el) => {
                    const dbItem = el.data('data')
                    const widget = dbItem?.node || {}
                    if (widget.page !== pageId) {
                        const oldPageId = widget.page
                        widget.page = pageId
                        events.push({
                            t: 'edit',
                            node: widget,
                            changes: {
                                page: oldPageId
                            },
                            dirty: widget.changed,
                            changed: widget.dirty
                        })
                    }
                })

                updateItemOrder(items, events)

                // add our changes to NR history and trigger whether or not we need to redeploy
                recordEvents(events)
            },
            sort: function (a, b) {
                return Number(a.order) - Number(b.order)
            }
        })

        groups.forEach(function (group) {
            if (RED._db2debug) { if (RED._db2debug) { console.log('dashboard 2: ui_base.html: addGroupOrderingList: adding group', group) } }
            groupsOL.editableList('addItem', group)
        })

        return groupsOL
    }

    /**
     *  Adds  list of widgets underneath a group
     * @param {String} groupId - The id of the group that these widgets belong to
     * @param {JQuery} container - The jQuery object to append the widgets list to
     * @param {DashboardItem[]} widgets - The list of widgets to add to the list
     */
    function addWidgetToList (groupId, container, widgets) {
        // ordered list of groups to live within a container (e.g. page list item)
        const widgetsOL = $('<ol>', { class: 'nrdb2-sb-widget-list' }).appendTo(container).editableList({
            sortable: '.nrdb2-sb-widgets-list-header',
            addButton: false,
            height: 'auto',
            connectWith: '.nrdb2-sb-widget-list',
            addItem: function (container, i, /** @type {DashboardItem} */ widget) {
                const titleRow = $('<div>', { class: 'nrdb2-sb-list-header nrdb2-sb-widgets-list-header' }).appendTo(container)
                $('<i class="nrdb2-sb-list-handle nrdb2-sb-widget-list-handle fa fa-bars"></i>').appendTo(titleRow)
                let widgetIcon = 'fa fa-image'
                if (widget.isSubflowInstance) {
                    // In this MVP, subflow instances are constrained to stay within own group.
                    container.parent().addClass('red-ui-editableList-item-constrained')
                    // change the icon to use the built-in subflow icon
                    widgetIcon = 'nrdb2-sb-subflow-icon'
                    // apply a tooltip to further clarify this is a subflow
                    titleRow.attr('title', widget.subflowName || 'Subflow instance')
                }
                $('<i>', { class: 'nrdb2-sb-icon nrdb2-sb-widget-icon ' + widgetIcon }).appendTo(titleRow)
                $('<span>', { class: 'nrdb2-sb-title' }).text(widget.label?.trim() || widget.id).appendTo(titleRow)
                const actions = $('<div>', { class: 'nrdb2-sb-list-header-actions' }).appendTo(titleRow)
                addRowActions(actions, widget)
            },
            sortItems: function (items) {
                // track any changes
                const events = []

                // check if we have any new widgets added to this list
                items.each((i, el) => {
                    const dbItem = el.data('data')
                    const widget = dbItem?.node || {}
                    if (widget.group !== groupId) {
                        const oldGroupId = widget.group
                        widget.group = groupId
                        events.push({
                            t: 'edit',
                            node: widget,
                            changes: {
                                group: oldGroupId
                            },
                            dirty: widget.dirty,
                            changed: widget.changed
                        })
                    }
                })

                updateItemOrder(items, events)

                // add our changes to NR history and trigger whether or not we need to redeploy
                recordEvents(events)
            },
            sort: function (a, b) {
                return Number(a.order) - Number(b.order)
            }
        })

        widgets.forEach(function (w) {
            widgetsOL.editableList('addItem', w)
        })
    }

    // expand / collapse buttons
    let layoutDisplayLevel = 2 // all open by default
    const getGroupsInLayout = function () {
        const content = $('.nrdb2-layout-order-editor > .red-ui-editableList .nrdb2-sb-widget-list-container')
        return {
            content,
            chevrons: content.parent().find('div.nrdb2-sb-list-header > .nrdb2-sb-list-chevron')
        }
    }
    const getPagesInLayout = function () {
        const content = $('.nrdb2-layout-order-editor > .red-ui-editableList .nrdb2-sb-group-list-container')
        return {
            content,
            chevrons: content.parent().find('div.nrdb2-sb-pages-list-header > .nrdb2-sb-list-chevron')
        }
    }
    const collapseLayoutItems = function ({ chevrons, content }) {
        chevrons.css({ transform: 'rotate(-90deg)' })
        content.slideUp()
        content.addClass('nr-db-sb-collapsed')
    }
    const expandLayoutItems = function ({ chevrons, content }) {
        chevrons.css({ transform: '' })
        content.slideDown()
        content.removeClass('nr-db-sb-collapsed')
    }
    /**
     * Update the visibility of the layout editor expandable lists
     * @param {0|1|2} level - 0 = collapse all, 1 = expand pages (groups collapsed), 2 = expand pages and groups (to expose widgets)
     */
    const updateLayoutVisibility = function (level) {
        if (RED._db2debug) { console.log('dashboard 2: ui_base.html: updateLayoutVisibility(level)', level) }
        if (level === 2) {
            expandLayoutItems(getGroupsInLayout())
            expandLayoutItems(getPagesInLayout())
        } else if (level === 1) {
            expandLayoutItems(getPagesInLayout())
            collapseLayoutItems(getGroupsInLayout())
        } else {
            collapseLayoutItems(getGroupsInLayout())
            collapseLayoutItems(getPagesInLayout())
        }
    }

    function buildLayoutOrderEditor (parent) {
        if (RED._db2debug) { console.log('dashboard 2: ui_base.html: buildLayoutOrderEditor (parent)', parent) }

        // layout/order editor
        const divTabs = $('.nrdb2-layout-order-editor').length ? $('.nrdb2-layout-order-editor') : $('<div>', { class: 'nrdb2-layout-order-editor nrdb2-sidebar-tab-content' }).appendTo(parent)

        // section header - Pages
        const pagesHeader = $('<div>', { class: 'nrdb2-sidebar-header' }).appendTo(divTabs)
        $('<b>').html(c_('layout.pages')).appendTo(pagesHeader)

        // toggle "all" buttons
        const buttonGroup = $('<div>', { class: 'nrdb2-sb-list-button-group' }).appendTo(pagesHeader)

        const buttonCollapse = $('<a href="#" class="editor-button editor-button-small nrdb2-sb-list-header-button"><i class="fa fa-angle-double-up"></i></a>')
            .click(function (evt) {
                evt.preventDefault()
                if (--layoutDisplayLevel < 0) { layoutDisplayLevel = 0 }
                updateLayoutVisibility(layoutDisplayLevel)
            })
            .appendTo(buttonGroup)
        RED.popover.tooltip(buttonCollapse, c_('layout.collapse'))

        // expand button
        const buttonExpand = $('<a href="#" class="editor-button editor-button-small nrdb2-sb-list-header-button"><i class="fa fa-angle-double-down"></i></a>')
            .click(function (evt) {
                if (++layoutDisplayLevel > 2) { layoutDisplayLevel = 2 }
                updateLayoutVisibility(layoutDisplayLevel)
            }).appendTo(buttonGroup)
            .appendTo(buttonGroup)
        RED.popover.tooltip(buttonExpand, c_('layout.expand'))

        // add link button
        $('<a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> ' + c_('layout.link') + '</a>')
            .click(function (evt) {
                pagesOL.editableList('addItem', { type: 'ui-link' })
                evt.preventDefault()
            })
            .appendTo(buttonGroup)

        // add page button
        $('<a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> ' + c_('layout.page') + '</a>')
            .click(function (evt) {
                pagesOL.editableList('addItem')
                evt.preventDefault()
            })
            .appendTo(buttonGroup)

        divTabs.append('<div class="nrdb2-layout-helptext">' + c_('label.layoutMessage') + '</div>')

        /** @type {DashboardItemLookup} */
        const pages = {}
        const links = {}
        /** @type {DashboardItemLookup} */
        const groupsByPage = {}
        const unattachedGroups = []
        /** @type {DashboardItemLookup} */
        const widgetsByGroup = {}
        const subflowDefinitions = new Map()
        // get all pages & all groups
        RED.nodes.eachConfig(function (n) {
            if (n.type === 'ui-page' && !!n.ui) {
                pages[n.id] = toDashboardItem(n)
            } else if (n.type === 'ui-link') {
                links[n.id] = toDashboardItem(n)
            } else if (n.type === 'ui-group') {
                const p = n.page
                if (!p) {
                    unattachedGroups.push(toDashboardItem(n))
                } else {
                    if (!groupsByPage[p]) {
                        groupsByPage[p] = []
                    }
                    groupsByPage[p].push(toDashboardItem(n))
                }
            }
        })

        // get all widgets
        const uiNodesWithGroupProp = []
        RED.nodes.eachNode(function (n) {
            if (/^ui-/.test(n.type) && n.group) {
                uiNodesWithGroupProp.push(n)
                if (!widgetsByGroup[n.group]) {
                    widgetsByGroup[n.group] = []
                }
                widgetsByGroup[n.group].push(toDashboardItem(n))
                if (n.z) {
                    const subflowDef = RED.nodes.subflow(n.z)
                    if (subflowDef) {
                        subflowDefinitions.set('subflow:' + subflowDef.id, subflowDef)
                    }
                }
            }
        })

        // update `widgetsByGroup` for subflow instances where its env has an entry which
        // is a ui-group
        RED.nodes.eachNode(function (n) {
            if (subflowDefinitions.has(n.type)) {
                const subflowDef = subflowDefinitions.get(n.type)
                const subflowInstance = n
                if (subflowDef && subflowDef.env && subflowDef.env.length > 0) {
                    /** @type {{name:String, type:String, value:String}[]} */
                    const envDefsWithUIGroup = subflowDef.env.filter(env => env.type === 'ui-group' && env.ui?.type === 'conf-types')
                    for (const envDef of envDefsWithUIGroup) {
                        const groupNameAsEnv = '${' + envDef.name + '}'

                        if (widgetsByGroup[groupNameAsEnv]) {
                            // at this point, we know that the widgets in widgetsByGroup[groupNameAsEnv] belong to the group defined by the env var of the subflow instance
                            // get the actual group id from the subflow instance env vars where the name matches the envDef.name
                            if (subflowInstance.env) {
                                const groupEnvVar = subflowInstance.env.find(env => env.name === envDef.name)
                                if (groupEnvVar) {
                                    const groupId = groupEnvVar.value
                                    if (!widgetsByGroup[groupId]) {
                                        widgetsByGroup[groupId] = []
                                    }
                                    const sfItem = toDashboardItem(n)
                                    sfItem.isSubflowInstance = true
                                    sfItem.subflowName = RED.utils.getNodeLabel(subflowDef)
                                    if (!sfItem.label?.trim() || sfItem.label === sfItem.id) {
                                        // label was defaulted to id, so we should use the label from the subflowDef
                                        sfItem.label = sfItem.subflowName
                                    }
                                    widgetsByGroup[groupId].push(sfItem)
                                }
                            }
                        }
                    }
                }
            }
        })

        const pagesOL = $('<ol>', { class: 'nrdb2-sb-pages-list' }).appendTo(divTabs).editableList({
            sortable: '.nrdb2-sb-pages-list-header',
            addButton: false,
            addItem: function (container, i, item) {
                if (item && item.type === 'ui-link') {
                    // want to create a new link
                    if (!item || !item.id) {
                        // create a default link
                        item = addDefaultLink()
                        RED.editor.editConfig('', item.type, item.id)
                    }
                    // add it to the list of pages/links
                    container.addClass('nrdb2-sb-pages-list-item')
                    const titleRow = $('<div>', { class: 'nrdb2-sb-list-header nrdb2-sb-pages-list-header' }).appendTo(container)

                    // build title row
                    $('<i class="nrdb2-sb-list-handle nrdb2-sb-page-list-handle fa fa-bars"></i>').appendTo(titleRow)
                    const linkIcon = 'fa-link'
                    $('<i>', { class: 'nrdb2-sb-icon nrdb2-sb-tab-icon fa ' + linkIcon }).appendTo(titleRow)
                    $('<span>', { class: 'nrdb2-sb-title' }).text(item.name || item.id).appendTo(titleRow)

                    // link - actions
                    const actions = $('<div>', { class: 'nrdb2-sb-list-header-actions' }).appendTo(titleRow)
                    // add "Edit" and "Focus" buttons
                    addRowActions(actions, item)
                    // Add visibility/disabled options
                    addRowStateOptions(actions, item)
                } else {
                    // is a page, with groups and widgets inside
                    if (!item || !item.id) {
                        // this is a new page that's been added and we need to setup the basics
                        item = addDefaultPage()
                        RED.editor.editConfig('', item.type, item.id)
                    }
                    const groups = groupsByPage[item.id] || []

                    container.addClass('nrdb2-sb-pages-list-item')

                    const titleRow = $('<div>', { class: 'nrdb2-sb-list-header nrdb2-sb-pages-list-header' }).appendTo(container)
                    const groupsList = $('<div>', { class: 'nrdb2-sb-group-list-container' }).appendTo(container)

                    // build title row
                    $('<i class="nrdb2-sb-list-handle nrdb2-sb-page-list-handle fa fa-bars"></i>').appendTo(titleRow)
                    const chevron = $('<i class="fa fa-angle-down nrdb2-sb-list-chevron">', { style: 'width:10px;' }).appendTo(titleRow)
                    const tabicon = 'fa-object-group'
                    $('<i>', { class: 'nrdb2-sb-icon nrdb2-sb-tab-icon fa ' + tabicon }).appendTo(titleRow)
                    $('<span>', { class: 'nrdb2-sb-title' }).text(item.name || item.id).appendTo(titleRow)
                    $('<span>', { class: 'nrdb2-sb-info' }).text(`${groups.length} Groups`).appendTo(titleRow)

                    // adds groups within this page
                    titleRow.click(titleToggle(item.id, groupsList, chevron))
                    const groupsOL = addGroupOrderingList(item.id, groupsList, groups, widgetsByGroup)

                    // page - actions
                    const actions = $('<div>', { class: 'nrdb2-sb-list-header-actions' }).appendTo(titleRow)
                    addRowActions(actions, item, groupsOL)
                    addRowStateOptions(actions, item)
                }
                // ensure all pages/links have the correct order value
                const events = []
                updateItemOrder(pagesOL.editableList('items'), events)
                // add our changes to NR history and trigger whether or not we need to redeploy
                recordEvents(events)
            },
            sortItems: function (items) {
                // runs when an item is explicitly moved in the order
                // track any changes
                const events = []
                updateItemOrder(items, events)

                // add our changes to NR history and trigger whether or not we need to redeploy
                recordEvents(events)
            },
            sort: function (a, b) {
                return Number(a.order) - Number(b.order)
            }
        })

        const items = {
            ...pages,
            ...links
        }

        Object.values(items).sort((a, b) => a.order - b.order).forEach(function (item) {
            let groups = []
            if (item.type === 'ui-page' && item.id) {
                if (RED._db2debug) { console.log('dashboard 2: ui_base.html: buildLayoutOrderEditor: adding groups', groups) }
                groups = groupsByPage[item.id] || []
            }
            if (item) {
                pagesOL.editableList('addItem', item)
            }
        })

        // add Unattached Groups to the bottom
        if (unattachedGroups.length > 0) {
            const unattachedGroupsSection = $('<div>', { class: 'nrdb2-sidebar-header', style: 'padding-top: 12px;' }).appendTo(divTabs)
            $('<b>').html(c_('layout.unattachedGroups')).appendTo(unattachedGroupsSection)
            divTabs.append('<div class="nrdb2-layout-helptext">' + c_('label.unattachedMessage') + '</div>')

            // we have some groups bound to a page that no longer exists
            const unattachedGroupsOL = $('<ol>', { class: 'nrdb2-sb-unattached-groups-list' }).appendTo(divTabs).editableList({
                sortable: '.nrdb2-sb-unattached-groups-list-header',
                addButton: false,
                addItem: function (container, i, group) {
                    if (!group || !group.id) {
                        // this is a new group that's been added and we need to setup the basics
                        group = addDefaultGroup()
                        RED.editor.editConfig('', group.type, group.id)
                    }
                    container.addClass('nrdb2-sb-unattached-groups-list-item')

                    const titleRow = $('<div>', { class: 'nrdb2-sb-list-header nrdb2-sb-unattached-groups-list-header' }).appendTo(container)
                    const tabicon = 'fa-table'
                    $('<i>', { class: 'nrdb2-sb-icon nrdb2-sb-tab-icon fa ' + tabicon }).appendTo(titleRow)
                    $('<span>', { class: 'nrdb2-sb-title' }).text(group.name || group.id).appendTo(titleRow)
                    $('<span>', { class: 'nrdb2-sb-info' }).text('No Page Assigned').appendTo(titleRow)

                    // group - actions
                    const actions = $('<div>', { class: 'nrdb2-sb-list-header-actions' }).appendTo(titleRow)
                    addRowActions(actions, group)
                }
            })

            unattachedGroups.forEach(function (group) {
                unattachedGroupsOL.editableList('addItem', group)
            })
        }

        // call updateLayoutVisibility to sync display level
        updateLayoutVisibility(layoutDisplayLevel)
    }

    function buildThemesEditor (parent) {
        // layout/order editor
        const divTabs = $('.nrdb2-themes-editor').length ? $('.nrdb2-themes-editor') : $('<div>', { class: 'nrdb2-themes-editor nrdb2-sidebar-tab-content' }).appendTo(parent)

        // section header - Pages
        const themeHeader = $('<div>', { class: 'nrdb2-sidebar-header' }).appendTo(divTabs)
        $('<b>').html(c_('themes.header')).appendTo(themeHeader)

        // button group
        const buttonGroup = $('<div>', { class: 'nrdb2-sb-list-button-group' }).appendTo(themeHeader)

        // add theme button
        $('<a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> ' + c_('themes.theme') + '</a>')
            .click(function (evt) {
                themesOL.editableList('addItem')
                evt.preventDefault()
            })
            .appendTo(buttonGroup)

        divTabs.append('<div class="nrdb2-layout-helptext">' + c_('label.themingMessage') + '</div>')

        const themes = {}

        // get all themes
        RED.nodes.eachConfig(function (n) {
            if (n.type === 'ui-theme') {
                themes[n.id] = n
            }
        })

        const themesOL = $('<ol>', { class: 'nrdb2-sb-pages-list' }).appendTo(divTabs).editableList({
            sortable: '.nrdb2-sb-pages-list-header',
            addButton: false,
            addItem: function (container, i, theme) {
                if (!theme || !theme.id) {
                    // this is a new theme that's been added and we need to setup the basics
                    theme = addDefaultTheme()
                    RED.editor.editConfig('', theme.type, theme.id)
                }
                container.addClass('nrdb2-sb-pages-list-item')

                const titleRow = $('<div>', { class: 'nrdb2-sb-list-header nrdb2-sb-themes-list-header' }).appendTo(container)
                const tabicon = 'fa-paint-brush'
                $('<i>', { class: 'nrdb2-sb-icon nrdb2-sb-tab-icon fa ' + tabicon }).appendTo(titleRow)
                $('<span>', { class: 'nrdb2-sb-title' }).text(theme.name || theme.id).appendTo(titleRow)
                $('<span>', { class: 'nrdb2-sb-info' }).text(theme.users.length + ' ' + (theme.users.length > 1 ? c_('label.pages') : c_('label.page'))).appendTo(titleRow)

                const palette = $('<div>', { class: 'nrdb2-sb-palette' }).appendTo(titleRow)
                const colors = theme.colors

                palette.append($('<div>', { class: 'nrdb2-sb-palette-color', style: `background-color: ${colors.surface}` }))
                palette.append($('<div>', { class: 'nrdb2-sb-palette-color', style: `background-color: ${colors.primary}` }))
                palette.append($('<div>', { class: 'nrdb2-sb-palette-color', style: `background-color: ${colors.bgPage}` }))
                palette.append($('<div>', { class: 'nrdb2-sb-palette-color', style: `background-color: ${colors.groupBg}` }))
                palette.append($('<div>', { class: 'nrdb2-sb-palette-color', style: `background-color: ${colors.groupOutline}` }))

                // theme - actions
                const actions = $('<div>', { class: 'nrdb2-sb-list-header-actions' }).appendTo(titleRow)
                addRowActions(actions, theme)
            }
        })

        Object.values(themes).forEach(function (theme) {
            themesOL.editableList('addItem', theme)
        })
    }

    function refreshSidebarEditors () {
        try {
            refreshBusy = true
            if (RED._db2debug) { console.log('dashboard 2: ui_base.html: refreshSidebarEditors ()') }
            const layoutOrderDiv = $('.nrdb2-layout-order-editor')
            const themesDiv = $('.nrdb2-themes-editor')
            // empty the list if any items exist
            if (layoutOrderDiv.length) {
                // TODO: create a lookup of which items are expanded / collapsed
                layoutOrderDiv.empty()
            }
            if (themesDiv.length) {
                // TODO: create a lookup of which items are expanded / collapsed
                themesDiv.empty()
            }

            // now rebuild
            buildLayoutOrderEditor()
            buildThemesEditor()

            // finally, restore previous state of expanded/collapsed items
            // TODO: expand/collapse any items that were expanded before
            // for now, we will just re-sync the display level
            updateLayoutVisibility(layoutDisplayLevel)
        } finally {
            refreshBusy = false
        }
    }

    function addSidebarTab (label, id, tabs, sidebar) {
        $(`<li id="dashboard-2-tab-${id}" class="red-ui-tab" style="min-width: 90px; width: fit-content"><a class="red-ui-tab-label" style="padding-inline: 12px" title="Layout"><span>${label}</span></a></li>`).appendTo(tabs)

        // Add in Tab Content
        const content = $(`<div id="dashboard-2-${id}" class="red-ui-tab-content" style="height: calc(100% - 72px);"></div>`).appendTo(sidebar)
        return content
    }

    function addSidebar () {
        if (RED._db2debug) { console.log('dashboard 2: ui_base.html: addSidebar ()') }
        RED.sidebar.addTab({
            id: 'dashboard-2.0',
            label: c_('label.dashboard2'),
            name: c_('label.dashboard2'),
            content: sidebar,
            closeable: true,
            pinned: true,
            disableOnEdit: true,
            iconClass: 'fa fa-bar-chart',
            action: '@flowfuse/node-red-dashboard:show-dashboard-2.0-tab',
            onchange: () => {
                sidebar.empty()

                // UI Base Header
                RED.nodes.eachConfig(function (n) {
                    if (n.type === 'ui-base') {
                        const base = n
                        sidebar.append(dashboardLink(base.id, base.name, base.path))
                        const divTab = $('<div class="red-ui-tabs">').appendTo(sidebar)

                        const ulDashboardTabs = $('<ul id="dashboard-tabs-list"></ul>').appendTo(divTab)

                        // Add in Tabs
                        // Tab - Pages
                        const pagesContent = addSidebarTab(c_('label.layout'), 'pages', ulDashboardTabs, sidebar)
                        const themesContent = addSidebarTab(c_('label.theming'), 'themes', ulDashboardTabs, sidebar)

                        // check for any third-party tab definitions
                        RED.plugins.getPluginsByType('node-red-dashboard-2').forEach(plugin => {
                            if (plugin.tabs) {
                                plugin.tabs.forEach(tab => {
                                    // add tab to sidebar
                                    const container = addSidebarTab(tab.label, tab.id, ulDashboardTabs, sidebar)
                                    container.hide()
                                    tab.init(base, container)
                                })
                            }
                        })

                        // on tab click, show the tab content, and hide the others
                        ulDashboardTabs.children().on('click', function (evt) {
                            const tab = $(this)
                            const tabContent = $('#' + tab.attr('id').replace('-tab', ''))
                            ulDashboardTabs.children().removeClass('active')
                            tab.addClass('active')
                            $('.red-ui-tab-content').hide()
                            tabContent.show()
                            evt.preventDefault()
                        })

                        // default to first tab
                        ulDashboardTabs.children().first().trigger('click')

                        // add page/layout editor
                        buildLayoutOrderEditor(pagesContent)
                        // add Themes View
                        buildThemesEditor(themesContent)
                    }
                })
            }
        })
        RED.actions.add('@flowfuse/node-red-dashboard:show-dashboard-2.0-tab', function () {
            RED.sidebar.show('flowfuse-nr-tools')
        })
    }

    /**
     * jQuery widget to provide a selector for the sizing (width & height) of a widget & group
     */
    $.widget('nodereddashboard.elementSizer', {
        _create: function () {
            // convert to i18 text
            function c_ (x) {
                return RED._(`@flowfuse/node-red-dashboard/ui-base:ui-base.${x}`)
            }

            const thisWidget = this
            let gridWidth = 6
            const width = parseInt($(this.options.width).val() || 0)
            const height = parseInt(hasProperty(this.options, 'height') ? $(this.options.height).val() : '1') || 0
            const hasAuto = (!hasProperty(this.options, 'auto') || this.options.auto)

            this.element.css({
                minWidth: this.element.height() + 4
            })
            const autoText = c_('auto')
            const sizeLabel = (width === 0 && height === 0) ? autoText : width + (hasProperty(this.options, 'height') ? ' x ' + height : '')
            this.element.text(sizeLabel).on('mousedown', function (evt) {
                evt.stopPropagation()
                evt.preventDefault()

                const width = parseInt($(thisWidget.options.width).val() || 0)
                const height = parseInt(hasProperty(thisWidget.options, 'height') ? $(thisWidget.options.height).val() : '1') || 0
                let maxWidth = 0
                let maxHeight
                let fixedWidth = false
                const fixedHeight = false
                const group = $(thisWidget.options.group).val()
                if (group) {
                    const groupNode = RED.nodes.node(group)
                    if (groupNode) {
                        gridWidth = Math.max(6, groupNode.width, +width)
                        maxWidth = groupNode.width || gridWidth
                        fixedWidth = true
                    }
                    maxHeight = Math.max(6, +height + 1)
                } else {
                    gridWidth = Math.max(12, +width)
                    maxWidth = gridWidth
                    maxHeight = height + 1
                    // fixedHeight = false;
                }

                const pos = $(this).offset()
                const container = $('<div>').css({
                    position: 'absolute',
                    background: 'var(--red-ui-secondary-background, white)',
                    padding: '5px 10px 10px 10px',
                    border: '1px solid var(--red-ui-primary-border-color, grey)',
                    zIndex: '20',
                    borderRadius: '4px',
                    display: 'none'
                }).appendTo(document.body)

                let closeTimer
                container.on('mouseleave', function (evt) {
                    closeTimer = setTimeout(function () {
                        container.fadeOut(200, function () { $(this).remove() })
                    }, 100)
                })
                container.on('mouseenter', function () {
                    clearTimeout(closeTimer)
                })

                const label = $('<div>').css({
                    fontSize: '13px',
                    color: 'var(--red-ui-tertiary-text-color, #aaa)',
                    float: 'left',
                    paddingTop: '1px'
                }).appendTo(container).text((width === 0 && height === 0) ? autoText : (width + (hasProperty(thisWidget.options, 'height') ? ' x ' + height : '')))
                label.hover(function () {
                    $(this).css('text-decoration', 'underline')
                }, function () {
                    $(this).css('text-decoration', 'none')
                })

                label.click(function (e) {
                    const group = $(thisWidget.options.group).val()
                    let groupNode = null
                    if (group) {
                        groupNode = RED.nodes.node(group)
                        if (groupNode === null) {
                            return
                        }
                    }
                    $(thisWidget).elementSizerByNum({
                        width: thisWidget.options.width,
                        height: thisWidget.options.height,
                        groupNode,
                        pos,
                        label: thisWidget.element,
                        has_height: hasProperty(thisWidget.options, 'height')
                    })
                    closeTimer = setTimeout(function () {
                        container.fadeOut(200, function () {
                            $(this).remove()
                        })
                    }, 100)
                })

                const buttonRow = $('<div>', { style: 'text-align:right; height:25px;' }).appendTo(container)

                if (hasAuto) {
                    $('<a>', { href: '#', class: 'editor-button editor-button-small', style: 'margin-bottom:5px' })
                        .text(autoText)
                        .appendTo(buttonRow)
                        .on('mouseup', function (evt) {
                            thisWidget.element.text(autoText)
                            $(thisWidget.options.width).val(0).change()
                            $(thisWidget.options.height).val(0).change()
                            evt.preventDefault()
                            container.fadeOut(200, function () { $(this).remove() })
                        })
                }

                const cellBorder = '1px dashed var(--red-ui-secondary-border-color, lightGray)'
                const cellBorderExisting = '1px solid gray'
                const cellBorderHighlight = '1px dashed var(--red-ui-primary-border-color, black)'
                const rows = []
                const cells = []

                function addRow (i) {
                    const row = $('<div>').css({ padding: 0, margin: 0, height: '25px', 'box-sizing': 'border-box' }).appendTo(container)
                    rows.push(row)
                    cells.push([])
                    for (let j = 0; j < gridWidth; j++) {
                        addCell(i, j)
                    }
                }

                function addCell (i, j) {
                    const row = rows[i]
                    const cell = $('<div>').css({
                        display: 'inline-block',
                        width: '25px',
                        height: '25px',
                        borderRight: (j === (width - 1) && i < height) ? cellBorderExisting : cellBorder,
                        borderBottom: (i === (height - 1) && j < width) ? cellBorderExisting : cellBorder,
                        boxSizing: 'border-box',
                        cursor: 'pointer',
                        background: (j < maxWidth) ? 'var(--red-ui-secondary-background, #fff)' : 'var(--red-ui-node-background-placeholder, #eee)'
                    }).appendTo(row)
                    cells[i].push(cell)
                    if (j === 0) {
                        cell.css({ borderLeft: ((i <= height - 1) ? cellBorderExisting : cellBorder) })
                    }
                    if (i === 0) {
                        cell.css({ borderTop: ((j <= width - 1) ? cellBorderExisting : cellBorder) })
                    }
                    if (j < maxWidth) {
                        cell.data('w', j)
                        cell.data('h', i)
                        cell.on('mouseup', function () {
                            thisWidget.element.text(($(this).data('w') + 1) + (hasProperty(thisWidget.options, 'height') ? ' x ' + ($(this).data('h') + 1) : ''))
                            $(thisWidget.options.width).val($(this).data('w') + 1).change()
                            $(thisWidget.options.height).val($(this).data('h') + 1).change()
                            container.fadeOut(200, function () { $(this).remove() })
                        })
                        cell.on('mouseover', function () {
                            const w = $(this).data('w')
                            const h = $(this).data('h')
                            label.text((w + 1) + (hasProperty(thisWidget.options, 'height') ? ' x ' + (h + 1) : ''))
                            for (let y = 0; y < maxHeight; y++) {
                                for (let x = 0; x < maxWidth; x++) {
                                    cells[y][x].css({
                                        background: (y <= h && x <= w) ? 'var(--red-ui-secondary-background-selected, #ddd)' : 'var(--red-ui-secondary-background, #fff)',
                                        borderLeft: (x === 0 && y <= h) ? cellBorderHighlight : (x === 0) ? ((y <= height - 1) ? cellBorderExisting : cellBorder) : '',
                                        borderTop: (y === 0 && x <= w) ? cellBorderHighlight : (y === 0) ? ((x <= width - 1) ? cellBorderExisting : cellBorder) : '',
                                        borderRight: (x === w && y <= h) ? cellBorderHighlight : ((x === width - 1 && y <= height - 1) ? cellBorderExisting : cellBorder),
                                        borderBottom: (y === h && x <= w) ? cellBorderHighlight : ((y === height - 1 && x <= width - 1) ? cellBorderExisting : cellBorder)
                                    })
                                }
                            }
                            if (!fixedHeight && h === maxHeight - 1) {
                                addRow(maxHeight++)
                            }
                            if (!fixedWidth && w === maxWidth - 1) {
                                maxWidth++
                                gridWidth++
                                for (let r = 0; r < maxHeight; r++) {
                                    addCell(r, maxWidth - 1)
                                }
                            }
                        })
                    }
                }
                for (let i = 0; i < maxHeight; i++) {
                    addRow(i)
                }
                container.css({
                    top: (pos.top) + 'px',
                    left: (pos.left) + 'px'
                })
                container.fadeIn(200)
            })
        }
    })
})()
</script>

<script type="text/html" data-template-name="ui-base">
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-config-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-config-input-path"><i class="fa fa-bookmark"></i> <span data-i18n="ui-base.label.path"></label>
        <input type="text" id="node-config-input-path" disabled>
        <span style="display: block; margin-left: 105px; margin-top: 0px; font-style: italic; color: #bbb; font-size: 8pt;">This option is currently disabled and still in-development.</span>
    </div>
    <div class="form-row" style="margin-bottom: 0;">
        <label style="font-weight: 600; width: auto;" data-i18n="ui-base.label.sidebar"></label>
    </div>
    <div class="form-row" style="align-items: center;">
        <label style="margin-right: 5px; margin-bottom: 0px;" for="node-config-input-navigationStyle"><span data-i18n="ui-base.label.navigationStyle"></span></label>
        <select id="node-config-input-navigationStyle">
            <option value="default" data-i18n="ui-base.label.navigationStyleDefault"></option>
            <option value="fixed" data-i18n="ui-base.label.navigationStyleFixed"></option>
            <option value="icon" data-i18n="ui-base.label.navigationStyleIcon"></option>
            <option value="temporary" data-i18n="ui-base.label.navigationStyleTemporary"></option>
            <option value="none" data-i18n="ui-base.label.navigationStyleNone"></option>
        </select>
    </div>
    <div class="form-row form-row-flex" style="align-items: center;">
        <input style="margin: 8px 0 10px 16px; width:20px;" type="checkbox" id="node-config-input-showPathInSidebar">
        <label style="width:auto" for="node-config-input-showPathInSidebar"><span data-i18n="ui-base.label.showPath"></span></label>
    </div>
</script>
<script type="text/html" data-help-name="ui-base">
    <p>UI Base</p>
    <p>This is the foundational element for a Dashboard in Node-RED Dashboard 2.0</p>
    <p>A Dashboard is driven by a baseline layout which can be modified with some of the following settings</p>
    <dl class="message-properties">
        <dt>
            Sidebar Style
            <span class="property-type">option</span>
        </dt>
        <dd>
            <ul>
                <li><b>Collapsing: </b>(default) This open will shift the entire content of the Dashboard when opened, and not be visisble at all when closed.</li>
                <li><b>Fixed: </b>Will always remain open. At our mobile breakdpoint (768px), this value is overriden, and an "Appear Over" option is used.</li>
                <li><b>Collapse to icons: </b>Similar to "Collapsing" when opened, but when closed, the icons for each page still show.</li>
                <li><b>Appear over content: </b>Not visible when closed, and when open, will appear over the Dashboard content, without shifting it.</li>
                <li><b>Always hide: </b>The sidebar will not be visible under any circumstances. All pages are still accesible via their direct links or a <code>ui-control</code> node.</li>
            </ul>
        </dd>
    </dl>
</script>

</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-page] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui-page', {
        category: 'config',
        defaults: {
            name: {
                value: RED._('@flowfuse/node-red-dashboard/ui-page:ui-page.label.pageName'),
                required: true
            },
            ui: {
                type: 'ui-base',
                value: '',
                required: true
            },
            path: {
                value: -1,
                required: false
            },
            icon: {
                value: 'home',
                required: false
            },
            layout: {
                value: '',
                required: true
            },
            theme: {
                type: 'ui-theme',
                value: 'default',
                required: true
            },
            order: {
                value: -1
            },
            className: { value: '' },
            visible: { value: 'true' },
            disabled: { value: 'false' }
        },
        oneditprepare: function () {
            if (this.path === -1) {
                // we have no path set yet
                let pageCount = 0
                RED.nodes.eachConfig((cNode) => {
                    pageCount += cNode.type === 'ui-page' ? 1 : 0
                })
                this.path = '/page' + (pageCount + 1)
                $('#node-config-input-path').val(this.path)
            }

            $('#node-config-input-layout').typedInput({
                type: 'layout',
                types: [{
                    value: 'layout',
                    options: [
                        { value: 'grid', label: RED._('@flowfuse/node-red-dashboard/ui-page:ui-page.label.grid') },
                        { value: 'flex', label: RED._('@flowfuse/node-red-dashboard/ui-page:ui-page.label.fixed') },
                        { value: 'notebook', label: RED._('@flowfuse/node-red-dashboard/ui-page:ui-page.label.notebook') }
                    ]
                }],
                typeField: '#node-input-layoutType'
            })

            // backwards compatibility
            if (this.visible === undefined || this.visible === 'true') {
                this.visible = true
                $('#node-config-input-visible').val('true')
            }
            // backwards compatibility
            if (this.disabled === undefined || this.visible === 'false') {
                this.disabled = false
                $('#node-config-input-disabled').val('false')
            }
        },
        oneditsave: function () {
            // convert string to boolean
            const visible = $('#node-config-input-visible').val()
            if (visible === 'true') {
                this.visible = true
            } else {
                this.visible = false
            }

            // convert string to boolean
            const disabled = $('#node-config-input-disabled').val()
            if (disabled === 'true') {
                this.disabled = true
            } else {
                this.disabled = false
            }
        },
        label: function () {
            const baseNode = RED.nodes.node(this.ui)
            const base = baseNode ? baseNode.path : '/'
            const path = this.path || ''
            return `${this.name} [${base}${path}]` || 'UI Page'
        }
    })
</script>

<script type="text/html" data-template-name="ui-page">
    <div class="form-row">
        <label for="node-config-input-name"><i class="w-16 fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-config-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-config-input-ui"><i class="w-16 fa fa-sitemap"></i> <span data-i18n="ui-page.label.ui"></label>
        <input type="text" id="node-config-input-ui">
    </div>
    <div class="form-row">
        <label for="node-config-input-path"><i class="w-16 fa fa-link"></i> <span data-i18n="ui-page.label.path"></label>
        <input type="text" id="node-config-input-path">
    </div>
    <div class="form-row">
        <label for="node-config-input-icon"><i class="w-16 fa fa-home"></i> <span data-i18n="ui-page.label.icon"></label>
        <input type="text" id="node-config-input-icon">
    </div>
    <div class="form-row">
        <label for="node-config-input-theme"><i class="w-16 fa fa-paint-brush"></i> <span data-i18n="ui-page.label.theme"></label>
        <input type="text" id="node-config-input-theme">
    </div>
    <div class="form-row">
        <label for="node-config-input-layout"><i class="w-16 fa fa-th"></i> <span data-i18n="ui-page.label.layout"></label>
        <input type="text" id="node-config-input-layout">
        <input type="hidden" id="node-config-input-layoutType">
    </div>
    <div class="form-row" id="text-row-class">
        <label for="node-config-input-className"><i class="w-16 fa fa-code"></i> <span data-i18n="ui-page.label.class"></label>
        <input type="text" id="node-config-input-className" data-i18n="[placeholder]ui-page.label.classNamePlaceholder"/>
    </div>
    <div class="form-row" style="font-weight: 600;">
        <i class="w-16 fa fa-eye"></i> <span data-i18n="ui-page.label.defaultState">
    </div>
    <div class="form-row">
        <div style="display: flex; align-items: center; gap: 2px;">
            <label for="node-config-input-visible" style="margin-bottom: 0" data-i18n="ui-page.label.visibility"></label>
            <select id="node-config-input-visible" style="width: 150px;">
                <option value="true" data-i18n="ui-page.label.visible"></option>
                <option value="false" data-i18n="ui-page.label.hidden"></option>
            </select>
        </div>
    </div>
    <div class="form-row">
        <div style="display: flex; align-items: center; gap: 2px;">
            <label for="node-config-input-disabled" style="margin-bottom: 0" data-i18n="ui-page.label.interactivity"></label>
            <select id="node-config-input-disabled" style="width: 150px;">
                <option value="false" data-i18n="ui-page.label.active"></option>
                <option value="true" data-i18n="ui-page.label.disabled"></option>
            </select>
        </div>
    </div>
    <div class="form-row">
        <button onclick="RED.sidebar.show('dashboard-2.0')" class="editor-button editor-button-small" data-i18n="ui-page.label.openDashboardSidebar"></button>
    </div>

</script>
<script type="text/html" data-help-name="ui-page">
    <p>UI Page</p>
    <p>A single screen of content within your Dashboard.</p>
    <h3>Properties</h3>
    <dl class="message-properties">
        <dt>
            UI
            <span class="property-type">ui-base</span>
        </dt>
        <dd>
            The UI (ui-base) that this page will be added to.
        </dd>
        <dt>
            Path
            <span class="property-type">string</span>
        </dt>
        <dd>
            Extending the parent UI path, defines where this page renders
        </dd>
        <dt>
            Icon
            <span class="property-type">string</span>
        </dt>
        <dd>
            The icon to render alongside the page's name in the sidebar of the UI.
            We use the Material Design Icons, you can see a full list of the available icons <a href="https://pictogrammers.com/library/mdi/">here</a>.
            You do not need to include the `mdi-` prefix, just the name of the icon.
        </dd>
        <dt>
            Theme
            <span class="property-type">ui-theme</span>
        </dt>
        <dd>
            Choose from one of the available themes for the page.
            You can also create and customise your own themes.
        </dd>
        <dt>
            Layout
            <span class="property-type">Grid | Fixed | Notebook</span>
        </dt>
        <dd>
            Choose form one of the available Dashboard Layouts.
            You can read more about our layouts <a href="https://dashboard.flowfuse.com/layouts/grid.html">here</a>.
        </dd>
        <dt>
            Class
            <span class="property-type">string</span>
        </dt>
        <dd>
            Any custom CSS classes you want to append to the page's styling when rendered.
        </dd>
    </dl>
</script>

</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-link] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui-link', {
        category: 'config',
        defaults: {
            name: {
                value: RED._('@flowfuse/node-red-dashboard/ui-link:ui-link.label.linkName'),
                required: true
            },
            ui: {
                type: 'ui-base',
                value: '',
                required: true
            },
            path: {
                value: -1,
                required: false
            },
            icon: {
                value: 'home',
                required: false
            },
            order: {
                value: -1
            },
            visible: { value: true },
            disabled: { value: false }
        },
        oneditprepare: function () {
            // handle Node-RED's dislike for booleans on dropdowns
            if (this.visible === undefined || this.visible === true) {
                this.visible = true
                $('#node-config-input-visible').val('true')
            } else if (this.visible === false) {
                this.visible = false
                $('#node-config-input-visible').val('false')
            }
            // handle Node-RED's dislike for booleans on dropdowns
            if (this.disabled === undefined || this.disabled === false) {
                this.disabled = false
                $('#node-config-input-disabled').val('false')
            } else if (this.disabled === true) {
                this.disabled = true
                $('#node-config-input-disabled').val('true')
            }
        },
        oneditsave: function () {
            // convert string to boolean
            const visible = $('#node-config-input-visible').val()
            if (visible === 'true') {
                this.visible = true
            } else {
                this.visible = false
            }

            // convert string to boolean
            const disabled = $('#node-config-input-disabled').val()
            if (disabled === 'true') {
                this.disabled = true
            } else {
                this.disabled = false
            }
        },
        label: function () {
            const path = this.path || ''
            return `${this.name} [${path}]` || 'UI Link'
        }
    })
</script>

<script type="text/html" data-template-name="ui-link">
    <div class="form-row">
        <label for="node-config-input-name"><i class="w-16 fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-config-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-config-input-ui"><i class="w-16 fa fa-sitemap"></i> <span data-i18n="ui-link.label.ui"></label>
        <input type="text" id="node-config-input-ui">
    </div>
    <div class="form-row">
        <label for="node-config-input-path"><i class="w-16 fa fa-link"></i> <span data-i18n="ui-link.label.path"></label>
        <input type="text" id="node-config-input-path">
    </div>
    <div class="form-row">
        <label for="node-config-input-icon"><i class="w-16 fa fa-home"></i> <span data-i18n="ui-link.label.icon"></label>
        <input type="text" id="node-config-input-icon">
    </div>
    <div class="form-row" style="font-weight: 600;">
        <i class="w-16 fa fa-eye"></i> <span data-i18n="ui-link.label.defaultState">
    </div>
    <div class="form-row">
        <div style="display: flex; align-items: center; gap: 2px;">
            <label for="node-config-input-visible" style="margin-bottom: 0" data-i18n="ui-link.label.visibility"></label>
            <select id="node-config-input-visible" style="width: 150px;">
                <option value="true" data-i18n="ui-link.label.visible"></option>
                <option value="false" data-i18n="ui-link.label.hidden"></option>
            </select>
        </div>
    </div>
    <div class="form-row">
        <div style="display: flex; align-items: center; gap: 2px;">
            <label for="node-config-input-disabled" style="margin-bottom: 0" data-i18n="ui-link.label.interactivity"></label>
            <select id="node-config-input-disabled" style="width: 150px;">
                <option value="false" data-i18n="ui-link.label.active"></option>
                <option value="true" data-i18n="ui-link.label.disabled"></option>
            </select>
        </div>
    </div>
</script>

</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-group] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui-group', {
        category: 'config',
        defaults: {
            name: {
                value: RED._('@flowfuse/node-red-dashboard/ui-group:ui-group.label.groupName'),
                required: true
            },
            page: { type: 'ui-page', required: true },
            width: { value: 6 },
            height: { value: 1 },
            order: { value: -1 },
            showTitle: { value: true }, // show title on group card
            className: { value: '' },
            visible: { value: true },
            disabled: { value: false }
        },
        label: function () {
            const page = RED.nodes.node(this.page)?.name || ''
            return `${this.name} [${page}]` || 'UI Group'
        },
        oneditprepare: function () {
            if (this.disp) {
                this.showTitle = this.disp
            }
            $('#node-config-input-size').elementSizer({
                width: '#node-config-input-width',
                height: '#node-config-input-height',
                auto: false
            })

            // backwards compatibility
            if (this.visible === undefined || this.visible === true) {
                this.visible = true
                $('#node-config-input-visible').val('true')
            } else if (this.visible === false) {
                this.visible = false
                $('#node-config-input-visible').val('false')
            }
            // backwards compatibility
            if (this.disabled === undefined || this.disabled === false) {
                this.disabled = false
                $('#node-config-input-disabled').val('false')
            } else if (this.disabled === true) {
                this.disabled = true
                $('#node-config-input-disabled').val('true')
            }
        },
        oneditsave: function () {
            // convert string to boolean
            const visible = $('#node-config-input-visible').val()
            if (visible === 'true') {
                this.visible = true
            } else {
                this.visible = false
            }

            // convert string to boolean
            const disabled = $('#node-config-input-disabled').val()
            if (disabled === 'true') {
                this.disabled = true
            } else {
                this.disabled = false
            }
        }
    })
</script>

<script type="text/html" data-template-name="ui-group">
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-config-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-config-input-page"><i class="fa fa-bookmark"></i> <span data-i18n="ui-group.label.page"></label>
        <input type="text" id="node-config-input-page">
    </div>
    <div class="form-row">
        <label for="node-config-input-size"><i class="fa fa-arrows-h"></i> <span data-i18n="ui-group.label.size"></label>
        <input type="hidden" id="node-config-input-width">
        <input type="hidden" id="node-config-input-height">
        <button class="editor-button" id="node-config-input-size"></button>
    </div>
    <div class="form-row">
        <input style="margin:8px 0 10px 102px; width:20px;" type="checkbox" checked id="node-config-input-showTitle">
        <label style="width:auto" for="node-config-input-showTitle"><span data-i18n="ui-group.label.display-name"></span></label>
    </div>
    <div class="form-row" id="text-row-class">
        <label for="node-config-input-className"><i class="fa fa-code"></i> <span data-i18n="ui-group.label.className"></span></label>
        <input type="text" id="node-config-input-className" data-i18n="[placeholder]ui-group.label.classNamePlaceholder"/>
    </div>
    <div class="form-row" style="font-weight: 600;">
        <i class="w-16 fa fa-eye"></i> <span data-i18n="ui-group.label.defaultState"></span>
    </div>
    <div class="form-row">
        <div style="display: flex; align-items: center; gap: 2px;">
            <label for="node-config-input-visible" style="margin-bottom: 0" data-i18n="ui-group.label.visibility"></label>
            <select id="node-config-input-visible" style="width: 150px;">
                <option value="true" data-i18n="ui-group.label.visible"></option>
                <option value="false" data-i18n="ui-group.label.hidden"></option>
            </select>
        </div>
    </div>
    <div class="form-row">
        <div style="display: flex; align-items: center; gap: 2px;">
            <label for="node-config-input-disabled" style="margin-bottom: 0" data-i18n="ui-group.label.interactivity"></label>
            <select id="node-config-input-disabled" style="width: 150px;">
                <option value="false" data-i18n="ui-group.label.active"></option>
                <option value="true" data-i18n="ui-group.label.disabled"></option>
            </select>
        </div>
    </div>
    <div class="form-row">
        <button onclick="RED.sidebar.show('dashboard-2.0')" class="editor-button editor-button-small" data-i18n="ui-group.label.openDashboardSidebar"></button>
    </div>
</script>
<script type="text/html" data-help-name="ui-group">
    <p>Group</p>
    <p>
        A container for multiple UI Widgets. Groups can be used to organize and manage the layout of UI Widgets.
    </p>
</script>

</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-theme] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui-theme', {
        category: 'config',
        defaults: {
            name: {
                value: RED._('@flowfuse/node-red-dashboard/ui-theme:ui-theme.label.themeName'),
                required: true
            },
            // colors
            colors: {
                value: {
                    surface: '#ffffff',
                    primary: '#0094CE',
                    bgPage: '#eeeeee',
                    groupBg: '#ffffff',
                    groupOutline: '#cccccc'
                }
            },
            // sizes
            sizes: {
                value: {
                    pagePadding: '12px',
                    groupGap: '12px',
                    groupBorderRadius: '4px',
                    widgetGap: '12px'
                }
            }
        },
        oneditprepare: function () {
            function hasProperty (obj, prop) {
                return !!Object.prototype.hasOwnProperty.call(obj, prop)
            }

            if (!this.colors) {
                this.colors = {}
                // set default values
                this.colors.surface = '#ffffff'
                this.colors.primary = '#0094CE'
                // pages
                this.colors.bgPage = '#eeeeee'
                // groups
                this.colors.groupBg = '#ffffff'
                this.colors.groupOutline = '#cccccc'
            }

            if (!this.sizes) {
                this.sizes = {}
            }
            // set default values
            if (!hasProperty(this.sizes, 'pagePadding')) {
                this.sizes.pagePadding = '12px'
            }
            if (!hasProperty(this.sizes, 'groupGap')) {
                this.sizes.groupGap = '12px'
            }
            if (!hasProperty(this.sizes, 'groupBorderRadius')) {
                this.sizes.groupBorderRadius = '4px'
            }
            if (!hasProperty(this.sizes, 'widgetGap')) {
                this.sizes.widgetGap = '12px'
            }

            // loop over keys in this.colors
            Object.keys(this.colors).forEach((color) => {
                // get the value of the key
                const value = this.colors[color]
                // set the value of the input
                $('#node-config-input-' + color).val(value)
            })

            // loop over keys in this.sizes
            Object.keys(this.sizes).forEach((size) => {
                // get the value of the key
                let value = this.sizes[size]
                // value is a number, add `px` to the end
                value += (parseFloat(value).toString() === value) ? 'px' : ''
                // set the value of the input
                $('#node-config-input-' + size).val(value)
            })

            // update label b/g to match the colour input values
            // this provides nicer styling than the default browser styling
            const colorWrappers = $('.color-picker-wrapper')
            colorWrappers.each(function (i) {
                const wrapper = $(this)
                const colorPicker = wrapper.children("input[type='color']").eq(0)
                colorPicker.on('change', () => {
                    wrapper.css('background-color', colorPicker.val())
                })
                wrapper.css('background-color', colorPicker.val())
            })
        },
        oneditsave: function () {
            // update our config values from the input values
            Object.keys(this.colors).forEach((color) => {
                // set the value of the input
                this.colors[color] = $('#node-config-input-' + color).val()
            })

            // update our config values from the input values
            Object.keys(this.sizes).forEach((size) => {
                // get the value of the key
                let value = $('#node-config-input-' + size).val()
                // value is a number, add `px` to the end
                value += (parseFloat(value).toString() === value) ? 'px' : ''

                // set the value of the input
                this.sizes[size] = value
            })
        },
        label: function () {
            return `${this.name}` || 'UI Theme'
        }
    })
</script>

<script type="text/html" data-template-name="ui-theme">
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-config-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <h3 style="margin: 0; margin-bottom: 6px; border-bottom: 1px solid #eee; padding-bottom: 3px;" data-i18n="ui-theme.label.colors"></h3>
    <div class="form-row" style="margin-bottom: 3px;">
        <h4 style="margin-bottom: 0;"><i class="fa fa-bar-chart"></i> <span data-i18n="ui-theme.label.dashboard"></h4>
    </div>
    <div class="form-row form-row-flex labels-right" style="margin-bottom: 3px; gap: 9px;">
        <div>
            <label data-i18n="ui-theme.label.navigation"></label>
            <label class="color-picker-wrapper" for="node-config-input-primary" style="width: 100px; height: 32px; border-radius: 6px; border: 1px solid #ccc">
                <input type="color" id="node-config-input-surface" style="opacity: 0; width: 100%;"/>
            </label>
        </div>
        <div>
            <label data-i18n="ui-theme.label.primary"></label>
            <label class="color-picker-wrapper" for="node-config-input-primary" style="width: 100px; height: 32px; border-radius: 6px; border: 1px solid #ccc">
                <input type="color" id="node-config-input-primary" style="opacity: 0; width: 100%;"/>
            </label>
        </div>
    </div>
    <div class="form-row" style="margin-bottom: 3px;">
        <h4 style="margin-bottom: 0;"><i class="fa fa-object-group"></i> <span data-i18n="ui-theme.label.pages"></h4>
    </div>
    <div class="form-row labels-right" style="margin-bottom: 3px;">
        <label data-i18n="ui-theme.label.background"></label>
        <label class="color-picker-wrapper" for="node-config-input-background" style="width: 100px; height: 32px; border-radius: 6px; border: 1px solid #ccc">
            <input type="color" id="node-config-input-bgPage" style="opacity: 0; width: 100%;"/>
        </label>
    </div>
    <div class="form-row" style="margin-bottom: 3px;">
        <h4 style="margin-bottom: 0;"><i class="fa fa-table"></i> <span data-i18n="ui-theme.label.groups"></h4>
    </div>
    <div class="form-row form-row-flex labels-right" style="margin-bottom: 3px; gap: 9px;">
        <div>
            <label data-i18n="ui-theme.label.background"></label>
            <label class="color-picker-wrapper" for="node-config-input-background" style="width: 100px; height: 32px; border-radius: 6px; border: 1px solid #ccc">
                <input type="color" id="node-config-input-groupBg" style="opacity: 0; width: 100%;"/>
            </label>
        </div>
        <div>
            <label data-i18n="ui-theme.label.outline"></label>
            <label class="color-picker-wrapper" for="node-config-input-background" style="width: 100px; height: 32px; border-radius: 6px; border: 1px solid #ccc">
                <input type="color" id="node-config-input-groupOutline" style="opacity: 0; width: 100%;"/>
            </label>
        </div>
    </div>
    <h3 style="margin: 12px 0 6px; border-bottom: 1px solid #eee; padding-bottom: 3px;" data-i18n="ui-theme.label.sizings"></h3>
    <div class="form-row">
        <label for="node-config-input-pagePadding" data-i18n="ui-theme.label.pagePadding"></label>
        <input type="text" id="node-config-input-pagePadding">
    </div>
    <div class="form-row">
        <label for="node-config-input-groupGap" data-i18n="ui-theme.label.groupGap"></label>
        <input type="text" id="node-config-input-groupGap">
    </div>
    <div class="form-row">
        <label for="node-config-input-groupBorderRadius" data-i18n="ui-theme.label.groupBorderRadius"></label>
        <input type="text" id="node-config-input-groupBorderRadius">
    </div>
    <div class="form-row">
        <label for="node-config-input-widgetGap" data-i18n="ui-theme.label.widgetGap"></label>
        <input type="text" id="node-config-input-widgetGap">
    </div>
</script>

<style>
.labels-right label {
    text-align: right;
}
.labels-right label:first-child {
    padding-right: 3px;
}
.labels-right label:first-child:after {
    content: ':';
}
</style>
</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-form] --- -->
<script type="text/javascript">
    (function () {
        // convert to i18 text
        function c_ (x) {
            return RED._('@flowfuse/node-red-dashboard/ui-form:ui-form.' + x)
        }
        function hasProperty (obj, prop) {
            return Object.prototype.hasOwnProperty.call(obj, prop)
        }
        RED.nodes.registerType('ui-form', {
            category: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.label.category'),
            color: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.colors.light'),
            defaults: {
                name: { value: '' },
                group: { type: 'ui-group', required: true },
                label: { value: '' },
                order: { value: 0 },
                width: {
                    value: 0,
                    validate: function (v) {
                        const width = v || 0
                        const currentGroup = $('#node-input-group').val() || this.group
                        const groupNode = RED.nodes.node(currentGroup)
                        const valid = !groupNode || +width <= +groupNode.width
                        $('#node-input-size').toggleClass('input-error', !valid)
                        return valid
                    }
                },
                height: { value: 0 },
                options: {
                    value: [{ value: '', label: '', type: '', required: true }],
                    validate: function (value) {
                        if (value.length) {
                            for (let i = 0; i < value.length; i++) {
                                if (!value[i].key) {
                                    return false
                                }
                            }
                        } else {
                            return false
                        }
                        return true
                    },
                    required: true
                },
                formValue: { value: {} },
                payload: { value: '' },
                submit: { value: c_('label.submit') },
                cancel: { value: c_('label.cancel') },
                resetOnSubmit: { value: true },
                topic: { value: 'topic', validate: (hasProperty(RED.validators, 'typedInput') ? RED.validators.typedInput('topicType') : function (v) { return true }) },
                topicType: { value: 'msg' },
                splitLayout: { value: '' },
                className: { value: '' }
            },
            inputs: 0,
            outputs: 1,
            icon: 'font-awesome/fa-list-alt',
            paletteLabel: 'form',
            label: function () { return this.name || this.label || 'form' },
            labelStyle: function () { return this.name ? 'node_label_italic' : '' },
            oneditprepare: function () {
                if ($('#node-input-submit').val() === null) { $('#node-input-submit').val('submit') }
                if ($('#node-input-cancel').val() === null) { $('#node-input-cancel').val('cancel') }
                // if this groups parent is a subflow template, set the node-config-input-width and node-config-input-height up
                // as typedInputs and hide the elementSizer (as it doesn't make sense for subflow templates)
                if (RED.nodes.subflow(this.z)) {
                    // change inputs from hidden to text & display them
                    $('#node-input-width').attr('type', 'text')
                    $('#node-input-height').attr('type', 'text')
                    $('div.form-row.nr-db-ui-element-sizer-row').hide()
                    $('div.form-row.nr-db-ui-manual-size-row').show()
                } else {
                    // not in a subflow, use the elementSizer
                    $('div.form-row.nr-db-ui-element-sizer-row').show()
                    $('div.form-row.nr-db-ui-manual-size-row').hide()
                    $('#node-input-size').elementSizer({
                        width: '#node-input-width',
                        height: '#node-input-height',
                        group: '#node-input-group'
                    })
                }

                this.resizeRule = function (option, newWidth) {
                    // option.find(".node-input-option-type").width(newWidth);
                    //  option.find(".node-input-option-label").width(newWidth);
                    //  option.find(".node-input-option-key").width(newWidth);
                }

                function generateOption (i, option) {
                    const container = $('<li/>', { style: 'margin:0; padding:8px 0px 0px; border-bottom:1px solid var(--red-ui-form-input-border-color, #ccc);' })
                    const row = $('<div/>').appendTo(container)
                    $('<div/>', { style: 'padding-top:5px; padding-left:175px;' }).appendTo(container)
                    $('<div/>', { style: 'padding-top:5px; padding-left:120px;' }).appendTo(container)

                    $('<i style="cursor:move; margin-left:3px;" class="node-input-option-handle fa fa-bars"></i>').appendTo(row)

                    // label field
                    $('<input/>', { class: 'node-input-option-label', type: 'text', style: 'margin-left:7px; width:20%;', placeholder: c_('label.egName'), value: option.label }).appendTo(row)

                    // key field
                    let keyClass = 'node-input-option-key'
                    if (!option.key) { keyClass = 'node-input-option-key input-error' }
                    const keyField = $('<input/>', { class: keyClass, type: 'text', style: 'margin-left:7px; width:20%;', placeholder: c_('label.egName2'), value: option.key }).appendTo(row)
                    keyField.keyup(function () {
                        if ($(this).val() && $(this).hasClass('input-error')) {
                            $(this).removeClass('input-error')
                        } else {
                            if (!$(this).val()) {
                                $(this).addClass('input-error')
                            }
                        }
                    })

                    // type field
                    const typeField = $('<select/>', { class: 'node-input-option-type', type: 'text', style: 'margin-left:7px; width:16%' }).appendTo(row)// .typedInput({default:'str',types:['str', 'num']});

                    const arr = [
                        { val: 'text', text: c_('label.text') },
                        { val: 'multiline', text: c_('label.multiline') },
                        { val: 'number', text: c_('label.number') },
                        { val: 'email', text: c_('label.email') },
                        { val: 'password', text: c_('label.password') },
                        { val: 'checkbox', text: c_('label.checkbox') },
                        { val: 'switch', text: c_('label.switch') },
                        { val: 'date', text: c_('label.date') },
                        { val: 'time', text: c_('label.time') }
                    ]

                    // var sel = $('<select>').appendTo('body');
                    $(arr).each(function () {
                        let isSelected = false
                        if (option.type === this.val) {
                            isSelected = true
                        }
                        typeField.append($('<option>').attr('value', this.val).text(this.text).prop('selected', isSelected))
                    })

                    // which input types don't need a 'require' option
                    const noReqd = ['checkbox', 'switch']

                    // required
                    const requiredContainer = $('<div/>', { style: 'display:inline-block; height:34px; width:13%; vertical-align: middle' }).appendTo(row)
                    const requiredInnerContainer = $('<div/>', { style: 'left:35%; position:relative; width:30px' }).appendTo(requiredContainer)
                    const reqVis = noReqd.includes(option.type) ? 'hidden' : 'visible'
                    const reqRow = $('<label />', { class: 'switch', style: 'top:10px; width:30px;' }).css('visibility', reqVis).appendTo(requiredInnerContainer)
                    const reqd = $('<input/>', { class: 'node-input-option-required', type: 'checkbox', checked: option.required, style: 'vertical-align:top;' }).appendTo(reqRow)// labelForRequried);//.typedInput({default:'str',types:['str', 'num']});
                    $('<div />', { class: 'slider round' }).appendTo(reqRow)

                    // ui rows
                    const rowsVis = option.rows ? 'visible' : 'hidden'
                    const rowsField = $('<input/>', { class: 'node-input-option-rows', type: 'number', style: 'width:10%;', placeholder: 'Rows', value: option.rows }).css('visibility', rowsVis).appendTo(row)

                    const finalspan = $('<div/>', { style: 'display:inline-block; width:5%;' }).appendTo(row)
                    const deleteButton = $('<a/>', { href: '#', class: 'editor-button', style: 'font-size:1.3em; left:45%; position:relative;' }).appendTo(finalspan)
                    $('<i/>', { class: 'fa fa-trash-o' }).appendTo(deleteButton)

                    typeField.change(function (e) {
                        // decide whether we need to show the "rows" option
                        if (e.target.value !== 'multiline') {
                            rowsField.val(undefined)
                            option.rows = null
                            rowsField.css('visibility', 'hidden')
                        } else {
                            rowsField.css('visibility', 'visible')
                            if (!rowsField[0].value) rowsField[0].value = 3
                        }

                        // device whether we need to show the "required" option
                        if (noReqd.includes(e.target.value)) {
                            reqd.val(false)
                            option.required = false
                            reqRow.css('visibility', 'hidden')
                        } else {
                            reqRow.css('visibility', 'visible')
                        }
                    })

                    deleteButton.click(function () {
                        container.find('.node-input-option-key').removeAttr('required')
                        container.css({ background: 'var(--red-ui-secondary-background-inactive, #fee)' })
                        container.fadeOut(300, function () {
                            $(this).remove()
                        })
                    })

                    $('#node-input-option-container').append(container)
                }

                $('#node-input-add-option').click(function () {
                    generateOption($('#node-input-option-container').children().length + 1, {})
                    $('#node-input-option-container-div').scrollTop($('#node-input-option-container-div').get(0).scrollHeight)
                })

                for (let i = 0; i < this.options.length; i++) {
                    const option = this.options[i]
                    generateOption(i + 1, option)
                }

                $('#node-input-topic').typedInput({
                    default: 'str',
                    typeField: $('#node-input-topicType'),
                    types: ['str', 'msg', 'flow', 'global']
                })

                $('#node-input-option-container').sortable({
                    axis: 'y',
                    handle: '.node-input-option-handle',
                    cursor: 'move'
                })

                // use jQuery UI tooltip to convert the plain old title attribute to a nice tooltip
                $('.ui-node-popover-title').tooltip({
                    show: {
                        effect: 'slideDown',
                        delay: 150
                    }
                })
            },
            oneditsave: function () {
                const options = $('#node-input-option-container').children()
                const node = this
                node.options = []
                node.formValue = {}
                options.each(function (i) {
                    const option = $(this)
                    const o = {
                        label: option.find('.node-input-option-label').val(),
                        key: option.find('.node-input-option-key').val(),
                        type: option.find('.node-input-option-type').val(),
                        required: option.find('.node-input-option-required').is(':checked'),
                        rows: parseInt(option.find('.node-input-option-rows').val())
                    }
                    node.formValue[o.key] = o.type === 'checkbox' || o.type === 'switch' ? false : ''
                    node.options.push(o)
                })
            },
            oneditresize: function () {
                const options = $('#node-input-option-container').children()
                const newWidth = ($('#node-input-option-container').width() - 175) / 2
                const node = this
                options.each(function (i) {
                    node.resizeRule($(this), newWidth)
                })
            }
        })
    })()
</script>

<script type="text/html" data-template-name="ui-form">
    <style>
        .switch {
            position: relative;
            display: inline-block;
            width: 30px;
            height: 18px;
        }

        .switch input {display:none;}

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--red-ui-tertiary-border-color, #ccc);
            -webkit-transition: .4s;
            transition: .4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 15px;
            width: 15px;
            left: 2px;
            bottom: 2px;
            background-color: var(--red-ui-secondary-background, white);
            -webkit-transition: .4s;
            transition: .4s;
        }

        input:checked + .slider {
            background-color: #910000;
        }

        .switch:focus-within {
            box-shadow: 0 0 0 1px #2196F3;
        }

        input:checked + .slider:before {
            -webkit-transform: translateX(11px);
            -ms-transform: translateX(11px);
            transform: translateX(11px);
        }

        /* Rounded sliders */
        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }
    </style>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> <span data-i18n="ui-form.label.group"></label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row nr-db-ui-element-sizer-row">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui-form.label.size">Size</label>
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-h"></i> <span data-i18n="ui-form.label.width">Width</label>
        <input type="hidden" id="node-input-width">
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-v"></i> <span data-i18n="ui-form.label.height">Height</label>
        <input type="hidden" id="node-input-height">
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-tag"></i> <span data-i18n="ui-form.label.label"></label>
        <input type="text" id="node-input-label" data-i18n="[placeholder]ui-form.label.optionalLabel">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i> <span data-i18n="ui-form.label.className"></label>
        <div style="display: inline;">
            <input style="width: 70%;" type="text" id="node-input-className" data-i18n="[placeholder]ui-form.label.classNamePlaceholder" style="flex-grow: 1;">
            <a
                data-html="true"
                title="Dynamic Property: Send msg.class to append new classes to this widget. NOTE: classes set at runtime will be applied in addition to any class(es) set in the nodes class field."
                class="red-ui-button ui-node-popover-title"
                style="margin-left: 4px; cursor: help; font-size: 0.625rem; border-radius: 50%; width: 24px; height: 24px; display: inline-flex; justify-content: center; align-items: center;">
                <i style="font-family: ui-serif;">fx</i>
            </a>
        </div>
    </div>
    <div class="form-row node-input-option-container-row" style="margin-bottom:0px; width:100%; min-width:520px">
        <label style="vertical-align:top;"><i class="fa fa-list-alt"></i> <span data-i18n="ui-form.label.formElements"></label>
        <div style="display:inline-block; width:78%; border:1px solid var(--red-ui-form-input-border-color, #ccc); border-radius:5px; box-sizing:border-box;">
          <div class="red-ui-tray-header" style="width:100%; display: inline-block; padding-top:10px; padding-bottom:10px; border-top:0px solid; border-radius:5px 5px 0 0; border-bottom:1px solid var(--red-ui-form-input-border-color, #ccc);">
              <div style="width:94%; display:inline-block; margin-left:27px">
                <div style="width:20%; text-align:center; float:left;" data-i18n="ui-form.label.label"></span></div>
                <div style="width:20%; text-align:center; float:left; margin-left:9px" data-i18n="node-red:common.label.name"></div>
                <div style="margin-left:7px; width:16%; text-align:center; float:left; margin-left:9px" data-i18n="ui-form.label.type"></div>
                <div style="width:16%; text-align:center; float:left;" data-i18n="ui-form.label.required"></div>
                <div style="width:10%; text-align:center; float:left;" data-i18n="ui-form.label.rows"></div>
                <div style="width:12%; text-align:center; float:left;" data-i18n="ui-form.label.remove"></div>
              </div>
          </div>
          <div id="node-input-option-container-div" style=" height: 257px; padding: 5px; overflow-y:scroll;">
            <ol id="node-input-option-container" style=" list-style-type:none; margin: 0;"></ol>
          </div>
        </div>
    </div>
    <div class="form-row">
        <a href="#" class="editor-button editor-button-small" id="node-input-add-option" style="margin-top: 4px; margin-left: 103px;"><i class="fa fa-plus"></i> <span data-i18n="ui-form.label.element"></span></a>
    </div>
    <div class="form-row">
        <label for="node-input-submit"><i class="fa fa-square"></i> <span data-i18n="ui-form.label.buttons"></label>
        <i class="fa fa-thumbs-o-up"></i> <input type="text" id="node-input-submit" data-i18n="[placeholder]ui-form.label.submitButtonText" style="width:35%;">
        <span style="margin-left:16px"><i class="fa fa-thumbs-o-down"></i></span>
        <input type="text" id="node-input-cancel" data-i18n="[placeholder]ui-form.label.cancelButtonText" style="width:35%;">
    </div>
    <div class="form-row">
        <label></label>
        <input type="checkbox" id="node-input-splitLayout" style="display:inline-block; width:auto; vertical-align:top;">
        <label for="node-input-splitLayout" style="width: auto" data-i18n="ui-form.label.splitLayout">
    </div>
    <div class="form-row">
        <label></label>
        <input type="checkbox" id="node-input-resetOnSubmit" style="display:inline-block; width:auto; vertical-align:top;">
        <label for="node-input-resetOnSubmit" style="width: auto" data-i18n="ui-form.label.resetOnSubmit"></label>
    </div>
    <div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> <span data-i18n="ui-form.label.topic"></label>
        <input type="text" id="node-input-topic" style="width:70%" data-i18n="[placeholder]ui-form.label.optionalMsgTopic">
        <input type="hidden" id="node-input-topicType">
    </div>
</script><script type="text/html" data-help-name="ui-form">
    <p>Adds a form to user interface.</p>
    <p>Helps to collect multiple value from the user on submit button click as an object in <code>msg.payload</code> </p>
    <p>Multiple input elements can be added using add elements button</p>
    <p>Each element contains following components:</p>
    <ul>
        <li> <b>Label</b> : Value that will be the label of the element in the user interface</li>
        <li> <b>Name</b> : Represents the key (variable name) in the <code>msg.payload</code> in which the value of the corresponding element present</li>
        <li> <b>Type</b> : Drop down option to select the type of input element</li>
        <li> <b>Required</b> : On switching on the user has to supply the value before submitting</li>
        <li> <b>Rows</b> : number of UI rows for multiline text input</li>
        <li> <b>Delete</b> : To remove the current element from the form</li>
    </ul>
    <p>Optionally the <b>Topic</b> field can be used to set the <code>msg.topic</code> property.</p>
    <p>The Cancel button can be hidden by setting it's value to be blank "".</p>
    <h3>Dynamic Properties (Inputs)</h3>
    <p>Any of the following can be appended to a <code>msg.</code> in order to override or set properties on this node at runtime.</p>
    <dl class="message-properties">
        <dt class="optional">class <span class="property-type">string</span></dt>
        <dd>Add a CSS class, or more, to the form at runtime.</dd>
    </dl>
</script>
</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-text-input] --- -->
<script type="text/javascript">
    (function () {
        function hasProperty (obj, prop) {
            return Object.prototype.hasOwnProperty.call(obj, prop)
        }
        RED.nodes.registerType('ui-text-input', {
            category: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.label.category'),
            color: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.colors.light'),
            defaults: {
                group: { type: 'ui-group', required: true },
                name: { value: '' },
                label: { value: 'text' },
                order: { value: 0 },
                width: {
                    value: 0,
                    validate: function (v) {
                        const width = v || 0
                        const currentGroup = $('#node-input-group').val() || this.group
                        const groupNode = RED.nodes.node(currentGroup)
                        const valid = !groupNode || +width <= +groupNode.width
                        $('#node-input-size').toggleClass('input-error', !valid)
                        return valid
                    }
                },
                height: { value: 0 },
                topic: { value: 'topic', validate: (hasProperty(RED.validators, 'typedInput') ? RED.validators.typedInput('topicType') : function (v) { return true }) },
                topicType: { value: 'msg' },
                mode: { value: 'text', required: true },
                delay: {
                    value: 300,
                    validate: function (v) {
                        return $('#node-input-sendOnDelay').is(':checked') ? RED.validators.number()(v) : true
                    }
                },
                passthru: { value: true },
                sendOnDelay: { value: false },
                sendOnBlur: { value: true },
                sendOnEnter: { value: true },
                className: { value: '' }
            },
            inputs: 1,
            outputs: 1,
            outputLabels: function () { return this.mode },
            icon: 'font-awesome/fa-i-cursor',
            paletteLabel: 'text input',
            oneditprepare: function () {
                // if this groups parent is a subflow template, set the node-config-input-width and node-config-input-height up
                // as typedInputs and hide the elementSizer (as it doesn't make sense for subflow templates)
                if (RED.nodes.subflow(this.z)) {
                    // change inputs from hidden to text & display them
                    $('#node-input-width').attr('type', 'text')
                    $('#node-input-height').attr('type', 'text')
                    $('div.form-row.nr-db-ui-element-sizer-row').hide()
                    $('div.form-row.nr-db-ui-manual-size-row').show()
                } else {
                    // not in a subflow, use the elementSizer
                    $('div.form-row.nr-db-ui-element-sizer-row').show()
                    $('div.form-row.nr-db-ui-manual-size-row').hide()
                    $('#node-input-size').elementSizer({
                        width: '#node-input-width',
                        height: '#node-input-height',
                        group: '#node-input-group'
                    })
                }
                // topic
                $('#node-input-topic').typedInput({
                    default: 'str',
                    typeField: $('#node-input-topicType'),
                    types: ['str', 'msg', 'flow', 'global']
                })

                // use jQuery UI tooltip to convert the plain old title attribute to a nice tooltip
                $('.ui-node-popover-title').tooltip({
                    show: {
                        effect: 'slideDown',
                        delay: 150
                    }
                })

                $('#node-input-mode').on('change', (evt) => {
                    const mode = $('#node-input-mode').find(':selected').val()
                    if (mode === 'textarea') {
                        this.sendOnEnter = false
                        $('#node-input-container-sendOnEnter').hide()
                    } else {
                        $('#node-input-container-sendOnEnter').show()
                    }
                })
            },
            label: function () {
                return this.name || (~this.label.indexOf('{' + '{') ? null : this.label) || this.mode + ' input'
            },
            labelStyle: function () { return this.name ? 'node_label_italic' : '' }
        })
    })()
</script>

<script type="text/html" data-template-name="ui-text-input">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> Label</label>
        <input type="text" id="node-input-label">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i> Class</label>
        <div style="display: inline;">
            <input style="width: 70%;" type="text" id="node-input-className" placeholder="Optional CSS class name(s)" style="flex-grow: 1;">
            <a
                data-html="true"
                title="Dynamic Property: Send msg.class to append new classes to this widget. NOTE: classes set at runtime will be applied in addition to any class(es) set in the nodes class field."
                class="red-ui-button ui-node-popover-title"
                style="margin-left: 4px; cursor: help; font-size: 0.625rem; border-radius: 50%; width: 24px; height: 24px; display: inline-flex; justify-content: center; align-items: center;">
                <i style="font-family: ui-serif;">fx</i>
            </a>
        </div>
    </div>
    <div class="form-row form-row-flex">
        <label for="node-input-mode"><i class="fa fa-keyboard-o"></i> Mode</label>
        <select id="node-input-mode">
            <option value="text">text input (single line)</option>
            <option value="textarea">text area (multi-line)</option>
            <option value="email">email address</option>
            <option value="password">password</option>
            <option value="number">number</option>
            <option value="color">color picker</option>
            <option value="datetime-local">datetime picker</option>
            <option value="date">date picker</option>
            <option value="time">time picker</option>
            <option value="week">week picker</option>
            <option value="month">month picker</option>
        </select>
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> If <code>msg</code> arrives on input, pass through to output: </label>
        <input type="checkbox" checked id="node-input-passthru" style="display:inline-block; width:auto; margin-top: 0; margin-left: 3px;">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-payload"><i class="fa fa-clock-o"></i> Send message on:</label>
    </div>
    <div class="form-row form-row-flex" style="padding-left: 25px; align-items: center;">
        <input type="checkbox" checked id="node-input-sendOnDelay" style="display:inline-block; width:auto; vertical-align:top;">
        <label style="width:auto" for="node-input-sendOnDelay"> Delay</label>
        <div id="node-input-delay-box">
            <input type="text" style="width:58px" id="node-input-delay">
            <label for="node-input-delay">(ms)</label>
        </div>
    </div>
    <div class="form-row" style="padding-left: 25px;">
        <input type="checkbox" checked id="node-input-sendOnBlur" style="display:inline-block; width:auto; vertical-align:top;">
        <label style="width:auto" for="node-input-sendOnBlur"> Focus Leave</label>
    </div>
    <div id="node-input-container-sendOnEnter" class="form-row" style="padding-left: 25px;">
        <input type="checkbox" checked id="node-input-sendOnEnter" style="display:inline-block; width:auto; vertical-align:top;">
        <label style="width:auto" for="node-input-sendOnEnter"> Press Enter</label>
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-payload"><i class="fa fa-envelope-o"></i> When changed, send:</label>
    </div>
    <div class="form-row" style="padding-left: 25px;">
        <label style="margin-right: -25px">Payload</label>
        <label style="width:auto">Current value</label>
    </div>
    <div class="form-row" style="padding-left: 25px;">
        <label for="node-input-topic" style="margin-right:-25px">Topic</label>
        <input type="text" id="node-input-topic">
        <input type="hidden" id="node-input-topicType">
    </div>
</script>
<script type="text/html" data-help-name="ui-text-input">
    <p>
        Adds a single text input row to your dashboard, with a configurable "type" (text, password, etc).
    </p>
    <p>
      Available modes include:
      <ul>
        <li><b>Text Input:</b> Standard text input field</li>
        <li><b>E-Mail Address:</b> Offers validation on any input to ensure it's a valid e-mail address.</li>
        <li><b>Password:</b> Hides the input from the user to offer protected input.</li>
        <li><b>Number:</b> Adds an up/down selector to choose an integer.</li>
        <li><b>Color Picker:</b> Displays a single block color selector</li>
        <li><b>Time Picker:</b> HH:mm formatted time picker</li>
        <li><b>Week Picker:</b> A Calendar widget to select a given full week, returns YYYY-W&lt;WW&gt;></li>
        <li><b>Month Picker:</b> A Calendar widget to select a given month, returns YYYY-MM</li>
        <li><b>Datetime Picker:</b> A Calendar widget to select full datetime value. Returns YYY-MM-DDTHH:mm</li>
      </ul>
    </p>
    <h3>Dynamic Properties (Inputs)</h3>
    <p>Any of the following can be appended to a <code>msg.</code> in order to override or set properties on this node at runtime.</p>
    <dl class="message-properties">
        <dt class="optional">class <span class="property-type">string</span></dt>
        <dd>Add a CSS class, or more, to the Button at runtime.</dd>
    </dl>
  </script>
</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-button] --- -->
<script type="text/javascript">
    (function () {
        function hasProperty (obj, prop) {
            return Object.prototype.hasOwnProperty.call(obj, prop)
        }
        RED.nodes.registerType('ui-button', {
            category: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.label.category'),
            color: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.colors.light'),
            defaults: {
                group: { type: 'ui-group', required: true },
                name: { value: '' },
                label: { value: RED._('@flowfuse/node-red-dashboard/ui-button:ui-button.label.button') },
                order: { value: 0 },
                width: {
                    value: 0,
                    validate: function (v) {
                        const width = v || 0
                        const currentGroup = $('#node-input-group').val() || this.group
                        const groupNode = RED.nodes.node(currentGroup)
                        const valid = !groupNode || +width <= +groupNode.width
                        $('#node-input-size').toggleClass('input-error', !valid)
                        return valid
                    }
                },
                height: { value: 0 },
                emulateClick: { value: false },
                tooltip: { value: '' },
                color: { value: '' },
                bgcolor: { value: '' },
                className: { value: '' },
                icon: { value: '' },
                iconPosition: { value: 'left' },
                payload: { value: '', validate: (hasProperty(RED.validators, 'typedInput') ? RED.validators.typedInput('payloadType') : function (v) { return true }) },
                payloadType: { value: 'str' },
                topic: { value: 'topic', validate: (hasProperty(RED.validators, 'typedInput') ? RED.validators.typedInput('topicType') : function (v) { return true }) },
                topicType: { value: 'msg' }
            },
            inputs: 1,
            outputs: 1,
            outputLabels: function () {
                if (this.payloadType === 'str') {
                    return this.payload
                } else {
                    return this.payloadType
                }
            },
            icon: 'font-awesome/fa-hand-pointer-o',
            paletteLabel: 'button',
            label: function () { return this.name || (~this.label.indexOf('{' + '{') ? null : this.label) || 'button' },
            labelStyle: function () { return this.name ? 'node_label_italic' : '' },
            oneditprepare: function () {
                // if this groups parent is a subflow template, set the node-config-input-width and node-config-input-height up
                // as typedInputs and hide the elementSizer (as it doesn't make sense for subflow templates)
                if (RED.nodes.subflow(this.z)) {
                    // change inputs from hidden to text & display them
                    $('#node-input-width').attr('type', 'text')
                    $('#node-input-height').attr('type', 'text')
                    $('div.form-row.nr-db-ui-element-sizer-row').hide()
                    $('div.form-row.nr-db-ui-manual-size-row').show()
                } else {
                    // not in a subflow, use the elementSizer
                    $('div.form-row.nr-db-ui-element-sizer-row').show()
                    $('div.form-row.nr-db-ui-manual-size-row').hide()
                    $('#node-input-size').elementSizer({
                        width: '#node-input-width',
                        height: '#node-input-height',
                        group: '#node-input-group'
                    })
                }

                $('#node-input-payload').typedInput({
                    default: 'str',
                    typeField: $('#node-input-payloadType'),
                    types: ['str', 'num', 'bool', 'json', 'bin', 'date', 'flow', 'global']
                })

                $('#node-input-topic').typedInput({
                    default: 'str',
                    typeField: $('#node-input-topicType'),
                    types: ['str', 'msg', 'flow', 'global']
                })

                if (!this.iconPosition) {
                    $('#node-input-iconPosition').val('left')
                }

                // use jQuery UI tooltip to convert the plain old title attribute to a nice tooltip
                $('.ui-node-popover-title').tooltip({
                    show: {
                        effect: 'slideDown',
                        delay: 150
                    }
                })
            }
        })
    })()
</script>

<script type="text/html" data-template-name="ui-button">
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> <span data-i18n="ui-button.label.group"></label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row nr-db-ui-element-sizer-row">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui-button.label.size"></label>
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-h"></i> <span data-i18n="ui-button.label.width">Width</label>
        <input type="hidden" id="node-input-width">
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-v"></i> <span data-i18n="ui-button.label.height">Height</label>
        <input type="hidden" id="node-input-height">
    </div>
    <div class="form-row form-row-flex">
        <label for="node-input-icon"><i class="fa fa-picture-o"></i> <span data-i18n="ui-button.label.icon"></label>
        <div style="display: flex; align-items: center; flex-grow: 1; padding-right: calc(30% - 104px); gap: 12px;">
            <input style="flex-grow: 1;" type="text" id="node-input-icon" data-i18n="[placeholder]ui-button.label.optionalIcon">
            <select id="node-input-iconPosition" style="width: 125px;">
                <option value="left" data-i18n="ui-button.label.left"></option>
                <option value="right" data-i18n="ui-button.label.right"></option>
            </select>
        </div>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> <span data-i18n="ui-button.label.label"></label>
        <input type="text" id="node-input-label" data-i18n="[placeholder]ui-button.label.optionalLabel">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i> <span data-i18n="ui-button.label.className"></label>
        <div style="display: inline;">
            <input style="width: 70%;" type="text" id="node-input-className" data-i18n="[placeholder]ui-button.label.classNamePlaceholder" style="flex-grow: 1;">
            <a
                data-html="true"
                title="Dynamic Property: Send msg.class to append new classes to this widget. NOTE: classes set at runtime will be applied in addition to any class(es) set in the nodes class field."
                class="red-ui-button ui-node-popover-title"
                style="margin-left: 4px; cursor: help; font-size: 0.625rem; border-radius: 50%; width: 24px; height: 24px; display: inline-flex; justify-content: center; align-items: center;">
                <i style="font-family: ui-serif;">fx</i>
            </a>
        </div>
    </div>
    <!--<div class="form-row">
        <label for="node-input-tooltip"><i class="fa fa-info-circle"></i> <span data-i18n="ui-button.label.tooltip"></label>
        <input type="text" id="node-input-tooltip" data-i18n="[placeholder]ui-button.label.optionalTooltip">
    </div>
    <div class="form-row">
        <label for="node-input-color"><i class="fa fa-tint"></i> <span data-i18n="ui-button.label.color"></label>
        <input type="text" id="node-input-color" data-i18n="[placeholder]ui-button.label.optionalColor">
    </div>
    <div class="form-row">
        <label for="node-input-bgcolor"><i class="fa fa-tint"></i>  <span data-i18n="ui-button.label.background"></label>
        <input type="text" id="node-input-bgcolor" data-i18n="[placeholder]ui-button.label.optionalBackgroundColor">
    </div>-->
    <div class="form-row">
        <label style="width:auto" for="node-input-payload"><i class="fa fa-envelope-o"></i> <span data-i18n="ui-button.label.whenClicked"></label>
    </div>
    <div class="form-row">
        <label for="node-input-payload" style="padding-left: 25px; margin-right: -25px"><span data-i18n="ui-button.label.payload"></label>
        <input type="text" id="node-input-payload" style="width:70%">
        <input type="hidden" id="node-input-payloadType">
    </div>
    <div class="form-row">
        <label for="node-input-topic" style="padding-left: 25px; margin-right: -25px"><span data-i18n="ui-button.label.topic"></label>
        <input type="text" id="node-input-topic" style="width:70%">
        <input type="hidden" id="node-input-topicType">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-emulateClick"><i class="fa fa-arrow-right"></i> <span data-i18n="ui-button.label.emulateClick"></label>
        <input type="checkbox" id="node-input-emulateClick" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
</script><script type="text/html" data-help-name="ui-button">
    <p>Adds a button to the user interface.</p>
    <p>
        Clicking the button generates a message with <code>msg.payload</code>
        set to the <b>Payload</b> field, and <code>msg.topic</code> to the <b>Topic</b> field.
    </p>
    <h3>Properties</h3>
    <dl class="message-properties">
        <dt>Icon <span class="property-type">string</span></dt>
        <dd>Renders a Material Design icon within the button. We use the Material Design Icons, you can see a full list of the available icons <a href="https://pictogrammers.com/library/mdi/">here</a>. There is no need to include the "mdi-" prefix, just the name of the icon.</dd>
        <dt>Icon Position<span class="property-type">left | right</span></dt>
        <dd>If "Icon" is defined, this property controls which side of the "Label" the icon will render on</dd>
        <dt>Label <span class="property-type">string</span></dt>
        <dd>The text shown within the button. If not provided, then the button will only render the icon</dd>
        <dt>Emulate Button Click <span class="property-type">bool</span></dt>
        <dd>If enabled, any received message will trigger a button click, emitting the relevant payload and topic</dd>
    </dl>
    <h3>Dynamic Properties (Inputs)</h3>
    <p>Any of the following can be appended to a <code>msg.</code> in order to override or set properties on this node at runtime.</p>
    <dl class="message-properties">
        <dt class="optional">class <span class="property-type">string</span></dt>
        <dd>Add a CSS class, or more, to the Button at runtime.</dd>
    </dl>
</script>

</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-button-group] --- -->
<script type="text/javascript">
    function hasProperty (obj, prop) {
        return Object.prototype.hasOwnProperty.call(obj, prop)
    }
    RED.nodes.registerType('ui-button-group', {
        category: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.label.category'),
        color: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.colors.light'),
        defaults: {
            name: { value: '' },
            group: { type: 'ui-group', required: true },
            order: { value: 0 },
            width: {
                value: 6,
                validate: function (v) {
                    const width = v || 0
                    const currentGroup = $('#node-input-group').val() || this.group
                    const groupNode = RED.nodes.node(currentGroup)
                    const valid = !groupNode || +width <= +groupNode.width
                    $('#node-input-size').toggleClass('input-error', !valid)
                    return valid
                }
            },
            height: { value: 1 },
            label: { value: 'button group' },
            rounded: { value: true },
            useThemeColors: { value: true },
            passthru: { value: false },
            options: {
                value: [],
                validate: function (v) {
                    const unique = new Set(v.map(function (o) { return o.value }))
                    return v.length === unique.size && v.length > 1
                }
            },
            topic: { value: 'topic', validate: (hasProperty(RED.validators, 'typedInput') ? RED.validators.typedInput('topicType') : function (v) { return true }) },
            topicType: { value: 'msg' }
        },
        inputs: 1,
        outputs: 1,
        icon: 'font-awesome/fa-toggle-off',
        align: 'left',
        paletteLabel: 'button group',
        label: function () {
            return this.name || (~this.label.indexOf('{{') ? null : this.label) || 'button group'
        },
        oneditprepare: function () {
            // if this groups parent is a subflow template, set the node-config-input-width and node-config-input-height up
            // as typedInputs and hide the elementSizer (as it doesn't make sense for subflow templates)
            if (RED.nodes.subflow(this.z)) {
                // change inputs from hidden to text & display them
                $('#node-input-width').attr('type', 'text')
                $('#node-input-height').attr('type', 'text')
                $('div.form-row.nr-db-ui-element-sizer-row').hide()
                $('div.form-row.nr-db-ui-manual-size-row').show()
            } else {
                // not in a subflow, use the elementSizer
                $('div.form-row.nr-db-ui-element-sizer-row').show()
                $('div.form-row.nr-db-ui-manual-size-row').hide()
                $('#node-input-size').elementSizer({
                    width: '#node-input-width',
                    height: '#node-input-height',
                    group: '#node-input-group'
                })
            }

            $('#node-input-topic').typedInput({
                default: 'str',
                typeField: $('#node-input-topicType'),
                types: ['str', 'msg', 'flow', 'global']
            })

            // Add a default rounding of 0em to older nodes (version 1.0.0)
            this.rounded = this.rounded ?? false
    
            // Add theme colors by default for older nodes (version 1.0.0)
            this.useThemeColors = this.useThemeColors ?? true
    
            // Add an passThrough field value for older nodes (version 1.1.0 or below)
            this.passthru = this.passthru ?? false
    
            $('#node-input-rounded').change(function () {
                if (this.checked === true) {
                    $('#appearance-square').css('opacity', '0.4')
                    $('#appearance-round').css('opacity', '1')
                } else {
                    $('#appearance-square').css('opacity', '1')
                    $('#appearance-round').css('opacity', '0.4')
                }
            })
    
            function getColor (idx) {
                const colors = ['#009933', '#999999', '#ff6666', '#009999', '#cccc00', '#ff33cc', '#cc6600',
                    '#99ff66', '#660033'
                ]
                if (idx > colors.length - 1) {
                    return colors[Math.floor(Math.random() * colors.length)]
                }
                return colors[idx]
            }

            const optionsList = $('#node-input-options-container').css('min-height', '200px').editableList({

                header: $('<div>').css({ 'padding-left': '32px', 'padding-right': '32px', gap: '10px', display: 'flex' }).append($.parseHTML(
                    "<div style='width:30%; display: inline-grid'><b>Label</b></div>" +
               "<div style='width:20%; display: inline-grid'><b>Icon</b></div>" +
               "<div style='width:30%; display: inline-grid'><b>Value</b></div>" +
               "<div style='width:10%; display: inline-grid' class='node-input-option-color'><b>Color</b></div>")),
                addItem: function (container, i, option) {
                    // Add a new row to the editableList
                    const row = $('<div/>').appendTo(container)
    
                    // Column 1 : Add an input field (type string) to the new row, that represents the option label
                    const labelField = $('<input/>', { class: 'node-input-option-label', type: 'text' }).css({ width: '30%', 'margin-left': '5px', 'margin-right': '5px' }).appendTo(row)
                    labelField.val(option.label || '')

                    // Column 2: Add an input field (type string) to the new row, that represents the option icon
                    const iconField = $('<input/>', { class: 'node-input-option-icon', type: 'text' }).css({ width: '20%', 'margin-left': '5px', 'margin-right': '5px' }).appendTo(row)
                    iconField.val(option.icon || '')

                    // Column 3 : Add an input field (type string) to the new row, that represents the option value
                    const valueField = $('<input/>', { class: 'node-input-option-value', type: 'text' }).css({ width: '30%', 'margin-left': '5px', 'margin-right': '5px' }).appendTo(row)
                    valueField.typedInput({ types: ['str', 'num', 'bool', 'json'] })
                    valueField.typedInput('type', option.valueType || 'str')
                    valueField.typedInput('value', option.value || 'option_' + i)
                    valueField.on('change', function (type, value) {
                        validate()
                    })
    
                    // Column 4 : Add an input field (type color) to the new row, that represents the option color
                    // Before adding be sure if color field is needed to show or not.
                    const colofield = $('#node-input-useThemeColors').prop('checked') ? 'none' : 'inline-block'
                    const colorField = $('<input/>', { class: 'node-input-option-color', type: 'color' }).css({ width: '10%', 'margin-left': '5px', display: colofield }).appendTo(row)
                    colorField.val(option.color || getColor(i))
                    validate()
                },
                removeItem: function (data) {
                    validate()
                },
                removable: true,
                sortable: true
            })
    
            // Show all the options (stored in this node) into the editableList
            if (this.options) {
                this.options.forEach(function (option, index) {
                    optionsList.editableList('addItem', { label: option.label, icon: option.icon, value: option.value, valueType: option.valueType, color: option.color })
                })
            }
    
            $('#node-input-useThemeColors').on('change', function () {
                const colorFields = $('.node-input-option-color')
                if ($(this)[0].checked) {
                    colorFields.hide()
                } else {
                    colorFields.show()
                }
            })

            // Validate the options to (choose and) show configuration error if any.
            // Any changes for options (adds new or changes any value), calls validation.

            function validate () {
                const that = this
                // Copy all the options from the editableList to this node
                this.options = []
                const optionsList = $('#node-input-options-container').editableList('items')
                optionsList.each(function (i) {
                    const option = $(this)
                    const label = option.find('.node-input-option-label').val()
                    const icon = option.find('.node-input-option-icon').val()
                    const value = option.find('.node-input-option-value').typedInput('value')
                    const valueType = option.find('.node-input-option-value').typedInput('type')
                    const color = option.find('.node-input-option-color').val()
                    that.options.push({ label, icon, value, valueType, color })
                })

                // Using the Set to collect unique values and then comparing the count of elements.
                const un = new Set(this.options.map(function (o) { return o.value }))
                if (this.options.length !== un.size) {
                    // console.log("configuration error - values not unique ")
                    $('#configError').text('Values must be unique')
                    $('#configError').show()
                } else if (this.options.length < 2) {
                    // console.log("configuration error - at least 2 options needed")
                    $('#configError').text('Configure at least two options')
                    $('#configError').show()
                } else {
                    // options valid
                    $('#configError').hide()
                }
            }
            if (this.options) {
                validate()
            }
        },
        oneditsave: function () {
            const node = this

            // Copy all the options from the editableList to this node
            node.options = []
            const optionsList = $('#node-input-options-container').editableList('items')
            optionsList.each(function (i) {
                const option = $(this)
                const label = option.find('.node-input-option-label').val()
                const icon = option.find('.node-input-option-icon').val()
                const value = option.find('.node-input-option-value').typedInput('value')
                const valueType = option.find('.node-input-option-value').typedInput('type')
                const color = option.find('.node-input-option-color').val()
    
                node.options.push({ label, icon, value, valueType, color })
            })
        }
    })
</script>

<script type="text/html" data-template-name="ui-button-group">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> <span data-i18n="ui-button-group.label.group"></label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row nr-db-ui-element-sizer-row">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui-button-group.label.size"></label>
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-h"></i> <span data-i18n="ui-button-group.label.width">Width</label>
        <input type="hidden" id="node-input-width">
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-v"></i> <span data-i18n="ui-button-group.label.height">Height</label>
        <input type="hidden" id="node-input-height">
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> <span data-i18n="ui-button-group.label.label"></span></label>
        <input type="text" id="node-input-label">
    </div>
    <div class='form-row'>
        <label for='node-input-rounded'><i class='fa fa-gear'></i> <span data-i18n="ui-button-group.label.appearance"></span></label>        
        <span id="appearance-square" style="opacity:1; border:1px solid; padding: 3px 20px 2px 5px; "><i class="fa fa-square"></i></span>
        <input type="checkbox" id="node-input-rounded" style="display:inline-block; width:auto; vertical-align:baseline; margin-right:5px; margin-left:5px;">
        <span id="appearance-round" style="opacity:1; border:1px solid; border-radius:15px; padding: 3px 20px 2px 5px; "><i class="fa fa-circle"></i></span>     
    </div> 
    <div class="form-row">
        <label for='node-input-useThemeColors'><i class='fa fa-paint-brush'></i> <span data-i18n="ui-button-group.label.colors"></span></label>
        <input type='checkbox' id='node-input-useThemeColors' style='width:auto ;border:none; vertical-align:baseline;' placeholder='0'>
        <label for='node-input-useThemeColors' style="width: auto;"> <span data-i18n="ui-button-group.label.tcolors"></span></label>
    </div>
    <div class="form-row" style="margin-bottom:0;">
        <label><i class="fa fa-list"></i> <span data-i18n="ui-button-group.label.options"></span>:</label>
        <span id="configError" style="color:#DD0000"><b>All Values must be unique.</b></span>
    </div>
    <div class="form-row">       
        <!-- Table with input options -->
        <ol id="node-input-options-container"></ol>
    </div>
    <div class="form-row">
        <label for="node-input-topic" style="padding-left: 25px; margin-right: -25px"><span data-i18n="node-red:common.label.topic"></label>
        <input type="text" id="node-input-topic" style="width:70%">
        <input type="hidden" id="node-input-topicType">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> If <code>msg</code> arrives on input, pass through to output: </label>
        <input type="checkbox" checked id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
</script>

<script type="text/html" data-help-name="ui-button-group">
    <p>A Node-RED node to show a switch with multiple buttons in the Node-RED Dashboard.</p>
    <p>The active selection can be dynamically set by sending a <code>msg.payload</code> which matches a respective option's value.</p>
    <h3>Properties</h3>
    <p><strong>Label:</strong><br/>
    The label that will be displayed on the left side of the button.</p>
    <p><strong>Appearance:</strong><br/>
    Specify whether the shape of the widget should be rectangular or have rounded corners.</p>
    <p><strong>Use theme colors:</strong><br/>
    Specify whether the theme colors should be used. If not active, custom colors can be specified for each option separately.</p>
    <p><strong>Passthrough:</strong><br/>
    Specify whether input messages should be passed through as output messages
    </p>
    <p><strong>Options:</strong><br/>
    Specify which options need to be displayed:
        <ul>
            <li><i>Label: </i>(optional) The description that will be displayed.</li>
            <li><i>Icon: </i>(optional) The icon to display for the given option. We use the Material Design Icons, you can see a full list of the available icons <a href="https://pictogrammers.com/library/mdi/">here</a>. There is no need to include the "mdi-" prefix, just the name of the icon.</li>
            <li><i>Value: </i>The value that will be send in input and output messages.</li>
            <li><i>Color: </i>The color of the option in the switch.</li>
        </ul>
    </p>
    <p><strong>Topic:</strong><br/>
    The text that needs to be send in the <code>msg.topic</code> field.</p>
</script>

</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-dropdown] --- -->
<script type="text/javascript">
    (function () {
        function hasProperty (obj, prop) {
            return Object.prototype.hasOwnProperty.call(obj, prop)
        }
        RED.nodes.registerType('ui-dropdown', {
            category: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.label.category'),
            color: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.colors.light'),
            defaults: {
                group: { type: 'ui-group', required: true },
                name: { value: '' },
                label: { value: 'Select Option:' },
                tooltip: { value: '' },
                order: { value: 0 },
                width: {
                    value: 0,
                    validate: function (v) {
                        const width = v || 0
                        const currentGroup = $('#node-input-group').val() || this.group
                        const groupNode = RED.nodes.node(currentGroup)
                        const valid = !groupNode || +width <= +groupNode.width
                        $('#node-input-size').toggleClass('input-error', !valid)
                        return valid
                    }
                },
                height: { value: 0 },
                passthru: { value: false },
                multiple: { value: false },
                options: {
                    value: [{ value: '', label: '' }],
                    validate: function (v) {
                        const unique = new Set(v.map(function (o) { return o.value }))
                        return v.length === unique.size
                    }
                },
                payload: { value: '' },
                topic: { value: 'topic', validate: (hasProperty(RED.validators, 'typedInput') ? RED.validators.typedInput('topicType') : function (v) { return true }) },
                topicType: { value: 'msg' },
                className: { value: '' }
            },
            inputs: 1,
            outputs: 1,
            icon: 'font-awesome/fa-bars',
            paletteLabel: 'dropdown',
            label: function () { return this.name || (~this.label.indexOf('{' + '{') ? null : this.label) || 'dropdown' },
            labelStyle: function () { return this.name ? 'node_label_italic' : '' },
            oneditprepare: function () {
                if (this.multiple === undefined) {
                    $('#node-input-multiple').prop('checked', false)
                }
                // if this groups parent is a subflow template, set the node-config-input-width and node-config-input-height up
                // as typedInputs and hide the elementSizer (as it doesn't make sense for subflow templates)
                if (RED.nodes.subflow(this.z)) {
                    // change inputs from hidden to text & display them
                    $('#node-input-width').attr('type', 'text')
                    $('#node-input-height').attr('type', 'text')
                    $('div.form-row.nr-db-ui-element-sizer-row').hide()
                    $('div.form-row.nr-db-ui-manual-size-row').show()
                } else {
                    // not in a subflow, use the elementSizer
                    $('div.form-row.nr-db-ui-element-sizer-row').show()
                    $('div.form-row.nr-db-ui-manual-size-row').hide()
                    $('#node-input-size').elementSizer({
                        width: '#node-input-width',
                        height: '#node-input-height',
                        group: '#node-input-group'
                    })
                }
                const un = new Set(this.options.map(function (o) { return o.value }))
                if (this.options.length === un.size) { $('#valWarning').hide() } else { $('#valWarning').show() }

                function generateOption (i, option) {
                    const container = $('<li/>', { style: 'background: var(--red-ui-secondary-background, #fff); margin:0; padding:8px 0px 0px; border-bottom: 1px solid var(--red-ui-form-input-border-color, #ccc);' })
                    const row = $('<div/>').appendTo(container)
                    $('<div/>', { style: 'padding-top:5px; padding-left:175px;' }).appendTo(container)
                    $('<div/>', { style: 'padding-top:5px; padding-left:120px;' }).appendTo(container)

                    $('<i style="color: var(--red-ui-form-text-color, #eee); cursor:move; margin-left:3px;" class="node-input-option-handle fa fa-bars"></i>').appendTo(row)

                    $('<input/>', { class: 'node-input-option-value', type: 'text', style: 'margin-left:7px; width:calc(50% - 32px);', placeholder: 'Value', value: option.value }).appendTo(row).typedInput({ default: option.type || 'str', types: ['str', 'num', 'bool'] })
                    $('<input/>', { class: 'node-input-option-label', type: 'text', style: 'margin-left:7px; width:calc(50% - 32px);', placeholder: 'Label', value: option.label }).appendTo(row)

                    const finalSpan = $('<span/>', { style: 'float:right; margin-right:8px;' }).appendTo(row)
                    const deleteButton = $('<a/>', { href: '#', class: 'editor-button editor-button-small', style: 'margin-top:7px; margin-left:5px;' }).appendTo(finalSpan)
                    $('<i/>', { class: 'fa fa-remove' }).appendTo(deleteButton)

                    deleteButton.click(function () {
                        container.css({ background: 'var(--red-ui-secondary-background-inactive, #fee)' })
                        container.fadeOut(300, function () {
                            $(this).remove()
                        })
                    })

                    $('#node-input-option-container').append(container)
                }

                $('#node-input-add-option').click(function () {
                    generateOption($('#node-input-option-container').children().length + 1, {})
                    $('#node-input-option-container-div').scrollTop($('#node-input-option-container-div').get(0).scrollHeight)
                })

                for (let i = 0; i < this.options.length; i++) {
                    const option = this.options[i]
                    generateOption(i + 1, option)
                }

                $('#node-input-option-container').sortable({
                    axis: 'y',
                    handle: '.node-input-option-handle',
                    cursor: 'move'
                })

                $('#node-input-topic').typedInput({
                    default: 'str',
                    typeField: $('#node-input-topicType'),
                    types: ['str', 'msg', 'flow', 'global']
                })

                // use jQuery UI tooltip to convert the plain old title attribute to a nice tooltip
                $('.ui-node-popover-title').tooltip({
                    show: {
                        effect: 'slideDown',
                        delay: 150
                    }
                })
            },
            oneditsave: function () {
                const options = $('#node-input-option-container').children()
                const node = this
                node.options = []
                options.each(function (i) {
                    const option = $(this)
                    const o = {
                        label: option.find('.node-input-option-label').val(),
                        value: option.find('.node-input-option-value').typedInput('value'),
                        type: option.find('.node-input-option-value').typedInput('type')
                    }
                    if (option.find('.node-input-option-value').typedInput('type') === 'num') {
                        o.value = Number(o.value)
                    }
                    if (option.find('.node-input-option-value').typedInput('type') === 'bool') {
                        o.value = (o.value === 'true')
                    }
                    node.options.push(o)
                })
            },
            oneditresize: function () {
            }
        })
    })()
</script>

<script type="text/html" data-template-name="ui-dropdown">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row nr-db-ui-element-sizer-row">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui-dropdown.label.size">Size</label>
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-h"></i> <span data-i18n="ui-dropdown.label.width">Width</label>
        <input type="hidden" id="node-input-width">
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-v"></i> <span data-i18n="ui-dropdown.label.height">Height</label>
        <input type="hidden" id="node-input-height">
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-tag"></i> Label</label>
        <input type="text" id="node-input-label" placeholder="optional label">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i> Class</label>
        <div style="display: inline;">
            <input style="width: 70%;" type="text" id="node-input-className" placeholder="Optional CSS class name(s)" style="flex-grow: 1;">
            <a
                data-html="true"
                title="Dynamic Property: Send msg.class to append new classes to this widget. NOTE: classes set at runtime will be applied in addition to any class(es) set in the nodes class field."
                class="red-ui-button ui-node-popover-title"
                style="margin-left: 4px; cursor: help; font-size: 0.625rem; border-radius: 50%; width: 24px; height: 24px; display: inline-flex; justify-content: center; align-items: center;">
                <i style="font-family: ui-serif;">fx</i>
            </a>
        </div>
    </div>
    <!--<div class="form-row">
        <label for="node-input-tooltip"><i class="fa fa-info-circle"></i> Tooltip</label>
        <input type="text" id="node-input-tooltip" placeholder="optional tooltip">
    </div>-->
    <div class="form-row form-row-flex node-input-option-container-row" style="margin-bottom: 0px;width: 100%">
        <label for="node-input-width" style="vertical-align:top"><i class="fa fa-list-alt"></i> Options</label>
        <div id="node-input-option-container-div" style="box-sizing:border-box; border-radius:5px; height:257px; padding:5px; border:1px solid var(--red-ui-form-input-border-color, #ccc); overflow-y:scroll; display:inline-block; width: 70%;">
            <span id="valWarning" style="color: var(--red-ui-text-color-error, #910000)"><b>All Values must be unique.</b></span>
            <ol id="node-input-option-container" style="list-style-type:none; margin:0;"></ol>
        </div>
        <a
            data-html="true"
            title="Dynamic Property: Send 'msg.options' in order to override this property."
            class="red-ui-button ui-node-popover-title"
            style="margin-left: 4px; cursor: help; font-size: 0.625rem; border-radius: 50%; width: 24px; height: 24px; display: inline-flex; justify-content: center; align-items: center;">
            <i style="font-family: ui-serif;">fx</i>
        </a>
    </div>
    <div class="form-row">
        <a href="#" class="editor-button editor-button-small" id="node-input-add-option" style="margin-top:4px; margin-left:103px;"><i class="fa fa-plus"></i> <span>option</span></a>
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-multiple"><i class="fa fa-th-list"></i> Allow multiple selections from list: </label>
        <input type="checkbox" checked id="node-input-multiple" style="display: inline-block; width: auto; margin: 0px 0px 0px 4px;">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> If <code>msg</code> arrives on input, pass through to output: </label>
        <input type="checkbox" checked id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> Topic</label>
        <input type="text" id="node-input-topic" style="width:70%" placeholder="optional msg.topic">
        <input type="hidden" id="node-input-topicType">
    </div>
</script><script type="text/html" data-help-name="ui-dropdown">
    <p>
        Adds a dropdown to your dashboard that will emit values
        in Node-RED under `msg.payload` anytime it's value is changed.
    </p>
    <p>
        In the case where a single option is selected, returns the object detailing that selection.
        If "Allow multiple selections" is enabled, returns an array of objects detailing the selections.
    </p>
    <h3>Selecting Options via <code>msg.</code></h3>
    <p>
        You can dynamically make selections for this dropdown by passing in the respective <code>value</code> to <code>msg.payload</code>.
    </p>
    <p>
        To make a single selection, pass in the <code>value</code> of the option as <code>msg.payload</code>, e.g. <code>msg.payload = "option1"</code>.
    </p>
    <p>
        To make a multi-selection selection, you must first have "Allow Multiple" enabled on the node, you can then
        pass an Array of <code>value</code> of the respective options as <code>msg.payload</code>, e.g. <code>msg.payload = ["option1", "option2"]</code>.
    </p>
    <p>
        To clear any selection for a dropdown, pass an empty array <code>[]</code> as <code>msg.payload</code>.
    </p>
    <h3>Dynamic Properties (Inputs)</h3>
    <p>Any of the following can be appended to a <code>msg.</code> in order to override or set properties on this node at runtime.</p>
    <dl class="message-properties">
        <dt class="optional">options <span class="property-type">array</span></dt>
        <dd>
            Change the options available in the dropdown at runtime
            <ul>
                <li><code>Array&lt;string&gt;</code></li>
                <li><code>Array&lt;{value: String}&gt;</code></li>
                <li><code>Array&lt;{value: String, label: String}&gt;</code></li>
            </ul>
        </dd>
        <dt class="optional">class <span class="property-type">string</span></dt>
        <dd>Add a CSS class, or more, to the Button at runtime.</dd>
    </dl>
</script>
</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-slider] --- -->
<script type="text/javascript">
    (function () {
        function hasProperty (obj, prop) {
            return Object.prototype.hasOwnProperty.call(obj, prop)
        }
        RED.nodes.registerType('ui-slider', {
            category: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.label.category'),
            color: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.colors.light'),
            defaults: {
                group: { type: 'ui-group', required: true },
                name: { value: '' },
                label: { value: 'slider' },
                tooltip: { value: '' },
                order: { value: 0 },
                width: {
                    value: 0,
                    validate: function (v) {
                        const width = v || 0
                        const currentGroup = $('#node-input-group').val() || this.group
                        const groupNode = RED.nodes.node(currentGroup)
                        const valid = !groupNode || +width <= +groupNode.width
                        $('#node-input-size').toggleClass('input-error', !valid)
                        return valid
                    }
                },
                height: { value: 0 },
                passthru: { value: false },
                outs: { value: 'all' },
                topic: { value: 'topic', validate: (hasProperty(RED.validators, 'typedInput') ? RED.validators.typedInput('topicType') : function (v) { return true }) },
                topicType: { value: 'msg' },
                thumbLabel: { value: true },
                min: { value: 0, required: true, validate: RED.validators.number() },
                max: { value: 10, required: true, validate: RED.validators.number() },
                step: { value: 1 },
                className: { value: '' }
            },
            inputs: 1,
            outputs: 1,
            outputLabels: function () { return this.min + ' - ' + this.max },
            icon: 'font-awesome/fa-sliders',
            paletteLabel: 'slider',
            label: function () { return this.name || (~this.label.indexOf('{' + '{') ? null : this.label) || 'slider' },
            labelStyle: function () { return this.name ? 'node_label_italic' : '' },
            oneditprepare: function () {
                // if this groups parent is a subflow template, set the node-config-input-width and node-config-input-height up
                // as typedInputs and hide the elementSizer (as it doesn't make sense for subflow templates)
                if (RED.nodes.subflow(this.z)) {
                    // change inputs from hidden to text & display them
                    $('#node-input-width').attr('type', 'text')
                    $('#node-input-height').attr('type', 'text')
                    $('div.form-row.nr-db-ui-element-sizer-row').hide()
                    $('div.form-row.nr-db-ui-manual-size-row').show()
                } else {
                    // not in a subflow, use the elementSizer
                    $('div.form-row.nr-db-ui-element-sizer-row').show()
                    $('div.form-row.nr-db-ui-manual-size-row').hide()
                    $('#node-input-size').elementSizer({
                        width: '#node-input-width',
                        height: '#node-input-height',
                        group: '#node-input-group'
                    })
                }
                $('#node-input-topic').typedInput({
                    default: 'str',
                    typeField: $('#node-input-topicType'),
                    types: ['str', 'msg', 'flow', 'global']
                })
                // if (!$("#node-input-outs").val()) { $("#node-input-outs").val("all") }

                // use jQuery UI tooltip to convert the plain old title attribute to a nice tooltip
                $('.ui-node-popover-title').tooltip({
                    show: {
                        effect: 'slideDown',
                        delay: 150
                    }
                })
            }
        })
    })()
</script>

<script type="text/html" data-template-name="ui-slider">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
        <input type="hidden" id="node-input-topicType">
    </div>
    <div class="ui-slider">
        <div class="form-row">
            <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
            <input type="text" id="node-input-group">
        </div>
        <div class="form-row nr-db-ui-element-sizer-row">
            <label><i class="fa fa-object-group"></i> <span data-i18n="ui-slider.label.size">Size</label>
            <button class="editor-button" id="node-input-size"></button>
        </div>
        <div class="form-row nr-db-ui-manual-size-row">
            <label><i class="fa fa-arrows-h"></i> <span data-i18n="ui-slider.label.width">Width</label>
            <input type="hidden" id="node-input-width">
        </div>
        <div class="form-row nr-db-ui-manual-size-row">
            <label><i class="fa fa-arrows-v"></i> <span data-i18n="ui-slider.label.height">Height</label>
            <input type="hidden" id="node-input-height">
        </div>
        <div class="form-row">
            <label for="node-input-className"><i class="fa fa-code"></i> Class</label>
            <div style="display: inline;">
                <input style="width: 70%;" type="text" id="node-input-className" placeholder="Optional CSS class name(s)" style="flex-grow: 1;">
                <a
                    data-html="true"
                    title="Dynamic Property: Send msg.class to append new classes to this widget. NOTE: classes set at runtime will be applied in addition to any class(es) set in the nodes class field."
                    class="red-ui-button ui-node-popover-title"
                    style="margin-left: 4px; cursor: help; font-size: 0.625rem; border-radius: 50%; width: 24px; height: 24px; display: inline-flex; justify-content: center; align-items: center;">
                    <i style="font-family: ui-serif;">fx</i>
                </a>
            </div>
        </div>
        <div class="form-row">
            <label for="node-input-label"><i class="fa fa-i-cursor"></i> Label</label>
            <input type="text" id="node-input-label">
        </div>
        <div class="form-row">
            <label><i class="fa fa-i-cursor"></i> Thumb</label>
            <input type="checkbox" id="node-input-thumbLabel" style="display: inline-block; width: auto; vertical-align: top; margin: 0 3px 0 0;"/>
            <label for="node-input-thumbLabel" style="width: 70%;"> Show Thumb Label</label>
        </div>
        <!--<div class="form-row">
            <label for="node-input-tooltip"><i class="fa fa-info-circle"></i> Tooltip</label>
            <input type="text" id="node-input-tooltip" placeholder="optional tooltip">
        </div>-->
        <div class="form-row">
            <label for="node-input-min"><i class="fa fa-arrows-h"></i> Range</label>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); width: 70%">
                <div>
                    <span for="node-input-min">min</span>
                    <input type="text" id="node-input-min" style="width:60px">
                </div>
                <div>
                    <span for="not-input-step">step</span>
                    <input type="text" id="node-input-step" style="width:60px">
                </div>
                <div>
                    <span for="not-input-max">max</span>
                    <input type="text" id="node-input-max" style="width:60px">
                </div>
            </div>
        </div>
        <div class="form-row">
            <label for="node-input-outs"><i class="fa fa-sign-out"></i> Output</label>
            <select id="node-input-outs" style="width:204px">
                <option value="all">continuously while sliding</option>
                <option value="end">only on release</option>
            </select>
        </div>
        <div class="form-row">
            <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> If <code>msg</code> arrives on input, pass through to output: </label>
            <input type="checkbox" checked id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
        </div>
        <div class="form-row">
            <label style="width:auto" for="node-input-payload"><i class="fa fa-envelope-o"></i> When changed, send:</label>
        </div>
        <!-- <div class="form-row">
            <label style="padding-left:25px; margin-right:-25px">Payload</label>
            <label style="width:auto">Current value</label>
        </div> -->
        <div class="form-row">
            <label for="node-input-topic" style="padding-left:25px; margin-right:-25px">Topic</label>
            <input type="text" id="node-input-topic">
        </div>
    </div>
</script>

<style id="nr-db2-ui-slider-styles">
    .red-ui-editor div.ui-slider .form-row {
        display: flex;
        align-items: center;
    }
    .red-ui-editor div.ui-slider .form-row label {
        margin-bottom: 0;
    }
</style>
<script type="text/html" data-help-name="ui-slider">
    <p>Adds a slider widget to the user interface.</p>
    <p>
        The user can change its value between the limits (<b>min</b> and <b>max</b>).
        Each value change will generate a message with the value set as <b>payload</b>.
    </p>
    <p>The slider can be reversed by setting the min value larger than the max value. e.g. min 100, max 0.</p>
    <h3>Dynamic Properties (Inputs)</h3>
    <p>Any of the following can be appended to a <code>msg.</code> in order to override or set properties on this node at runtime.</p>
    <dl class="message-properties">
        <dt class="optional">class <span class="property-type">string</span></dt>
        <dd>Add a CSS class, or more, to the Button at runtime.</dd>
    </dl>
</script>
</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-switch] --- -->
<script type="text/javascript">
    (function () {
        function hasProperty (obj, prop) {
            return Object.prototype.hasOwnProperty.call(obj, prop)
        }
        RED.nodes.registerType('ui-switch', {
            category: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.label.category'),
            color: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.colors.light'),
            defaults: {
                name: { value: '' },
                label: { value: 'switch' },
                // tooltip: {value: ''},
                group: { type: 'ui-group', required: true },
                order: { value: 0 },
                width: {
                    value: 0,
                    validate: function (v) {
                        const width = v || 0
                        const currentGroup = $('#node-input-group').val() || this.group
                        const groupNode = RED.nodes.node(currentGroup)
                        const valid = !groupNode || +width <= +groupNode.width
                        $('#node-input-size').toggleClass('input-error', !valid)
                        return valid
                    }
                },
                height: { value: 0 },
                passthru: { value: false },
                topic: { value: 'topic', validate: (hasProperty(RED.validators, 'typedInput') ? RED.validators.typedInput('topicType') : function (v) { return true }) },
                topicType: { value: 'msg' },
                style: { value: '' },
                className: { value: '' },
                // on state
                onvalue: { value: true, validate: (hasProperty(RED.validators, 'typedInput') ? RED.validators.typedInput('onvalueType') : function (v) { return true }) },
                onvalueType: { value: 'bool' },
                onicon: { value: '' },
                oncolor: { value: '' },
                // off state
                offvalue: { value: false, validate: (hasProperty(RED.validators, 'typedInput') ? RED.validators.typedInput('offvalueType') : function (v) { return true }) },
                offvalueType: { value: 'bool' },
                officon: { value: '' },
                offcolor: { value: '' }
            },
            inputs: 1,
            outputs: 1,
            icon: 'font-awesome/fa-toggle-on',
            paletteLabel: 'switch',
            label: function () { return this.name || (~this.label.indexOf('{' + '{') ? null : this.label) || 'switch' },
            labelStyle: function () { return this.name ? 'node_label_italic' : '' },
            oneditprepare: function () {
                // if this groups parent is a subflow template, set the node-config-input-width and node-config-input-height up
                // as typedInputs and hide the elementSizer (as it doesn't make sense for subflow templates)
                if (RED.nodes.subflow(this.z)) {
                    // change inputs from hidden to text & display them
                    $('#node-input-width').attr('type', 'text')
                    $('#node-input-height').attr('type', 'text')
                    $('div.form-row.nr-db-ui-element-sizer-row').hide()
                    $('div.form-row.nr-db-ui-manual-size-row').show()
                } else {
                    // not in a subflow, use the elementSizer
                    $('div.form-row.nr-db-ui-element-sizer-row').show()
                    $('div.form-row.nr-db-ui-manual-size-row').hide()
                    $('#node-input-size').elementSizer({
                        width: '#node-input-width',
                        height: '#node-input-height',
                        group: '#node-input-group'
                    })
                }
                $('#node-input-custom-icons').on('change', function () {
                    if ($('#node-input-custom-icons').val() === 'default') {
                        $('.form-row-custom-icons').hide()
                    } else {
                        $('.form-row-custom-icons').show()
                    }
                })

                if (this.onicon !== '' || this.oncolor !== '' || this.officon !== '' || this.offcolor !== '') {
                    $('#node-input-custom-icons').val('custom')
                } else {
                    $('.form-row-custom-icons').hide()
                    $('#node-input-custom-icons').change()
                }

                $('#node-input-onvalue').typedInput({
                    default: 'str',
                    typeField: $('#node-input-onvalueType'),
                    types: ['str', 'num', 'bool', 'json', 'bin', 'date', 'flow', 'global']
                })

                $('#node-input-offvalue').typedInput({
                    default: 'str',
                    typeField: $('#node-input-offvalueType'),
                    types: ['str', 'num', 'bool', 'json', 'bin', 'date', 'flow', 'global']
                })

                $('#node-input-topic').typedInput({
                    default: 'str',
                    typeField: $('#node-input-topicType'),
                    types: ['str', 'msg', 'flow', 'global']
                })

                $('#node-input-passthru').on('change', function () {
                    if (this.checked) {
                        $('.form-row-decouple').hide()
                        $('#node-input-decouple').val('false')
                    } else {
                        $('.form-row-decouple').show()
                    }
                })

                // use jQuery UI tooltip to convert the plain old title attribute to a nice tooltip
                $('.ui-node-popover-title').tooltip({
                    show: {
                        effect: 'slideDown',
                        delay: 150
                    }
                })
            },
            oneditsave: function () {
                if ($('#node-input-custom-icons').val() === 'default') {
                    $('#node-input-onicon').val('')
                    $('#node-input-officon').val('')
                    $('#node-input-oncolor').val('')
                    $('#node-input-offcolor').val('')
                }
            }
        })
    })()
</script>

<script type="text/html" data-template-name="ui-switch">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
	<div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row nr-db-ui-element-sizer-row">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui-switch.label.size">Size</label>
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-h"></i> <span data-i18n="ui-switch.label.width">Width</label>
        <input type="hidden" id="node-input-width">
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-v"></i> <span data-i18n="ui-switch.label.height">Height</label>
        <input type="hidden" id="node-input-height">
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> Label</label>
        <input type="text" id="node-input-label">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i> Class</label>
        <div style="display: inline;">
            <input style="width: 70%;" type="text" id="node-input-className" placeholder="Optional CSS class name(s)" style="flex-grow: 1;">
            <a
                data-html="true"
                title="Dynamic Property: Send msg.class to append new classes to this widget. NOTE: classes set at runtime will be applied in addition to any class(es) set in the nodes class field."
                class="red-ui-button ui-node-popover-title"
                style="margin-left: 4px; cursor: help; font-size: 0.625rem; border-radius: 50%; width: 24px; height: 24px; display: inline-flex; justify-content: center; align-items: center;">
                <i style="font-family: ui-serif;">fx</i>
            </a>
        </div>
    </div>
    <!--<div class="form-row">
        <label for="node-input-tooltip"><i class="fa fa-info-circle"></i> Tooltip</label>
        <input type="text" id="node-input-tooltip" placeholder="optional tooltip">
    </div>-->
    <div class="form-row">
        <label for="node-input-custom-icons"><i class="fa fa-picture-o"></i> Icon</label>
        <select id="node-input-custom-icons" style="width:35%">
            <option value="default">Default</option>
            <option value="custom">Custom</option>
        </select>
    </div>
    <div class="form-row form-row-custom-icons">
        <label for="node-input-onicon" style="text-align:right;"><i class="fa fa-toggle-on"></i> On Icon</label>
        <input type="text" id="node-input-onicon" style="width:120px">
        <label for="node-input-oncolor" style="width:50px; text-align:right;">Colour</label>
        <input type="text" id="node-input-oncolor" style="width:120px">
    </div>
    <div class="form-row form-row-custom-icons">
        <label for="node-input-officon" style="text-align:right;"><i class="fa fa-toggle-off"></i> Off Icon</label>
        <input type="text" id="node-input-officon" style="width:120px">
        <label for="node-input-offcolor" style="width:50px; text-align:right;">Colour</label>
        <input type="text" id="node-input-offcolor" style="width:120px">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> If <code>msg</code> arrives on input, pass through to output: </label>
        <input type="checkbox" checked id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-onvalue"><i class="fa fa-envelope-o"></i> When clicked, send:</label>
    </div>
    <div class="form-row">
        <label for="node-input-onvalue" style="padding-left:25px; margin-right:-25px">On Payload</label>
        <input type="text" id="node-input-onvalue" style="width:70%">
        <input type="hidden" id="node-input-onvalueType">
    </div>
    <div class="form-row">
        <label for="node-input-offvalue" style="padding-left:25px; margin-right:-25px">Off Payload</label>
        <input type="text" id="node-input-offvalue" style="width:70%">
        <input type="hidden" id="node-input-offvalueType">
    </div>
    <div class="form-row">
        <label for="node-input-topic" style="padding-left:25px; margin-right:-25px">Topic</label>
        <input type="text" id="node-input-topic">
        <input type="hidden" id="node-input-topicType">
    </div>
</script><script type="text/html" data-help-name="ui-switch">
    <p>
        Adds a toggle switch to the user interface.
    </p>
    <p>
        Each change in the state of the switch will generate
        a <code>msg.payload</code> with the specified <b>On</b> and <b>Off</b> values.
    </p>
    <p>
        The <b>On/Off Color</b> and <b>On/Off Icon</b> are optional fields. If the icons are present, the default
        toggle switch will be replaced with the relevant icons and their respective colors (if defined).
    </p>
    <p>
        The <b>On/Off Icon</b> field should be a <a href="https://pictogrammers.com/library/mdi/" target="_blank">Material Design icon</a>
        <i>(e.g. 'wifi', 'home')</i>.
    </p>
    <p>
        The switch state can be updated by an incoming <code>msg.payload</code>. The values must either be <code>true</code>/<code>false</code>
        or match the specified type (number, string, etc) in the node's configuration.</p>
    <!-- <p>
        The label can also be set by a message property by setting
    the field to the name of the property, for example <code>{{msg.topic}}</code>.</p>
    <p>If a <b>Topic</b> is specified, it will be added to the output as <code>msg.topic</code>.</p> -->
    <!-- <p>Setting <code>msg.enabled</code> to <code>false</code> will disable the switch widget.</p> -->
    <!-- <p>
        If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card
        and the elements inside it with custom CSS. The Class can be set at runtime by setting a
        <code>msg.className</code> string property.
    </p> -->
    <h3>Dynamic Properties (Inputs)</h3>
    <p>Any of the following can be appended to a <code>msg.</code> in order to override or set properties on this node at runtime.</p>
    <dl class="message-properties">
        <dt class="optional">class <span class="property-type">string</span></dt>
        <dd>Add a CSS class, or more, to the Button at runtime.</dd>
    </dl>
</script>
</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-text] --- -->
<script type="text/javascript">
    (function () {
        const fonts = [
            {
                value: 'Arial,Arial,Helvetica,sans-serif',
                name: 'Arial'
            },
            {
                value: 'Arial Black,Arial Black,Gadget,sans-serif',
                name: 'Arial Black'
            },
            {
                value: 'Arial Narrow,Nimbus Sans L,sans-serif',
                name: 'Arial Narrow'
            },
            {
                value: 'Century Gothic,CenturyGothic,AppleGothic,sans-serif',
                name: 'Century Gothic'
            },
            {
                value: 'Copperplate,Copperplate Gothic Light,fantasy',
                name: 'Copperplate'
            },
            {
                value: 'Courier,monospace',
                name: 'Courier'
            },
            {
                value: 'Georgia,Georgia,serif',
                name: 'Georgia'
            },
            {
                value: 'Gill Sans,Geneva,sans-serif',
                name: 'Gill Sans'
            },
            {
                value: 'Helvetica, sans-serif',
                name: 'Helvetica'
            },
            {
                value: 'Impact,Impact,Charcoal,sans-serif',
                name: 'Impact'
            },
            {
                value: 'Lucida Sans Typewriter,Lucida Console,Monaco,monospace',
                name: 'Lucida Console'
            },
            {
                value: 'Lucida Sans Unicode,Lucida Grande,sans-serif',
                name: 'Lucida Sans'
            },
            {
                value: 'Palatino Linotype,Palatino,Book Antiqua,serif',
                name: 'Palatino Linotype'
            },
            {
                value: 'Tahoma,Geneva,sans-serif',
                name: 'Tahoma'
            },
            {
                value: 'Times New Roman,Times,serif',
                name: 'Times New Roman'
            },
            {
                value: 'Trebuchet MS,Helvetica,sans-serif',
                name: 'Trebuchet MS'
            },
            {
                value: 'Verdana,Verdana,Geneva,sans-serif',
                name: 'Verdana'
            }
        ]

        RED.nodes.registerType('ui-text', {
            category: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.label.category'),
            color: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.colors.medium'),
            defaults: {
                group: { type: 'ui-group', required: true },
                order: { value: 0 },
                width: {
                    value: 0,
                    validate: function (v) {
                        const width = v || 0
                        const currentGroup = $('#node-input-group').val() || this.group
                        const groupNode = RED.nodes.node(currentGroup)
                        const valid = !groupNode || +width <= +groupNode.width
                        $('#node-input-size').toggleClass('input-error', !valid)
                        return valid
                    }
                },
                height: { value: 0 },
                name: { value: '' },
                label: { value: 'text' },
                format: { value: '{{msg.payload}}' },
                layout: { value: 'row-spread' },
                style: { value: false },
                font: { value: 'Helvetica' },
                fontSize: { value: 16 },
                color: { value: '#717171' },
                className: { value: '' }
            },
            inputs: 1,
            outputs: 0,
            align: 'right',
            icon: 'font-awesome/fa-font',
            paletteLabel: 'text',
            label: function () { return this.name || (~this.label.indexOf('{' + '{') ? null : this.label) || 'text' },
            labelStyle: function () { return this.name ? 'node_label_italic' : '' },
            oneditprepare: function () {
                // if this groups parent is a subflow template, set the node-config-input-width and node-config-input-height up
                // as typedInputs and hide the elementSizer (as it doesn't make sense for subflow templates)
                if (RED.nodes.subflow(this.z)) {
                    // change inputs from hidden to text & display them
                    $('#node-input-width').attr('type', 'text')
                    $('#node-input-height').attr('type', 'text')
                    $('div.form-row.nr-db-ui-element-sizer-row').hide()
                    $('div.form-row.nr-db-ui-manual-size-row').show()
                } else {
                    // not in a subflow, use the elementSizer
                    $('div.form-row.nr-db-ui-element-sizer-row').show()
                    $('div.form-row.nr-db-ui-manual-size-row').hide()
                    $('#node-input-size').elementSizer({
                        width: '#node-input-width',
                        height: '#node-input-height',
                        group: '#node-input-group'
                    })
                }

                $('.nr-db-text-layout-' + (this.layout || 'row-spread')).addClass('selected');
                ['.nr-db-text-layout-row-left', '.nr-db-text-layout-row-center', '.nr-db-text-layout-row-right', '.nr-db-text-layout-row-spread', '.nr-db-text-layout-col-center']
                    .forEach(function (id) {
                        $(id).click(function (e) {
                            $('.nr-db-text-layout').removeClass('selected')
                            $(this).addClass('selected')
                            $('#node-input-layout').val(id.substring('.nr-db-text-layout-'.length))
                            e.preventDefault()
                        })
                    })

                const select = $('#node-select-font')

                // add font options
                fonts.forEach((font) => {
                    const name = font.name
                    const val = font.value
                    $('<option/>', {
                        value: val
                    }).text(name).appendTo(select)
                })

                // when a font is selected
                $(select).change(() => {
                    const val = $('#node-select-font').val()
                    // update hidden input
                    $('#node-input-font').val(val)
                    // update test text
                    $('#node-test-text').css({
                        'font-family': val
                    })
                })
                $(select).val(this.font)
                $(select).change()

                // make the fontsize a numeric spinner
                $('#node-input-fontSize').spinner({
                    min: 1,
                    max: 100,
                    spin: () => {
                        // update the test text when value is changed
                        const val = $('#node-input-fontSize').val()
                        $('#node-test-text').css({
                            'font-size': val + 'px'
                        })
                    }
                })

                // add change handler to color picker to update test text
                $('#node-input-color').change(() => {
                    const val = $('#node-input-color').val()
                    $('#node-test-text').css({
                        color: val
                    })
                })

                // add change handler to show/hide style config options
                $('#node-input-style').change(() => {
                    const val = $('#node-input-style').prop('checked')
                    if (val) {
                        $('#node-styles').show()
                    } else {
                        $('#node-styles').hide()
                    }
                })
                $('#node-input-style').change()

                // when opening the config, make sure the test text is updated
                if (this.fontSize) {
                    $('#node-test-text').css({
                        'font-size': this.fontSize + 'px'
                    })
                }
                if (this.color) {
                    $('#node-test-text').css({
                        color: this.color
                    })
                }

                // use jQuery UI tooltip to convert the plain old title attribute to a nice tooltip
                $('.ui-node-popover-title').tooltip({
                    show: {
                        effect: 'slideDown',
                        delay: 150
                    }
                })
            }
        })
    })()
</script>

<script type="text/html" data-template-name="ui-text">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> <span data-i18n="ui-text.label.group"></label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row nr-db-ui-element-sizer-row">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui-text.label.size"></label>
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-h"></i> <span data-i18n="ui-text.label.width">Width</label>
        <input type="hidden" id="node-input-width">
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-v"></i> <span data-i18n="ui-text.label.height">Height</label>
        <input type="hidden" id="node-input-height">
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> <span data-i18n="ui-text.label.label"></label>
        <input type="text" id="node-input-label">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i> <span data-i18n="ui-text.label.class"></label>
        <div style="display: inline;">
            <input style="width: 70%;" type="text" id="node-input-className" data-i18n="[placeholder]ui-text.label.optionalCssClassNames" style="flex-grow: 1;">
            <a
                data-html="true"
                title="Dynamic Property: Send msg.class to append new classes to this widget. NOTE: classes set at runtime will be applied in addition to any class(es) set in the nodes class field."
                class="red-ui-button ui-node-popover-title"
                style="margin-left: 4px; cursor: help; font-size: 0.625rem; border-radius: 50%; width: 24px; height: 24px; display: inline-flex; justify-content: center; align-items: center;">
                <i style="font-family: ui-serif;">fx</i>
            </a>
        </div>
    </div>
    <!--<div class="form-row">
        <label for="node-input-format"><i class="fa fa-i-cursor"></i> Value format</label>
        <input type="text" id="node-input-format" placeholder="{{msg.payload}}">
    </div>-->
    <div class="form-row">
        <label style="vertical-align: top"><i class="fa fa-th-large"></i> <span data-i18n="ui-text.label.layout"></label>
        <div style="display:inline-block">
            <input type="hidden" id="node-input-layout">
            <input type="hidden" id="node-input-layoutAlign" >
            <div>
                <a href="#" class="nr-db-text-layout nr-db-text-layout-row nr-db-text-layout-row-left">
                    <span class="nr-db-text-layout-label" data-i18n="ui-text.label.label2"></span>
                    <span class="nr-db-text-layout-value" data-i18n="ui-text.label.value"></span>
                    <div class="nr-db-text-layout-checkbox"></div>
                </a>
                <a href="#" class="nr-db-text-layout nr-db-text-layout-row nr-db-text-layout-row-center">
                    <span class="nr-db-text-layout-label" data-i18n="ui-text.label.label2"></span>
                    <span class="nr-db-text-layout-value" data-i18n="ui-text.label.value"></span>
                    <div class="nr-db-text-layout-checkbox"></div>
                </a>
                <a href="#" class="nr-db-text-layout nr-db-text-layout-row nr-db-text-layout-row-right">
                    <span class="nr-db-text-layout-label" data-i18n="ui-text.label.label2"></span>
                    <span class="nr-db-text-layout-value" data-i18n="ui-text.label.value"></span>
                    <div class="nr-db-text-layout-checkbox"></div>
                </a>
            </div>
            <div>
                <a href="#" class="nr-db-text-layout nr-db-text-layout-row nr-db-text-layout-row-spread">
                    <span class="nr-db-text-layout-label" data-i18n="ui-text.label.label2"></span>
                    <span class="nr-db-text-layout-value" data-i18n="ui-text.label.value"></span>
                    <div class="nr-db-text-layout-checkbox"></div>
                </a>
                <a href="#" class="nr-db-text-layout nr-db-text-layout-col nr-db-text-layout-col-center">
                    <span class="nr-db-text-layout-label" data-i18n="ui-text.label.label2"></span>
                    <span class="nr-db-text-layout-value" data-i18n="ui-text.label.value"></span>
                    <div class="nr-db-text-layout-checkbox"></div>
                </a>
            </div>
        </div>
    </div>

    <div class="form-row">
        <label><i class="fa fa-cog"></i> <span data-i18n="ui-text.label.style"></label>
        <input type="checkbox" id="node-input-style" style="display: inline-block; width: auto; vertical-align: top; margin: 0 3px 0 0;"/>
        <label for="node-input-style" style="width: 70%;" data-i18n="ui-text.label.applyStyle"></label>
    </div>

    <div id="node-styles">
        <div class="form-row">
            <label for="node-input-font"><i class="fa fa-font"></i> <span data-i18n="ui-text.label.font"></label>
            <select id="node-select-font">
            </select>
            <input type="hidden" id="node-input-font"/>
        </div>
        <div class="form-row">
            <label for="node-input-fontSize"><i class="fa fa-text-height"></i>  <span data-i18n="ui-text.label.textSize"></label>
            <input id="node-input-fontSize" value="16" style="width: 50px;"/>
        </div>
        <div class="form-row">
            <label for="node-input-color"><i class="fa fa-tint"></i> <span data-i18n="ui-text.label.textColor"></label>
            <input type="color" id="node-input-color" style="width: 50px;"/>
        </div>
        <div class="form-row">
            <label>&nbsp;</label>
            <input id="node-test-text" data-i18n="[value]ui-text.label.enterSampleHere" style="width: 280px;">
        </div>
    </div>
</script>

<style>
    .nr-db-text-layout {
        position:relative;
        display: inline-block;
        width: 90px;
        height: 60px;
        border-radius:3px;
        border:1px solid var(--red-ui-form-input-border-color, #bbb);
        cursor:pointer;
        color: #666;
        margin-right: 10px;
        margin-bottom: 10px;
    }
    .nr-db-text-layout.selected, .nr-db-text-layout:hover {
        border-color: var(--red-ui-form-input-border-selected-color, #333);
        color: var(--red-ui-secondary-text-color-selected, #333);
    }
    .nr-db-text-layout span {
        position: absolute;
    }
    .nr-db-text-layout-value {
        font-weight: bold;
    }
    .nr-db-text-layout-row span { top: 20px; }
    .nr-db-text-layout-row-left .nr-db-text-layout-label { left: 2px; }
    .nr-db-text-layout-row-left .nr-db-text-layout-value { left: 34px; }
    .nr-db-text-layout-row-spread .nr-db-text-layout-label { left: 2px; }
    .nr-db-text-layout-row-spread .nr-db-text-layout-value { right: 2px; }
    .nr-db-text-layout-row-center .nr-db-text-layout-label { left: 11px; }
    .nr-db-text-layout-row-center .nr-db-text-layout-value { right: 11px; }
    .nr-db-text-layout-row-right .nr-db-text-layout-label { right: 40px; }
    .nr-db-text-layout-row-right .nr-db-text-layout-value { right: 2px; }

    .nr-db-text-layout-col span { width: 90px;  text-align: center; left: 0px;}
    .nr-db-text-layout-col-center .nr-db-text-layout-label { top: 12px; }
    .nr-db-text-layout-col-center .nr-db-text-layout-value { top: 26px; }
    .nr-db-text-layout-checkbox {
        display: none;
        width: 10px;
        height: 10px;
        border-radius: 10px;
        border: 1px solid var(--red-ui-primary-border-color, #bbb);
        position: absolute;
        right: -5px;
        top: -5px;
        background: var(--red-ui-secondary-background, #fff);
    }
    .nr-db-text-layout.selected .nr-db-text-layout-checkbox {
        display:inline-block;
        box-shadow: inset 0px 0px 0px 2px #fff;
        background: #333;
        border-color: #333;
    }
    .nr-db-ui-manual-size-row {
        display: none;
    }

</style><script type="text/html" data-help-name="ui-text">
    <p>
        Displays a non-editable text field on the user interface.
        Each received <code>msg.payload</code> will update the value shown
        alongside the (optional) label.
    </p>
    <p>
        You can also customise the style of the text by enabling "Apply Style".
        This will show the following options:
        <ul>
            <li><b>Font:</b> Choose from a collection of pre-defined fonts.</li>
            <li><b>Text Size:</b> Numerical value defining (in px) how big the text should display.</li>
            <li><b>Text Color:</b> Color picker to define the color to display the text in.</li>
        </ul>
    </p>
    <h3>Dynamic Properties (Inputs)</h3>
    <p>Any of the following can be appended to a <code>msg.</code> in order to override or set properties on this node at runtime.</p>
    <dl class="message-properties">
        <dt class="optional">class <span class="property-type">string</span></dt>
        <dd>Add a CSS class, or more, to the text at runtime.</dd>
    </dl>
</script>
</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-table] --- -->
<script type="text/javascript">
    (function () {
        RED.nodes.registerType('ui-table', {
            category: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.label.category'),
            color: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.colors.medium'),
            defaults: {
                group: { type: 'ui-group', required: true },
                name: { value: '' },
                label: { value: 'text' },
                order: { value: 0 },
                width: {
                    value: 0,
                    validate: function (v) {
                        const width = v || 0
                        const currentGroup = $('#node-input-group').val() || this.group
                        const groupNode = RED.nodes.node(currentGroup)
                        const valid = !groupNode || +width <= +groupNode.width
                        $('#node-input-size').toggleClass('input-error', !valid)
                        return valid
                    }
                },
                height: { value: 0 },
                maxrows: { value: 0, validate: RED.validators.number() },
                passthru: { value: false },
                autocols: { value: true },
                showSearch: { value: true },
                selectionType: { value: 'none' },
                columns: {
                    value: null
                }
            },
            inputs: 1,
            outputs: 1,
            outputLabels: function () { return this.mode },
            icon: 'font-awesome/fa-table',
            paletteLabel: 'table',
            label: function () {
                return this.name || 'table'
            },
            oneditprepare: function () {
                // handle backward compatibility
                const validSelectionTypes = ['none', 'checkbox', 'click']
                if (!validSelectionTypes.includes(this.selectionType)) {
                    $('#node-input-selectionType').val('none')
                }
                // if this groups parent is a subflow template, set the node-config-input-width and node-config-input-height up
                // as typedInputs and hide the elementSizer (as it doesn't make sense for subflow templates)
                if (RED.nodes.subflow(this.z)) {
                    // change inputs from hidden to text & display them
                    $('#node-input-width').attr('type', 'text')
                    $('#node-input-height').attr('type', 'text')
                    $('div.form-row.nr-db-ui-element-sizer-row').hide()
                    $('div.form-row.nr-db-ui-manual-size-row').show()
                } else {
                    // not in a subflow, use the elementSizer
                    $('div.form-row.nr-db-ui-element-sizer-row').show()
                    $('div.form-row.nr-db-ui-manual-size-row').hide()
                    $('#node-input-size').elementSizer({
                        width: '#node-input-width',
                        height: '#node-input-height',
                        group: '#node-input-group'
                    })
                }
    
                const autocols = $('#node-input-autocols')

                $(autocols).change(() => {
                    const val = autocols.is(':checked')
                    const customColsDiv = $('#node-input-columns-container')
                    if (val) {
                        customColsDiv.hide()
                    } else {
                        customColsDiv.show()
                    }
                })

                // Columns Editor
                function generateColumn (i, col) {
                    const container = $('<li/>', { style: 'background: var(--red-ui-secondary-background, #fff); margin:0; padding:8px 0px 0px; border-bottom: 1px solid var(--red-ui-form-input-border-color, #ccc);' })
                    const row = $('<div/>').appendTo(container)
                    $('<div/>', { style: 'padding-top:5px; padding-left:175px;' }).appendTo(container)
                    $('<div/>', { style: 'padding-top:5px; padding-left:120px;' }).appendTo(container)

                    $('<i style="color: var(--red-ui-form-text-color, #eee); cursor:move; margin-left:3px;" class="node-input-column-handle fa fa-bars"></i>').appendTo(row)

                    $('<input/>', { class: 'node-input-column-key', type: 'text', style: 'margin-left:7px; width:calc(50% - 32px);', placeholder: RED._('@flowfuse/node-red-dashboard/ui-table:ui-table.label.key'), value: col.key }).appendTo(row)
                    $('<input/>', { class: 'node-input-column-label', type: 'text', style: 'margin-left:7px; width:calc(50% - 32px);', placeholder: RED._('@flowfuse/node-red-dashboard/ui-table:ui-table.label.label'), value: col.title }).appendTo(row)

                    const finalSpan = $('<span/>', { style: 'float:right; margin-right:8px;' }).appendTo(row)
                    const deleteButton = $('<a/>', { href: '#', class: 'editor-button editor-button-small', style: 'margin-top:7px; margin-left:5px;' }).appendTo(finalSpan)
                    $('<i/>', { class: 'fa fa-remove' }).appendTo(deleteButton)

                    deleteButton.click(function () {
                        container.css({ background: 'var(--red-ui-secondary-background-inactive, #fee)' })
                        container.fadeOut(300, function () {
                            $(this).remove()
                        })
                    })

                    $('#node-input-column-container').append(container)
                }

                $('#node-input-add-column').click(function () {
                    generateColumn($('#node-input-column-container').children().length + 1, {})
                    $('#node-input-column-container-div').scrollTop($('#node-input-column-container-div').get(0).scrollHeight)
                })

                for (let i = 0; i < this.columns?.length; i++) {
                    const col = this.columns[i]
                    generateColumn(i + 1, col)
                }

                $('#node-input-column-container').sortable({
                    axis: 'y',
                    handle: '.node-input-column-handle',
                    cursor: 'move'
                })
            },
            oneditsave: function () {
                const columns = $('#node-input-column-container').children()
                const node = this
                node.columns = []
                columns.each(function (i) {
                    const column = $(this)
                    const o = {
                        title: column.find('.node-input-column-label').val(),
                        key: column.find('.node-input-column-key').val()
                    }
                    node.columns.push(o)
                })
            }
        })
    })()
</script>

<script type="text/html" data-template-name="ui-table">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> <span data-i18n="ui-table.label.group"></label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row nr-db-ui-element-sizer-row">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui-table.label.size">Size</label>
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-h"></i> <span data-i18n="ui-table.label.width">Width</label>
        <input type="hidden" id="node-input-width">
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-v"></i> <span data-i18n="ui-table.label.height">Height</label>
        <input type="hidden" id="node-input-height">
    </div>
    <div class="form-row">
        <label for="node-input-maxrows"><i class="fa fa-tag"></i> <span data-i18n="ui-table.label.maxRows"></label>
        <input type="number" id="node-input-maxrows">
    </div>
    <div class="form-row">
        <label for="node-input-selectionType"><i class="fa fa-crosshairs"></i> <span data-i18n="ui-table.label.selection"></span></label>
        <select id="node-input-selectionType">
            <option value="none" data-i18n="ui-table.selection.none"></option>
            <option value="click" data-i18n="ui-table.selection.click"></option>
            <option value="checkbox" data-i18n="ui-table.selection.checkbox"></option>
        </select>
    </div>
    <div class="form-row form-row-flex">
        <label for="node-input-showSearch"><i class="fa fa-search"></i> <span data-i18n="ui-table.label.search"></label>
        <div style="margin-bottom: 0px; width:calc(70% + 15px);">
            <input type="checkbox" id="node-input-showSearch" style="display: inline-block; width: auto;">
            <label  for="node-input-showSearch" data-i18n="ui-table.label.showSearch"></label>
        </div>
    </div>
    <div class="form-row" style="display:flex;">
        <label for="node-input-width" style="vertical-align:top"><i class="fa fa-list-alt"></i> <span data-i18n="ui-table.label.columns"></label>
        <div class="form-row node-input-column-container-row" style="margin-bottom: 0px; width:calc(70% + 15px);">
            <div>
                <input type="checkbox" checked id="node-input-autocols" style="display: inline-block; width: auto; margin: 0px 0px 0px 4px;">
                <label style="width:auto" for="node-input-autocols" data-i18n="ui-table.label.autoCalculateColumns"></label>
            </div>
            <div id="node-input-columns-container">
                <div id="node-input-column-container-div" style="box-sizing:border-box; border-radius:5px; height:257px; padding:5px; border:1px solid var(--red-ui-form-input-border-color, #ccc); overflow-y:scroll; display:inline-block; width: 100%;">
                    <ol id="node-input-column-container" style="list-style-type:none; margin:0;"></ol>
                </div>
                <a href="#" class="editor-button editor-button-small" id="node-input-add-column" style="margin-top:4px;"><i class="fa fa-plus"></i> <span data-i18n="ui-table.label.columns"></span></a>
            </div>
        </div>
    </div>
</script>

</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-chart] --- -->
<style>
    #ui-chart-colors input[type="color"] {
        font-weight: bold;
    }
    #ui-chart-colors input[type="color"]::-webkit-color-swatch,
    #ui-chart-colors input[type="color"]::-moz-color-swatch {
        border: none;
    }

    .node-chart-properties {
        display: inline-flex;
        align-items: center;
        width: 70%;
        gap: 16px;
        flex-wrap: wrap;
    }
    .node-chart-properties .red-ui-typedInput-container {
        flex-grow: 1;
    }
    .node-chart-property {
        display: flex;
        gap: 8px;
        align-items: center;
        flex-grow: 1;
    }
    .node-chart-property label {
        margin: 0;
    }
    .node-chart-property#node-container-category {
        width: 100%;
    }
</style>

<script type="text/javascript">
    (function () {
        function hexToRgb (hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex)
            return result
                ? {
                    r: parseInt(result[1], 16),
                    g: parseInt(result[2], 16),
                    b: parseInt(result[3], 16)
                }
                : null
        }

        RED.nodes.registerType('ui-chart', {
            category: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.label.category'),
            color: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.colors.medium'),
            defaults: {
                group: { type: 'ui-group', required: true },
                name: { value: '' },
                label: { value: 'chart' },
                order: { value: Number.MAX_SAFE_INTEGER },
                chartType: { value: 'line' },
                category: { value: 'topic' },
                categoryType: { value: 'msg' },
                xAxisProperty: { value: null },
                xAxisPropertyType: { value: 'msg' },
                xAxisType: { value: 'time' },
                yAxisProperty: { value: null },
                ymin: { value: '', validate: function (value) { return value === '' || RED.validators.number() } },
                ymax: { value: '', validate: function (value) { return value === '' || RED.validators.number() } },
                action: { value: 'append' },
                pointShape: { value: 'circle' },
                pointRadius: { value: 4 },
                showLegend: { value: true },
                removeOlder: { value: 1, validate: RED.validators.number(), required: true },
                removeOlderUnit: { value: '3600', required: true },
                removeOlderPoints: { value: '', validate: function (value) { return value === '' || RED.validators.number() } },
                colors: { value: ['#1F77B4', '#AEC7E8', '#FF7F0E', '#2CA02C', '#98DF8A', '#D62728', '#FF9896', '#9467BD', '#C5B0D5'] },
                width: {
                    value: 6,
                    validate: function (v) {
                        const width = v || 0
                        const currentGroup = $('#node-input-group').val() || this.group
                        const groupNode = RED.nodes.node(currentGroup)
                        const valid = !groupNode || +width <= +groupNode.width
                        $('#node-input-size').toggleClass('input-error', !valid)
                        return valid
                    }
                },
                height: { value: 8 },
                className: { value: '' }
            },
            inputs: 1,
            outputs: 1,
            inputLabels: function () { return this.chartType },
            outputLabels: ['chart state'],
            icon: 'font-awesome/fa-line-chart',
            align: 'right',
            paletteLabel: 'chart',
            label: function () {
                return this.name || (~this.label.indexOf('{' + '{') ? null : this.label) || this.mode + ' chart'
            },
            labelStyle: function () { return this.name ? 'node_label_italic' : '' },
            oneditprepare: function () {
                const propertyType = { value: 'property', label: RED._('@flowfuse/node-red-dashboard/ui-chart:ui-chart.label.key') }

                // if this groups parent is a subflow template, set the node-config-input-width and node-config-input-height up
                // as typedInputs and hide the elementSizer (as it doesn't make sense for subflow templates)
                if (RED.nodes.subflow(this.z)) {
                    // change inputs from hidden to text & display them
                    $('#node-input-width').attr('type', 'text')
                    $('#node-input-height').attr('type', 'text')
                    $('div.form-row.nr-db-ui-element-sizer-row').hide()
                    $('div.form-row.nr-db-ui-manual-size-row').show()
                } else {
                    // not in a subflow, use the elementSizer
                    $('div.form-row.nr-db-ui-element-sizer-row').show()
                    $('div.form-row.nr-db-ui-manual-size-row').hide()
                    $('#node-input-size').elementSizer({
                        width: '#node-input-width',
                        height: '#node-input-height',
                        group: '#node-input-group'
                    })
                }

                // use jQuery UI tooltip to convert the plain old title attribute to a nice tooltip
                $('.ui-node-popover-title').tooltip({
                    show: {
                        effect: 'slideDown',
                        delay: 150
                    }
                })

                // set value options for chart's type
                $('#node-input-chartType').typedInput({
                    type: 'chartType',
                    types: [{
                        value: 'line',
                        options: [
                            { value: 'line', label: RED._('@flowfuse/node-red-dashboard/ui-chart:ui-chart.label.line') },
                            { value: 'bar', label: RED._('@flowfuse/node-red-dashboard/ui-chart:ui-chart.label.bar') },
                            { value: 'scatter', label: RED._('@flowfuse/node-red-dashboard/ui-chart:ui-chart.label.scatter') }
                        ]
                    }],
                    typeField: '#node-input-chartTypeType'
                })

                // line    = time, linear, log
                // scatter = time, linear, log
                // bar     = categorical (or just hide)

                // provide options for x-axis type
                $('#node-input-xAxisType').typedInput()

                $('#node-input-category').typedInput({
                    default: 'msg',
                    typeField: $('#node-input-categoryType'),
                    types: ['msg', 'str', 'json', propertyType]
                })
                $('#node-input-xAxisProperty').typedInput({
                    default: propertyType.value,
                    typeField: $('#node-input-xAxisPropertyType'),
                    types: [propertyType]
                })
                $('#node-input-yAxisProperty').typedInput({
                    default: propertyType.value,
                    typeField: $('#node-input-yAxisPropertyType'),
                    types: [propertyType]
                })

                $('#node-input-pointShape').typedInput({
                    type: 'pointShape',
                    default: 'circle',
                    typeField: $('#node-input-pointShapeType'),
                    types: [{
                        value: 'circle',
                        options: [
                            { value: 'circle', label: RED._('@flowfuse/node-red-dashboard/ui-chart:ui-chart.label.circle') },
                            { value: 'cross', label: RED._('@flowfuse/node-red-dashboard/ui-chart:ui-chart.label.cross') },
                            { value: 'crossRot', label: RED._('@flowfuse/node-red-dashboard/ui-chart:ui-chart.label.crossRotated') },
                            { value: 'dash', label: RED._('@flowfuse/node-red-dashboard/ui-chart:ui-chart.label.dash') },
                            { value: 'line', label: RED._('@flowfuse/node-red-dashboard/ui-chart:ui-chart.label.line2') },
                            { value: 'rect', label: RED._('@flowfuse/node-red-dashboard/ui-chart:ui-chart.label.rectangle') },
                            { value: 'rectRounded', label: RED._('@flowfuse/node-red-dashboard/ui-chart:ui-chart.label.roundedRectangle') },
                            { value: 'rectRot', label: RED._('@flowfuse/node-red-dashboard/ui-chart:ui-chart.label.rotatedRectangle') },
                            { value: 'star', label: RED._('@flowfuse/node-red-dashboard/ui-chart:ui-chart.label.star') },
                            { value: 'triangle', label: RED._('@flowfuse/node-red-dashboard/ui-chart:ui-chart.label.triangle') },
                            { value: 'false', label: RED._('@flowfuse/node-red-dashboard/ui-chart:ui-chart.label.none') }
                        ]
                    }]
                })

                // handle event when chart's type is changed
                $('#node-input-chartType').on('change', (evt) => {
                    const value = $('#node-input-chartType').typedInput('value')

                    if (value === 'line' || value === 'scatter') {
                        // for line and scatter
                        // types - time, linear
                        $('#node-input-xAxisType').typedInput('types', [{
                            value: 'linear',
                            options: [
                                { value: 'time', label: RED._('@flowfuse/node-red-dashboard/ui-chart:ui-chart.label.timescale') },
                                { value: 'linear', label: RED._('@flowfuse/node-red-dashboard/ui-chart:ui-chart.label.linear') }
                            ]
                        }])
                        $('#node-input-xAxisType').typedInput('type', 'time')
                        // show x-axis property setting
                        $('#node-container-xAxisProperty').show()
                        // show x-axis limit options & points sizing
                        $('#x-axis-show').show()
                        $('#point-radius-show').show()
                    } else {
                        // for bar
                        // types - categorical
                        $('#node-input-xAxisType').typedInput('types', [{
                            value: 'linear',
                            options: [
                                { value: 'category', label: RED._('@flowfuse/node-red-dashboard/ui-chart:ui-chart.label.categorical') }
                            ]
                        }])
                        $('#node-input-xAxisType').typedInput('type', 'category')
                        // show x-axis property setting
                        $('#node-container-xAxisProperty').hide()
                        // hide x-axis limit options & points sizing
                        $('#x-axis-show').hide()
                        $('#point-radius-show').hide()
                    }
                })

                // handle event when chart's type is changed
                $('#node-input-category').change((evt) => {
                    const categoryType = $('#node-input-categoryType').val()

                    if (categoryType === 'json') {
                        // hide y-axis property setting as category will now control that
                        $('#node-container-yAxisProperty').hide()
                    } else {
                        $('#node-container-yAxisProperty').show()
                    }
                })

                // Series Color Pickers
                const setColor = function (id, value) {
                    $(id).val(value)
                    $(id).css('background-color', value)
                    const rgb = hexToRgb(value)
                    const level = ((rgb.r * 299) + (rgb.g * 587) + (rgb.b * 114)) / 1000
                    const textColor = (level >= 128) ? '#111111' : '#eeeeee'
                    $(id).css('color', textColor)
                }
                $('.series-color').on('change', function () {
                    setColor('#' + $(this).attr('id'), $(this).val())
                })
                const defaultColors = ['#1F77B4', '#AEC7E8', '#FF7F0E', '#2CA02C', '#98DF8A', '#D62728', '#FF9896', '#9467BD', '#C5B0D5']

                if (this.colors) {
                    for (let i = 0; i < this.colors.length; i++) {
                        const value = this.colors[i] || defaultColors[i]
                        setColor('#node-input-color' + (i + 1), value)
                    }
                } else {
                    for (let c = 0; c < defaultColors.length; c++) {
                        setColor('#node-input-color' + (c + 1), defaultColors[c])
                    }
                }
            },
            oneditsave: function () {
                const colors = []
                for (let i = 0; i < 9; i++) {
                    const color = $('#node-input-color' + (i + 1)).val()
                    if (color) {
                        colors.push(color)
                    }
                }
                this.colors = colors
            }
        })
    })()
</script>

<script type="text/html" data-template-name="ui-chart">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> <span data-i18n="ui-chart.label.group"></span></label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row nr-db-ui-element-sizer-row">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui-chart-group.label.size"></label>
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-h"></i> <span data-i18n="ui-chart-group.label.width">Width</label>
        <input type="hidden" id="node-input-width">
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-v"></i> <span data-i18n="ui-chart-group.label.height">Height</label>
        <input type="hidden" id="node-input-height">
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> <span data-i18n="ui-chart.label.label"></span></label>
        <input type="text" id="node-input-label" data-i18n="[placeholder]ui-chart.label.optionalChartTitle">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i> <span data-i18n="ui-chart.label.class"></span></label>
        <div style="display: inline;">
            <input style="width: 70%;" type="text" id="node-input-className" data-i18n="[placeholder]ui-chart.label.optionalCssClassNames" style="flex-grow: 1;">
            <a
                data-html="true"
                title="Dynamic Property: Send msg.class to append new classes to this widget. NOTE: classes set at runtime will be applied in addition to any class(es) set in the nodes class field."
                class="red-ui-button ui-node-popover-title"
                style="margin-left: 4px; cursor: help; font-size: 0.625rem; border-radius: 50%; width: 24px; height: 24px; display: inline-flex; justify-content: center; align-items: center;">
                <i style="font-family: ui-serif;">fx</i>
            </a>
        </div>
    </div>
    <div class="form-row" style="display: flex; align-items: center; gap: 36px;">
        <div>
            <label for="node-input-chartType"><i class="fa fa-bookmark"></i> <span data-i18n="ui-chart.label.type"></span></label>
            <input type="text" id="node-input-chartType">
            <input type="hidden" id="node-input-chartTypeType">
        </div>
        <div>
            <label style="width:auto" for="node-input-showLegend"><i class="fa fa-th-list"></i> <span data-i18n="ui-chart.label.showLegend"></span></label>
            <input type="checkbox" checked id="node-input-showLegend" style="display: inline-block; width: auto; margin: 0px 0px 0px 4px;">
        </div>
    </div>
    <div class="form-row">
        <label for="node-input-action" data-i18n="ui-chart.label.action"></label></label>
        <select id="node-input-action">
            <option value="append" data-i18n="ui-chart.label.append"></option>
            <option value="replace" data-i18n="ui-chart.label.replace"></option>
        </select>
    </div>
    <div class="form-row form-row-flex" id="point-radius-show">
        <label for="node-input-pointRadius" data-i18n="ui-chart.label.pointStyle"></label>
        <div style="margin-right: 6px;">
            <label for="node-input-pointShape" style="width: auto;" data-i18n="ui-chart.label.pointShape"></label>
            <input type="text" id="node-input-pointShape">
            <input type="hidden" id="node-input-pointShapeType">
        </div>
        <div>
            <label for="node-input-pointRadius" style="width: auto;" data-i18n="ui-chart.label.pointRadius"></label>
            <input type="number" id="node-input-pointRadius">
        </div>
    </div>
    <div class="form-row">
        <label for="node-input-xAxisType" data-i18n="ui-chart.label.xType"></label></label>
        <input type="text" id="node-input-xAxisType">
        <input type="hidden" id="node-input-xAxisTypeType">
    </div>
    <div class="form-row" id="x-axis-show">
        <label for="node-input-removeOlder" data-i18n="ui-chart.label.xLimit"></label>
        <label for="node-input-removeOlder" style="width:auto" data-i18n="ui-chart.label.last"></label>
        <input type="text" id="node-input-removeOlder" style="width:50px;">
        <select id="node-input-removeOlderUnit" style="width:100px;">
            <option value="1" data-i18n="ui-chart.label.seconds"></option>
            <option value="60" data-i18n="ui-chart.label.minutes"></option>
            <option value="3600" data-i18n="ui-chart.label.hours"></option>
            <option value="86400" data-i18n="ui-chart.label.days"></option>
            <option value="604800" data-i18n="ui-chart.label.weeks"></option>
        </select>
        <label for="node-input-removeOlderPoints" style="width:auto; margin-left:10px; margin-right:10px;" data-i18n="ui-chart.label.or"></label>
        <input type="text" id="node-input-removeOlderPoints" style="width:60px;" placeholder="1000">
        <span style="margin-left:5px;" data-i18n="ui-chart.label.points"></span>
    </div>
    <div class="form-row" id="y-axis-show">
        <label id="y-label-show" for="node-input-ymin" data-i18n="ui-chart.label.yAxis"></label>
        <label for="node-input-ymin" style="width:auto" data-i18n="ui-chart.label.min"></label>
        <input type="text" id="node-input-ymin" style="width:92px">
        <label for="node-input-ymax" style="width:auto; margin-left:20px;" data-i18n="ui-chart.label.max"></label>
        <input type="text" id="node-input-ymax" style="width:92px">
    </div>
    <div class="form-row">
        <label data-i18n="ui-chart.label.properties"></label>
        <div id="node-container-axisKeys" class="node-chart-properties">
            <div id="node-container-category" class="node-chart-property">
                <label style="width: auto" for="node-input-category" data-i18n="ui-chart.label.series"></label>
                <input style="flex-grow: 1" type="text" id="node-input-category" placeholder="topic">
                <input type="hidden" id="node-input-categoryType">
            </div>
            <div id="node-container-xAxisProperty" class="node-chart-property">
                <label style="width: auto" for="node-input-xAxisProperty">X:</label>
                <input style="flex-grow: 1" type="text" id="node-input-xAxisProperty" data-i18n="[placeholder]ui-chart.label.propertyPlaceholder">
            </div>
            <div id="node-container-yAxisProperty" class="node-chart-property">
                <label style="width: auto" for="node-input-yAxisProperty">Y:</label>
                <input style="flex-grow: 1" type="text" id="node-input-yAxisProperty" data-i18n="[placeholder]ui-chart.label.propertyPlaceholder">
            </div>
        </div>
    </div>
    <div class="form-row" id="ui-chart-colors">
        <label for="node-input-color1" data-i18n="ui-chart.label.seriesColors"></label>
        <input type="color" id="node-input-color1" class="series-color" style="width:100px;"/>
        <input type="color" id="node-input-color2" class="series-color" style="width:100px;"/>
        <input type="color" id="node-input-color3" class="series-color" style="width:100px;"/>
        <div style="margin-top:5px; margin-left:104px;">
            <input type="color" id="node-input-color4" class="series-color" style="width:100px;"/>
            <input type="color" id="node-input-color5" class="series-color" style="width:100px;"/>
            <input type="color" id="node-input-color6" class="series-color" style="width:100px;"/>
        </div>
        <div style="margin-top:5px; margin-left:104px;">
            <input type="color" id="node-input-color7" class="series-color" style="width:100px;"/>
            <input type="color" id="node-input-color8" class="series-color" style="width:100px;"/>
            <input type="color" id="node-input-color9" class="series-color" style="width:100px;"/>
        </div>
    </div>
</script>
<script type="text/html" data-help-name="ui-chart">
    <h3>Properties</h3>
    <dl class="message-properties">
        <dt>Label <span class="property-type">string</span></dt>
        <dd>Text shown above the rendered chart in the Dashboard.</dd>
        <dt>Type <span class="property-type">Line | Bar | Scatter</span></dt>
        <dd>Choose the type of graph that you wish to render data with. Note
            that different data structures are accepted for different chart types.</dd>
        <dt>Show Legend <span class="property-type">boolean</span></dt>
        <dd>Defines whether or not a legend is shown between the title and the chart. Each label is driven by <code>msg.topic</code>.</dd>
        <dt>Action <span class="property-type">Append | Replace</span></dt>
        <dd>
            Define how new data is added to the Chart. "Append" will keep
            existing data, "Replace" will remove all existing data.
        </dd>
        <dt>X-Axis Type <span class="property-type">Linear | Categorical | Timescale</span></dt>
        <dd>
            For charts with an X-axis, this option allows customisation
            of the type of axis to render.
        </dd>
        <dt>Properties <span class="property-type">string</span></dt>
        <dd>
            <p><b>Series:</b> Controls how you want to set the Series of data stream into this widget. The default is <code>msg.topic</code>, where separate topics will render to a new line/bar in their respective plots. You can also provide a JSON array, which will plot multiple data points from a single msg object.</p>
            <p><b>X:</b> Only available for Line & Scatter Charts. This defines the key (which can be nested) of the value that should be plotted onto the X-axis. If left blank, the X-value will be calculated as the current timestamp.</p>
            <p><b>Y:</b> Defines the key (which can be nested, e.g. <code>'nested.value'</code>) of the value that should be plotted onto the X-axis. This value is ignored if injecting single numerical values into the chart.</p>
        </dd>
    </dl>
    <h3>Input</h3>
    <p>Data can be passed into the Chart node in a variety of formats,
    depending on the "X-Axis Type" (e.g. Linear, Categorical, Timescale).</p>
    <dl class="message-properties">
        <dt>Numerical <span class="property-type">Linear | Categorical | Timescale</span></dt>
        <dd><pre>msg.payload = 5</pre> A single value, that will be plotted
            in the Y-axis, and the current time of injection as the X-value.</dd>
        <dt>Series <span class="property-type">Linear | Categorical | Timescale</span></dt>
        <dd><pre>msg.topic = 'Series 1'</pre> Multiple series can
            be shown on the same chart by using a different <code>msg.topic</code> value on each
            input message.</dd>
        <dt>Object <span class="property-type">Linear</span></dt>
        <dd><pre>msg.payload = {x: 10, y: 15}</pre>This type of data is only
            supported on linear plots, e.g. "Line" or "Scatter" charts.</dd>
    </dl>
    <h3>Dynamic Properties</h3>
    <dl class="message-properties">
        <dt>msg.action <span class="property-type">append | replace</span></dt>
        <dd>
            Can be used to override the default action property set in the node's configuration.
            Use this if sometimes you want to "append" data, and sometimes you want to "replace" it.
        </dd>
    </dl>
</script>
</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-gauge] --- -->
<style>
    input.gauge-color {
        width: 100px;
        text-align: center;
    }
    input.gauge-color::-webkit-color-swatch {
        border: none;
    }
</style>

<script type="text/javascript">
    function validateGaugeSegments (segments) {
        $('#node-input-validation-segments').hide()
        const min = parseFloat(this.min)
        const max = parseFloat(this.max)
    
        // check we havea  segment covering the smallest values of the gauge
        let minCovered = false
        for (let i = 0; i < segments.length; i++) {
            const from = parseFloat(segments[i].from)
            if (from <= min) {
                minCovered = true
            }
        }
        if (!minCovered) {
            $('#node-input-validation-segments').text("It's advised to make sure your first segment's 'from' value and the gauge's 'min' value are the same.").show()
        }
        // check if we have any extra, unneccessary, segments
        let extras = false
        for (let i = 0; i < segments.length; i++) {
            const from = parseFloat(segments[i].from)
            if (from > max) {
                extras = true
            }
        }
        if (extras) {
            $('#node-input-validation-segments').text('You have segments defined outside of the min/max range of your gauge').show()
        }
        return minCovered && !extras
    }
    RED.nodes.registerType('ui-gauge', {
        category: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.label.category'),
        color: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.colors.medium'),
        defaults: {
            name: { value: '' },
            group: { type: 'ui-group', required: true },
            order: { value: 0 },
            width: {
                value: 3,
                validate: function (v) {
                    const width = v || 0
                    const currentGroup = $('#node-input-group').val() || this.group
                    const groupNode = RED.nodes.node(currentGroup)
                    const valid = !groupNode || +width <= +groupNode.width
                    $('#node-input-size').toggleClass('input-error', !valid)
                    return valid
                }
            },
            height: { value: 3 },
            gtype: { value: 'gauge-half' },
            gstyle: { value: 'needle' },
            title: { value: 'gauge' },
            units: { value: 'units' },
            icon: { value: '' },
            prefix: { value: '' },
            suffix: { value: '' },
            segments: {
                value: [{
                    color: '#5CD65C',
                    from: 0
                }, {
                    color: '#FFC800',
                    from: 4
                }, {
                    color: '#EA5353',
                    from: 7
                }],
                validate: validateGaugeSegments
            },
            min: { value: 0, required: true, validate: RED.validators.number() },
            max: { value: 10, required: true, validate: RED.validators.number() },
            // sizes
            sizeThickness: { value: 16, validate: RED.validators.number() },
            sizeGap: { value: 4, validate: RED.validators.number() },
            sizeKeyThickness: { value: 8, validate: RED.validators.number() },
            // style
            styleRounded: { value: true },
            styleGlow: { value: false },
            // CSS
            className: { value: '' }
        },
        inputs: 1,
        outputs: 0,
        inputLabels: function () { return this.min + ' - ' + this.max },
        align: 'right',
        icon: 'ui-gauge.svg',
        paletteLabel: 'gauge',
        label: function () { return this.name || this.title || this.gtype },
        labelStyle: function () { return this.name ? 'node_label_italic' : '' },
        oneditprepare: function () {
            // if this groups parent is a subflow template, set the node-config-input-width and node-config-input-height up
            // as typedInputs and hide the elementSizer (as it doesn't make sense for subflow templates)
            if (RED.nodes.subflow(this.z)) {
                // change inputs from hidden to text & display them
                $('#node-input-width').attr('type', 'text')
                $('#node-input-height').attr('type', 'text')
                $('div.form-row.nr-db-ui-element-sizer-row').hide()
                $('div.form-row.nr-db-ui-manual-size-row').show()
            } else {
                // not in a subflow, use the elementSizer
                $('div.form-row.nr-db-ui-element-sizer-row').show()
                $('div.form-row.nr-db-ui-manual-size-row').hide()
                $('#node-input-size').elementSizer({
                    width: '#node-input-width',
                    height: '#node-input-height',
                    group: '#node-input-group'
                })
            }

            // check for duplicate values
            const unique = new Set(this.segments.map(function (o) { return o.from }))
            if (this.segments.length === unique.size) { $('#valWarning').hide() } else { $('#valWarning').show() }

            validateGaugeSegments.call(this, this.segments)

            function generateSegment (i, segment) {
                const container = $('<li/>', { style: 'background: var(--red-ui-secondary-background, #fff); margin:0; padding:8px 0px 0px; border-bottom: 1px solid var(--red-ui-form-input-border-color, #ccc);' })
                const row = $('<div/>').appendTo(container)
                $('<div/>', { style: 'padding-top:5px; padding-left:175px;' }).appendTo(container)
                $('<div/>', { style: 'padding-top:5px; padding-left:120px;' }).appendTo(container)

                $('<i style="color: var(--red-ui-form-text-color, #eee); cursor:move; margin-left:3px;" class="node-input-segment-handle fa fa-bars"></i>').appendTo(row)

                $('<input/>', { class: 'node-input-segment-color', type: 'color', style: 'margin-left:7px; width: 50px;', placeholder: 'Color', value: segment.color }).appendTo(row)
                $('<input/>', { class: 'node-input-segment-from', type: 'text', style: 'margin-left:7px; width:calc(100% - 175px);', placeholder: 'From', value: segment.from }).appendTo(row)

                const finalSpan = $('<span/>', { style: 'float:right; margin-right:8px;' }).appendTo(row)
                const deleteButton = $('<a/>', { href: '#', class: 'editor-button editor-button-small', style: 'margin-top:7px; margin-left:5px;' }).appendTo(finalSpan)
                $('<i/>', { class: 'fa fa-remove' }).appendTo(deleteButton)

                deleteButton.click(function () {
                    container.css({ background: 'var(--red-ui-secondary-background-inactive, #fee)' })
                    container.fadeOut(300, function () {
                        $(this).remove()
                    })
                })

                $('#node-input-segments-container').append(container)
            }

            $('#node-input-add-segment').click(function () {
                generateSegment($('#node-input-segments-container').children().length + 1, {})
                $('#node-input-segments-container-div').scrollTop($('#node-input-segments-container-div').get(0).scrollHeight)
            })

            $('#node-input-segments-container').sortable({
                axis: 'y',
                handle: '.node-input-segment-handle',
                cursor: 'move'
            })

            for (let i = 0; i < this.segments.length; i++) {
                const segment = this.segments[i]
                generateSegment(i + 1, segment)
            }

            // only show relevant options

            function showTypeOptions (type) {
                if (type === 'gauge-tile') {
                    $('#node-input-container-sizes').hide()
                    $('#node-input-container-gstyle').hide()
                    $('#node-input-container-label-extras').hide()
                } else {
                    $('#node-input-container-sizes').show()
                    $('#node-input-container-gstyle').show()
                    $('#node-input-container-label-extras').show()
                }
            }
    
            $('#node-input-gtype').change(() => {
                const gType = $('#node-input-gtype').val()
                showTypeOptions(gType)
            })
        },
        oneditsave: function () {
            const segments = $('#node-input-segments-container').children()

            const node = this
            node.segments = []
            segments.each(function (i) {
                const segment = $(this)
                const s = {
                    from: segment.find('.node-input-segment-from').val(),
                    color: segment.find('.node-input-segment-color').val()
                }
                node.segments.push(s)
            })
        }
    })
</script>

<script type="text/html" data-template-name="ui-gauge">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="ui-gauge.label.name"></span></label>
        <input type="text" id="node-input-name">
    </div>
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> <span data-i18n="ui-gauge.label.group"></span></label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row nr-db-ui-element-sizer-row">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui-gauge.label.size">Size</label>
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-h"></i> <span data-i18n="ui-gauge.label.width">Width</label>
        <input type="hidden" id="node-input-width">
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-v"></i> <span data-i18n="ui-gauge.label.height">Height</label>
        <input type="hidden" id="node-input-height">
    </div>
    <div class="form-row">
        <label for="node-input-gtype"><i class="fa fa-list"></i> <span data-i18n="ui-gauge.label.type"></span></label>
        <select id="node-input-gtype" style="width:150px">
            <option value="gauge-tile" data-i18n="ui-gauge.label.gaugeTile"></option>
            <option value="gauge-34" data-i18n="ui-gauge.label.gauge34"></option>
            <option value="gauge-half" data-i18n="ui-gauge.label.gaugeHalf"></option>
            <!-- <segment value="donut">Donut</segment>
            <segment value="compass">Compass</segment>
            <segment value="wave">Level</segment> -->
        </select>
    </div>
    <div id="node-input-container-gstyle" class="form-row">
        <label for="node-input-gstyle"><i class="fa fa-list"></i> <span data-i18n="ui-gauge.label.style"></span></label>
        <select id="node-input-gstyle" style="width:150px">
            <option value="needle" data-i18n="ui-gauge.label.needle"></option>
            <option value="rounded" data-i18n="ui-gauge.label.rounded"></option>
            <!-- <option value=rounded">Rounded</option> -->
        </select>
    </div>
    <div class="form-row">
        <h3><span data-i18n="ui-gauge.label.limits"></span></h3>
    </div>
    <div class="form-row">
        <label for="node-input-min"><i class="fa fa-arrows-h"></i><span data-i18n="ui-gauge.label.range"></span></label>
        <span for="node-input-min"><span data-i18n="ui-gauge.label.min"></span></span>
        <input type="text" id="node-input-min" style="width:80px">
        <span for="node-input-max" style="margin-left:20px;"><span data-i18n="ui-gauge.label.max"></span></span>
        <input type="text" id="node-input-max" style="width:80px">
    </div>
    <span id="node-input-validation-segments" style="color: var(--red-ui-text-color-error, #910000)"></span>
    <div class="form-row node-input-segments-container-row" style="margin-bottom: 0px;width: 100%">
        <label for="node-input-width" style="vertical-align:top"><i class="fa fa-list-alt"></i> <span data-i18n="ui-gauge.label.segments"></span></label>
        <div id="node-input-segments-container-div" style="box-sizing:border-box; border-radius:5px; height:257px; padding:5px; border:1px solid var(--red-ui-form-input-border-color, #ccc); overflow-y:scroll; display:inline-block; width: 70%;">
            <span id="valWarning" style="color: var(--red-ui-text-color-error, #910000)"><b data-i18n="ui-gauge.errors.unique"></b></span>
            <ol id="node-input-segments-container" style="list-style-type:none; margin:0;"></ol>
        </div>
        <!-- <a
            data-html="true"
            title="Dynamic Property: Send 'msg.segments' in order to override this property."
            class="red-ui-button ui-node-popover-title"
            style="margin-left: 4px; cursor: help; font-size: 0.625rem; border-radius: 50%; width: 24px; height: 24px; display: inline-flex; justify-content: center; align-items: center;">
            <i style="font-family: ui-serif;">fx</i>
        </a> -->
    </div>
    <div class="form-row">
        <a href="#" class="editor-button editor-button-small" id="node-input-add-segment" style="margin-top:4px; margin-left:103px;"><i class="fa fa-plus"></i> <span data-i18n="ui-gauge.label.segment"></span></a>
    </div>
    <div class="form-row">
        <h3 data-i18n="ui-gauge.label.labelling"></h3>
    </div>
    <div id="ui-gauge-labels">
        <div class="form-row">
            <label for="node-input-title"><i class="fa fa-tag"></i> <span data-i18n="ui-gauge.label.label"></span></label>
            <input type="text" id="node-input-title">
        </div>
        <div id="node-input-container-label-extras">
            <div class="form-row form-row-flex">
                <div>
                    <label for="node-input-prefix"><i class="fa fa-tag"></i> <span data-i18n="ui-gauge.label.prefix"></span></label>
                    <input type="text" id="node-input-prefix" style="width: 75px">
                </div>
                <div>
                    <label for="node-input-suffix" style="margin-left: 48px;"><i class="fa fa-tag"></i> <span data-i18n="ui-gauge.label.suffix"></span></label>
                    <input type="text" id="node-input-suffix" style="width: 75px">
                </div>
            </div>
            <div class="form-row" id="ui-gauge-units">
                <label for="node-input-units"><i class="fa fa-calculator"></i> <span data-i18n="ui-gauge.label.units"></span></label>
                <input type="text" id="node-input-units" placeholder="Unit">
            </div>
            <div class="form-row" id="ui-gauge-icon">
                <label for="node-input-icon"><i class="fa fa-home"></i> <span data-i18n="ui-gauge.label.icon"></span></label>
                <input type="text" id="node-input-icon" placeholder="Icon from mdi library, e.g. 'home'">
            </div>
        </div>
    </div>
    <div id="node-input-container-sizes">
        <div class="form-row">
            <h3 data-i18n="ui-gauge.label.sizes"></h3>
        </div>
        <div class="form-row">
            <label for="node-input-sizeThickness"><i class="fa fa-arrows-h"></i> <span data-i18n="ui-gauge.label.gauge"></span></label>
            <input type="text" id="node-input-sizeThickness" style="width:75px; margin-right: 3px;">px
        </div>
        <div class="form-row">
            <label for="node-input-sizeGap"><i class="fa fa-arrows-h"></i> <span data-i18n="ui-gauge.label.gap"></span></label>
            <input type="text" id="node-input-sizeGap" style="width:75px; margin-right: 3px;">px
        </div>
        <div class="form-row">
            <label for="node-input-sizeKeyThickness"><i class="fa fa-arrows-h"></i> <span data-i18n="ui-gauge.label.segments"></span></label>
            <input type="text" id="node-input-sizeKeyThickness" style="width:75px; margin-right: 3px;">px
        </div>
        <div class="form-row">
            <h3 data-i18n="ui-gauge.label.styling"></h3>
        </div>
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  <span data-i18n="ui-gauge.label.class"></span></label>
        <input type="text" id="node-input-className" placeholder="segmental CSS class name(s) for widget"/>
    </div>
</script>
<script type="text/html" data-help-name="ui-gauge">
    <h3>Properties</h3>
    <dl class="message-properties">
        <dt>Type <span class="property-type">half | 3/4</span></dt>
        <dd>Defines the shape of the gauge, "Tile", "Half Gauge" or "3/4 Gauge".</dd>
        <dt>Style <span class="property-type">rounded | needle</span></dt>
        <dd>Defines the style of arc rendered, "Needle" or "Rounded". Not available for "Tile".</dd>
        <dt>Range <span class="property-type">number</span></dt>
        <dd>The smallest and largest values that can be rendered on the gauge</dd>
        <dt>Segments <span class="property-type">list</span></dt>
        <dd>Collection of objects that define the relevant color for a given value</dd>
        <dt>Label <span class="property-type">list</span></dt>
        <dd>The title text shown above the gauge</dd>
    </dl>
    <h3>Properties (Half &amp; 3/4 Gauges Only)</h3>
    <dl class="message-properties">
        <dt>Prefix <span class="property-type">str</span></dt>
        <dd>Text to be added <i>before</i> the value in the middle of the gauge.</dd>
        <dt>Suffix <span class="property-type">str</span></dt>
        <dd>Text to be added <i>after</i> the value in the middle of the gauge.</dd>
        <dt>Units <span class="property-type">str</span></dt>
        <dd>Small text to be shown below the value in the middle of the gauge.</dd>
        <dt>Sizes (Gauge) <span class="property-type">number</span></dt>
        <dd>A numerical value, in pixels, that defines the thickness of the arc and backdrop rendered.</dd>
        <dt>Sizes (Gap) <span class="property-type">number</span></dt>
        <dd>A numerical value, in pixels, that defines the gap between the arc and the segments.</dd>
        <dt>Sizes (Segments) <span class="property-type">number</span></dt>
        <dd>A numerical value, in pixels, that defines the thickness of the segments rendered in the gauge.</dd>
    </dl>
</script>
</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-notification] --- -->
<style>
    #ui-chart-colors input[type="color"] {
        font-weight: bold;
    }
    #ui-chart-colors input[type="color"]::-webkit-color-swatch,
    #ui-chart-colors input[type="color"]::-moz-color-swatch {
        border: none;
    }
</style>

<script type="text/javascript">
    (function () {
        RED.nodes.registerType('ui-notification', {
            category: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.label.category'),
            color: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.colors.medium'),
            defaults: {
                ui: { type: 'ui-base', value: '', required: true },
                position: { value: 'top right' },
                colorDefault: { value: true },
                color: { value: null },
                displayTime: { value: '3' },
                showCountdown: { value: true },
                outputs: { value: 1 },
                allowDismiss: { value: 'OK' },
                dismissText: { value: 'Close' },
                raw: { value: false },
                className: { value: '' },
                name: { value: '' }
            },
            inputs: 1,
            outputs: 1,
            align: 'right',
            icon: 'font-awesome/fa-envelope-o',
            paletteLabel: 'notification',
            label: function () { return this.name || (this.position === 'prompt' ? 'show dialog' : (this.position === 'dialog' ? 'show dialog' : 'show notification')) },
            labelStyle: function () { return this.name ? 'node_label_italic' : '' },
            oneditprepare: function () {
                $('#node-input-topic').typedInput({
                    default: 'str',
                    typeField: $('#node-input-topicType'),
                    types: ['str', 'msg', 'flow', 'global']
                })

                $('#node-input-allowDismiss').on('change', function () {
                    const allowDismiss = $('#node-input-allowDismiss').is(':checked')
                    if (allowDismiss) {
                        $('#node-notification-dismissText').show()
                    } else {
                        $('#node-notification-dismissText').hide()
                    }
                })

                $('#node-input-colorDefault').on('change', function () {
                    const defaultColor = $('#node-input-colorDefault').is(':checked')
                    if (defaultColor) {
                        $('#node-input-color').hide()
                    } else {
                        $('#node-input-color').show()
                    }
                })
    
                // use jQuery UI tooltip to convert the plain old title attribute to a nice tooltip
                $('.ui-node-popover-title').tooltip({
                    show: {
                        effect: 'slideDown',
                        delay: 150
                    }
                })
            }
        })
    })()
</script>

<script type="text/html" data-template-name="ui-notification">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-ui"><i class="fa fa-bookmark"></i> UI</label>
        <input type="text" id="node-input-ui">
    </div>
    <div class="form-row">
        <label for="node-input-position"><i class="fa fa-th-large"></i> Position</label>
        <select type="text" id="node-input-position" style="display:inline-block; width:70%; vertical-align:baseline;">
            <option value="top right">Top Right</option>
            <option value="top center">Top Center</option>
            <option value="top left">Top Left</option>
            <option value="bottom right">Bottom Right</option>
            <option value="bottom right">Bottom Center</option>
            <option value="bottom left">Bottom Left</option>
            <option value="center center">Center</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-color"><i class="fa fa-paint-brush"></i> Color</label>
        <div style="display: inline-flex; gap: 8px; align-items: center;">
            <input type="checkbox" id="node-input-colorDefault" style="width: auto; margin: 0;">
            <label for="node-input-colorDefault" style="margin: 0; line-height: 34px;">Default</label>
            <input type="color" id="node-input-color" placeholder="#FFFFFF">
        </div>
    </div>
    <div class="form-row" id="node-toast-displaytime">
        <label for="node-input-displayTime"><i class="fa fa-clock-o"></i> Timeout (S)</label>
        <input type="text" id="node-input-displayTime" placeholder="[msg.timeout]">
    </div>
    <div class="form-row form-row-flex" id="node-notification-showCountdown">
        <input type="checkbox" id="node-input-showCountdown">
        <label for="node-input-showCountdown">Show timeout countdown bar on notification</label>
    </div>
    <div class="form-row form-row-flex" id="node-notification-allowDismiss">
        <input type="checkbox" id="node-input-allowDismiss">
        <label for="node-input-allowDismiss"> Allow Manual Dismissal</label>
    </div>
    <div class="form-row form-row-flex" style="margin-left: 32px;" id="node-notification-dismissText">
        <label for="node-input-dismissText"><i class="fa fa-check"></i> Button Label</label>
        <input type="text" id="node-input-dismissText" placeholder="Close">
    </div>
    <div class="form-row form-row-flex" id="node-toast-raw">
        <input type="checkbox" id="node-input-raw" style="display:inline-block; width:auto; vertical-align:baseline;">
        <label style="width:auto" for="node-input-raw"> Accept raw HTML/JavaScript input in msg.payload to format popup.</label>
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i> Class</label>
        <div style="display: inline;">
            <input style="width: 70%;" type="text" id="node-input-className" placeholder="Optional CSS class name(s)" style="flex-grow: 1;">
            <a
                data-html="true"
                title="Dynamic Property: Send msg.class to append new classes to this widget. NOTE: classes set at runtime will be applied in addition to any class(es) set in the nodes class field."
                class="red-ui-button ui-node-popover-title"
                style="margin-left: 4px; cursor: help; font-size: 0.625rem; border-radius: 50%; width: 24px; height: 24px; display: inline-flex; justify-content: center; align-items: center;">
                <i style="font-family: ui-serif;">fx</i>
            </a>
        </div>
    </div>
    <div class="form-tips"><b>Note</b>: checking <i>Accept raw HTML/JavaScript</i> can allow injection of code.
    Ensure the input comes from trusted sources.</span></div>
</script>

</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-markdown] --- -->
<script type="text/javascript">
    (function () {
        // convert to i18 text
        function c_ (x) {
            return RED._('@flowfuse/node-red-dashboard/ui-markdown:ui-markdown.' + x)
        }

        RED.nodes.registerType('ui-markdown', {
            category: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.label.category'),
            color: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.colors.dark'),
            defaults: {
                group: { type: 'ui-group', required: true },
                name: { value: '' },
                order: { value: 0 },
                width: {
                    value: 0,
                    validate: function (v) {
                        let valid = true
                        if (this.templateScope !== 'global') {
                            const width = v || 0
                            const currentGroup = $('#node-input-group').val() || this.group
                            const groupNode = RED.nodes.node(currentGroup)
                            valid = !groupNode || +width <= +groupNode.width
                            $('#node-input-size').toggleClass('input-error', !valid)
                        }
                        return valid
                    }
                },
                height: { value: 0 },
                content: { value: '# Markdown Content\n\nGoes here...' },
                className: { value: '' }
            },
            inputs: 1,
            outputs: 1,
            icon: 'ui-markdown.png',
            paletteLabel: 'markdown',
            label: function () { return this.name || 'markdown' },
            labelStyle: function () { return this.name ? 'node_label_italic' : '' },
            oneditprepare: function () {
                if (RED.editor.__debug === true) {
                    console.log('ui-markdown: oneditprepare')
                }
                // if this groups parent is a subflow template, set the node-config-input-width and node-config-input-height up
                // as typedInputs and hide the elementSizer (as it doesn't make sense for subflow templates)
                if (RED.nodes.subflow(this.z)) {
                    // change inputs from hidden to text & display them
                    $('#node-input-width').attr('type', 'text')
                    $('#node-input-height').attr('type', 'text')
                    $('div.form-row.nr-db-ui-element-sizer-row').hide()
                    $('div.form-row.nr-db-ui-manual-size-row').show()
                } else {
                    // not in a subflow, use the elementSizer
                    $('div.form-row.nr-db-ui-element-sizer-row').show()
                    $('div.form-row.nr-db-ui-manual-size-row').hide()
                    $('#node-input-size').elementSizer({
                        width: '#node-input-width',
                        height: '#node-input-height',
                        group: '#node-input-group'
                    })
                }
                this.editor = RED.editor.createEditor({
                    id: 'node-input-content-editor',
                    mode: 'ace/mode/markdown',
                    value: $('#node-input-content').val()
                })
                RED.library.create({
                    url: 'uimarkdown', // where to get the data from
                    type: 'ui-markdown', // the type of object the library is for
                    editor: this.editor, // the field name the main text body goes to
                    mode: 'ace/mode/markdown',
                    fields: ['name']
                })

                this.editor.focus()

                RED.popover.tooltip($('#node-markdown-expand-editor'), c_('label.expand'))

                // use jQuery UI tooltip to convert the plain old title attribute to a nice tooltip
                $('.ui-node-popover-title').tooltip({
                    show: {
                        effect: 'slideDown',
                        delay: 150
                    }
                })
            },
            oneditsave: function () {
                $('#node-input-content').val(this.editor.getValue())
                this.editor.destroy()
                delete this.editor
            },
            oneditcancel: function () {
                this.editor.destroy()
                delete this.editor
            },
            oneditresize: function (size) {
                const rows = $('#dialog-form>div:not(.node-text-editor-row)')
                let height = $('#dialog-form').height()
                for (let i = 0; i < rows.size(); i++) {
                    height = height - $(rows[i]).outerHeight(true)
                }
                const editorRow = $('#dialog-form>div.node-text-editor-row')
                height -= (parseInt(editorRow.css('marginTop')) + parseInt(editorRow.css('marginBottom')))
                $('.node-text-editor').css('height', height + 'px')
                this.editor.resize()
            }
        })
    })()
</script>

<script type="text/html" data-template-name="ui-markdown">
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input style="flex-grow:1" type="text" id="node-input-group">
    </div>
    <div class="form-row nr-db-ui-element-sizer-row">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui-markdown.label.size">Size</label>
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-h"></i> <span data-i18n="ui-markdown.label.width">Width</label>
        <input type="hidden" id="node-input-width">
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-v"></i> <span data-i18n="ui-markdown.label.height">Height</label>
        <input type="hidden" id="node-input-height">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i> Class</label>
        <div style="display: inline;">
            <input style="width: 70%;" type="text" id="node-input-className" placeholder="Optional CSS class name(s)" style="flex-grow: 1;">
            <a
                data-html="true"
                title="Dynamic Property: Send msg.class to append new classes to this widget. NOTE: classes set at runtime will be applied in addition to any class(es) set in the nodes class field."
                class="red-ui-button ui-node-popover-title"
                style="margin-left: 4px; cursor: help; font-size: 0.625rem; border-radius: 50%; width: 24px; height: 24px; display: inline-flex; justify-content: center; align-items: center;">
                <i style="font-family: ui-serif;">fx</i>
            </a>
        </div>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <div style="flex-grow: 1">
            <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
        </div>
    </div>
    <div class="form-row" style="margin-bottom:0px;">
        <label for="node-input-content"><i class="fa fa-copy"></i> Content</label>
        <input type="hidden" id="node-input-content">
    </div>
    <div class="form-row node-text-editor-row" style="display: block;">
        <div style="height:250px; min-height:100px" class="node-text-editor" id="node-input-content-editor" ></div>
    </div>
</script><script type="text/html" data-help-name="ui-text">
    <p>
        Converts markdown to rendered HTML int the Dashboard.
    </p>
    <p>
        Can be use for rendering labels, headers or even full blog articles. If you're
        looking for a quick cheat sheet on how to write Markdown, you can check out
        FlowFuse's guide <a href="https://flowfuse.com/handbook/development/markdown-how-to/#markdown-how-to" target="_blank">here</a>.
    </p>
</script>
</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-template] --- -->
<script type="text/javascript">
    (async function () {
        // convert to i18 text
        function c_ (x) {
            return RED._('@flowfuse/node-red-dashboard/ui-template:ui-template.' + x)
        }
        // TODO: move this to util.js for reuse & unit testing
        function hasProperty (obj, prop) {
            return Object.prototype.hasOwnProperty.call(obj, prop)
        }

        const template = []

        template.push('<template>')
        template.push('    <div>')
        template.push('        <h2>Counter</h2>')
        template.push('        <p>Current Count: {{ count }}</p>')
        template.push('        <p class="my-class">Formatted Count: {{ formattedCount }}</p>')
        template.push('        <v-btn @click="increase()">Increment</v-btn>')
        template.push('    </div>')
        template.push('</template>')
        template.push('')
        template.push('<script>')
        template.push('    export default {')
        template.push('        data() {')
        template.push('            // define variables available component-wide')
        template.push('            // (in <template> and component functions)')
        template.push('            return {')
        template.push('                count: 0')
        template.push('            }')
        template.push('        },')
        template.push('        watch: {')
        template.push('            // watch for any changes of "count"')
        template.push('            count: function () {')
        template.push('                if (this.count % 5 === 0) {')
        template.push('                    this.send({payload: \'Multiple of 5\'})')
        template.push('                }')
        template.push('            }')
        template.push('        },')
        template.push('        computed: {')
        template.push('            // automatically compute this variable')
        template.push('            // whenever VueJS deems appropriate')
        template.push('            formattedCount: function () {')
        template.push('                return this.count + \'Apples\'')
        template.push('            }')
        template.push('        },')
        template.push('        methods: {')
        template.push('            // expose a method to our <template> and Vue Application')
        template.push('            increase: function () {')
        template.push('                this.count++')
        template.push('            }')
        template.push('        },')
        template.push('        mounted() {')
        template.push('            // code here when the component is first loaded')
        template.push('        },')
        template.push('        unmounted() {')
        template.push('            // code here when the component is removed from the Dashboard')
        template.push('            // i.e. when the user navigates away from the page')
        template.push('        }')
        template.push('    }')
        // eslint complaingin about unterminated string literal - need to do this oddity to get around it
        template.push('</' + 'script>')
        template.push('<style>')
        template.push('    /* define any styles here - supports raw CSS */')
        template.push('    .my-class {')
        template.push('        color: red;')
        template.push('    }')
        template.push('</style>')

        const defaultTemplate = template.join('\n')

        RED.nodes.registerType('ui-template', {
            category: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.label.category'),
            color: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.colors.dark'),
            defaults: {
                group: {
                    type: 'ui-group',
                    validate: function () {
                        const valid = (this.templateScope === 'local' && !!this.group) || (this.templateScope !== 'local')
                        return valid
                    }
                }, // for when template is scoped to 'local' (default)
                page: {
                    type: 'ui-page',
                    validate: function () {
                        const valid = (this.templateScope === 'widget:page' && !!this.page) || (this.templateScope !== 'widget:page')
                        return valid
                    }
                }, // for when template is scoped to 'page'
                ui: {
                    type: 'ui-base',
                    validate: function () {
                        const valid = (this.templateScope === 'widget:ui' && !!this.ui) || (this.templateScope !== 'widget:ui')
                        return valid
                    }
                }, // for when template is scoped to 'site'
                name: { value: '' },
                order: { value: 0 },
                width: {
                    value: 0,
                    validate: function (v) {
                        let valid = true
                        if (this.templateScope !== 'global') {
                            const width = v || 0
                            const currentGroup = $('#node-input-group').val() || this.group
                            const groupNode = RED.nodes.node(currentGroup)
                            valid = !groupNode || +width <= +groupNode.width
                            $('#node-input-size').toggleClass('input-error', !valid)
                        }
                        return valid
                    }
                },
                height: { value: 0 },
                head: { value: '' },
                format: { value: defaultTemplate },
                storeOutMessages: { value: true },
                passthru: { value: true },
                resendOnRefresh: { value: true },
                templateScope: { value: 'local' },
                className: { value: '' }
            },
            inputs: 1,
            outputs: 1,
            icon: 'font-awesome/fa-code',
            paletteLabel: 'template',
            label: function () {
                if (this.name) { return this.name }
                const knownLabels = {
                    local: 'template', // widget:group - kept as local for backward compatability
                    'widget:page': 'template',
                    'widget:ui': 'template',
                    'site:style': 'site style',
                    'page:style': 'page style'
                }
                return knownLabels[this.templateScope] || 'template'
            },
            labelStyle: function () { return this.name ? 'node_label_italic' : '' },
            oneditprepare: function () {
                if (RED.editor.__debug === true) {
                    console.log('ui-template: oneditprepare') // useful for locating this code in the browser debugger
                }
                if (hasProperty(RED.editor, 'editText') && typeof RED.editor.editText === 'function') {
                    $('#node-template-expand-editor').show()
                } else {
                    $('#node-template-expand-editor').hide()
                }
                const that = this
                const $templateScope = $('#node-input-templateScope')
    
                // if this groups parent is a subflow template, set the node-config-input-width and node-config-input-height up
                // as typedInputs and hide the elementSizer (as it doesn't make sense for subflow templates)
                if (RED.nodes.subflow(this.z)) {
                    // change inputs from hidden to text & display them
                    $('#node-input-width').attr('type', 'text')
                    $('#node-input-height').attr('type', 'text')
                    $('div.form-row.nr-db-ui-element-sizer-row').hide()
                    $('div.form-row.nr-db-ui-manual-size-row').show()
                } else {
                    // not in a subflow, use the elementSizer
                    $('div.form-row.nr-db-ui-element-sizer-row').show()
                    $('div.form-row.nr-db-ui-manual-size-row').hide()
                    $('#node-input-size').elementSizer({
                        width: '#node-input-width',
                        height: '#node-input-height',
                        group: '#node-input-group'
                    })
                }

                if (typeof this.storeOutMessages === 'undefined') {
                    this.storeOutMessages = true
                    $('#node-input-storeOutMessages').prop('checked', true)
                }

                if (typeof this.passthru === 'undefined') {
                    this.passthru = true
                    $('#node-input-passthru').prop('checked', true)
                }

                if (typeof this.templateScope === 'undefined') {
                    this.templateScope = 'local'
                    $templateScope.val(this.templateScope)
                }

                $templateScope.on('change', function () {
                    $('#template-row-group, #template-row-page, #template-row-ui, #template-row-class').hide()
                    switch ($templateScope.val()) {
                    case 'site:style':
                        $('#template-row-ui').show()
                        that.editor.getSession().setMode('ace/mode/css')
                        break
                    case 'page:style':
                        $('#template-row-page').show()
                        that.editor.getSession().setMode('ace/mode/css')
                        break
                    case 'site:script':
                        $('#template-row-ui').show()
                        that.editor.getSession().setMode('ace/mode/javascript')
                        break
                    case 'page:script':
                        $('#template-row-page').show()
                        that.editor.getSession().setMode('ace/mode/javascript')
                        break
                    case 'widget:ui':
                        $('#template-row-ui').show()
                        that.editor.getSession().setMode('ace/mode/html')
                        break
                    case 'widget:page':
                        $('#template-row-page').show()
                        that.editor.getSession().setMode('ace/mode/html')
                        break
                    default:
                        $('#template-row-group, #template-row-class').show()
                        that.editor.getSession().setMode('ace/mode/html')
                        break
                    }
                    resize.call(that)
                })

                this.editor = RED.editor.createEditor({
                    id: 'node-input-format-editor',
                    mode: 'ace/mode/html',
                    value: $('#node-input-format').val()
                })

                RED.library.create({
                    url: 'uitemplates', // where to get the data from
                    type: 'ui-template', // the type of object the library is for
                    editor: this.editor, // the field name the main text body goes to
                    mode: 'ace/mode/html',
                    fields: ['name']
                })

                this.editor.focus()

                RED.popover.tooltip($('#node-template-expand-editor'), c_('label.expand'))

                $('#node-template-expand-editor').on('click', function (e) {
                    e.preventDefault()
                    const value = that.editor.getValue()
                    RED.editor.editText({
                        mode: $templateScope.val() === 'global' ? 'css' : 'html',
                        value,
                        width: 'Infinity',
                        cursor: that.editor.getCursorPosition(),
                        complete: function (v, cursor) {
                            that.editor.setValue(v, -1)
                            that.editor.gotoLine(cursor.row + 1, cursor.column, false)
                            setTimeout(function () { that.editor.focus() }, 300)
                        }
                    })
                })

                // use jQuery UI tooltip to convert the plain old title attribute to a nice tooltip
                $('.ui-node-popover-title').tooltip({
                    show: {
                        effect: 'slideDown',
                        delay: 150
                    }
                })

                $templateScope.trigger('change') // trigger the change event to hide/show the group/dashboard row
            },
            oneditsave: function () {
                const annot = this.editor.getSession().getAnnotations()
                this.noerr = 0
                $('#node-input-noerr').val(0)
                for (let k = 0; k < annot.length; k++) {
                    if (annot[k].type === 'error') {
                        $('#node-input-noerr').val(annot.length)
                        this.noerr = annot.length
                    }
                }
                $('#node-input-format').val(this.editor.getValue())
                this.editor.destroy()
                delete this.editor

                // ensure we only have one of group/page/dashboard defined
                const scope = $('#node-input-templateScope').val()
                if (scope === 'local') {
                    $('#node-input-ui').val('_ADD_')
                    $('#node-input-page').val('_ADD_')
                } else if (scope === 'widget:page') {
                    $('#node-input-ui').val('_ADD_')
                    $('#node-input-group').val('_ADD_')
                } else if (scope === 'widget:ui') {
                    $('#node-input-page').val('_ADD_')
                    $('#node-input-group').val('_ADD_')
                } else if (scope === 'site:style') {
                    $('#node-input-page').val('_ADD_')
                    $('#node-input-group').val('_ADD_')
                } else if (scope === 'page:style') {
                    $('#node-input-ui').val('_ADD_')
                    $('#node-input-group').val('_ADD_')
                }
            },
            oneditcancel: function () {
                this.editor.destroy()
                delete this.editor
            },
            oneditresize: resize.bind(this)
        })

        function resize (size) {
            const rows = $('#dialog-form>div:not(.node-text-editor-row)')
            let fixRowsHeight = 0
            for (let i = 0; i < rows.size(); i++) {
                fixRowsHeight += $(rows[i]).height()
            }
            const dialogHeight = $('#dialog-form').height()
            const height = dialogHeight - fixRowsHeight
            $('.node-text-editor').css('height', height + 'px')
            if (RED.editor.__debug === true) {
                console.log('dialogHeight', dialogHeight, 'fixRowsHeight', fixRowsHeight, 'height', height, 'editorRow')
            }
            this.editor && this.editor.resize()
        }
    })()
</script>

<script type="text/html" data-template-name="ui-template">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <div style="display:inline-block; width:calc(100% - 105px)">
            <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
        </div>
    </div>
    <div class="form-row">
        <label for="node-input-temlplateScope"><i class="fa fa-dot-circle-o"></i> <span data-i18n="ui-template.label.scope"></span></label>
        <select style="width:76%" id="node-input-templateScope">
            <option value="local" data-i18n="ui-template.label.widget-group"></option>
            <option value="widget:page" data-i18n="ui-template.label.widget-page"></option>
            <option value="widget:ui" data-i18n="ui-template.label.widget-ui"></option>
            <option value="site:style" data-i18n="ui-template.label.site-style"></option>
            <option value="page:style" data-i18n="ui-template.label.page-style"></option>
            <!-- FUTURE? <option value="site:script" data-i18n="ui-template.label.site-script"></option>
            <option value="page:script" data-i18n="ui-template.label.page-script"></option> -->
        </select>
    </div>
    <div id="template-row-ui" class="form-row">
        <label for="node-input-ui"><i class="fa fa-bookmark"></i> <span data-i18n="ui-template.label.ui"></label>
        <input type="text" id="node-input-ui">
    </div>
    <div id="template-row-page" class="form-row">
        <label for="node-input-page"><i class="fa fa-bookmark"></i> <span data-i18n="ui-template.label.page"></label>
        <input type="text" id="node-input-page">
    </div>
    <div id="template-row-group" class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> <span data-i18n="ui-template.label.group"></label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row nr-db-ui-element-sizer-row">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui-template.label.size">Size</label>
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-h"></i> <span data-i18n="ui-template.label.width">Width</label>
        <input type="hidden" id="node-input-width">
    </div>
    <div class="form-row nr-db-ui-manual-size-row">
        <label><i class="fa fa-arrows-v"></i> <span data-i18n="ui-template.label.height">Height</label>
        <input type="hidden" id="node-input-height">
    </div>
    <!--<div class="form-row" id="template-row-size">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui-template.label.size"></span></label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>-->
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i> <span data-i18n="ui-template.label.className"></label>
        <div style="display: inline;">
            <input style="width: 70%;" type="text" id="node-input-className" data-i18n="[placeholder]ui-template.label.classNamePlaceholder" style="flex-grow: 1;">
            <a
                data-html="true"
                title="Dynamic Property: Send msg.class to append new classes to this widget. NOTE: classes set at runtime will be applied in addition to any class(es) set in the nodes class field."
                class="red-ui-button ui-node-popover-title"
                style="margin-left: 4px; cursor: help; font-size: 0.625rem; border-radius: 50%; width: 24px; height: 24px; display: inline-flex; justify-content: center; align-items: center;">
                <i style="font-family: ui-serif;">fx</i>
            </a>
        </div>
    </div>
    <div class="form-row" style="margin-bottom:0px;">
        <label for="node-input-format" style="width:110px;"><i class="fa fa-copy"></i> <span data-i18n="ui-template.label.template"></span></label>
        <input type="hidden" id="node-input-format">
        <button id="node-template-expand-editor" class="red-ui-button red-ui-button-small" style="float:right"><i class="fa fa-expand"></i></button>
    </div>
    <div class="form-row node-text-editor-row" style="display: block;">
        <div style="height:250px; min-height:100px" class="node-text-editor" id="node-input-format-editor" ></div>
    </div>
    <div id="template-pass-store">
        <div class="form-row" style="margin-bottom:0px;">
            <input type="checkbox" id="node-input-passthru" style="display:inline-block; margin-left:8px; width:auto; vertical-align:top;">
            <label for="node-input-passthru" style="width:70%;"> <span data-i18n="ui-template.label.pass-through"></span></label>
        </div>
    </div>
    <!--<div class="form-row" style="margin-bottom:0px;">
            <input type="checkbox" id="node-input-storeOutMessages" style="display:inline-block; margin-left:8px; width:auto; vertical-align:top;">
            <label for="node-input-storeOutMessages" style="width:70%;"> <span data-i18n="ui-template.label.store-state"></span></label>
        </div>
        <div class="form-row" style="margin-bottom:0px;">
            <input type="checkbox" id="node-input-resendOnRefresh" style="display:inline-block; margin-left:8px; width:auto; vertical-align:top;">
            <label for="node-input-resendOnRefresh" style="width:70%;"> <span data-i18n="ui-template.label.resend"></span></label>
        </div>
    </div> -->
</script><script type="text/markdown" data-help-name="ui-template">
  (see [full docs](https://dashboard.flowfuse.com/nodes/widgets/ui-template.html))

The content of `ui-template` is controlled by the "Type" property.

Provides a means to render custom content or a set of node-styles depending on scope.
- **Widget:** A Vue Component (including any <a href="https://vuetifyjs.com/en/components/all/" target="blank">
  Vuetify component</a>) that is rendered in the Dashboard.
- **CSS (All Pages):** Define custom CSS classes/styling that applies to the entire Dashboard.
- **CSS (Single Page):** Define custom CSS classes/styling that applies just a single page of your Dashboard

### Type: Widget
When the scope is set to **Widget**, the template will be rendered in the Dashboard as HTML.
You can render dynamic content using any VueJS data-binding expressions, (e.g. `v-if`, `v-for`)
and access incoming data to the node via the `msg` object, e.g:

<pre>
&lt;template&gt;
  &lt;div&gt;
      &lt;h2&gt;Counter&lt;/h2&gt;
      &lt;p&gt;Current Count: {{ count }}&lt;/p&gt;
      &lt;p class="test-class"&gt;Formatted Count: {{ formattedCount }}&lt;/p&gt;
      &lt;v-btn @click="increase()"&gt;Increment&lt;/v-btn&gt;
      &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
  export default {
      data() {
          // define variables available component-wide
          // (in &lt;template&gt; and component functions)
          return {
              count: 0
          }
      },
      watch: {
          // watch for any changes of "count"
          count() {
              if (this.count % 5 === 0) {
                  this.send({payload: 'Multiple of 5'})
              }
          }
      },
      computed: {
          // automatically compute this variable
          // whenever VueJS deems appropriate
          formattedCount() {
              return `${this.count} Apples`
          }
      },
      methods: {
          // expose a method to our &lt;template&gt; and Vue Application
          increase() {
              this.count++
          }
      }
  }
&lt;/script&gt;

&lt;style&gt;
.test-class {
  color: red;
}
&lt;/style&gt;
</pre>

#### Built In Functions

The template comes with two built-in functions:

`send(msg)` -  Can be used to send a `msg` from the template, e.g:

```html
<v-btn @click="send({'hello': 'world'})"></v-btn>
```

`submit()` - Can be attached to a `<form />`. The `msg` sent will be an object
  representation of the `FormData` from the attached form, e.g:
```html
&lt;form @submit.prevent="submit"&gt;
    &lt;v-text-field name="first" label="First Name"&gt;&lt;/v-text-field&gt;
    &lt;v-text-field name="last" label="Last Name"&gt;&lt;/v-text-field&gt;
    &lt;v-btn type="submit"&gt;&lt;/v-btn&gt;
&lt;/form&gt;
```
Would send the following `msg` when submitted:
```js
{ "first": <value>, "last": <value> }
```

#### Sending on Click
Here, we call it when someone clicks our "Send Hello World" button:

```vue
<v-btn @click="send({payload: 'Hello World'})">Send Hello World</v-btn>
```

#### Sending on Change
Or another example, where the payload is automatically sent any time the `v-model` is changed:

```vue
<v-rating hover :length="5" :size="32" v-model="value"
    active-color="primary" @update:modelValue="send({payload: value})"/>
```

#### Reading Node Input

Whenever a `ui-template` receives a `msg` in Node-RED, that is automatically assigned to the `msg` variable in the template.

Additionally, we also bind a computed variable `value` to `msg.payload`. This means that you can access the `msg` object in your template, as well as binding the `value` variable to any widgets you use. 

Such an example would be:

```html
<div>
    <h2>Latest <code>msg</code> received:</h2>
    <pre>{{ msg }}</pre>
</div>
```

#### Vuetify Widgets

The `ui-template` node also has access to the [Vuetify component library](https://vuetifyjs.com/en/components/all/) by default. The library provides a large number of pre-built widgets that you can use in your Dashboard.

These are particularly useful as they provide easy access to a large number of pre-built widgets that aren't necessarily included in the core nodes of Node-RED Dashboard 2.0.

### Type - CSS (All Pages)
When the scope is set to **Site Scoped Style**, the CSS in the template will be added to the `head` of all pages.
e.g.
```css
.my-class {
  color: red;
}
```

### Type: CSS (Single Page)
When the scope is set to **Site Scoped Style**, the CSS in the template will be added to the `head` of the selected page.
e.g.
```css
.my-page1-only-class {
  color: green;
}
```

</script>
</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-event] --- -->
<script type="text/javascript">
    (function () {
        RED.nodes.registerType('ui-event', {
            category: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.label.category'),
            color: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.colors.darkest'),
            defaults: {
                ui: { type: 'ui-base', value: '', required: true },
                name: { value: '' }
            },
            inputs: 0,
            outputs: 1,
            icon: 'font-awesome/fa-arrow-circle-right',
            paletteLabel: 'event',
            oneditprepare: function () {
                // topic
                $('#node-input-topic').typedInput({
                    default: 'str',
                    typeField: $('#node-input-topicType'),
                    types: ['str', 'msg', 'flow', 'global']
                })
            },
            label: function () {
                return this.name || 'ui-event'
            },
            labelStyle: function () { return this.name ? 'node_label_italic' : '' }
        })
    })()
</script>

<script type="text/html" data-template-name="ui-event">
    <div class="form-row">
        <label for="node-input-ui"><i class="fa fa-bookmark"></i> UI</label>
        <input type="text" id="node-input-ui">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
</script>
<script type="text/html" data-help-name="ui-event">
    <p>
        Tracks client-side events in the Node-RED Dashboard, and reports them into the Node-RED Editor.
    </p>
    <p>
        This widget doesn't render any content into your Dashboard. Instead, it listens for user-driven behaviour and events in your Dashboard and emits accordingly into the Node-RED Editor when those events have taken place.
    </p>
    <p>
        Current, supported events are:
    </p>
    <ul>
        <li>
            <b>$pageview</b> - Emits whenever a user views a page.
        </li>
        <li>
            <b>$pageleave</b> - Emits whenever a user leaves a page.
        </li>
    </ul>
    <p>An example output <code>msg</code> is as follows:</p>
        <pre>msg = {
    topic: '$pageview',
    socketid: '1234',
    socketip: '127.0.0.1'
    payload: {
        page: {
            name: 'Page Name',
            path: '/page/path'
            id: '1234',
            theme: 'dark',
            layout: 'default',
            _groups: []
        }
    }
}</pre>
</script>
</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard/ui-control] --- -->
<script type="text/javascript">
    (function () {
        // convert to i18 text
        function c_ (x) {
            return RED._('@flowfuse/node-red-dashboard/ui-control:ui-control.' + x)
        }
    
        RED.nodes.registerType('ui-control', {
            category: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.label.category'),
            color: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.colors.darkest'),
            defaults: {
                name: { value: '' },
                ui: { type: 'ui-base', value: '', required: true },
                events: { value: 'all' }
            },
            inputs: 1,
            outputs: 1,
            align: 'right',
            icon: 'font-awesome/fa-arrow-circle-right',
            paletteLabel: 'ui control',
            label: function () { return this.name || 'ui control' },
            labelStyle: function () { return this.name ? 'node_label_italic' : '' },
            outputLabels: function () { return this.events },
            oneditprepare: function () {
                const node = this
                const sel = $('#node-input-events')
                for (const name of ['all', 'change', 'connect']) {
                    const text = c_('events.' + name)
                    $('<option/>').val(name).text(text).appendTo(sel)
                }
                $(sel).val(node.events)
            }
        })
    })()
</script>

<script type="text/html" data-template-name="ui-control">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="ui-control.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]ui-control.placeholder.name">
    </div>
    <div class="form-row">
        <label for="node-input-ui"><i class="fa fa-bookmark"></i> UI</label>
        <input type="text" id="node-input-ui">
    </div>
    <div class="form-row">
        <label for="node-input-events"><i class="fa fa-sign-out"></i> <span data-i18n="ui-control.label.output"></span></label>
        <select id="node-input-events" style="width:70%;">
        </select>
    </div>
</script>
<script type="text/html" data-help-name="ui-control">
    <p>Allows dynamic control of the Dashboard.</p>
    <h3>Controls List</h3>
    <h4>Navigation</h4>
    <p>Control which page is shown to a user, by programmatically changing the page.</p>
    <p><b>Change Page:</b> The default function is to change the currently displayed page. The following optins are supported for the <code>msg.payload</code></p>
    <ul>
        <li><code>"Page Name"</code> - String</li>
        <li><code>{"page":"Page Name"}</code> - Object</li>
        <li><code>2</code> - The numerical index (from 0) of the page to be displayed</li>
    </ul>
    <p><b>Next/Previous:</b> You can also send string in the format:</p>
    <ul>
        <li><code>"+1"</code> - Next Page</li>
        <li><code>"-1"</code> - Previous Page</li>
    </ul>
    <p><b>Refresh:</b> Sending a blank tab name <code>""</code> will refresh the current page.</p>
    <ul>
        <li><code>""</code></li>
        <li><code>{"page":""}</code></li>
    </ul>
    <h4>Show/Hide Pages & Groups</h4>
    <p>Dashboard pages & groups can be shown and hidden by sending a <code>msg.payload</code> object with the format
    <pre>msg.payload = {
    pages: {
        show: ['&lt;Page Name&gt;', '&lt;Page Name&gt;'],
        hide: ['&lt;Page Name&gt;']
    }
    groups: {
        show: ['&lt;Page Name&gt;:&lt;Group Name&gt;', '&lt;Group Name&gt;'],
        hide: ['&lt;Group Name&gt;']
    }
}</pre>
    <h4>Enable/Disable Pages & Groups</h4>
    <p>Dashboard pages & groups can be disabled & re-enabled by sending a <code>msg.payload</code> object with the format
    <pre>msg.payload = {
    pages: {
        enable: ['&lt;Page Name&gt;', '&lt;Page Name&gt;'],
        disable: ['&lt;Page Name&gt;']
    }
    groups: {
        enable: ['&lt;Group Name&gt;', '&lt;Group Name&gt;'],
        disable: ['&lt;Group Name&gt;']
    }
}</pre>
    <h3>Events List</h3>
    <p>When any browser client connects or loses connection, changes tab, or expands or collapses a group this node will emit a <code>msg</code> containing:</p>
    <ul>
    <li><code>payload</code> - <i>connect</i>, <i>lost</i>, <i>change</i>, or <i>group</i>.
    <li><code>socketid</code> - the ID of the socket (this will change every time the browser reloads the page).
    <li><code>socketip</code> - the ip address from where the connection originated.
    <li><code>tab</code> - the number of the tab. (only for 'change' event).
    <li><code>name</code> - the name of the tab. (only for 'change' event).
    </ul>
    <p>Optional - report only connect events - useful to use to trigger a resend of data to a new client without needing to filter out other events.</p>
</script>
</div><div><!-- --- [red-module:@flowfuse/node-red-dashboard-2-ui-iframe/ui-iframe] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui-iframe', {
        category: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.label.category'),
        color: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.colors.dark'),
        defaults: {
            name: { value: "" },
            group: { type: 'ui-group', required: true },
            order: { value: 0 },
            src: { value: "", required: true },
            width: {
                value: 6,
                validate: function (v) {
                    const width = v || 0
                    const currentGroup = $('#node-input-group').val() || this.group
                    const groupNode = RED.nodes.node(currentGroup)
                    const valid = !groupNode || +width <= +groupNode.width
                    $('#node-input-size').toggleClass('input-error', !valid)
                    return valid
                }
            },
            height: { value: 8 }
        },
        inputs: 1,
        outputs: 0,
        icon: "iframe-icon.svg",
        paletteLabel: 'iframe',
        label: function() {
            return this.name || "iframe";
        },
        oneditprepare: function () {
            $('#node-input-size').elementSizer({
                width: '#node-input-width',
                height: '#node-input-height',
                group: '#node-input-group'
            });
        }
    });
</script>

<script type="text/html" data-template-name="ui-iframe">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui-iframe.label.size"></label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-src"><i class="fa fa-hand"></i> <span data-i18n="ui-iframe.label.src"></label>
        <input type="text" id="node-input-src">
    </div>
</script><script type="text/html" data-help-name="ui-iframe">
    <p>In-Editor help text will go here.</p>
</script>

</div><div><!-- --- [red-module:@sumit_shinde_84/node-red-dashboard-2-ui-webcam/ui-webcam] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui-webcam', {
        category: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.label.category'),
        color: RED._('@flowfuse/node-red-dashboard/ui-base:ui-base.colors.medium'),
        defaults: {
            name: { value: "" },
            group: { type: 'ui-group', required: true },
            width: {
                value: 0,
                validate: function (v) {
                    const width = v || 0;
                    const currentGroup = $('#node-input-group').val() || this.group;
                    const groupNode = RED.nodes.node(currentGroup);
                    const valid = !groupNode || +width <= +groupNode.width;
                    $('#node-input-size').toggleClass('input-error', !valid);
                    return valid;
                }
            },
            height: { value: 0 },
            passthru: { value: false },
        },
        inputs: 1,
        outputs: 1,
        icon: "font-awesome/fa-camera",
        paletteLabel: "webcam",
        label: function () {
            return this.name || "ui-webcam";
        },
        oneditprepare: function () {
            $('#node-input-size').elementSizer({
                width: '#node-input-width',
                height: '#node-input-height',
                group: '#node-input-group'
            });
        }
    });
</script>

<script type="text/html" data-template-name="ui-webcam">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui-button.label.size">Size</span></label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
</script>

<script type="text/html" data-help-name="ui-webcam">
    <p>A webcam node that integrates with dashboard 2.0</p>
</script>
</div><div><!-- --- [red-module:cn-dashboard-nodes/IssueDashboard] --- -->
<script type="text/javascript">
    RED.nodes.registerType('IssueDashboard',{
        category: 'CN Dashboards',
        color: '#ffffff',
        inputs:1,
        outputs:1,
        icon: "dashboard.png",
        label: function() {
            return this.name||"IssueDashboard";
        }
    });
</script>

<script type="text/x-red" data-template-name="IssueDashboard">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="IssueDashboard">
    <p>The node takes in code snippet details and returns the html of a <a href='https://datatables.net/'> datatable </a>
        populated with the snippet details as well as the code snippet retrieved from codeserver's codecache
       <br><br><b>Expected input</b><br><br>
       Input data should be sent in a list <b>msg.payload.property</b>.<br>
       Each <b>property</b> should have a snippets attribute.<br>
       The snippets attribute should have a list of objects <br><br>
       Each object should have the following attributes:
       <ul>
           <li>file</li>
           <li>startLine</li>
           <li>endLine</li>
           <li>commit</li>
           <li>branch</li>
           <li>sourceLocation</li>
           <li>permalink</li>
       </ul>
       </p>
</script>
</div><div><!-- --- [red-module:node-red-contrib-array-grouper/arrGrouper] --- -->
<!--
 * Copyright 2014 Leon van Kammen / Coder of salvation. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification, are
 * permitted provided that the following conditions are met:
 *
 *    1. Redistributions of source code must retain the above copyright notice, this list of
 *       conditions and the following disclaimer.
 *
 *    2. Redistributions in binary form must reproduce the above copyright notice, this list
 *       of conditions and the following disclaimer in the documentation and/or other materials
 *       provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY Leon van Kammen AS IS'' AND ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL Leon van Kammen OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
 * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * The views and conclusions contained in the software and documentation are those of the
 * authors and should not be interpreted as representing official policies, either expressed
 * or implied, of Leon van Kammen
-->

<script type="text/x-red" data-template-name="ArrGrouper">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> Topic</label>
        <input type="text" id="node-input-topic" placeholder="Topic">
    </div>
    <div class="form-row" style="padding-top:10px;">
        Iterate over in groups of <input style="width:60px;" id="node-input-groups"/>
    </div>
    <div class="form-row">
        <label for="node-input-outputs"><i class="fa fa-random"></i> Outputs</label>
        <input id="node-input-outputs" style="width: 60px;" value="1">
    </div>
    <div class="form-row">
    <label for="node-input-padding">Output Padding with empty messages?</label>
    <input type="checkbox" value="1" id="node-input-padding" placeholder="Apply padding Array with empty values if not enough inputs are given over all outputs ?" checked>
</div>

</script>



<script type="text/javascript">
    RED.nodes.registerType('ArrGrouper', {
        color: "#E2D96E",
        category: 'function',
        defaults: {
            name: {value: ""},
            topic: {value: ""},
            outputs: {value: 1, required: true, validate: RED.validators.number()},
            padding: {value: "", required: false},
            groups: {value: "", required: true, validate: RED.validators.number()},
            property: {value: "payload", required: true}
        },
        inputs: 1,
        outputs: 1,
        icon: "link-out.png",
        label: function () {
            return this.name || "ArrGrouper";
        },
        oneditprepare: function () {
            var that = this;
            $("#node-input-outputs").spinner({
                min: 1
            });
            $("#node-input-groups").spinner({
                min: 1
            });
        },
    });
</script>
<script type="text/x-red" data-help-name="arrGrouper">
    <p>A simple node to split an payload-array into seperate messages grouped in chunks</p>
    <p>When a message arrives, the configured variable will be iterated over and put in chunks over multiple outputs</p>
    <p>Note: the <i>old payload</i> will be stored in <b>msg.payload_unsplit</b></p>
    <hr>
  <p>If you want all the putputs to have a value even if the input array is not long enough, you can use <code>Output padding</code> to send messages with an empty payload over these outputs.</p>

</script>
</div><div><!-- --- [red-module:node-red-contrib-buffer-parser/buffer-parser] --- -->
<!--
MIT License

Copyright (c) 2020 Steve-Mcl

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.
-->

<script type="text/javascript">

(function () {
    // console.log("Initialising buffer-parser"); //uncomment me to help locate SRC in devtools!
    var compatibleDataTypes = {
        'int': 'int8',
        'uint': 'uint8',
        'int16': 'int16be',
        'uint16': 'uint16be',
        'int32': 'int32be',
        'uint32': 'uint32be',
        'bigint64': 'bigint64be',
        'biguint64': 'biguint64be',
        'float': 'floatbe',
        'double': 'doublebe',
        '16bit': '16bitbe',
        'boolean': 'bool'
    }
    function describeItem (item, index) {
        if(!item) return "";
        var name = item.name;
        var typeInfo = item.type;
        if(item.scale) {
            var operator = "";
            try {
                var scale = item.scale.trim();
                if(scale == "!" || scale == "!!") {
                    operator = scale;
                } else {
                    var matches = scale.matchAll( /\s*?([\/\-\+\*<>^!%=]*?)\s*?(\w+)/g);
                    for (const match of matches) {
                        operator = match["1"].trim();
                        break;
                    }
                }
            } catch (e) { }
            switch (operator) {
                case "!":
                case "!!":
                case ">":
                case "<":
                case "==":
                case "!=":
                typeInfo = "boolean";
            }
        }
        return name + " {" + typeInfo + "}";
    }
    function describeConfig(node) {
        var uiSpec = node.specificationType == "ui";
        if(!uiSpec) return "<dynamic>";
        if(node.resultType == "buffer") return "Buffer";
        var itemCount = (node && node.items) ? node.items.length : 0;
        if(!itemCount) return "No items specified!";
        var t = "";
        if(node.multipleResult) {
            switch (node.resultType) {
                case "value":
                    t = itemCount + (itemCount == 1 ? " value" : " values") 
                    break;
                case "object":
                    t = itemCount + (itemCount == 1 ? " object" : " objects") 
                    break;
            }
            if(node.setTopic) 
                t += " (name as topic)";
            else 
                t += " (original msg topic)";
        } else {
            switch (node.resultType) {
                case "value":
                    t = "Array containing " + itemCount + (itemCount == 1 ? " value" : " values");
                    break;
                case "array":
                    t = "Array containing " + itemCount + (itemCount == 1 ? " object" : " objects");
                    break;
                case "keyvalue":
                    t = "Object containing " + itemCount + (itemCount == 1 ? " key/value property" : " key/value properties");
                    break;
                case "keyobject":
                    t = "Object containing " + itemCount + (itemCount == 1 ? " key/object property" : " key/object properties");
                    break;
            }
        }
        return t;
    }
    function coerceDataType(t) {
        return compatibleDataTypes[t] || t;
    }
    function setupTypedInput(varName, allowableTypes, defType, defVal, isOptional, width) {
        var node = this;
        console.log("setupTypedInput", varName, allowableTypes, defType, defVal, isOptional, width);
        //TODO: move to common library
        function isObject(val) {
            if (val === null) { return false; }
            return (typeof val === 'object');
        };
        function isNumeric(n) {
            return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);
        };
        function isTypeInArray(arr, findType) {
            try {
                var typeToFind = findType;
                if (isObject(findType))
                    typeToFind = findType.value;
                for (var index = 0; index < arr.length; index++) {
                    var element = arr[index];
                    var thisType = isObject(element) ? element.value : element;
                    if (thisType === typeToFind) return true;
                }
            } catch (error) { }
            return false;
        }

        var varSel = "#node-input-" + varName;
        var typeSel = varSel + "Type";
        var currentValue = node[varName];
        var currentType = node[varName + "Type"];
        var defShouldHaveNoValue = false;
        //if optional but 'none' is not yet an option - add it as first option in allowableTypes
        if (isOptional === true) {
            if (!isTypeInArray(allowableTypes, "none")) {
                allowableTypes.unshift("none");
            }
        }

        //if defType is not in the list of parameter type, change defType to 1st item
        if (!isTypeInArray(allowableTypes, defType)) {
            var _firstType = allowableTypes[0];
            if (isObject(_firstType)) {
                _firstType = _firstType.value;
                defShouldHaveNoValue = _firstType.hasValue == false;
            }
            defType = _firstType;
        }

        //if currently set type is not in the list of parameter types, set currentType to defType
        if (!isTypeInArray(allowableTypes, currentType)) {
            currentType = defType;
        }

        //catch all
        if (!currentType) {
            currentType = defType || "";
        }

        var $ti = $(varSel);
        var alreadyBuilt = $ti.data("built") == true;
        if (alreadyBuilt) {
            //already built? just update types :)
            $ti.typedInput("types", allowableTypes);
        } else {
            var opts = {
                default: defType,
                typeField: $(typeSel),
                types: allowableTypes
            };
            if (isOptional) {
                opts.default = defType || "none";
                opts.validate = function (v) {
                    //todo - handle this when spec changes
                    return !!v;
                };
            }
            $ti.typedInput(opts);
            $ti.data("built", true);
        }

        if (currentValue && currentType == "bool") {
            currentValue  = (currentValue === true || currentValue === "true") ? "true" : "false";
        }

        $ti.typedInput("type", currentType);
        $ti.typedInput("value", currentValue);

        if (width) $ti.typedInput("width", width);
        return $ti;
    }

    function getEditItem(index) {
        try {
            var items = $("#node-input-items-container").editableList('items');
            var r = parseEditItem(items[index]);
            return parseEditItem(items[index]);
        } catch (error) { }
        return null;
    }

    function parseEditItem($row) {
        try {
            var rule = $($row);
            var r = {};
            r.type = rule.find(".node-input-item-property-type").val() || "int16be";
            r.name = rule.find(".node-input-item-property-name").val() || "item" + (i + 1);
            r.offset = parseInt(rule.find(".node-input-item-property-offset").val() || 0);
            r.length = parseInt(rule.find(".node-input-item-property-length").val() || 1);
            r.offsetbit = parseInt(rule.find(".node-input-item-property-offsetbit").val() || 0);
            r.scale = rule.find(".node-input-item-property-scale").val() || 0;
            r.mask = rule.find(".node-input-item-property-mask").val() || '';
            return r;
        } catch (error) { }
        return null;
    }

    RED.nodes.registerType('buffer-parser', {
        category: 'parser',
        color: '#0090d4',
        defaults: {
            name: { value: "" },
            data: { value: "payload", validate: RED.validators.typedInput("dataType") },
            dataType: { value: "msg" },
            specification: { value: "" },
            specificationType: { value: "ui" },

            items: { value: [{ name: "item1", type: "int16be", offset: 0, length: 1, mask: "" }], required: true },
            swap1: { value: "" },
            swap2: { value: "" },
            swap3: { value: "" },
            swap1Type: { value: "swap" },
            swap2Type: { value: "swap" },
            swap3Type: { value: "swap" },
            msgProperty: { value: "payload" },
            msgPropertyType: { value: "str" },
            resultType: { value: "keyvalue" },
            resultTypeType: { value: "return" },
            multipleResult: { value: false },
            fanOutMultipleResult: { value: false },
            setTopic: { value: true },
            outputs: {value:1}
        },
        inputs: 1,
        outputs: 1,
        icon: "font-awesome/fa-expand",
        outputLabels: function(index) {
            var node = this;
            var item = node.items && node.items[index];
            if (item && node.multipleResult && node.fanOutMultipleResult) {
                return describeItem(item, index); 
            } else {
                return describeConfig(node);
            }
        },
        label: function () {
            return this.name || "buffer parser";
        },
        oneditprepare: function () {
            //console.log("buffer-parser->oneditprepare()")
            var node = this;

            var sti = setupTypedInput.bind(this);
            var specOpt = {
                value: "ui",
                label: "UI Specification",
                hasValue: false
            }
            var swapOpt = {
                value: "swap",
                label: "Swap",
                title: "Swap",
                showLabel: true,
                // icon:"fa fa-exchange",
                options: [
                    { label: "none", value: '', title: '' },
                    { label: "16", value: 'swap16', title: 'Interprets data as an array of 16-bit integers and swaps the byte order in-place' },
                    { label: "32", value: 'swap32', title: 'Interprets data as an array of 32-bit integers and swaps the byte order in-place' },
                    { label: "64", value: 'swap64', title: 'Interprets data as an array of 64-bit integers and swaps the byte order in-place' },
                ],
                default: "none"
            }
            var returnOpt = {
                value: "output",
                label: "output",
                title: "output",
                icon: "fa fa-sign-out",
                options: [
                    { label: "key/value", value: 'keyvalue', title: 'Send an object with results in key/value pairs in the msg property specified by "Output property". Use a fat arrow `=>` in the name to create object.properties e.g. `motor1=>power` will end up in `msg.payload.motor1.power`.' },
                    { label: "key/object", value: 'object', title: 'Send an object with results in key/object pairs (with the value and extended properties in the object) in the msg property specified by "Output property". Use a fat arrow `=>` in the name to create object.properties e.g. `motor1=>power` will end up in `msg.payload.motor1.power`.' },
                    { label: "values only (array)", value: 'value', title: 'Send a value (or array of values) in the msg property specified by "Output property"' },
                    { label: "array (of objects)", value: 'array', title: 'Send an array of objects in the msg property specified by "Output property"' },
                    { label: "buffer", value: 'buffer', title: 'Send a buffer in the msg property specified by "Output property"' },
                ],
                default: "value"
            }
            var returnOpt2 = {
                value: "output",
                label: "output",
                title: "output",
                icon: "fa fa-sign-out",
                options: [
                    { label: "value only", value: 'value', title: 'Send a value in the msg property specified by "Output property"' },
                    { label: "object", value: 'object', title: 'Send an object in the msg property specified by "Output property"' },
                ]
            }
            sti('data', ['msg', 'json', 'bin'], 'msg');//data
            var specificationField = sti('specification', [specOpt, 'msg', 'flow', 'global'], 'ui');//specification
            var sw1 = sti('swap1', [swapOpt, 'json', 'msg', 'flow', 'global', 'env'], 'swap');//specification
            var sw2 = sti('swap2', [swapOpt], 'swap');//specification
            var sw3 = sti('swap3', [swapOpt], 'swap');//specification
            // var resultTypeField = sti('resultType', [returnOpt, 'msg', 'flow', 'global', 'env'], 'output');//specification
            console.log("Setting up node-input-resultType", [returnOpt]);
            var resultTypeField = $("#node-input-resultType").typedInput({
                default: "output",
                type: "output",
                types: [returnOpt],
                // typeField: "#node-input-resultTypeType"
            });

            //var msgPropertyField = sti('msgProperty', ['str', 'msg', 'flow', 'global', 'env'], 'str');//specification
            var msgPropertyField = $("#node-input-msgProperty").typedInput({ types: [{ label: "msg.", value: "str" }] });
            var multipleResultField = $("#node-input-multipleResult");
            var fanOutMultipleResultField = $("#node-input-fanOutMultipleResult");
            var setTopicField = $("#node-input-setTopic");
            specificationField.on("change", function () {
                var v = $(this).val();
                var t = specificationField.typedInput("type");
                if (t == "ui") {
                    $(".ui-row").show();
                    if (!v) specificationField.typedInput("value", "spec")
                    console.log("calling RED.tray.resize();")
                    RED.tray.resize();
                } else {
                    $(".ui-row").hide();
                    console.log("calling RED.tray.resize();")
                    RED.tray.resize();
                }
            });
            resultTypeField.on("change", function () {
                var v = resultTypeField.typedInput("value");
                var t = specificationField.typedInput("type");
                if (t == "ui") {
                    if (v != "buffer") {
                        //console.log("showing items", v, t)
                        $("#ui-row5").show();
                    } else {
                        //console.log("hiding items", v, t)
                        $("#ui-row5").hide();
                    }
                } else {
                    //console.log("hiding items", v, t)
                    $("#ui-row5").hide();
                }
            });
            multipleResultField.on("change", function () {
                var v = this.checked;
                if (v) {
                    console.log("Setting up node-input-result", [returnOpt2]);
                    resultTypeField.typedInput("types", [returnOpt2]);
                    if($("#node-input-fanOutMultipleResult").prop("checked")) {
                        var l = node.items.length || 1;
                        // console.log("setting outputs to " + l)
                        $("#node-input-outputs").val(l);
                        node.outputs = l;
                    }                    
                } else {
                    console.log("Setting up node-input-resultType", [returnOpt]);
                    resultTypeField.typedInput("types", [returnOpt]);
                    // console.log("setting outputs to " + 1)
                    $("#node-input-outputs").val(1);
                    node.outputs = 1;
                }
                $("#node-input-setTopic").prop("disabled", !v);
                $("#node-input-fanOutMultipleResult").prop("disabled", !v);
            });

            sw1.on("change", function () {
                var v = $(this).val();
                var t = $(this).typedInput("type");
                if (t != "swap" || !v || v == "none") {
                    console.log('sw1.on("change" --> setting width 70%')
                    sw1.typedInput("width", "calc(100% - 160px)");
                    sw2.typedInput('hide');
                } else {
                    console.log('sw1.on("change" --> setting width 23%')
                    sw1.typedInput("width", "calc(34% - 160px)");
                    sw2.typedInput('show');
                }
                sw2.change();
            });
            sw2.on("change", function () {
                var v1 = sw1.val();
                var v2 = sw2.val();
                var t = sw1.typedInput("type");
                if (t != "swap" || !v1 || !v2 || v1 == "none" || v2 == "none") {
                    sw3.typedInput('hide');
                } else {
                    sw3.typedInput('show');
                }
            });


            //in place upgrade from JSON specification to new UI
            if (node.specification && node.specificationType == "json") {
                try {
                    var importSpec = JSON.parse(node.specification);
                    if (importSpec.options.byteSwap === true) {
                        sw1.typedInput("value", "swap16");
                    } else if (importSpec.options.byteSwap === false) {
                        sw1.typedInput("value", "");
                    } else if (Array.isArray(importSpec.options.byteSwap)) {
                        if (importSpec.options.byteSwap.length >= 1) {
                            sw1.typedInput("value", importSpec.options.byteSwap[0]);
                            if (importSpec.options.byteSwap.length >= 2) {
                                sw2.typedInput("value", importSpec.options.byteSwap[1]);
                                if (importSpec.options.byteSwap.length >= 3) {
                                    sw3.typedInput("value", importSpec.options.byteSwap[2]);
                                }
                            }
                        }
                    }
                    resultTypeField.typedInput("value", importSpec.options.resultType || "keyvalue");
                    msgPropertyField.typedInput("value", importSpec.options.msgProperty || "payload");

                    var mr = importSpec.options.singleResult === false;
                    var st = importSpec.options.setTopic === false ? false : true;

                    multipleResultField.prop("checked", mr);
                    fanOutMultipleResultField.prop("checked", false);//not possible
                    setTopicField.prop("checked", st);

                    specificationField.typedInput("type", "ui");

                    if (importSpec.items && Array.isArray(importSpec.items)) {
                        node.items = importSpec.items;
                    }
                    node.specification = null;
                    node.specificationType = null;
                } catch (error) {
                    console.warn("import and upgrade of old fixed specification into new UI failed :(", error)
                }
            }

            $('#node-input-items-container').css('min-height', '150px').css('min-width', '420px').editableList({
                addItem: function (container, i, opt) {
                    var rule = opt;
                    if (!rule.hasOwnProperty('type')) {
                        //its a newly added item!
                        rule = { type: "int16be", name: "item" + (i + 1), offset: 0, length: 1, offsetbit: 0, scale: 1, mask: '' };//default
                        var prev = i > 0 ? getEditItem(i - 1) : null;
                        if (prev && prev.type != null) {
                            var byteOffsetMultiplier = 0;
                            var bitOffset = 0;
                            rule.type = prev.type;
                            if (rule.type.indexOf("8") >= 0) byteOffsetMultiplier = 1;
                            if (rule.type == "buffer") byteOffsetMultiplier = 1;
                            if (rule.type == "byte") byteOffsetMultiplier = 1;
                            if (rule.type == "string") byteOffsetMultiplier = 1;
                            if (rule.type == "char") byteOffsetMultiplier = 1;
                            if (rule.type == "ascii") byteOffsetMultiplier = 1;
                            if (rule.type == "hex") byteOffsetMultiplier = 1;
                            if (rule.type == "binary") byteOffsetMultiplier = 1;
                            if (rule.type == "ucs2") byteOffsetMultiplier = 1;
                            if (rule.type == "latin1") byteOffsetMultiplier = 1;
                            if (rule.type.indexOf("16") >= 0) byteOffsetMultiplier = 2;
                            if (rule.type.indexOf("bcd") >= 0) byteOffsetMultiplier = 2;
                            if (rule.type.indexOf("32") >= 0) byteOffsetMultiplier = 4;
                            if (rule.type.indexOf("double") >= 0) byteOffsetMultiplier = 4;
                            if (rule.type.indexOf("float") >= 0) byteOffsetMultiplier = 4;
                            if (rule.type.indexOf("64") >= 0) byteOffsetMultiplier = 8;
                            if (rule.type == "bool") bitOffset = prev.length;
                            if(prev.length > 0) {
                                var byteOffset = (prev.length * byteOffsetMultiplier);
                                if (prev.offset != null) rule.offset = prev.offset + byteOffset;
                                if (prev.offsetbit != null) rule.offsetbit = prev.offsetbit + bitOffset;
                            } else {
                                if (prev.offset != null) rule.offset = prev.offset;
                                if (prev.offsetbit != null) rule.offsetbit = prev.offsetbit;
                            }
                            if (prev.scale != null) rule.scale = prev.scale;
                            if (prev.length != null) rule.length = prev.length;
                            if (prev.mask != null) rule.mask = prev.mask;
                        }
                    }

                    container.css({
                        overflow: 'hidden',
                        whiteSpace: 'nowrap'
                    });
                    let fragment = document.createDocumentFragment();
                    var row1 = $('<div/>', { style: "display:flex;", class: "buffer-parser-row" }).appendTo(fragment);

                    var _types = {
                        value: "type",
                        label: "Type",
                        showLabel: true,
                        options: [
                            { value: "byte", label: "byte" },
                            { value: "int8", label: "int8" },
                            { value: "uint8", label: "uint8" },
                            { value: "int16le", label: "int16 (le)" },
                            { value: "int16be", label: "int16 (be)" },
                            { value: "uint16le", label: "uint16 (le)" },
                            { value: "uint16be", label: "uint16 (be)" },
                            { value: "int32le", label: "int32 (le)" },
                            { value: "int32be", label: "int32 (be)" },
                            { value: "uint32le", label: "uint32 (le)" },
                            { value: "uint32be", label: "uint32 (be)" },
                            { value: "bigint64le", label: "bigint64 (le)" },
                            { value: "bigint64be", label: "bigint64 (be)" },
                            { value: "biguint64le", label: "biguint64 (le)" },
                            { value: "biguint64be", label: "biguint64 (be)" },
                            { value: "floatle", label: "float (le)" },
                            { value: "floatbe", label: "float (be)" },
                            { value: "doublele", label: "double (le)" },
                            { value: "doublebe", label: "double (be)" },
                            { value: "8bit", label: "8bit" },
                            { value: "16bitle", label: "16bit (le)" },
                            { value: "16bitbe", label: "16bit (be)" },
                            { value: "bool", label: "bool" },
                            { value: "bcdle", label: "bcd (le)" },
                            { value: "bcdbe", label: "bcd (be)" },
                            { value: "string", label: "string" },
                            { value: "hex", label: "hex" },
                            { value: "ascii", label: "ascii" },
                            { value: "utf8", label: "utf8" },
                            { value: "utf16le", label: "utf16 (le)" },
                            { value: "ucs2", label: "ucs2" },
                            { value: "latin1", label: "latin1" },
                            { value: "binary", label: "binary" },
                            { value: "buffer", label: "buffer" },
                        ]
                    }


                    let row1_1 = $('<div/>', { style: "display:flex;", class: "buffer-parser-row-item" }).appendTo(row1);
                    let typeField = $('<input/>', { class: "node-input-item-property-type", type: "text", width: "165px" })
                        .appendTo(row1_1)
                        .typedInput({ types: [_types] })

                    let row1_2 = $('<div/>', { style: "display:flex;flex-grow:1;", class: "buffer-parser-row-item" }).appendTo(row1);
                    let nameField = $('<input/>', { class: "node-input-item-property-name", type: "text", width: "125px" })
                        .appendTo(row1_2)
                        .typedInput({ types: [{ label: "Name", value: "str" }] })

                    let row1_3 = $('<div/>', { style: "display:flex;flex-grow:0.15;", class: "buffer-parser-row-item" }).appendTo(row1);
                    let lengthField = $('<input/>', { class: "node-input-item-property-length", type: "number", min: "0", width: "105px" })
                        .appendTo(row1_3)
                        .typedInput({ types: [{ label: "Length", value: "num" }] })

                    let row1_4 = $('<div/>', { style: "display:flex;flex-grow:0.15;", class: "buffer-parser-row-item" }).appendTo(row1);
                    let offsetField = $('<input/>', { class: "node-input-item-property-offset", type: "number", min: "0", width: "100px" })
                        .appendTo(row1_4)
                        .typedInput({ types: [{ label: "Offset", value: "num" }] })

                    let row1_5 = $('<div/>', { style: "display:flex;flex-grow:0.15;", class: "buffer-parser-row-item" }).appendTo(row1);
                    let maskField = $('<input/>', { class: "node-input-item-property-mask", min: "0", width: "150px" })
                        .appendTo(row1_5)
                        .typedInput({
                            types: [
                                {
                                    value: "",
                                    label: "No mask",
                                    hasValue: false
                                },
                                { label: "Mask", value: "str" }
                            ],
                            default: ""
                        })

                    let row1_6 = $('<div/>', { style: "display:flex;flex-grow:0.15;", class: "buffer-parser-row-item" }).appendTo(row1);
                    let offsetbitField = $('<input/>', { class: "node-input-item-property-offsetbit", type: "number", min: "0", width: "105px" })
                        .appendTo(row1_6)
                        .typedInput({ types: [{ label: "bit offset", value: "num" }] })

                    let row1_7 = $('<div/>', { style: "display:flex;flex-grow:0.15;", class: "buffer-parser-row-item" }).appendTo(row1);
                    let scaleField = $('<input/>', { class: "node-input-item-property-scale", width: "105px" })
                        .appendTo(row1_7)
                        .typedInput({ types: [{ label: "scale", value: "str", icon: "fa fa-calculator"  }] })


                    typeField.on("change", function () {
                        var type = $(this).val();
                        var showbitOffset = ["bool", "boolean"].indexOf(type) > -1
                        var showScale = [
                            "int8", "uint8",
                            "int16", "int16be", "int16le","uint16", "uint16be", "uint16le",
                            "int32", "int32be", "int32le","uint32", "uint32be", "uint32le",
                            "floatbe", "floatle", "doublebe", "doublele"
                        ].indexOf(type) > -1
                        if (showbitOffset) {
                            offsetbitField.parent().show();
                            offsetbitField.typedInput('show');
                        } else {
                            offsetbitField.typedInput('hide');
                            offsetbitField.parent().hide();
                        }
                        if (showScale) {
                            scaleField.parent().show();
                            scaleField.typedInput('show');
                        } else {
                            scaleField.typedInput('hide');
                            scaleField.parent().hide();
                        }
                        if (type == "buffer") {
                            maskField.parent().hide();
                            maskField.typedInput('hide');
                        } else {
                            maskField.typedInput('show');
                            maskField.parent().show();
                        }
                    });
                    rule.type = coerceDataType(rule.type);
                    typeField.typedInput('type', "type");
                    typeField.typedInput('value', rule.type || "int16be");
                    nameField.typedInput('type', "str");
                    nameField.typedInput('value', rule.name || ("item" + (i + 1)));
                    offsetField.typedInput('type', "num");
                    offsetField.typedInput('value', rule.offset || 0);
                    lengthField.typedInput('type', "num");
                    lengthField.typedInput('value', rule.length || 1);
                    maskField.typedInput('type', rule.mask ? 'str' : '');
                    maskField.typedInput('value', rule.mask);
                    offsetbitField.typedInput('type', "num");
                    offsetbitField.typedInput('value', rule.offsetbit || 0);
                    scaleField.typedInput('type', "num");
                    scaleField.typedInput('value', rule.scale || 1);

                    typeField.change();
                    container[0].appendChild(fragment);
                },
                removable: true,
                sortable: true
            });

            for (var i = 0; i < this.items.length; i++) {
                var item = this.items[i];
                $("#node-input-items-container").editableList('addItem', item);
            }

            multipleResultField.change();//cause setTopic to be enabled/disabled appropriately
            resultTypeField.change();//cause the items list to show/hide depending on selection
            $("#node-input-swap1").change(); //cause swap selectors to update
            console.log("calling RED.tray.resize();")
            RED.tray.resize();
        },
        oneditsave: function () {
            var items = $("#node-input-items-container").editableList('items');
            var node = this;
            node.items = [];
            items.each(function (i) {
                var rule = $(this);
                var r = parseEditItem(rule);
                node.items.push(r);
            });
            node.resultType = $("#node-input-resultType").typedInput("type");
            var multipleResult = $("#node-input-multipleResult").prop("checked");
            var fanOutMultipleResult = $("#node-input-fanOutMultipleResult").prop("checked");
            if(multipleResult && fanOutMultipleResult) {
                var l = items.length || 1;
                // console.log("setting outputs to " + l)
                $("#node-input-outputs").val(l);
                node.outputs = l;
            } else {
                // console.log("setting outputs to " + 1)
                $("#node-input-outputs").val(1);
                node.outputs = 1;
            }
        },
        oneditresize: function (size) {
            var rows = $("#dialog-form>div:not(.node-input-items-container-row)");
            var height = size.height;
            for (var i = 0; i < rows.length; i++) {
                height -= $(rows[i]).outerHeight(true);
            }
            var editorRow = $("#dialog-form>div.node-input-items-container-row");
            height -= (parseInt(editorRow.css("marginTop")) + parseInt(editorRow.css("marginBottom")));
            height += 16;
            $("#node-input-items-container").editableList('height', height);
        }

    });
})()

</script>

<script type="text/html" data-template-name="buffer-parser">
    <div class="form-row buffer-parser-form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" style="width:calc(100% - 160px)" placeholder="Name">
    </div>
    <div class="form-row buffer-parser-form-row">
        <label for="node-input-data"><i class="fa fa-ellipsis-h"></i><span data-i18n="buffer-parser.label.data"> Property</span></label>
        <input type="hidden" id="node-input-dataType">
        <input style="width:calc(100% - 160px)" type="text" id="node-input-data" placeholder="">
    </div>
    <div class="form-row buffer-parser-form-row">
        <label for="node-input-specification"><i class="fa fa-code"></i><span data-i18n="buffer-parser.label.specification"> Specification</span></label>
        <input type="hidden" id="node-input-specificationType">
        <input style="width:calc(100% - 160px)" type="text" id="node-input-specification" placeholder="">
    </div>    
    <div class="form-row buffer-parser-form-row ui-row" id="ui-row1">
        <label for="node-input-swap1"><i class="fa fa-exchange"></i><span data-i18n="buffer-parser.label.swap"> Byte swap</span></label>
        <span>
            <input type="hidden" id="node-input-swap1Type">
            <input style="width:calc(100% - 160px)" type="text" id="node-input-swap1" placeholder=""> 
            <input type="hidden" id="node-input-swap2Type">
            <input style="width:calc(33% - 160px)" type="text" id="node-input-swap2" placeholder=""> 
            <input type="hidden" id="node-input-swap3Type">
            <input style="width:calc(33% - 160px)" type="text" id="node-input-swap3" placeholder=""> 
        </span>
    </div>
    <div class="form-row buffer-parser-form-row ui-row" id="ui-row2">
        <label for="node-input-msgProperty"><i class="fa fa-sign-out"></i><span data-i18n="buffer-parser.label.msgProperty"> Output property</span></label>
        <input type="hidden" id="node-input-msgPropertyType">
        <input style="width:calc(100% - 160px)" type="text" id="node-input-msgProperty" placeholder="payload">
    </div>
    <div class="form-row buffer-parser-form-row ui-row" id="ui-row3">
        <label><i class="fa fa-sign-out"></i> <span data-i18n="buffer-parser.label.returnOptions"> Output options</span></label>
        <span>
            <label for="node-input-multipleResult" style="width:23%">
                <input type="checkbox" id="node-input-multipleResult" style="display:inline-block; width:22px; vertical-align:baseline;" title="Send a separate message for each item" autocomplete="off"><span data-i18n="buffer-parser.label.multipleResult">multiple results</span>
            </label>
            <label for="node-input-setTopic" style="width:23%">
                <input type="checkbox" id="node-input-setTopic" style="display:inline-block; width:22px; vertical-align:baseline;" title="Use the items name as the topic for the item, otherwise the incoming msg.topic will be used" autocomplete="off"><span data-i18n="buffer-parser.label.setTopic">set topic</span>
            </label>
            <label for="node-input-fanOutMultipleResult" style="width:23%">
                <input type="checkbox" id="node-input-fanOutMultipleResult" style="display:inline-block; width:22px; vertical-align:baseline;" title="Send each item out of a separate node output" autocomplete="off"><span data-i18n="buffer-parser.label.fanOut">fan out</span>
            </label>
            <input type="hidden" id="node-input-outputs"/>
        </span>
    </div>
    <div class="form-row buffer-parser-form-row ui-row" id="ui-row4">
        <label for="node-input-resultType"><i class="fa fa-sign-out"></i><span data-i18n="buffer-parser.label.resultType"> Output</span></label>
        <input type="hidden" id="node-input-resultTypeType">
        <input style="width:calc(100% - 160px)" type="text" id="node-input-resultType" placeholder="value">
    </div>
    <div class="form-row buffer-parser-form-row ui-row node-input-items-container-row"  id="ui-row5">
        <ol id="node-input-items-container"></ol>
    </div>
</script>


<style>
    ol#node-input-items-container .red-ui-typedInput-container {
        flex: 1;
    }

    .buffer-parser-form-row>label {
        width: 120px !important;
    }

    .buffer-parser-row-item {
        margin: 2px 4px 2px 2px;
    }

    .buffer-parser-row {
        flex-wrap: wrap;
    }

    span.buffer-parser-prop-name {
        padding: 0px 3px 2px 3px;
        margin: 1px;
        color: #AD1625;
        white-space: nowrap;
        background-color: #f7f7f9;
        border: 1px solid #e1e1e8;
        border-radius: 2px;
        font-family: monospace;
    }

    span.buffer-parser-prop-type {
        color: #666;
        font-style: italic;
        font-size: smaller;
        padding-left: 5px;
    }

    span.buffer-parser-prop-desc {
        /* color: #333; */
        padding-left: 5px;
    }

    .buffer-parser-node-help div.buffer-parser-node-help-indent {
        margin: 0px 0px 0px 6px;
    }

    li.buffer-parser-help-text {
        list-style-type: none; /* Remove bullets */
        margin-left: -18px;
    }

    li.buffer-parser-help-text > code {
        display: inline-block;
        width: 24px;
    }  

    li.buffer-parser-help-text > span {
        color: #333;
        font-size: smaller;
    }
    li.buffer-parser-help-text > span > code {
        font-size: small;
    }

</style>

<script type="text/html" data-help-name="buffer-parser">
<p>A node that converts an array of integer (Int16) or a buffer in to an object of values based on the specification provided</p>
<h3>Foreword</h3>
<dl class="message-properties">
    A number of examples have been included to help you do some common tasks. To use the examples, press the hamburger menu <a id="red-ui-header-button-sidemenu" class="button" href="#"><i class="fa fa-bars"></i></a> select <b>import</b> then <b>examples</b>
</dl>

<h3>Output</h3>
<dl class="message-properties">
    <dt>payload <span class="property-type">object | []</span></dt>
    <dd>the results.</dd>
    <h4>NOTES:<br>
        Payload can be set to an alternative <code>msg</code> property specified by "Output property"<br>
        Additional useful properties are available in the <code>msg</code> object. Use a debug node (set to show complete output) to inspect them
    </h4>
</dl>

<h3>UI specification</h3>
    <h4><b>Property...</b></h4>
    <div class="buffer-parser-node-help-indent">
        The data to be processed in accordance with the specification. NOTE: The data must be a buffer or an array of 16 bit integers
    <div>
    <h4><b>Specification...</b></h4>
    <div class="buffer-parser-node-help-indent">
        If Specification is set to "UI" then enter the specification in the fields provided below, otherwise, the specification must be an object provided in the format described below in <a href="#buffer-parser-help-dyn-spec">Dynamic specification</a>
    <div>
    <h4><b>Byte swap...</b></h4>
    <div class="buffer-parser-node-help-indent">
        Swap permits 16 bit, 32 bit or 64 bit swap options. Swap is applied to the whole data before extracting the items specified. If the 1st swap option is set to msg, flow, global, it must be an array containing any number of "swap16" "swap32" "swap64" strings. If the 1st swap option is set to env, then the environment variable must be set to a comma separated list of swaps e.g. swap32,swap16
    <div>
    <h4><b>Output property...</b></h4>
    <div class="buffer-parser-node-help-indent">
        This allows you to return the result in a property other than payload. For example, you can have results returned to <code>msg.output</code> or <code>msg.result.data</code>.
    <div>
    <h4><b>Output options...</b></h4>
    <div class="buffer-parser-node-help-indent">
        <ul>
            <li><span class="buffer-parser-prop-name">multiple results</span> <span class="buffer-parser-prop-desc"> When false, a single result is returned in the <code>msg</code> property specified by "Output property". When true, 1 result per item is returned in the <code>msg</code> property specified by "Output property"</span></li>
            <li><span class="buffer-parser-prop-name">set topic</span> <span class="buffer-parser-prop-desc"> When false, <code>msg.topic</code> will be unmodified. When true, <code>msg.topic</code> will be set to the value of <code>name</code>. </span></li>
            <li><span class="buffer-parser-prop-name">fan out</span> <span class="buffer-parser-prop-desc"> When true, multiple output pins will be added to the node and each result will be sent out of its own pin. </span></li>
        </ul>         
    <div>
    <h4><b>Output...</b></h4>
    <div class="buffer-parser-node-help-indent">
        <ul>
            <li><span class="buffer-parser-prop-name">key/value</span> <span class="buffer-parser-prop-desc"> When key/value is selected, the payload will be the value only</span>. Use a fat arrow <code>=></code> in the name to create object.properties e.g. <code>motor1=>power</code> will end up in <code>msg.payload.motor1.power</code>. </li>
            <li><span class="buffer-parser-prop-name">key/object</span> <span class="buffer-parser-prop-desc">  When key/object is selected, the payload will be an object</span>. Use a fat arrow <code>=></code> in the name to create object.properties e.g. <code>motor1=>power</code> will end up in <code>msg.payload.motor1.power</code>. </li>
            <li><span class="buffer-parser-prop-name">value only</span> <span class="buffer-parser-prop-desc">  When value only is selected, the payload will be an array of values</span> </li>
            <li><span class="buffer-parser-prop-name">array</span> <span class="buffer-parser-prop-desc">  When array is selected, the payload will be an array of objects</span> </li>
            <li><span class="buffer-parser-prop-name">buffer</span> <span class="buffer-parser-prop-desc">  When value is selected, the payload will be a buffer. NOTE: No items will be processed (but byteswaps will be applied).</span> </li>
        </ul>
    <div>
    <h4><b>items...</b></h4>
    <div class="buffer-parser-node-help-indent">
        <ul>
            <li><span class="buffer-parser-prop-name">name</span> <span class="buffer-parser-prop-desc"> A name to identify the resulting data. This can also be used as the topic when returning multiple values.</span></li>
            <li><span class="buffer-parser-prop-name">type</span> <span class="buffer-parser-prop-desc"> The type that output data should be changed to (see Allowable types below)</span></li>
            <li><span class="buffer-parser-prop-name">offset</span> <span class="buffer-parser-prop-desc"> The <span class="buffer-parser-prop-name">offset</span> value denotes which byte to start reading data from. This is regardless of data source being a buffer or an integer array e.g. when data source is an integer array, specifying 3 means item source data will start from the middle of the 2nd WORD</span></li>
            <li><span class="buffer-parser-prop-name">length</span> <span class="buffer-parser-prop-desc"> The quantity of items to be returned. e.g. 6 bools or 12 floats or 34 int32s. NOTE: setting <code>length</code> to -1 will attempt to read all bytes from offset to the end. NOTE: If source data does not have enough bytes, the operation will fail.</span></li>
            <li><span class="buffer-parser-prop-name">offsetbit</span> <span class="buffer-parser-prop-desc"> The first bit to return when specifying <span class="buffer-parser-prop-name">type</span> bool. e.g. requesting <span class="buffer-parser-prop-name">offsetbit</span> 6 and a <span class="buffer-parser-prop-name">length</span> of 3 will return byte0-bit6, byte0-bit7 and byte1-bit0 </span></li>
            <li><span class="buffer-parser-prop-name">mask</span> <span class="buffer-parser-prop-desc"> An optional mask to apply to the final data value. Enter a decimal mask e.g 65535 or a hexadecimal mask e.g. 0xffff</span></li>
            <li><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAxUlEQVRYR+2XUQ6CMAyGP+4hiZ7MBw+CHsQHT6YJ3kNTEpNSDUW24RK7N9bQfvzZWv6G8ToCe2Br9nM93oALIHWG1ajMstnlquTkOb0gNEAPbFYCuAOtVeCxUvGR+loBC6BjOdg+5g+AUCAUqFqBHHd/Ksfw8VMKBMDPFbCzwJsVi+Lf3IJFBZSMycPo/wBSD+GsM1SyDwRAsgKzEnjXzItHH6hagdQ+4L3/9j9wLWhKLYyY1F115lSAxCEfCppUMaVnbc+fO91MIQGBj78AAAAASUVORK5CYII=" style="height:16px;" >
                <span class="buffer-parser-prop-name">scale</span> 
                <span class="buffer-parser-prop-desc"> A multiplier or a simple Scale Equation to apply to the final value (after the mask). Supported Scaling Equations are...</span>
                <ul>
                    <li class="buffer-parser-help-text"><code>&lt;&lt;</code> <span>e.g. <code>&lt;&lt;2</code> would left shift the parsed value 2 places</span></li>
                    <li class="buffer-parser-help-text"><code>&gt;&gt;</code> <span>e.g. <code>&gt;&gt;2</code> would right shift the parsed value 2 places</span></li>
                    <li class="buffer-parser-help-text"><code>&gt;&gt;&gt;</code> <span>e.g. <code>&gt;&gt;&gt;2</code> would zero-fill right shift the parsed value 2 places (returns a 32bit unsigned value)</span></li>
                    <li class="buffer-parser-help-text"><code>+</code> <span>e.g. <code>+10</code> would add 10 to the parsed value </span></li>
                    <li class="buffer-parser-help-text"><code>-</code> <span>e.g. <code>-10</code> would deduct 10 from the parsed value </span></li>
                    <li class="buffer-parser-help-text"><code>/</code> <span>e.g. <code>/10</code> would divide the parsed value by 10</span></li>
                    <li class="buffer-parser-help-text"><code>*</code> <span>e.g. <code>*10</code> would multiply the parsed value by 10</span></li>
                    <li class="buffer-parser-help-text"><code>**</code> <span>e.g. <code>**2</code> would raise the parsed value to the power of 2</span></li>
                    <li class="buffer-parser-help-text"><code>^</code> <span>e.g. <code>^0xf0</code> would XOR the parsed value with 0xf0</span></li>
                    <li class="buffer-parser-help-text"><code>==</code> <span>e.g. <code>==10</code> would result in <code>true</code> if the parsed value was equal to 10</span></li>
                    <li class="buffer-parser-help-text"><code>!=</code> <span>e.g. <code>!=10</code> would result in <code>false</code> if the parsed value was equal to 10</span></li>
                    <!-- <li class="buffer-parser-help-text"><code>!</code> <span>e.g. <code>!</code> would result in <code>true</code> if the parsed value was <code>0</code> or <code>false</code> if the parsed value was not <code>0</code></span></li> -->
                    <li class="buffer-parser-help-text"><code>!!</code> <span>e.g. <code>!!</code> would result in <code>true</code> if the parsed value was <code>1</code> (same as <code>!!1 == true</code>) </span></li>
                    <li class="buffer-parser-help-text"><code>&gt;</code> <span>e.g. <code>&gt;10</code> would result in <code>true</code> if the parsed value was greater than 10</span></li>
                    <li class="buffer-parser-help-text"><code>&lt;</code> <span>e.g. <code>&lt;10</code> would result in <code>true</code> if the parsed value was less than 10</span></li>
                </ul>
            </li>
        </ul>
    <div>

<h3 id="buffer-parser-help-dyn-spec">Dynamic specification</h3>
    <div class="buffer-parser-node-help-indent">The <code>specification</code> can be passed in via msg, flow or global instead of being configured by the UI. The dynamic specification must be an object with the following properties...
        <ul>
            <li><span class="buffer-parser-prop-name">options</span> <span class="buffer-parser-prop-type">(Object)</span> <span class="buffer-parser-prop-desc"> processing options</span></li>
            <li><span class="buffer-parser-prop-name">items</span> <span class="buffer-parser-prop-type">(Array)</span> <span class="buffer-parser-prop-desc"> array of items (see below) </span>
        </ul>
        <div>The <span class="buffer-parser-prop-name">options</span> object can have the following properties...
            <ul>
                <li><span class="buffer-parser-prop-name">byteSwap</span> <span class="buffer-parser-prop-type">(Boolean|Array|optional)</span> 
                    <span class="buffer-parser-prop-desc"> swap all bytes before processing items. If <code>true</code>, then <code>swap16</code> will be performed.  If <code>byteSwap</code> is an Array (e.g. <code>["swap64", "swap32", "swap64", "swap16"]</code>) multiple swaps can be performed in the specified order  </span>
                </li>
                <li><span class="buffer-parser-prop-name">resultType</span> <span class="buffer-parser-prop-type">(String|optional)</span> <span class="buffer-parser-prop-desc"> How to return data.  Valid options are "object", "keyvalue", "array", "value" or "buffer"</span></li>
                <li><span class="buffer-parser-prop-name">msgProperty</span> <span class="buffer-parser-prop-type">(String|optional)</span> <span class="buffer-parser-prop-desc"> How to return data.  By default, data will be sent in <code>msg.payload</code> - this can be changed as required. e.g. set <span class="buffer-parser-prop-name">msgProperty</span> to <b>newPayload.data</b> to have results sent to <code>msg.newPayload.data</code>  </span></li>
                <li><span class="buffer-parser-prop-name">multipleResult</span> <span class="buffer-parser-prop-type">(Boolean|optional)</span> <span class="buffer-parser-prop-desc"> By default, a single result will be sent at the end of processing. Set <span class="buffer-parser-prop-name">multipleResult</span> to <code>true</code> to have individual messages sent per item.</span></li>
                <li><span class="buffer-parser-prop-name">setTopic</span> <span class="buffer-parser-prop-type">(Boolean|optional)</span> <span class="buffer-parser-prop-desc"> when <span class="buffer-parser-prop-name">multipleResult</span> is set to <code>true</code>, the individual messages topic will be set to the value of item.name (or the items index if not set). To prevent the topic being overwritten, set <span class="buffer-parser-prop-name">setTopic</span> to <code>false</code> </span></li>
            </ul>
        </div>
        <div>The <span class="buffer-parser-prop-name">items</span> array must contain 1 or more objects in the following format (not used when <code>resultType</code>="buffer")...
            <ul>
                <li><span class="buffer-parser-prop-name">name</span> <span class="buffer-parser-prop-type">(String)</span> <span class="buffer-parser-prop-desc"> A name to identify the resulting data. This can also be used as the topic when returning multiple values.</span></li>
                <li><span class="buffer-parser-prop-name">type</span> <span class="buffer-parser-prop-type">(String)</span> <span class="buffer-parser-prop-desc"> The type that output data should be changed to (see Allowable types below)</span></li>
                <li><span class="buffer-parser-prop-name">offset</span> <span class="buffer-parser-prop-type">(Number)</span> <span class="buffer-parser-prop-desc"> The <span class="buffer-parser-prop-name">offset</span> value denotes which byte to start reading data from. This is regardless of data source being a buffer or an integer array e.g. when data source is an integer array, specifying 3 means item source data will start from the middle of the 2nd WORD</span></li>
                <li><span class="buffer-parser-prop-name">length</span> <span class="buffer-parser-prop-type">(Number|optional)</span> <span class="buffer-parser-prop-desc"> The quantity of items to be returned. e.g. 6 bools or 12 floats or 34 int32s. NOTE: setting <code>length</code> to -1 will attempt to read all bytes from offset to the end. NOTE: If source data does not have enough bytes, the operation will fail.</span></li>
                <li><span class="buffer-parser-prop-name">offsetbit</span> <span class="buffer-parser-prop-type">(Number|optional)</span> <span class="buffer-parser-prop-desc"> The first bit to return when specifying <span class="buffer-parser-prop-name">type</span> bool. e.g. requesting <span class="buffer-parser-prop-name">offsetbit</span> 6 and a <span class="buffer-parser-prop-name">length</span> of 3 will return byte0-bit6, byte0-bit7 and byte1-bit0 </span></li>
                <li><span class="buffer-parser-prop-name">mask</span> <span class="buffer-parser-prop-type">(Number|String|optional)</span> <span class="buffer-parser-prop-desc"> An optional mask to apply to the final data value. Enter a decimal mask e.g 65535 or a hexadecimal mask e.g. 0xffff</span></li>
                <li><span class="buffer-parser-prop-name">scale</span> <span class="buffer-parser-prop-type">(Number|optional)</span><span class="buffer-parser-prop-desc"> A multiplier to apply to the final value. e.g. entering 0.1 will divide the final value by 10.  Entering 10 will multiply the final value by 10</span></li>
            </ul>
        </div>
    </div>

    <div class="buffer-parser-node-help-indent">Allowable <span class="buffer-parser-prop-name">type</span> options...
        <ul>
            <li>int, int8, byte, uint, uint8</li>
            <li>int16, int16le, int16be, uint16, uint16le, uint16be</li>
            <li>int32, int32le, int32be, uint32, uint32le, uint32be</li>
            <li>bigint64, bigint64le, bigint64be, biguint64, biguint64le, biguint64be</li>
            <li>float, floatle, floatbe, double, doublele, doublebe</li>
            <li>8bit, 16bit 16bitle 16bitbe, bool</li>
            <li>bcd, bcdle, bcdbe</li>
            <li>string, hex, ascii, utf8, utf16le, ucs2, latin1, binary, buffer</li>
            <li>NOTES...
                <ul>
                    <li>If <b>le</b> (little endian) or <b>be</b> (big endian) is not specified, <b>be</b> will be assumed</li>
                    <li>bcd will convert the number to a 4BCD equivalent (bcd is not a standard buffer function)</li>
                    <li>bool will return an array of true or false values. If bit ordering is incorrect, you can swap the data in the options or pass out the values as int16be, int16le, int32be, int32le (etc) value(s) to another node for conversion to booleans</li>
                    <li>bigint64 operations return a BigInt object, which has some particular behaviours you need to be aware of - see <a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt">bigint documentation</a> for further details</li>
                    <li>for key/value and key/object, fat arrow <code>=></code> will create sub objects. e.g. a name of `motor1=>power` will generate an object `motor1` with a property `power`.</li>
                    <li>Refer to nodejs <a href="https://nodejs.org/api/buffer.html" target="_blank">Buffer documentation</a> for further details</li>
                </ul>
            </li>    
        </ul>
    </div>    
    <div class="buffer-parser-node-help-indent">Example dynamic specification...
        <pre><code style="font-size: smaller">
{
    "options": {
        "byteSwap": ["swap32", "swap16"],
        "resultType": "object",
        "multipleResult": true,
        "setTopic": true,
        "msgProperty": "payload"
    },
    "items": [
        {
            "name": "digit1",
            "type": "int",
            "offset": 4,
            "mask": "0x00f0"
            "scale": ">> 4"
        },
        {
            "name": "myInt16Array_LE_divided_by_100",
            "type": "int16le",
            "offset": 26,
            "length": 6,
            "scale": 0.01
        },
        {
            "name": "myInt16Array_BE",
            "type": "int16be",
            "offset": 26,
            "length": 6
        },
        {
            "name": "booleans",
            "type": "bool",
            "offset": 0,
            "length": 16
        },
        {
            "name": "16bits",
            "type": "16bit",
            "offset": 0
        },
        {
            "name": "myString",
            "type": "string",
            "offset": 0,
            "length": -1
        }
    ]
}
        </pre></code>
    </div>
    
</script>
</div><div><!-- --- [red-module:node-red-contrib-buffer-parser/buffer-maker] --- -->
<!--
MIT License

Copyright (c) 2020 Steve-Mcl

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.
-->

<script type="text/javascript">

(function () {
    //console.log("Initialising buffer-maker"); //uncomment me to help locate SRC in devtools!
    var compatibleDataTypes = {
        'int': 'int8',
        'uint': 'uint8',
        'int16': 'int16be',
        'uint16': 'uint16be',
        'int32': 'int32be',
        'uint32': 'uint32be',
        'bigint64': 'bigint64be',
        'biguint64': 'biguint64be',
        'float': 'floatbe',
        'double': 'doublebe',
        '16bit': '16bitbe',
        'boolean': 'bool'
    }
    function coerceDataType(t) {
        return compatibleDataTypes[t] || t;
    }
    function setupTypedInput(varName, allowableTypes, defType, defVal, isOptional, width) {
        var node = this;
        console.log("setupTypedInput", varName, allowableTypes, defType, defVal, isOptional, width);
        //TODO: move to common library
        function isObject(val) {
            if (val === null) { return false; }
            return (typeof val === 'object');
        };
        function isNumeric(n) {
            return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);
        };
        function isTypeInArray(arr, findType) {
            try {
                var typeToFind = findType;
                if (isObject(findType))
                    typeToFind = findType.value;
                for (var index = 0; index < arr.length; index++) {
                    var element = arr[index];
                    var thisType = isObject(element) ? element.value : element;
                    if (thisType === typeToFind) return true;
                }
            } catch (error) { }
            return false;
        }

        var varSel = "#node-input-" + varName;
        var typeSel = varSel + "Type";
        var currentValue = node[varName];
        var currentType = node[varName + "Type"];
        var defShouldHaveNoValue = false;
        //if optional but 'none' is not yet an option - add it as first option in allowableTypes
        if (isOptional === true) {
            if (!isTypeInArray(allowableTypes, "none")) {
                allowableTypes.unshift("none");
            }
        }

        //if defType is not in the list of parameter type, change defType to 1st item
        if (!isTypeInArray(allowableTypes, defType)) {
            var _firstType = allowableTypes[0];
            if (isObject(_firstType)) {
                _firstType = _firstType.value;
                defShouldHaveNoValue = _firstType.hasValue == false;
            }
            defType = _firstType;
        }

        //if currently set type is not in the list of parameter types, set currentType to defType
        if (!isTypeInArray(allowableTypes, currentType)) {
            currentType = defType;
        }

        //catch all
        if (!currentType) {
            currentType = defType || "";
        }

        var $ti = $(varSel);
        var alreadyBuilt = $ti.data("built") == true;
        if (alreadyBuilt) {
            //already built? just update types :)
            $ti.typedInput("types", allowableTypes);
        } else {
            var opts = {
                default: defType,
                typeField: $(typeSel),
                types: allowableTypes
            };
            if (isOptional) {
                opts.default = defType || "none";
                opts.validate = function (v) {
                    //todo - handle this when spec changes
                    return !!v;
                };
            }
            $ti.typedInput(opts);
            $ti.data("built", true);
        }

        if (currentValue && currentType == "bool") {
            currentValue  = (currentValue === true || currentValue === "true") ? "true" : "false";
        }

        $ti.typedInput("type", currentType);
        $ti.typedInput("value", currentValue);

        if (width) $ti.typedInput("width", width);
        return $ti;
    }

    function getEditItem(index) {
        try {
            var items = $("#node-input-items-container").editableList('items');
            var r = parseEditItem(items[index]);
            return parseEditItem(items[index]);
        } catch (error) { }
        return null;
    }

    function parseEditItem($row) {
        try {
            var rule = $($row);
            var r = {};
            r.name = rule.find(".node-input-item-property-name").val() || "item" + (i + 1);
            r.type = rule.find(".node-input-item-property-type").val() || "int16be";
            r.length = parseInt(rule.find(".node-input-item-property-length").val() || 1);
            var d = $(rule.find(".node-input-item-property-data"));
            r.dataType =  d.typedInput("type");
            r.data =  d.typedInput("value");
            return r;
        } catch (error) { }
        return null;
    }

    RED.nodes.registerType('buffer-maker', {
        category: 'parser',
        color: '#0090d4',
        defaults: {
            name: { value: "" },
            specification: { value: "" },
            specificationType: { value: "ui" },
            items: { value: [{ name: "item1", type: "int16be", data: "payload", dataType: "msg" }], required: true },
            swap1: { value: "" },
            swap2: { value: "" },
            swap3: { value: "" },
            swap1Type: { value: "swap" },
            swap2Type: { value: "swap" },
            swap3Type: { value: "swap" },
            msgProperty: { value: "payload" },
            msgPropertyType: { value: "str" },
        },
        inputs: 1,
        outputs: 1,
        icon: "font-awesome/fa-compress",
        label: function () {
            return this.name || "buffer maker";
        },
        oneditprepare: function () {
            // console.log("buffer-maker->oneditprepare()")
            var node = this;

            var sti = setupTypedInput.bind(this);
            var specOpt = {
                value: "ui",
                label: "UI Specification",
                hasValue: false
            }
            var swapOpt = {
                value: "swap",
                label: "Swap",
                title: "Swap",
                showLabel: true,
                // icon:"fa fa-exchange",
                options: [
                    { label: "none", value: '', title: '' },
                    { label: "16", value: 'swap16', title: 'Interprets data as an array of 16-bit integers and swaps the byte order in-place' },
                    { label: "32", value: 'swap32', title: 'Interprets data as an array of 32-bit integers and swaps the byte order in-place' },
                    { label: "64", value: 'swap64', title: 'Interprets data as an array of 64-bit integers and swaps the byte order in-place' },
                ],
                default: "none"
            }

            sti('data', ['msg', 'json', 'bin'], 'msg');//data
            var specificationField = sti('specification', [specOpt, 'msg', 'flow', 'global'], 'ui');//specification
            var sw1 = sti('swap1', [swapOpt, 'json', 'msg', 'flow', 'global', 'env'], 'swap');//specification
            var sw2 = sti('swap2', [swapOpt], 'swap');//specification
            var sw3 = sti('swap3', [swapOpt], 'swap');//specification
            var msgPropertyField = $("#node-input-msgProperty").typedInput({ types: [{ label: "msg.", value: "str" }] });
            specificationField.on("change", function () {
                var v = $(this).val();
                var t = specificationField.typedInput("type");
                if (t == "ui") {
                    $(".ui-row").show();
                    if (!v) specificationField.typedInput("value", "spec");
                    console.log("calling RED.tray.resize();")
                    RED.tray.resize();
                } else {
                    $(".ui-row").hide();
                    console.log("calling RED.tray.resize();")
                    RED.tray.resize();
                }
            });


            sw1.on("change", function () {
                var v = $(this).val();
                var t = $(this).typedInput("type");
                if (t != "swap" || !v || v == "none") {
                    sw1.typedInput("width", "70%");
                    sw2.typedInput('hide');
                } else {
                    sw1.typedInput("width", "23%");
                    sw2.typedInput('show');
                }
                sw2.change();
            });
            sw2.on("change", function () {
                var v1 = sw1.val();
                var v2 = sw2.val();
                var t = sw1.typedInput("type");
                if (t != "swap" || !v1 || !v2 || v1 == "none" || v2 == "none") {
                    sw3.typedInput('hide');
                } else {
                    sw3.typedInput('show');
                }
            });

            $('#node-input-items-container').css('min-height', '150px').css('min-width', '500px').editableList({
                addItem: function (container, i, opt) {
                    var rule = opt;
                    if (!rule.hasOwnProperty('type')) {
                        //its a newly added item!
                        rule = { type: "int16be", name: "item" + (i + 1), length: 1, dataType: "msg", data: "payload" };//default
                        var prev = i > 0 ? getEditItem(i - 1) : null;
                        if (prev && prev.type != null) {
                            var byteOffsetMultiplier = 0;
                            var bitOffset = 0;
                            rule.type = prev.type;
                            rule.length = prev.length;
                            rule.data = prev.data;
                            rule.dataType = prev.dataType;
                        }
                    }

                    container.css({
                        overflow: 'hidden',
                        whiteSpace: 'nowrap'
                    });
                    let fragment = document.createDocumentFragment();
                    var row1 = $('<div/>', { style: "display:flex;", class: "buffer-maker-row" }).appendTo(fragment);

                    var _types = {
                        value: "type",
                        label: "Type",
                        showLabel: true,
                        options: [
                            { value: "byte", label: "byte" },
                            { value: "int8", label: "int8" },
                            { value: "uint8", label: "uint8" },
                            { value: "int16le", label: "int16 (le)" },
                            { value: "int16be", label: "int16 (be)" },
                            { value: "uint16le", label: "uint16 (le)" },
                            { value: "uint16be", label: "uint16 (be)" },
                            { value: "int32le", label: "int32 (le)" },
                            { value: "int32be", label: "int32 (be)" },
                            { value: "uint32le", label: "uint32 (le)" },
                            { value: "uint32be", label: "uint32 (be)" },
                            { value: "bigint64le", label: "bigint64 (le)" },
                            { value: "bigint64be", label: "bigint64 (be)" },
                            { value: "biguint64le", label: "biguint64 (le)" },
                            { value: "biguint64be", label: "biguint64 (be)" },
                            { value: "floatle", label: "float (le)" },
                            { value: "floatbe", label: "float (be)" },
                            { value: "doublele", label: "double (le)" },
                            { value: "doublebe", label: "double (be)" },
                            { value: "8bit", label: "8bit" },
                            { value: "16bitle", label: "16bit (le)" },
                            { value: "16bitbe", label: "16bit (be)" },
                            { value: "bool", label: "bool" },
                            { value: "bcdle", label: "bcd (le)" },
                            { value: "bcdbe", label: "bcd (be)" },
                            { value: "string", label: "string" },
                            { value: "hex", label: "hex" },
                            { value: "ascii", label: "ascii" },
                            { value: "utf8", label: "utf8" },
                            { value: "utf16le", label: "utf16 (le)" },
                            { value: "ucs2", label: "ucs2" },
                            { value: "latin1", label: "latin1" },
                            { value: "binary", label: "binary" },
                            { value: "buffer", label: "buffer" },
                        ]
                    }


                    let row1_1 = $('<div/>', { style: "display:flex;", class: "buffer-maker-row-item" }).appendTo(row1);
                    let nameField = $('<input/>', { class: "node-input-item-property-name", type: "text", width: "125px" })
                        .appendTo(row1_1)
                        .typedInput({ types: [{ label: "Name", value: "str" }] })

                    let row1_2 = $('<div/>', { style: "display:flex;", class: "buffer-maker-row-item" }).appendTo(row1);
                    let typeField = $('<input/>', { class: "node-input-item-property-type", type: "text", width: "165px" })
                        .appendTo(row1_2)
                        .typedInput({ types: [_types] })
                        
                    let row1_3 = $('<div/>', { style: "display:flex;", class: "buffer-maker-row-item" }).appendTo(row1);
                    let lengthField = $('<input/>', { class: "node-input-item-property-length", type: "number", min: "0", width: "110px" })
                    .appendTo(row1_3)
                    .typedInput({ types: [{ label: "Length", value: "num" }] })

                    let row1_4 = $('<div/>', { style: "display:flex;", class: "buffer-maker-row-item" }).appendTo(row1);
                    let dataField = $('<input/>', { class: "node-input-item-property-data", type: "text", min: "0", width: "155px" })
                        .appendTo(row1_4)
                        .typedInput({ types: ['msg','flow','global','str','num','bool','bin','jsonata','env']});
                   
                    rule.type = coerceDataType(rule.type);
                    typeField.typedInput('type', "type");
                    typeField.typedInput('value', rule.type || "int16be");
                    nameField.typedInput('type', "str");
                    nameField.typedInput('value', rule.name || ("item" + (i + 1)));
                    dataField.typedInput('type', rule.dataType || "msg");
                    dataField.typedInput('value', rule.data || "payload");
                    lengthField.typedInput('type', "num");
                    lengthField.typedInput('value', rule.length || 1);

                    container[0].appendChild(fragment);
                },
                removable: true,
                sortable: true
            });

            for (var i = 0; i < this.items.length; i++) {
                var item = this.items[i];
                $("#node-input-items-container").editableList('addItem', item);
            }

        },
        oneditsave: function () {
            var items = $("#node-input-items-container").editableList('items');
            var node = this;
            node.items = [];
            items.each(function (i) {
                var rule = $(this);
                var r = parseEditItem(rule);
                node.items.push(r);
            });
        },
        oneditresize: function (size) {
            console.log("inside oneditresize");
            var rows = $("#dialog-form>div:not(.node-input-items-container-row)");
            var height = size.height;
            for (var i = 0; i < rows.length; i++) {
                height -= $(rows[i]).outerHeight(true);
            }
            var editorRow = $("#dialog-form>div.node-input-items-container-row");
            height -= (parseInt(editorRow.css("marginTop")) + parseInt(editorRow.css("marginBottom")));
            height += 16;
            $("#node-input-items-container").editableList('height', height);
        }

    });
})()

</script>

<script type="text/html" data-template-name="buffer-maker">
    <div class="form-row buffer-maker-form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row buffer-maker-form-row">
        <label for="node-input-specification"><i class="fa fa-code"></i><span data-i18n="buffer-maker.label.specification"> Specification</span></label>
        <input type="hidden" id="node-input-specificationType">
        <input style="width: 70%" type="text" id="node-input-specification" placeholder="">
    </div>
    <div class="form-row buffer-maker-form-row ui-row node-input-items-container-row"  id="ui-row5">
        <ol id="node-input-items-container"></ol>
    </div>
    <div class="form-row buffer-maker-form-row ui-row" id="ui-row1">
        <label for="node-input-swap1"><i class="fa fa-exchange"></i><span data-i18n="buffer-maker.label.swap"> Byte swap</span></label>
        <span>
            <input type="hidden" id="node-input-swap1Type">
            <input style="width: 23%" type="text" id="node-input-swap1" placeholder=""> 
            <input type="hidden" id="node-input-swap2Type">
            <input style="width: 23%" type="text" id="node-input-swap2" placeholder=""> 
            <input type="hidden" id="node-input-swap3Type">
            <input style="width: 23%" type="text" id="node-input-swap3" placeholder=""> 
        </span>
    </div>
    <div class="form-row buffer-maker-form-row ui-row" id="ui-row2">
        <label for="node-input-msgProperty"><i class="fa fa-sign-out"></i><span data-i18n="buffer-maker.label.msgProperty"> Output property</span></label>
        <input type="hidden" id="node-input-msgPropertyType">
        <input style="width: 70%" type="text" id="node-input-msgProperty" placeholder="payload">
    </div>
</script>


<style>
    ol#node-input-items-container .red-ui-typedInput-container {
        flex: 1;
    }

    .buffer-maker-form-row>label {
        width: 120px !important;
    }

    .buffer-maker-row-item {
        margin: 2px 4px 2px 2px;
    }

    .buffer-maker-row {
        flex-wrap: wrap;
    }

    span.buffer-maker-prop-name {
        padding: 0px 3px 2px 3px;
        margin: 1px;
        color: #AD1625;
        white-space: nowrap;
        background-color: #f7f7f9;
        border: 1px solid #e1e1e8;
        border-radius: 2px;
        font-family: monospace;
    }

    span.buffer-maker-prop-type {
        color: #666;
        font-style: italic;
        font-size: smaller;
        padding-left: 5px;
    }

    span.buffer-maker-prop-desc {
        /* color: #333; */
        padding-left: 5px;
    }

    .buffer-maker-node-help div.buffer-maker-node-help-indent {
        margin: 0px 0px 0px 6px;
    }
</style>

<script type="text/html" data-help-name="buffer-maker">
<p>A node that converts input data items into a buffer based on the specification provided</p>
<h3>Foreword</h3>
<dl class="message-properties">
    A number of examples have been included to help you do some common tasks. To use the examples, press the hamburger menu <a id="red-ui-header-button-sidemenu" class="button" href="#"><i class="fa fa-bars"></i></a> select <b>import</b> then <b>examples</b>
</dl>

<h3>Output</h3>
<dl class="message-properties">
    <dt>payload <span class="property-type">object | []</span></dt>
    <dd>the results.</dd>
    <h4>NOTES:<br>
        Payload can be set to an alternative <code>msg</code> property specified by "Output property"<br>
        Additional useful properties are available in the <code>msg</code> object. Use a debug node (set to show complete output) to inspect them
    </h4>
</dl>

<h3>UI specification</h3>
    <h4><b>Property...</b></h4>
    <div class="buffer-maker-node-help-indent">
        The data to be processed in accordance with the specification. 
    <div>
    <h4><b>Specification...</b></h4>
    <div class="buffer-maker-node-help-indent">
        If Specification is set to "UI" then enter the specification in the fields provided below, otherwise, the specification must be an object provided in the format described below in <a href="#buffer-maker-help-dyn-spec">Dynamic specification</a>
    <div>
    <h4><b>Byte swap...</b></h4>
    <div class="buffer-maker-node-help-indent">
        Swap permits 16 bit, 32 bit or 64 bit swap options. Swap is applied to the whole data before extracting the items specified. If the 1st swap option is set to msg, flow, global, it must be an array containing any number of "swap16" "swap32" "swap64" strings. If the 1st swap option is set to env, then the environment variable must be set to a comma separated list of swaps e.g. swap32,swap16
    <div>
    <h4><b>Output property...</b></h4>
    <div class="buffer-maker-node-help-indent">
        This allows you to return the result in a property other than payload. For example, you can have results returned to <code>msg.output</code> or <code>msg.result.data</code>.
    <div>

    <h4><b>items...</b></h4>
    <div class="buffer-maker-node-help-indent">
        <ul>
            <li><span class="buffer-maker-prop-name">name</span> <span class="buffer-maker-prop-desc"> A name to identify the resulting data.</span></li>
            <li><span class="buffer-maker-prop-name">type</span> <span class="buffer-maker-prop-desc"> The type that input data should be written to the buffer as (see Allowable types below)</span></li>
            <li><span class="buffer-maker-prop-name">length</span> <span class="buffer-maker-prop-desc"> The quantity of items to be written to the buffer. e.g. 12 floats or 34 int32s. NOTE: setting <code>length</code> to -1 will attempt to read all data items from the input data array. NOTE: If input data does not have enough bytes, the operation will fail.</span></li>
        </ul>
    <div>

<h3 id="buffer-maker-help-dyn-spec">Dynamic specification</h3>
    <div class="buffer-maker-node-help-indent">The <code>specification</code> can be passed in via msg, flow or global instead of being configured by the UI. The dynamic specification must be an object with the following properties...
        <ul>
            <li><span class="buffer-maker-prop-name">options</span> <span class="buffer-maker-prop-type">(Object)</span> <span class="buffer-maker-prop-desc"> processing options</span></li>
            <li><span class="buffer-maker-prop-name">items</span> <span class="buffer-maker-prop-type">(Array)</span> <span class="buffer-maker-prop-desc"> array of items (see below) </span>
        </ul>
        <div>The <span class="buffer-maker-prop-name">options</span> object can have the following properties...
            <ul>
                <li><span class="buffer-maker-prop-name">byteSwap</span> <span class="buffer-maker-prop-type">(Boolean|Array|optional)</span> 
                    <span class="buffer-maker-prop-desc"> swap all bytes before processing items. If <code>true</code>, then <code>swap16</code> will be performed.  If <code>byteSwap</code> is an Array (e.g. <code>["swap64", "swap32", "swap64", "swap16"]</code>) multiple swaps can be performed in the specified order  </span>
                </li>
                <li><span class="buffer-maker-prop-name">msgProperty</span> <span class="buffer-maker-prop-type">(String|optional)</span> <span class="buffer-maker-prop-desc"> How to return data.  By default, data will be sent in <code>msg.payload</code> - this can be changed as required. e.g. set <span class="buffer-maker-prop-name">msgProperty</span> to <b>newPayload.data</b> to have results sent to <code>msg.newPayload.data</code>  </span></li>
            </ul>
        </div>
        <div>The <span class="buffer-maker-prop-name">items</span> array must contain 1 or more objects in the following format (not used when <code>resultType</code>="buffer")...
            <ul>
                <li><span class="buffer-maker-prop-name">name</span> <span class="buffer-maker-prop-type">(String)</span> <span class="buffer-maker-prop-desc"> A name to identify the resulting data.</span></li>
                <li><span class="buffer-maker-prop-name">type</span> <span class="buffer-maker-prop-type">(String)</span> <span class="buffer-maker-prop-desc"> The type that input data should be written to the buffer as (see Allowable types below)</span></li>
                <li><span class="buffer-maker-prop-name">length</span> <span class="buffer-maker-prop-type">(Number|optional)</span> <span class="buffer-maker-prop-desc"> The quantity of items to be written to the buffer. e.g. 12 floats or 34 int32s. NOTE: setting <code>length</code> to -1 will attempt to read all data items from the input data array. NOTE: If input data does not have enough bytes, the operation will fail.</span></li>
            </ul>
        </div>
    </div>

    <div class="buffer-maker-node-help-indent">Allowable <span class="buffer-maker-prop-name">type</span> options...
        <ul>
            <li>int, int8, byte, uint, uint8</li>
            <li>int16, int16le, int16be, uint16, uint16le, uint16be</li>
            <li>int32, int32le, int32be, uint32, uint32le, uint32be</li>
            <li>bigint64, bigint64le, bigint64be, biguint64, biguint64le, biguint64be</li>
            <li>float, floatle, floatbe, double, doublele, doublebe</li>
            <li>8bit, 16bit 16bitle 16bitbe, bool</li>
            <li>bcd, bcdle, bcdbe</li>
            <li>string, hex, ascii, utf8, utf16le, ucs2, latin1, binary, buffer</li>
            <li>NOTES...
                <ul>
                    <li>If <b>le</b> (little endian) or <b>be</b> (big endian) is not specified, <b>be</b> will be assumed</li>
                    <li>bcd will convert the number to a 4BCD equivalent (bcd is not a standard buffer function)</li>
                    <li>bool data must be provided in an array e.g. <code>[true,true,false,false]</code> </li>
                    <li>8bit data must be provided in an array of 8bit arrays e.g. <code>[ [1,0,0,1,1,0,0,1], [1,1,0,0,1,1,0,0] ]</code> </li>
                    <li>16bit data must be provided in an array of 16bit arrays e.g. <code>[ [1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1], [1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0] ]</code> </li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="buffer-maker-node-help-indent">Example specification...
        <pre><code style="font-size: smaller">
{
    "options": {
        "byteSwap": ["swap32", "swap16"],
        "msgProperty": "payload"
    },
    "items": [
        {
            "name": "myInts",
            "type": "int",
            "length": 6,
            "data": "payload.myInts"
            "dataType": "msg"
        },
        {
            "name": "myInt16ArrayInFlow",
            "type": "int16be",
            "length": 6,
            "data": "myInt16Array"
            "dataType": "flow"
        },
        {
            "name": "booleans",
            "type": "bool",
            "length": 8,
            "data": "[true,true,false,false,true,true,false,false]"
            "dataType": "json"
        },
        {
            "name": "16bits",
            "type": "16bit",
            "length": 1,
            "data": "[1,1,0,0,1,0,1,0,1,1,0,0,1,0,1,0]"
            "dataType": "json"
        },
        {
            "name": "myString",
            "type": "string",
            "length": -1,
            "data": "title",
            "dataType": "global"
        }
    ]
}
        </pre></code>
    </div>
    
</script>
</div><div><!-- --- [red-module:node-red-contrib-dashboard-average-bars/average-bars] --- -->
<script type="text/javascript">
  RED.nodes.registerType('average-bars', {
    category: 'dashboard',
    color: '#3FADB5',
    defaults: {
      name: { value: 'average-bars' },
      title: { value: '' },
      period: { value: 'day' },
      yMin: { value: 'auto' },      
      yMax: { value: 'auto' },        
      showBarsValue: { value: true },      
      showScaleValue: { value: true },        
      showLastValue: { value: true },
      showAverageValue: { value: true },
      showMinimumValue: { value: true },
      showMaximumValue: { value: true },
      maxBar: { value: 30 , validate:RED.validators.number() },
      topColor: { value: '#FF0000' },
      bottomColor: { value: '#FFFF00' },
      unit: { value: '' },
      fontColor: { value: '#AAAAAA' },     
      barStyle: { value: 'Rectangle' } ,
      decimal: { value: 1 }      
    },
    credentials: {

    },
    inputs: 1,
    outputs: 1,
    icon: 'ui_template.png',
    align: 'right',
    label: function() {
      return this.name || 'average-bars';
    }
  });
</script>

<script type="text/x-red" data-template-name="average-bars">
	
  <div class="form-row">
      <label for="node-input-name"><i class="fa fa-tag"></i> Node name</label>
      <input type="text" id="node-input-name" placeholder="Name">
  </div>
  
  <div class="form-row">
      <label for="node-input-title"><i class="fa fa-tag"></i> Title</label>
      <input type="text" id="node-input-title" placeholder="msg.topic">
  </div>
  
  <div class="form-row">
      <label for="node-input-period"><i class="fa fa-bar-chart"></i> x-axis</label>
      <select id="node-input-period">
		  <option value='hour'>last hour</option>
		  <option value='day'>last day</option>
		  <option value='week'>last week</option>
		  <option value='month'>last month</option>		  
		  <option value='year'>last year</option>		
		  <option value='topic'>msg.topic</option>			  	  
	  </select>	  
  </div>  
  
  <div class="form-row">
      <label for="node-input-yMin"><i class="fa fa-bar-chart"></i> y-axis</label>
      min <input type="text" id="node-input-yMin" style="display:inline-block;width:80px" placeholder="auto">&nbsp;
      max <input type="text" id="node-input-yMax" style="display:inline-block;width:80px" placeholder="auto">&nbsp;
  </div>   
  <hr>
  
  <div class="form-row">
      <label for="node-input-barStyle</label>"><i class="fa fa-bars"></i> Bar style</label>
      <select id="node-input-barStyle">
		  <option value='Rectangle'>rectangle</option>
		  <option value='Equalizer'>equalizer</option>	  	  
	  </select>	  
  </div>    
  
  <div class="form-row">
      <label for="node-input-maxBar"><i class="fa fa-arrows-v"></i> Bar lines</label>
      <input type="text" id="node-input-maxBar" placeholder="30" style="width:50px">
  </div>
  
  <div class="form-row">
      <label for="node-input-topColor"><i class="fa fa-paint-brush"></i> Bar colors</label>
      top <input type="color" id="node-input-topColor" class="gauge-color"/>
      bottom <input type="color" id="node-input-bottomColor" class="gauge-color"/>
  </div>
  
  <hr>
  
  <div class="form-row" align=left>
      <label><i class="fa fa-eye-slash"></i> Display</label>
      <div>&nbsp;&nbsp;<input type="checkbox" id="node-input-showBarsValue" checked style="display:inline-block; width:20px; vertical-align:baseline;">&nbsp;bar values</div>     
      <div>&nbsp;&nbsp;<input type="checkbox" id="node-input-showScaleValue" checked style="display:inline-block; width:20px; vertical-align:baseline;">&nbsp;x-axis values</div>     
      <div>&nbsp;&nbsp;<input type="checkbox" id="node-input-showLastValue" checked style="display:inline-block; width:20px; vertical-align:baseline;">&nbsp;last value</div>
      <div>&nbsp;&nbsp;<input type="checkbox" id="node-input-showAverageValue" checked style="display:inline-block; width:20px; vertical-align:baseline;">&nbsp;chart average</div>
      <div>&nbsp;&nbsp;<input type="checkbox" id="node-input-showMinimumValue" checked style="display:inline-block; width:20px; vertical-align:baseline;">&nbsp;chart minimum</div>
      <div>&nbsp;&nbsp;<input type="checkbox" id="node-input-showMaximumValue" checked style="display:inline-block; width:20px; vertical-align:baseline;">&nbsp;chart maximum</div>
  </div>
  
  <div class="form-row">
      <label for="node-input-unit"><i class="fa fa-bookmark-o"></i> Unit</label>
      <input type="text" id="node-input-unit" style="width:50px" />
  </div>
  
  <div class="form-row">
      <label for="node-input-decimal"><i class="fa fa-tachometer"></i> Decimals</label>
      <select id="node-input-decimal">
		  <option value='0'>0</option>
		  <option value='1'>1</option>	 
		  <option value='2'>2</option>			   	  
	  </select>	  
  </div>  
  
  <div class="form-row">
      <label for="node-input-fontColor"><i class="fa fa-paint-brush"></i> Font color</label>
      <input type="color" id="node-input-fontColor"  class="gauge-color"/>
  </div>  

</script>


<script type="text/x-red" data-help-name="average-bars">
  <p>Calculate and display the average values of <code>msg.payload</code> in a bar chart.</p>
  <p>see the <a href="https://github.com/nazcasun/node-red-contrib-dashboard-average-bars/wiki">wiki</a></p> 
  <dl>Important<dd>The average-bars node is simply and necessarily linked to the node-red dashboard template node.
    The average-bars node create the input msg of the template node and the template node display the chart.</dd>
  </dl>

  <h3>Note</h3>
    <dl class="message-properties">
      <dd> Average-bars node values can be cleared by sending the string "clear" in the msg.payload.
        <br>
        Node-red reboot: keep the node values by storing the context values ( see <code>contextStorage</code> attribute in settings.js )
      </dd>  
    </dl>

  <h3>Node properties :</h3>
    <dl class="message-properties">
      <dt>X-axis
        <dd>
  <li>last hour : 1 bar per minute</li> 
  <li>last day : 1 bar per hour</li>   
  <li>last week : 1 bar per day</li>   
  <li>last month : 1 bar per day </li>   
  <li>last year : 1 bar per month</li>   
  <li>msg.topic : 1 bar for each msg.topic</li>   
  </dd>
  </dt>
  <dt>Y-axis
   <dd>"auto" : is calculated according to the msg.payload received.</dd>
  </dt>  
  <dt>Bar style
  <dd>
  <li>rectangle : classical bar</li>
  <li>equalizer : equalizer bar style</li>
  </dd
  </dt>
  <dt>Bar colors
  <dd>choice the color gradient of the bars</dd>
  </dt>
  <dt>Display values
  <dd>check boxes to display or hide values :
  <li>bar values : value above the bar </li>
  <li>x-axis values : period values (or msg.topic if x-axis = msg.topic )</li>
  <li>last value : the last msg.payload received</li>
  <li>chart average : the average of all values received</li>
  <li>chart minimum : the minimum of all values received</li>
  <li>chart maximum : the maximum of all values received</li>
  </dd>
  </dt>
  <dt>Unit<dd>unit to display behind values</dd></dt>
  <dt>Decimals<dd>number of decimals to display</dd></dt>
  <dt>Font color<dd>color of the scale and the values</dd></dt>
  </dl>
</script>
</div><div><!-- --- [red-module:node-red-contrib-play-audio/play-audio] --- -->

<!--
  Copyright 2015 Lorentz Lasson
  Copyright 2015-2019 Lorentz Lasson, Dave Conway-Jones

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/javascript">
(function() {
    var voices;
    var sources = [];

    RED.nodes.registerType('play audio',{
        category: 'output',
        color: '#DAAFF7',
        defaults: {
            name: {value:""},
            voice: {value:""}
        },
        inputs:1,
        outputs:0,
        icon: "feed.png",
        align: "right",
        label: function() {
            return this.name||"play audio";
        },
        onpaletteadd: function() {

            this.handleAudio = function(t,o) {
                var context = new AudioContext();
                var byteArray = (o.hasOwnProperty("data")) ? o.data : o;

                ( function () {
                    return new Promise(function resolver(resolve, reject) {
                        if (context.state && 'running' !== context.state && context.resume) {
                            context.resume().then(() => {
                                resolve();
                            })
                        } else {
                          resolve();
                        }
                    });
                }()).then(() => {
                  try {
                      var source = context.createBufferSource();
                      var buffer = new Uint8Array(byteArray.length);
                      buffer.set(new Uint8Array(byteArray), 0);
                      source.addEventListener('ended', () => { context.close(); context = undefined; }, {capture:false, once:true});
                      context.decodeAudioData(buffer.buffer, function(buffer) {
                          source.buffer = buffer;
                          source.onended = function() {
                              $.getJSON('playaudio',function() { });
                              sources = sources.filter(function(s) {
                                  if (source === s) { return false; }
                                  else { return true; }
                              });
                          }
                          source.connect(context.destination);
                          source.start(0);
                          sources.push(source);
                      });
                  }
                  catch(e) {
                      alert("Error playing audio: "+e);
                  }
                }).catch((e)=> {
                    alert("Audio context error: "+e);
                });
            };

            this.handleTTS = function(t,o) {
                var v = o.split('#',2);
                if ('speechSynthesis' in window) {
                    voices = window.speechSynthesis.getVoices();
                    var words = new SpeechSynthesisUtterance(v[1]);
                    words.voice = voices[parseInt(v[0])];
                    window.speechSynthesis.speak(words);
                    words.onend = function(event) {
                        $.getJSON('playaudio',function() { });
                    }
                }
                else {
                    alert("Your Browser does not support Text-to-Speech");
                }
            };

            RED.comms.subscribe("playaudio", this.handleAudio);
            RED.comms.subscribe("playtts", this.handleTTS);
        },
        oneditprepare: function() {
            if ('speechSynthesis' in window) {
                voices = window.speechSynthesis.getVoices();
                for (i = 0; i < voices.length ; i++) {
                    //console.log(i,voices[i].name,voices[i].lang,voices[i].voiceURI,voices[i].default);
                    var option = document.createElement('option');
                    option.textContent = voices[i].name + ' (' + voices[i].lang + ')';
                    if (voices[i].default) { option.textContent += ' -- DEFAULT'; }
                    option.setAttribute('value', i);
                    document.getElementById("node-input-voice").appendChild(option);
                }
                $('#node-input-voice').val(this.voice || 0);
            }
            else {
                $('#voice-input-row').hide();
            }
        },
        button : {
            enabled : true,
            onclick : function() {
                sources = sources.filter(function(source) {
                    source.stop(0);
                    return false;
                });
            }
        }
    });
})();
</script>

<script type="text/html" data-template-name="play audio">
<div class="form-row" id="voice-input-row">
    <label for="node-input-voice"><i class="fa fa-language"></i> <span data-i18n="playAudio.label.ttsVoice"></label>
    <select id="node-input-voice"></select>
</div>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
</script>
<script type="text/x-red" data-help-name="play audio">
    <p>A node to play audio in the browser.</p>
    <p>To work the editor web page must be open.</p>
    <p>Expects <code>msg.payload</code> to contain a buffer of a <b>wav</b> file.</p>
    <p>If your browser has native support for Text-to-Speech then a <code>msg.payload</code>
    can also be a <b>string</b> to be read aloud.</p>
    <p>The button will stop the audio that is currently playing.</p>
</script>

</div><div><!-- --- [red-module:node-red-contrib-ui-timeline/ui_timeline] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="ui_timeline">
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> Label</label>
        <input type="text" id="node-input-label">
    </div>

    <div class="form-row">
        <span data-i18n="timeline.label.configuration"></span>:<br/>
        <label>&nbsp;</label>
        <span data-i18n="timeline.label.show-text"></span>: <input type="checkbox" id="node-input-show-text" style="display:inline-block; width:auto; vertical-align:top;">
        <br/>

        <label>&nbsp;</label>
        <span data-i18n="timeline.label.text-padding"></span> : <input type="number" id="node-input-text-padding" class="inject-time-count" value="1"></input>
        <br/>
        <label>&nbsp;</label>
        <span data-i18n="timeline.label.responsive"></span>: <input type="checkbox" id="node-input-responsive" style="display:inline-block; width:auto; vertical-align:top;">
    </div>

    <div class="form-row">
        <span data-i18n="timeline.label.y-axes"></span>:<br/>
        <label>&nbsp;</label>
        <span data-i18n="timeline.label.background-color-repeat"></span>: <input type="checkbox" id="node-input-background-color-repeat" style="display:inline-block; width:auto; vertical-align:top;">
        <br/>
        <label>&nbsp;</label>
        <span data-i18n="timeline.label.background-color"></span>
        <input type="color" id="node-input-color1" class="gauge-color" style="width:100px;"/>
        <input type="color" id="node-input-color2" class="gauge-color" style="width:100px;"/>

        <br/>
    </div>
    <div class="form-row">
        <span data-i18n="timeline.label.element-color"></span>:<br/>
        <label>&nbsp;</label>
        <span data-i18n="timeline.label.element-color-palette-1"></span>:
        <input type="radio" name="node-input-element-color" id="node-input-element-color-1" style="display:inline-block; width:auto; vertical-align:top;">
        <div style="display: block; margin-left: 200px;">
            <div style="display:flex">
                <div style="background: rgb(230, 57, 70);"><span>&nbsp;&nbsp;</span></div>
                <div  style="background: rgb(241, 250, 238);"><span>&nbsp;&nbsp;</span></div>
                <div  style="background: rgb(168, 218, 220);"><span>&nbsp;&nbsp;</span></div>
                <div style="background: rgb(69, 123, 157);"><span>&nbsp;&nbsp;</span></div>
                <div style="background: rgb(29, 53, 87);"><span>&nbsp;&nbsp;</span></div>
                <div  style="background: rgb(142, 202, 230);"><span>&nbsp;&nbsp;</span></div>

                <div style="background: rgb(26, 83, 92);"><span>&nbsp;&nbsp;</span></div>
                <div style="background: rgb(78, 205, 196);"><span>&nbsp;&nbsp;</span></div>
                <div style="background: rgb(247, 255, 247);"><span>&nbsp;&nbsp;</span></div>
                <div style="background: rgb(255, 107, 107);"><span>&nbsp;&nbsp;</span></div>
                <div style="background: rgb(255, 230, 109);"><span>&nbsp;&nbsp;</span></div>
                <div style="background: rgb(0, 109, 119);"><span>&nbsp;&nbsp;</span></div>
                <div style="background: rgb(131, 197, 190);"><span>&nbsp;&nbsp;</span></div>
                <div style="background: rgb(237, 246, 249);"><span>&nbsp;&nbsp;</span></div>
                <div style="background: rgb(255, 221, 210);"><span>&nbsp;&nbsp;</span></div>
                <div style="background: rgb(226, 149, 120);"><span>&nbsp;&nbsp;</span></div>

                <div style="background: rgb(33, 158, 188);"><span>&nbsp;&nbsp;</span></div>
                <div style="background: rgb(2, 48, 71);"><span>&nbsp;&nbsp;</span></div>
                <div  style="background: rgb(255, 183, 3);"><span>&nbsp;&nbsp;</span></div>
                <div style="background: rgb(251, 133, 0);"><span>&nbsp;&nbsp;</span></div></div>
            </div>
        <br/>
        <label>&nbsp;</label>
        <span data-i18n="timeline.label.element-color-palette-2"></span>:
        <input type="radio" name="node-input-element-color" id="node-input-element-color-2" style="display:inline-block; width:auto; vertical-align:top;">
        <div style="display: block; margin-left: 200px;">
            <div style="display:flex">
                <div style="background:rgb(255, 112, 67);"><span>&nbsp;&nbsp;</span></div>
                <div style="background:rgb(158, 157, 36);"><span>&nbsp;&nbsp;</span></div>
                <div style="background:rgb(92, 107, 192);"><span>&nbsp;&nbsp;</span></div>
                <div style="background:rgb(240, 98, 146);"><span>&nbsp;&nbsp;</span></div>
                <div style="background:rgb(255,0,255);"><span>&nbsp;&nbsp;</span></div>
                <div style="background:rgb(192,192,192);"><span>&nbsp;&nbsp;</span></div>
                <div style="background:rgb(128,128,128);"><span>&nbsp;&nbsp;</span></div>
                <div style="background:rgb(77, 77, 77);"><span>&nbsp;&nbsp;</span></div>
                <div style="background:rgb(66, 133, 244);"><span>&nbsp;&nbsp;</span></div>
                <div style="background:rgb(219, 68, 55)"><span>&nbsp;&nbsp;</span></div>
                <div style="background:rgb(244, 180, 0);"><span>&nbsp;&nbsp;</span></div>
                <div style="background:rgb(15, 157, 88);"><span>&nbsp;&nbsp;</span></div>
                <div style="background:rgb(171, 71, 188);"><span>&nbsp;&nbsp;</span></div>
                <div style="background:rgb(0, 172, 193);"><span>&nbsp;&nbsp;</span></div>
                <div style="background:rgb(128,0,0);"><span>&nbsp;&nbsp;</span></div>
                <div style="background:rgb(128,128,0);"><span>&nbsp;&nbsp;</span></div>
                <div style="background:rgb(0,128,0);"><span>&nbsp;&nbsp;</span></div>
                <div style="background:rgb(128,0,128);"><span>&nbsp;&nbsp;</span></div>
                <div style="background:rgb(0,128,128);"><span>&nbsp;&nbsp;</span></div>
                <div style="background:rgb(0,0,128);"><span>&nbsp;&nbsp;</span></div>
            </div>
        </div>
        <br/>
    </div>


    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
</script>
<!--rgb(69, 123, 157)",-->
<!--"rgb(29, 53, 87)-->
<script type="text/javascript">
    RED.nodes.registerType('ui_timeline', {
        category: 'dashboard',
        color: 'rgb(69, 123, 157)',
        defaults: {
            name: {value: ''},
            label: {value: ''},
            group: {type: 'ui_group', required: true},
            order: {value: 0},
            showText: {value: true},
            textPadding: {value: 4},
            responsive: {value: true},
            backgroundColorRepeat: {value: true},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            bgColor1: {value: 'rgb(192,192,192,0.2)'},
            bgColor2 :{value: 'rgba(255,255,255,0.2)'},
            colorCodes: colorCodes(2)
        },
        inputs:1,
        outputs:1,
        outputLabels: function() { if (this.payloadType === "str") {
            return this.payload;
        } else {return this.payloadType; } },
        icon: "ui_chart.png",
        paletteLabel: 'Timeline',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || 'Timeline'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            if (this.showText) {
                $("#node-input-show-text").prop('checked', true);
            } else {
                $("#node-input-show-text").prop('checked', false);
            }

            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            if( this.textPadding) {
                $("#node-input-text-padding").val( this.textPadding);
            } else {
                $("#node-input-text-padding").val(4);
            }
            if(this.responsive) {
                $("#node-input-responsive").prop('checked', true) ;
            } else {
                $("#node-input-responsive").prop('checked', false);
            }
            if(!this.backgroundColorRepeat){
                $("#ode-input-background-color-repeat").prop('checked', false);
            } else {
                $("#node-input-background-color-repeat").prop('checked', this.backgroundColorRepeat);
            }

            if( this.yAxesbgColor1) {
                $("#node-input-color1").val(this.yAxesbgColor1 );
            } else {
                $("#node-input-color1").val("#ffffff");
            }
            if(this.yAxesbgColor2) {
                $("#node-input-color2").val(this.yAxesbgColor2 );
            } else {
                $("#node-input-color2").val("#CDCBCD");
            }

            if(!this.palette1) {
                $("#node-input-element-color-1").prop('checked', false) ;
            } else {
                $("#node-input-element-color-1").prop('checked', true) ;
            }
            if(!this.palette2) {
                $("#node-input-element-color-2").prop('checked', false) ;
            } else {
                $("#node-input-element-color-2").prop('checked', true) ;
            }
            if(!this.palette1 && !this.palette2) {
                $("#node-input-element-color-1").prop('checked', true);
            }




        },
        oneditsave: function() {
            this.showText = $("#node-input-show-text").is(':checked') ;
            this.textPadding = $("#node-input-text-padding").val();
            this.backgroundColorRepeat = $("#node-input-background-color-repeat").is(':checked') ;
            this.responsive = $("#node-input-responsive").is(':checked') ;
            this.name = $("#node-input-name").val();
            this.label = $("#node-input-label").val();
            this.yAxesbgColor1 = $("#node-input-color1").val();
            this.yAxesbgColor2 = $("#node-input-color2").val();
            this.bgColor1 = hexToRgb(this.yAxesbgColor1 );
            this.bgColor2 = hexToRgb(this.yAxesbgColor2);
            this.palette1 = $("#node-input-element-color-1").is(':checked')
            this.palette2 = $("#node-input-element-color-2").is(':checked')
            if( this.palette1  ){
                this.colorCodes = colorCodes(1);
            } else {
                this.palette2 = true;
                this.colorCodes = colorCodes(2);
            }
            console.log("Dialog box save", this);
        }
    });

    /**
     * Convert in rgb with opacity option 0.2
     * @param hex
     * @returns {string}
     */

    function hexToRgb(hex) {
        var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);

        let rgpColor =  result ? {
            r: parseInt(result[1], 16),
            g: parseInt(result[2], 16),
            b: parseInt(result[3], 16)
        } : null;
        let rgpColorTab = [];
        if(rgpColor.r & rgpColor.g && rgpColor.b){
            rgpColorTab.push(rgpColor.r);
            rgpColorTab.push(rgpColor.g);
            rgpColorTab.push(rgpColor.b);
        }

        if(rgpColorTab.length > 0){
            return "rgb("+rgpColorTab.join(',')+", 0.2)";
        }
        console.log("cannot convert to rgb");
        return hex;

    }

    function colorCodes(palette = 1){


        if (palette === 2) {
            return [
                "rgb(255, 183, 3)",
                "rgb(2,48,71)",
                "rgb(230, 57, 70)",
                "rgb(255, 230, 109)",
                "rgb(0, 109, 119)",
                "rgb(131, 197, 190)",
                "rgb(255, 107, 107)",
                "rgb(33, 158, 188)",
                "rgb(78, 205, 196)",
                      "rgb(226, 149, 120)",
                "rgb(26, 83, 92)",
                "rgb(251, 133, 0)",

                "rgb(69, 123, 157)",
                "rgb(29, 53, 87)",
                "rgb(241, 250, 238)",
                "rgb(168, 218, 220)",
                "rgb(237, 246, 249)",
                "rgb(142, 202, 230)",
                "rgb(247, 255, 247)"];

        } else {
            return [
                "rgb(66, 133, 244)",
                "rgb(128,0,0)",
                "rgb(15, 157, 88)",
                "rgb(0,128,0)",
                "rgb(158, 157, 36)",
                "rgb(240, 98, 146)",
                "rgb(92, 107, 192)",
                "rgb(255,0,255)",
                "rgb(219, 68, 55)",
                "rgb(244, 180, 0)",
                "rgb(128,128,0)",
                "rgb(171, 71, 188)",
                "rgb(0, 172, 193)",
                "rgb(255, 112, 67)",
                  "rgb(192,192,192)",
                "rgb(128,0,128)",
                "rgb(0,128,128)",
                "rgb(128,128,128)",
                "rgb(0,0,128)",
                "rgb(77, 77, 77)"
            ];

        }


    }


</script>
<script type="text/html" data-help-name="ui_timeline">
    <p>A Node-RED-Dashboard UI widget node that displays timeline. Google-like timeline chart based on Chart.js.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">array</span></dt>
        <dd>An array of array which contains timeline data:</dd>
        <ul><li>label</li><li>start date timestamp</li><li>end date timestamp</li></ul>
        <h3>Example data</h3>
        <pre>
            <code lang="JSON">
 [
  [
    "Start Extruders",
    1619861576130,
    1619866976130
  ],
  [
    "Raise to starting speeds",
    1619866976130,
    1619868476130
  ],
  [
    "Raise to starting speeds",
    1619868476130,
    1619870276130
  ],

  [
    "Stop",
    1619900816130,
    1619902076130
  ]
]

            </code>
        </pre>
        <h3>Validation</h3>
        <p>Input data into message payload must be an array of array of 3 items <code>[[String, date timestamp, date timestamp], ....]</code>.</p>
        <p>Example of javascript validation with
            <code>
                const dataSchema =  Joi.array().items(stepSchema).required();
                const stepSchema = Joi.array().length(3).items(Joi.string().required(), Joi.date().timestamp().required(), Joi.date().timestamp().required());
            </code>
        </p>
        <p></p>
    </dl>

    <h3>Outputs (No output)</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">Null</span></dt>
        <dd>No output.</dd>

    </dl>

    <h3>Details</h3>
    <p>To clear the timeline send an empty data array <code>[]</code>.</p>
    <p></p>
    <h3>Advanced features</h3>
    <h4>Configuration</h4>
    <p>The configuration is used to change how the timeline behaves. There are properties to control styling, fonts, the legend, etc</p>
    <div style="display: block; margin-left: 200px;">
        <div style="display:flex">
            <div style="width:30%"><span>Display label: </span></div>
            <div  style="background: rgb(241, 250, 238);"><span>Display label of each element</span></div>
        </div>

    </div>
    <div style="display: block; margin-left: 200px;">
        <div style="display:flex">
            <div style="width:30%"><span> Enable responsive: </span></div>
            <div  style="background: rgb(241, 250, 238);"><span>Enable responsive design: Resizes the chart canvas when its container does.</span></div>
        </div>
    </div>

    </div>
    <div style="display: block; margin-left: 200px;">
        <div style="display:flex">
            <div style="width:30%"><span>Text padding: </span></div>
            <div style="background: rgb(241, 250, 238);"><span>Label padding space</span>
            </div>
        </div>
    </div>
    </div>
    <div style="display: block; margin-left: 200px;">
        <div style="display:flex">
            <div style="width:30%"><span> Enable responsive: </span></div>
            <div style="background: rgb(241, 250, 238);"><span>Enable responsive design: Resizes the chart canvas when its container does.</span>
            </div>
        </div>
    </div>
    <h5>Y-axis configuration</h5>
    <div style="display: block; margin-left: 200px;">
        <div style="display:flex">
            <div style="width:30%"><span>Background colors: </span></div>
            <div style="background: rgb(241, 250, 238);"><span>Choose two colors for y-axis grid background color</span>
            </div>
        </div>
    </div>
    <div style="display: block; margin-left: 200px;">
        <div style="display:flex">
            <div style="width:30%"><span>Repeat two colors: </span></div>
            <div style="background: rgb(241, 250, 238);"><span>Repeat two background colors on y-axis grid.</span>
            </div>
        </div>
    </div>
    </div>

    </div>
    <h5>Elements or steps background color configuration</h5>

    </div>
    <div style="display: block; margin-left: 200px;">
        <div style="display:flex">
            <div style="width:30%"><span> Palette 1: </span></div>
            <div style="background: rgb(241, 250, 238);"><span>Choose palette 1 colors</span>
            </div>
        </div>
    </div>
    </div>
    <div style="display: block; margin-left: 200px;">
        <div style="display:flex">
            <div style="width:30%"><span> Palette 2: </span></div>
            <div style="background: rgb(241, 250, 238);"><span>Choose palette 2 colors</span>
            </div>
        </div>
    </div>

</script>

</div><div><!-- --- [red-module:node-red-contrib-ui-timelines-chart/ui_timelines_chart] --- -->

<!--
    MIT License

    Copyright (c) 2021 sanlike

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to deal
    in the Software without restriction, including without limitation the rights
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all
    copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
    SOFTWARE.
-->

<script type="text/javascript">
    function mk_conf(NAME) {
        const conf = {
            category: 'dashboard',
            color: 'rgb( 63, 173, 181)',
            defaults: {
                // belonging dashboard group
                group: {type: 'ui_group', required:true},
                name: {value: ''},
                order: {value: 0},
                label: {value: NAME},
                // width and height of widget
                width: {
                    value: 0,
                    validate: function(v) {
                        let valid = true
                        let width = v||0;
                        let currentGroup = $('#node-input-group').val()|| this.group;
                        let groupNode = RED.nodes.node(currentGroup);
                        valid = !groupNode || +width <= +groupNode.width;
                        $("#node-input-size").toggleClass("input-error",!valid);
                        return valid;
                    }},
                height: {value: 0},
                lineColors: {value:[{}]},
                xTickFormat: {value: ''},
                startDateTime: {value: ''},
                endDateTime: {value: ''},
                maxLineHeight: {value: 60},
                topMargin: {value: 60},
                xAxisLabelsFontSize: {value: 16},
                xAxisLabelslColor: {value: 'lightslategray'},
                yAxisLabelsFontSize: {value: 16},
                yAxisLabelslColor: {value: 'lightslategray'},
                timeFormat: {value: ''},
                segmentTooltipContent: {value: ''},
                resetZoomLabelFontSize: {value: 24},
                resetZoomLabelColor: {value: 'blue'},
                enableAnimations: {value: false},
                enableDateMarker: {value: false},
                forwardInputMessages: {value: false},
            },
            inputs:1,
            outputs:1,
            align: "left",
            icon: "icon.png",
            paletteLabel: NAME,
            label: function() {
                return this.name || this._("resources.paletteLabel");
            },
            labelStyle: function () {
                return this.name?"node_label_italic":"";
            },
            paletteLabel: function() {
                return this._("resources.paletteLabel") || NAME;
            },
            oneditprepare: function() {
                const node = this;
                // use elementSizer to input common widget parameters
                $("#node-input-size").elementSizer({
                    width: "#node-input-width",
                    height: "#node-input-height",
                    group: "#node-input-group"
                });

                // Define editableList.
                $("#node-input-editable-list-container").css('min-height','150px').css('min-width','350px').editableList({

                    sortable: true,
                    removable: true,
                    height: 300,

                    addItem: function(container,index,opt) {

                        const lblStatusColor = node._("resources.nodeProperties.labels.graphColorSettings.statusColor");
                        const lblStatusValue = node._("resources.nodeProperties.labels.graphColorSettings.statusValue");

                        // html editableList
                        const htmlEditableList =`
                            <span style="display:inline-block;text-align:right; width:30px; padding-right:5px;">${index+1} :</span>
                            <span style="">${lblStatusColor}:</span>
                            <input type="color" class="statusColor" style="width:100px; display:inline-block; text-align:left; margin-right:15px;">
                            <span style="">${lblStatusValue}:</span>
                            <input type="text" class="statusValue" style="width:100px; display:inline-block; text-align:left; margin-right:15px;">
                            `;

                        const div = $('<div></div>').appendTo(container);
                        $(htmlEditableList).appendTo(div);

                        if(!opt.hasOwnProperty("statusColor")) {
                            opt = {
                                statusColor: "",
                                statusValue: ""
                            }
                        };

                        div.find(".statusColor").val(opt.statusColor);
                        div.find(".statusValue").val(opt.statusValue);
                    },
                    sortItems: function(items) {
                        items.each(function(i, elm){
                            elm.find(".index").text((i + 1));
                        });
                    },
                    removeItem: function(removeItems){
                        let items = $('#node-input-editable-list-container').editableList("items");
                        items.each(function(i, elm){
                            elm.find(".index").text((i + 1));
                        });
                    },
                });

                for (let i = 0 ; i < node.lineColors.length ; i++) {
                    const _graphColor = node.lineColors[i];
                    $("#node-input-editable-list-container").editableList('addItem',_graphColor);
                }

            },
            oneditsave: function() {
                console.log("oneditsave");
                const node = this;
                const items = $("#node-input-editable-list-container").editableList('items');
                node.lineColors = [];
                items.each(function(i, e){
                    node.lineColors.push({
                        statusColor: e.find(".statusColor").val(),
                        statusValue: e.find(".statusValue").val()
                    });
                });
            },
            oneditresize: function(size) {
                console.log(`oneditresize size:${size}`);
                const node = this;
            }
        };
        return conf;
    }
    RED.nodes.registerType('ui_timelines_chart', mk_conf('timelines_chart'));
</script>

<script type="text/html" data-template-name="ui_timelines_chart">
    <!-- ノード名 -->
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag" aria-hidden="true" ></i> <span data-i18n="resources.nodeProperties.labels.name.title"></span></label>
        <input type="text" id="node-input-name">
    </div>
    <!---------------------------------------------------------------------------->
    <hr>
    <!---------------------------------------------------------------------------->
    <div id="list-property">
        <!-- グループ -->
        <div class="form-row" id="template-row-group">
            <label for="node-input-group"><i class="fa fa-table" aria-hidden="true" ></i> <span data-i18n="resources.nodeProperties.labels.group.title"></span></label>
            <input type="text" id="node-input-group">
        </div>
        <!-- 表示サイズ -->
        <div class="form-row" id="template-row-size">
            <label><i class="fa fa-object-group" aria-hidden="true" ></i> <span data-i18n="resources.nodeProperties.labels.size.title"></span></label>
            <input type="hidden" id="node-input-width">
            <input type="hidden" id="node-input-height">
            <button class="editor-button" id="node-input-size"></button>
        </div>
        <!-- ラベル -->
        <div class="form-row">
            <label for="node-input-label"><i class="fa fa-i-cursor" aria-hidden="true" ></i> <span data-i18n="resources.nodeProperties.labels.label.title"></span></label>
            <input type="text" id="node-input-label">
        </div>
    </div>
    <!---------------------------------------------------------------------------->
    <hr>
    <!---------------------------------------------------------------------------->
    <!-- グラフ表示設定 -->
	<div id="list-property">
        <!-- X軸:title -->
        <div style="margin-bottom: 12px;">
            <label><span data-i18n="resources.nodeProperties.labels.graphSettings.xAxis.title"></span></label>
        </div>
        <!-- X軸:日時フォーマットの設定 -->
        <div class="form-row">
            <label for="node-input-xTickFormat"><i class="fa fa-clock-o" aria-hidden="true" ></i> <span data-i18n="resources.nodeProperties.labels.graphSettings.xAxis.tickFormat.title"></span></label>
            <input type="text" id="node-input-xTickFormat" placeholder="YYYY-MM-DD HH:mm:ss(default:YYYY-MM-DD HH:mm:ss)">
        </div>
        <!-- X軸:開始日時の設定 -->
        <div class="form-row">
            <label for="node-input-startDateTime"><i class="fa fa-calendar" aria-hidden="true" ></i> <span data-i18n="resources.nodeProperties.labels.graphSettings.xAxis.startDateTime.title"></span></label>
            <input type="datetime-local" id="node-input-startDateTime" placeholder="(default:The oldest date and time of graph data)">
        </div>
        <!-- X軸:終了日時の設定 -->
        <div class="form-row">
            <label for="node-input-endDateTime"><i class="fa fa-calendar" aria-hidden="true" ></i> <span data-i18n="resources.nodeProperties.labels.graphSettings.xAxis.endDateTime.title"></span></label>
            <input type="datetime-local" id="node-input-endDateTime"  placeholder="(default:Latest date and time of graph data)">
        </div>
        <!-- X軸:フォントサイズ＆フォントカラー -->
        <div class="form-row">
            <label for="node-input-xAxisLabels"><i class="fa fa-font" aria-hidden="true" ></i> <span data-i18n="resources.nodeProperties.labels.graphSettings.xAxis.labels.title"></span></label>
            <input type="number" id="node-input-xAxisLabelsFontSize" min="0" max="64" style="width:60%" placeholder="from 0 to 64(default:16)">
            <input type="color" id="node-input-xAxisLabelslColor" style="width:10%;" placeholder="(default:black)">
        </div>
        <!---------------------------------------------------------------------------->
        <hr>
        <!---------------------------------------------------------------------------->
        <!-- Y軸:title -->
        <div style="margin-bottom: 12px;">
            <label><span data-i18n="resources.nodeProperties.labels.graphSettings.yAxis.title"></span></label>
        </div>
        <!-- Y軸:フォントサイズ＆フォントカラー -->
        <div class="form-row">
            <label for="node-input-yAxisLabels"><i class="fa fa-font" aria-hidden="true" ></i> <span data-i18n="resources.nodeProperties.labels.graphSettings.yAxis.labels.title"></span></label>
            <input type="number" id="node-input-yAxisLabelsFontSize" min="0" max="64" style="width:60%" placeholder="from 0 to 64(default:16)">
            <input type="color" id="node-input-yAxisLabelslColor" style="width:10%;" placeholder="(default:black)">
        </div>
        <!---------------------------------------------------------------------------->
        <hr>
        <!---------------------------------------------------------------------------->
        <!-- tooltips:title -->
        <div style="margin-bottom: 12px;">
            <label><span data-i18n="resources.nodeProperties.labels.graphSettings.tooltips.title"></span></label>
        </div>
        <!-- tooltips: time format -->
        <div class="form-row">
            <label for="node-input-timeFormat"><i class="fa fa-clock-o" aria-hidden="true" ></i> <span data-i18n="resources.nodeProperties.labels.graphSettings.tooltips.timeFormat.title"></span></label>
            <input type="text" id="node-input-timeFormat" placeholder="d3-time-format(default:%Y-%m-%d %H:%M:%S)">
        </div>
        <!---------------------------------------------------------------------------->
        <hr>
        <!---------------------------------------------------------------------------->
        <!-- chart:title -->
        <div style="margin-bottom: 12px;">
            <label><span data-i18n="resources.nodeProperties.labels.graphSettings.chart.title"></span></label>
        </div>
        <!-- chart:グラフ高さの設定 -->
        <div class="form-row">
            <label for="node-input-maxLineHeight"><i class="fa fa-bar-chart" aria-hidden="true" ></i> <span data-i18n="resources.nodeProperties.labels.graphSettings.chart.maxLineHeight.title"></span></label>
            <input type="number" id="node-input-maxLineHeight" min="1" max="255" placeholder="from 1 to 255(default:60)">
        </div>
        <!-- chart:topMargin -->
        <div class="form-row">
            <label for="node-input-topMargin"><i class="fa fa-bar-chart" aria-hidden="true" ></i> <span data-i18n="resources.nodeProperties.labels.graphSettings.chart.topMargin.title"></span></label>
            <input type="number" id="node-input-topMargin" min="0" max="255" placeholder="from 0 to 255(default:60)">
        </div>
        <!-- chart:zoomReset fontSize/fontColor -->
        <div class="form-row">
            <label for="node-input-resetZoomLabel"><i class="fa fa-font" aria-hidden="true" ></i> <span data-i18n="resources.nodeProperties.labels.graphSettings.chart.resetZoom.label.title"></span></label>
            <input type="number" id="node-input-resetZoomLabelFontSize" min="0" max="64" style="width:60%" placeholder="from 0 to 64(default:24)">
            <input type="color" id="node-input-resetZoomLabelColor" style="width:10%;" placeholder="(default:blue)">
        </div>
        <!---------------------------------------------------------------------------->
        <hr>
        <!---------------------------------------------------------------------------->
        <!-- option:title -->
        <div style="margin-bottom: 12px;">
            <label for="node-input-options" style="width: 150px;"><i class="fa fa-cogs" ></i> <span data-i18n="resources.nodeProperties.labels.graphSettings.options.title"></span></label>
        </div>
        <!-- option:グラフアニメーションの設定 -->
        <div class="form-row">
            <input type="checkbox" id="node-input-enableAnimations" style="display: inline-block; width: auto; vertical-align: top;" checked>
            <span style="margin-left:15px;" data-i18n="resources.nodeProperties.labels.graphSettings.options.enableAnimations.title"></span>
        </div>
        <!-- option:現在時刻マーカー線の設定 -->
        <div class="form-row">
            <input type="checkbox" id="node-input-enableDateMarker" style="display: inline-block; width: auto; vertical-align: top;" checked>
            <span style="margin-left:15px;" data-i18n="resources.nodeProperties.labels.graphSettings.options.enableDateMarker.title"></span>
        </div>
        <!-- option:INPUTメッセージ転送の設定 -->
        <div class="form-row">
            <input type="checkbox" id="node-input-forwardInputMessages" style="display: inline-block; width: auto; vertical-align: top;" checked>
            <span style="margin-left:15px;" data-i18n="resources.nodeProperties.labels.graphSettings.options.forwardInputMessages.title"></span>
        </div>
        <!---------------------------------------------------------------------------->
        <hr>
        <!---------------------------------------------------------------------------->
        <!-- グラフ表示色の設定 -->
        <div class="form-row">
            <label for="node-input-graph-colors" style="width: 150px;"><i class="fa fa-bar-chart" aria-hidden="true" ></i> <span data-i18n="resources.nodeProperties.labels.graphColorSettings.title"></span></label>
        </div>
        <div class="form-row node-input-editable-list-container-row">
            <ol id="node-input-editable-list-container"></ol>
        </div>
    </div>
</script>

<script type="text/x-red" data-help-name="ui_timelines_chart" data-lang="en-US">

</script>
</div><div><!-- --- [red-module:node-red-contrib-uibuilder/uibuilder] --- -->
<link type="text/css" rel="stylesheet" href="./Node-RED _ maindashboard_files/ti-common.css" media="all"><script src="./Node-RED _ maindashboard_files/ti-common.js"></script><script src="./Node-RED _ maindashboard_files/uibuilder.js"></script><script type="text/html" class="ti-edit-panel" data-template-name="uibuilder"><div><div class="form-row tabs-row"><ul id="tabs"></ul></div><div id="tabs-content" x-style="border-bottom: 1px solid silver; padding-bottom: 1em; margin-bottom: 1em;"><div id="tab-core" class="ti-edit-panel"><div id="url-input" aria-label="Home 'page' id. Defines the URL used" class="form-row" title="Make sure this gives a unique URL. Also used as a folder name for resources."><label for="node-input-url"><i class="fa fa-globe"></i> URL</label> <input type="text" id="node-input-url" title="Cannot be 'templates. Cannot contain: space _ / \\ ..'" placeholder="Required. <20 chars. Unique"></div><div id="info" aria-label="Information and utility links" class="form-row" style="display: flex; justify-content: space-between; width:450px"><a id="uibuilderurl" title="Open the UIBUILDER web page" href="uibindex" target="_blank" class="red-ui-button editor-button"><i class="fa fa-globe" aria-hidden="true"></i> Open </a><a href="./uibuilder/uibindex" target="_blank" class="red-ui-button editor-button" title="Shows available libraries, configuration and other detailed UIBUILDER information"><i class="fa fa-info-circle" aria-hidden="true"></i> Full details </a><a id="uibinstanceconf" href="./uibuilder/instance/_url_?cmd=showinstancesettings" target="_blank" class="red-ui-button editor-button" title="Shows detailed configuration for this instance of UIBUILDER"><i class="fa fa-info" aria-hidden="true"></i> Node details </a><a href="./uibuilder/docs" target="_blank" class="red-ui-button editor-button" title="Shows the UIBUILDER documentation as a new page"><i class="fa fa-book" aria-hidden="true"></i> Docs</a></div><div id="info-webserver" class="form-row" style="width:450px"></div><div aria-label="Node Name" class="form-row" title="Node Name (descriptive only)"><label for="node-input-name"><i class="fa fa-tag"></i> Name</label> <input type="text" id="node-input-name"></div><div aria-label="Topic" class="form-row" title="Adds a msg.topic to input msgs if not already provided"><label for="node-input-topic"><i class="fa fa-tasks"></i> Topic</label> <input type="text" id="node-input-topic"></div><h4>Template Settings</h4><div aria-label="Template selector" class="form-row"><label for="node-input-templateFolder" style="width:100px;"><i class="fa fa-window-restore"></i> Template</label> <select id="node-input-templateFolder" style="width:70%;"></select></div><div aria-label="Hidden unless external template is selected above" id="et-input" class="form-row" title="Input a Degit compatible repository name. e.g. totallyinformation&sol;uib-template-test" style="display:none"><label for="node-input-extTemplate"><i class="fa fa-globe"></i> External</label> <input type="text" id="node-input-extTemplate" placeholder="totallyinformation/uib-template-test"></div><div aria-label="Button to load new template" class="form-row"><label for="btn-load-template" style="width:100px;"></label> <button class="btn" id="btn-load-template" style="margin-top: 0.3em;" title="Load selected template, overwriting existing files">Load &amp; Overwrite Files</button></div><div aria-label="How to use the template selector" class="form-row" style="max-width: 450px"><p>By default, <span class="uib-name"><span class="uib-red">UI</span>BUILDER</span> creates an instance root folder with the "Blank" template. If you wish to use a different template, select and load it here.</p><p>Selecting a Template from the drop-down <b>does not</b> load the template</p><p>Loading a Template <b><u>will</u> overwrite</b> existing same-named files.</p></div></div><div id="tab-files"><div aria-label="Drop-down for selecting folder & new, del buttons" class="form-row" title="Choose between the src, dist (built src) or root folders"><label for="node-input-folder" style="width:5em;"><i class="fa fa-folder-open-o"></i> Folder:</label> <select id="node-input-folder" style="width:63%;"></select> <span id="fldr-buttons"><button class="btn" id="btn-fldr-new" title="Add a new folder">New</button><div id="fldr-new-dialog" title="Create a new folder" dialog><label for="fldr-input-newname">New Folder Name</label> <input type="text" id="fldr-input-newname"><div title="" style="margin-top:.5em;">New folder will be created inside <code>&lt;uibRoot&gt;/<span id="fldr_url">&lt;url&gt;</span></code>.<br>Do not forget to include sub-folder name if needed.<br>e.g. <code>src/mynewfldr</code></div></div><button class="btn" id="btn-fldr-del" title="Delete the selected folder">Del</button><div id="fldr-del-dialog" title="Delete the currently selected folder" dialog><b>Folder to be deleted</b><p><code id="fldr-del-name"></code></p><p id="fldr-del-recopy"></p><p style="border:2px solid brown;color:brown;font-weight:bold;padding:5px 5px;">Warning: This action cannot be undone.<br>If you delete the <code>src</code> or <code>dist</code> folders some things might not work correctly.</p></div></span></div><div aria-label="Drop-down for selecting file to edit" class="form-row ti-edit-panel"><label for="node-input-filename" style="width:5em;"><i class="fa fa-file-code-o"></i> File:</label> <select id="node-input-filename" style="width: 83%;"></select></div><div aria-label="Save, Reset, close, (message), Delete" class="form-row ti-edit-panel"><button class="btn" id="edit-save" title="Save any changes to the file">Save</button> <button class="btn" id="edit-reset" title="Reset any changes to last saved version (cancel changes)">Reset</button> <span id="file-action-message"></span><div style="position: absolute;right:1.6em;display:inline-block;"><button class="btn" id="edit-new" title="Add a new file.">New</button><div dialog id="edit_new_dialog" title="Create a new file"><label for="edit-input-newname">New File Name</label> <input type="text" id="edit-input-newname"><div style="margin-top:.5em;">New file will be created inside the <code>&lt;uibRoot&gt;/<span id="file_url">&lt;url&gt;</span>/<span id="file_fldr">&lt;folder&gt;</span></code> folder.<br>You can include a sub-folder name if needed. Intermediate folders will be automatically created.<br>e.g. <code>src/mynewfldr/myfile.js</code></div></div><button class="btn" id="edit-delete" title="Delete the file. Will reset to the default template if Copy from templates flag is set.">Delete</button><div id="edit_delete_dialog" title="Delete the currently selected file" dialog><b>File to be deleted</b><p><code id="edit-delete-name"></code></p><p id="edit-delete-recopy"></p><p style="border:2px solid brown;color:brown;font-weight:bold;padding:5px 5px;">Warning: This action cannot be undone.</p></div></div></div><div aria-label="Edit box editor-tray-content" id="edit-outer" class="form-row node-text-editor-row" style="position:relative"><div style="height: 350px; min-height:150px;" class="node-text-editor" id="node-input-template-editor"></div><div style="height: 350px; min-height:150px;display:hidden" id="node-input-template-editor-no-file">No file available, please select a different file or folder.</div></div><div aria-label="File data (hidden), language selector" class="form-row ti-edit-panel"><button id="node-function-expand-js" class="editor-button"><i class="fa fa-expand"></i></button> <input type="checkbox" id="node-input-reload" style="width:auto;" title="If set, all connected clients will reload the page they are on when any change is saved."> <label for="node-input-reload" style="width:80%;">Reload connected clients on save?.</label> <input type="hidden" id="node-input-template" data-isclean="true"><div style="position: absolute; right:1.6em;display:inline-block; text-align: right;"><select id="node-input-format" style="width:110px; padding:0;"><option value="text">Text</option><option value="html">HTML</option><option value="javascript">Javascript</option><option value="json">JSON</option><option value="css">CSS</option><option value="scss">SCSS</option><option value="handlebars">mustache</option><option value="markdown">Markdown</option><option value="yaml">YAML</option></select></div></div></div><div id="tab-libraries" class="ti-edit-panel"><p>Install, remove or update npm packages that provide front-end libraries such as VueJS, jQuery, MoonJS, etc.<br>Search for packages on <a href="https://www.npmjs.com/" target="_blank" style="color:var(--red-ui-text-color-link);text-decoration:underline;">official npm site</a> or <a href="https://npms.io/" target="_blank" style="color:var(--red-ui-text-color-link);text-decoration:underline;">npms.io</a>.</p><div aria-label="Package List Container" class="form-row" id="package-list-container"><ol id="node-input-packageList"></ol></div></div><div id="tab-advanced" class="ti-edit-panel"><div aria-label="Information" class="form-row form-tips node-help"><span class="uib-name"><span class="uib-red">UI</span>BUILDER</span> version: <b id="uib_version">--</b></div><div aria-label="Select source folder" class="form-row" title="Select the folder to serve files from"><label for="node-input-sourceFolder"><i class="fa fa-folder"></i> Serve:</label> <input type="text" id="node-input-sourceFolder" style="width:75%;"></div><div aria-label="Source folder information" class="form-row form-tips node-help">Selects the folder that will be served as the root folder of your web app.<br>The folder <b>must</b> contain an <code>index.html</code> file as a minimum.<br>If it doesn't, you will get an error.<br>Need to re-deploy for the folder to change.</div><div aria-label="Pass the msg._uib to standard message output?" class="form-row" title="If turned on, msg._uib included in standard msgs"><input type="checkbox" id="node-input-showMsgUib" style="display: inline-block; width: auto; vertical-align: top;"> <label for="node-input-showMsgUib" style="width: 90%;">Include <code>msg._uib</code> in standard msg output.</label></div><div aria-label="msg._uib information" class="form-row form-tips node-help">This includes the <code>clientId</code>, <code>remoteAddress</code> and <code>pageName</code> properties from the client in the output<br>The <code>clientId</code> is generated in the browser and remains stable while the browser is open. It is reset when the browser restarts. Control msgs always include <code>msg.clientId</code>.</div><div aria-label="Description text for this instance" class="form-row"><label for="node-input-title" style="display:block;width:100%;">Short description for this UIBUILDER instance:</label> <input id="node-input-title" type="text" style="width:100%;"></div><div aria-label="More description text for this instance" class="form-row"><label for="node-input-title" style="display:block;width:100%;">Long description for this UIBUILDER instance:</label> <textarea id="node-input-descr" style="width:100%;"></textarea></div><div aria-label="Provide a searchable file index view?" class="form-row" title="If turned on, an index page showing all available files is created. This can be a security vulnerability and not recommended in Production."><input type="checkbox" id="node-input-showfolder" style="display: inline-block; width: auto; vertical-align: top;"> <label for="node-input-showfolder" style="width: 90%;">Show web view of source files (deploy before you can use it)</label> <span id="show-src-folder-idx-url">_</span>.</div><div aria-label="Forward flag" class="form-row" title="forward inbound msg's direct to the output"><input type="checkbox" id="node-input-fwdInMessages" style="display: inline-block; width: auto; vertical-align: top;"> <label for="node-input-fwdInMessages" style="width: 90%;">Forward input msgs to output?</label></div></div></div></div></script><script type="text/html" data-help-name="uibuilder"><p>Provides a stand-alone web server that allows for interfacing with Node-RED, while giving you help and complete freedom to create custom web interfaces.<br><br>You need at least one of these in order to make full use of all of <span class="uib-name"><span class="uib-red">UI</span>BUILDER</span>'s features.</p><p>It is this node that creates a custom web server. You can have many nodes if that best meets your needs. But each node can serve many pages.</p><p>It also creates a set of filing system folders and files on the Node-RED server. These define the front-end UI you see in the browser as well as providing some important configuration.</p><p>This node is also where you configure much of UIBUILDER's web server such as installing helper libraries that you may wish to use to support your interfaces (e.g. VueJS, jQuery, etc). You can also use it to edit your custom UI code.</p><p id="uib_help_docs">Detailed documentation can be found <a href="./uibuilder/docs" target="_blank">HERE</a>.</p><p>More information on how to configure this node: <a href="./uibuilder/docs/#/nodes/uibuilder" target="_blank">UIBUILDER node configuration</a>.</p><p>Specific information on how to use the front-end library: <a href="./uibuilder/docs/#/uibuilder.module" target="_blank">Client Library</a>.</p><h3>Status display</h3><p>Each instance (node) of UIBUILDER has a status display. Normally, the icon is blue. When 1 or more clients are connected, the text will show how many clients are connected.</p><h3>Inputs</h3><dl class="message-properties"><dt class="optional">payload <span class="property-type">string | buffer</span></dt><dd>Optionally, the payload of the message to send to all connected client browser tabs.</dd><dt class="optional">_uib <span class="property-type">object</span></dt><dd>Optionally, trigger low-code front-end events such as <a href="./uibuilder/docs/#/pre-defined-msgs?id=ui-notification-toast-control-message-partially-deprecated-in-v51" target="_blank">showing a notification message</a>. Also used to <a href="uibuilder/docs/#/pre-defined-msgs?id=browser-client-reload-page" target="_blank">signal to the front-end that the page should reload automatically</a>. Useful when developing front-end code via the node's editor.</dd><dt class="optional">topic <span class="property-type">string</span></dt><dd>Optionally, the MQTT topic to use. Takes preference over the topic defined in settings.</dd><dt class="optional">script <span class="property-type">string | string[]</span></dt><dd>Optionally, a string or array of strings containing valid JavaScript. This will be added to the web page dynamically. Currently contains minimal validation so care is required. This feature is <b>off</b> by default, turn on in the Advanced Settings.</dd><dt class="optional">style <span class="property-type">string | string[]</span></dt><dd>Optionally, a string or array of strings containing valid CSS for styling the front-end page. This will be added to the web page dynamically. Currently contains minimal validation so care is required. This feature is <b>off</b> by default, turn on in the Advanced Settings.</dd></dl><h3>Outputs</h3><ol class="node-ports"><li>Standard output (data from front-end)<dl class="message-properties"><dt class="optional">payload <span class="property-type">string | buffer</span></dt><dd>Typical data sent by the client.</dd><dt class="optional">uibDomEvent <span class="property-type">object</span></dt><dd>Used by the <code>uibuilder.eventSend()</code> front-end function. See the <a href="./uibuilder/docs/#/client-docs/features?id=eventsend-function" target="_blank">eventSend feature in the documentation</a> for specifics.</dd><dt>topic <span class="property-type">string</span></dt><dd>A copy of the last inbound topic if present. Otherwise, the topic from the node's settings. Could also be changed by the front-end.</dd><dt class="optional">_uib <span class="property-type">string</span></dt><dd>Included only if turned on in advanced settings. Provides detailed information about the sending client. Useful for custom security processing.<br><br>See the control output below for more specifics.</dd><dt>other</dt><dd>The client may send other data on the <code>msg</code> object.</dd></dl><p>Note that input messages are not forwarded to the output unless the flag is set in the advanced settings.</p></li><li>Control output (controls from front-end or server)<dl class="message-properties"><dt>uibuilderCtrl <span class="property-type">string</span></dt><dd>The name/id of the control message. See the <a href="./uibuilder/docs/#/pre-defined-msg" target="_blank">documentation</a> for details.</dd><dt>cacheControl <span class="property-type">string</span></dt><dd>Use in your flow to control the sending or clearing of a cache of messages to be sent to new/refreshed clients.<br>This requires a separate function node to capture and replay inbound messages.<table><tr><th>REPLAY</th><td>Indicate to the back-end flow that a copy of the cached messages should be dumped to the front-end. Retaining the <code>_socket.id</code> will send the cache contents back to the requesting client.<hr></td></tr><tr><th>CLEAR</th><td>Indicate to the back-end flow that any cache should be completely cleared for everyone.</td></tr></table>See the <a href="./uibuilder/docs/#/pre-defined-msg" target="_blank">documentation</a> for details.</dd><dt>from <span class="property-type">string</span></dt><dd>Identifies the source of the msg since both <i>server</i> (back-end) and <i>client</i> (front-end) control messages will appear out of port #2.</dd><dt>Other <span class="property-type">string</span></dt><dd>Additional details about the client the message relates to is included. This varies somewhat between the different control message types. See <a href="./uibuilder/docs/#/pre-defined-msg" target="_blank">the documentation</a> for more details.</dd></dl></li></ol><h3>Node Settings</h3><dl class="message-properties"><dt>Name <span class="property-type">string</span></dt><dd>A short description shown in the admin interface</dd><dt>Topic <span class="property-type">string</span></dt><dd>A topic name to use if the incoming msg does not contain one.</dd><dt>URL <span class="property-type">string</span></dt><dd>There is no default and this entry is required.<br>The URL path that the resulting page and other resources will be served from. Must be unique across Node-RED. Will also use the Node-RED scheme (http/https) and port or the custom UIBUILDER scheme and port if specified in settings.js. Will also be prefixed by the Node-RED setting <i>httpNodeRoot</i>.<br>The url is also used to define the server filing system path for front-end code files.<br>The url must be valid as a filename as well as a url path. It may not exceed 20 characters.</dd><h4>Files tab</h4><p>Clicking this tab will display a file editor allowing you to edit the front-end files that define your user interface.<br>All text-based files in the <code>&lt;uibRoot>/&lt;url>/</code> folder on the server's filing system will be available to edit.</p><p>Note that you can expand the edit panel by clicking on the <kbd class="help-key">&#x2921;</kbd> arrow button underneath the panel. To exit fullscreen, press the same button (now highlighted) or the <kbd class="help-key">Esc</kbd> key.</p><p></p></dl><h4>Template Settings</h4><dl class="message-properties"><dt>Template <span class="property-type">drop-down</span></dt><dd>Select one of the built-in templates or load an external template.</dd><dt>Ext. Template <span class="property-type">text</span></dt><dd>Only if "Load an external template using Degit" is selected. <a href="https://github.com/Rich-Harris/degit" target="_blank">Degit</a> is used to load a template from an external <code>git</code> repository.<br>Try "totallyinformation/uib-template-test" as an example.</dd><dt>Load & Overwrite <span class="property-type">button</span></dt><dd>Clicking the button will display a warning dialog. If you accept the warning, all of your current front-end code will be replaced with the template.</dd></dl><h4>Libraries tab</h4><p>Clicking this tab will display a list of currently available front-end library packages. This interface allows you to add, remove and update any library that can be installed via <a href="https://www.npmjs.com/" target="_blank">npm</a>.<br>Libraries will be loaded into your <code>&lt;userDir>/</code> folder in the same place as custom nodes. UIBUILDER retains an internal list of front-end libraries loaded this way. Each library will be served so that you can use it in your front-end html.</p><h4>Advanced tab</h4><dl class="message-properties"><dt>Serve <span class="property-type">drop-down</span></dt><dd>Choose which folder to serve files from. Only <code>src</code> and <code>dist</code> are available at the moment. This can now be changed simply by redeploying your flow, you don't need to restart Node-RED.</dd><dt>Include <code>msg._uib</code> in standard msg output <span class="property-type">check box</span></dt><dd>If selected, will show the browser clientId, page name and real IP address in standard output (it is always shown in control msgs).</dd><dt>Show web view of source files <span class="property-type">check box</span></dt><dd>If on, an extra web page is dynamically created at the indicated URL. That page shows an index listing of all files and folders on the server for this node. As this could be a security issue, it is turned off by default.<br><code>USE WITH EXTREME CAUTION</code><br>A button is exposed if this flag is on. Clicking the button will take you to the index view in a separate tab.</dd><dt>Allow scripts to be passed to front-end? <span class="property-type">check box</span></dt><dd>If on, any string(s) in <code>msg.script</code> will be dynamically added to the scripts of the web page. Turn off to prevent scripts from being dynamically added and executed.<br><b>NOTE</b>: It is better to use UIBUILDER's <code>msg._ui</code> low-code features for passing scripts.</dd><dt>Allow styles to be passed to front-end? <span class="property-type">check box</span></dt><dd>If on, any string(s) in <code>msg.style</code> will be dynamically added to the styles of the web page. Turn off to prevent styles from being dynamically added.<br><b>NOTE</b>: It is better to use UIBUILDER's <code>msg._ui</code> low-code features for passing styles.</dd><dt>Forward input to output? <span class="property-type">check box</span></dt><dd>Forwards a copy of every received message direct to the output. Adds the topic from the above setting if one isn't present in the msg.<p><i>Note</i> that this may result in multiple output messages if your front-end code also auto-sends inbound messages.</p></dd></dl><h4>Button Row</h4><dl class="message-properties"><dt><i class="fa fa-globe" aria-hidden="true"></i> Open <span class="property-type">link</span></dt><dd>The web app url for this instance. Click to see the app page in a new tab. Also available as a button at the top of the panel on all tabs.</dd><dt><i class="fa fa-info-circle" aria-hidden="true"></i> Full details <span class="property-type">link</span></dt><dd>Shows a web page with detailed information about the overall UIBUILDER configuration. Including details of all of the vendor modules that are available and all of the UIBUILDER endpoints along with both server and URL paths.</dd><dt><i class="fa fa-info" aria-hidden="true"></i> Node Details <span class="property-type">link</span></dt><dd>Shows a web page with detailed information relavent just for this instance (node) of UIBUILDER. May be easier to read than the full details.</dd><dt><i class="fa fa-book" aria-hidden="true"></i> Docs <span class="property-type">link</span></dt><dd>Opens the documentation for UIBUILDER in a separate tab. This does not require an Internet connection, the local docs are used. Also available as a button at the top of the panel on all tabs.</dd></dl><h3>File/Folder Structure</h3><p>For more information, see the <a href="./uibuilder/docs" target="_blank">UIBUILDER documentation</a>.</p><h3>Details</h3><p>For more information, see the <a href="./uibuilder/docs" target="_blank">UIBUILDER documentation</a>.</p><p>There are also examples of how to use UIBUILDER in the Node-RED import library, on the <a href="https://flows.nodered.org/search?term=uibuilder" target="_blank"></a>, and in the <a href="https://github.com/TotallyInformation/node-red-contrib-uibuilder/wiki" target="_blank">GitHub WIKI</a>.</p><p>UIBUILDER can be discussed in the <a href="https://discourse.nodered.org/tag/node-red-contrib-uibuilder" target="_blank">Node-RED Forum</a>. Issues/bugs can be raised on <a href="https://github.com/TotallyInformation/node-red-contrib-uibuilder/issues" target="_blank">GitHub</a>.</p><h3>Admin Index (Details) page</h3><p>The <a href="uibindex" target="_blank">&lt;admin url&gt;/uibindex</a> page lists all of the UIBUILDER endpoints and other details. You can use the following parameters:</p><dl class="message-properties"><dt>type <span class="property-type">(string)</span></dt><dd>The type of the data returned.<dl class="message-properties"><dt>html <span class="property-type">(default)</span></dt><dd>Also used if no type parameter is given. Returns an HTML page showing the details for all deployed UIBUILDER nodes. Shows the server file locations of the instance and for vendor libraries.</dd><dt>json</dt><dd>Returns JSON data with both the source node ID's and matching URL's.</dd><dt>urls</dt><dd>Returns a JSON array of just the URL's in use from deployed UIBUILDER nodes. Used internally to ensure that new nodes use unique url's.</dd></dl></dd><dt>check <span class="property-type">(string)</span></dt><dd>Passing a UIBUILDER instance name to the check parameter will result in a boolean (true/false) return. True if it is being delivered by a UIBUILDER instance, false otherwise. e.g. <code>?check=uibuilder</code></dd></dl><ul></ul></script>
</div><div><!-- --- [red-module:node-red-contrib-uibuilder/uib-cache] --- -->
<link type="text/css" rel="stylesheet" href="./Node-RED _ maindashboard_files/ti-common.css" media="all"><script src="./Node-RED _ maindashboard_files/ti-common.js"></script><script src="./Node-RED _ maindashboard_files/uib-cache.js"></script><script type="text/html" data-template-name="uib-cache"><div id="ti-edit-panel">
    <div aria-label="Choose what msg property to group cache by" id="cacheKey-row" class="form-row">
        <label for="node-input-cacheKey"><i class="fa fa-tag"></i> Cache by</label>
        msg.<input type="text" id="node-input-cacheKey" placeholder="Enter a msg property. " style="width:64%">
    </div>
    <div aria-label="Cache all or group by" title="Turn off cache by and record all msgs up to #" class="form-row">
        <input type="checkbox" id="node-input-cacheall" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-cacheall" style="width: 90%;">Cache all messages individually?<span id="caspan"> (Up to # given below)</span></label>
    </div>
    <div aria-label="Only replay cache if client as actually new" title="A new client comes from a page-load, not a reconnection" class="form-row">
        <input type="checkbox" id="node-input-newcache" style="display: inline-block; width: auto; vertical-align: top;" checked>
        <label for="node-input-newcache" style="width: 90%;">Only replay cache when client is really new</label>
    </div>
    <div aria-label="How many msgs to cache" title="Use 0 for unlimited (up to memory availability)" class="form-row">
        <label for="node-input-num"><i class="fa fa-tag"></i> # msgs</label>
        <input type="number" id="node-input-num">
    </div>
    <div aria-label="Info for cache settings" class="form-row form-tips node-help" style="width:89%">
        Number of msgs to cache<span id="help-per"> per topic</span>.<br>
        Messages are dropped off front of queue once limit is reached.<br>
        Use 0 for unlimited but take care not to run out of memory.
    </div>

    <!-- <div aria-label="Select which context store to use" class="form-row">
        <label for="node-input-store"><i class="fa fa-database"></i> Use Store</label>
        <input type="text" id="node-input-store">
        <input type="hidden" id="node-input-store-type">
    </div> -->
    <div aria-label="Select which context store and variable to use" class="form-row">
        <label for="node-input-storeName" style="width:25%"><i class="fa fa-database"></i> Store</label>
        <label for="node-input-storeContext" style="width:25%"><i class="fa fa-database"></i> Type</label>
        <label for="node-input-varName" style="width:41%"><i class="fa fa-tag"></i> Variable Name</label><br>
        <input type="text" id="node-input-storeName" style="width:25%"></input>
        <input type="text" id="node-input-storeContext" style="width:25%"></input>
        <input type="text" id="node-input-varName" value="uib_cache" title="Can only change if Type is not 'Node'" placeholder="REQD: Context variable name" style="width:41%">
    </div>

    <div aria-label="Info for context store" class="form-row form-tips node-help" style="width:89%">
        Select a context <b>store</b> to use if you have more than one set up.<br>
        Use persistent store if you want cache to survive a system reset.<br>
        If store changed, old one must be manually deleted.
    </div>

    <div aria-label="Info for store type" class="form-row form-tips node-help" style="width:89%">
        Select which <b>type</b> of store to use. The default is "Node".<br>
        Node = This node's store, only accessible to this node.<br>
        Flow/Global = Accessible to other nodes. Use with caution.
    </div>

    <hr>
    <div aria-label="Name label" title="Only used for labelling in the flow" class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
</div></script><script type="text/html" data-help-name="uib-cache"><p>
    A simple caching node that works with uibuilder.
</p>
<p>
    See <a href="./uibuilder/techdocs/#/cache-node" target="_blank">Documentation: Using the cache node</a> for more detail.
</p>

<h3>Inputs</h3>
<p>
    Any msg can be sent into the node.
</p>
<p>
    In addition, the node recognises uibuilder control messages for cache replay and cache clear.<br>
    See <a href="./uibuilder/techdocs/#/pre-defined-msgs" target="_blank">Documentation: pre-defined messages</a> 
    for the structure of those messages.
</p>

<h3>Outputs</h3>
<p>
    Any non-uibuilder-control message is passed to the output.
</p>
<p>
    If the node receives a REPLAY or "client connect" (where the connections count is zero) control message, all of the cached messages are sent to the output.
</p>
<p>
    Upon replay, the output messages will have the socket id of the control message (if present) added
    so that the replayed messages are sent to the correct client. Any socket id saved in the cached messages
    is ignored.
</p>
<p>
    Upon replay, the output messages will also get a <code>_uib.cache</code> property added with a value of "REPLAY".
    This can be used in your front-end code if you need to differentiate between original and replayed messages.
</p>
<p>
    If the node receives a CLEAR control message, all of the cached messages are deleted and nothing is sent to the output.
</p>

<h3>Node Settings</h3>
<dl class="message-properties">
    <dt>Cache by <span class="property-type">string</span></dt>
    <dd>
        Enter an incoming message property to group cached entries by.<br>
        When choosing a property to group by, be mindful of the number of messages
        that may end up in the cache. If too many large messages are cached, Node-RED <b>WILL</b> crash.<br>
        The default entry is "topic".
    </dd>

    <dt>Cache individually? <span class="property-type">boolean</span></dt>
    <dd>
        If selected, the "Cache by" field will be hidden. All messages will be
        cached as a single group.
    </dd>

    <dt>Only replay cache when client is really new <span class="property-type">boolean</span></dt>
    <dd>
        If selected, when a "client connect" control message is received, the cache will only
        be sent if <code>msg.connections</code> is zero. That indicates that the client connection
        is actually a new one and node a reconnection. This is now the default as it reduces the number
        of times the cache is sent and does not send if the client is simply waking up (when it doesn't need the cache.)
    </dd>

    <dt># messages <span class="property-type">integer</span></dt>
    <dd>
        The maximum number of messages <b>per group</b> that will be cached.<br>
        Once the max number is reached, the oldest messages will be dropped.<br>
        If you change this number and re-deploy, the node will automatically trim
        the number of messages cached.<br>
        You can use a number of zero to allow an infinite number of cached entries,
        however, you need to take great care in that case not to exceede the available
        memory, the node will not check for you.<br>
        The default number is one. This means that the last recorded message for each group
        will be replayed which is generally the expected result.
    </dd>

    <dt>Use Store <span class="property-type">Drop-down</span></dt>
    <dd>
        The drop-down is pre-populated with the <code>contextStorage</code> modules you define in <code>settings.js</code>.
        You can use this to choose a persistent context store if desired so that the cache survives system restarts.<br>
        If you change this value, you may need to manually delete the old version of the node context variable to avoid confusion.
        Select the node, view the Context Data side-panel, refresh the entries and delete the appropriate <code>uib_cache</code> entry.
    </dd>

    <dt>Store Type <span class="property-type">Drop-down</span></dt>
    <dd>
        One of "Node", "Flow", or "Global".<br>
        Take care if using "Flow" or "Global" since other nodes and flow might make changes to the cache.<br>
        "Node" is the default and should usually be used since there can be no name clashes or external influence.
    </dd>

    <dt>Variable <span class="property-type">string</span></dt>
    <dd>
        Default: "uib_cache". This is the store variable name that will be used.<br>
        Take care if using flow/global stores and multiple cache nodes since a name clash will result in the same cache being used.
    </dd>

    <dt>Name <span class="property-type">string</span></dt>
    <dd>A short description shown in the admin interface.</dd>
</dl>

<p>
    <b>NOTE</b> that there is an example flow in the examples library that demonstrates the use of this node.
    Use the Editor's menu, import, Examples, node-red-contrib-uibuilder and import the <code>uib-cache-test</code> example.
</p></script>
</div><div><!-- --- [red-module:node-red-contrib-uibuilder/uib-tag] --- -->
<!--
    Copyright (c) 2023-2023 Julian Knight (Totally Information)

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

<link type="text/css" rel="stylesheet" href="./Node-RED _ maindashboard_files/ti-common.css" media="all">
<script src="./Node-RED _ maindashboard_files/ti-common.js"></script>
<script src="./Node-RED _ maindashboard_files/uib-tag.js"></script>

<script type="text/html" class="uib-tooltip" data-template-name="uib-tag">
<div id="ti-edit-panel">

    <div aria-label="Required. The tag/element name (without the opening/closing brackets. eg. `a` not `&lt;a>`)." class="form-row" id="row-tag">
        <label for="node-input-tag"><i class="fa fa-tag"></i> Tag</label>
        <input type="text" id="node-input-tag">
        <input type="hidden" id="node-input-tagSourceType">
    </div>

    <div aria-label="If supplied, must be unique on the page & retrigger of the node will REPLACE the element.&#10;If not supplied, element will always be ADDED to page." class="form-row">
        <label for="node-input-elementId"><i class="fa fa-file-code-o"></i> HTML ID</label>
        <input type="text" id="node-input-elementId" placeholder="Valid unique HTML element id string">
        <input type="hidden" id="node-input-elementIdSourceType">
    </div>

    <div aria-label="A CSS selector that uniquely identifies the HTML parent element to attach the new element to.&#10;Must be a non-blank string" class="form-row">
        <label for="node-input-parent"><i class="fa fa-level-up"></i> Parent</label>
        <input type="text" id="node-input-parent" placeholder="CSS Selector">
        <input type="hidden" id="node-input-parentSourceType">
    </div>
    
    <div aria-label="Relative position inside the parent.&#10;'first', 'last' or a number.&#10;Ignored if no HTML ID provided." class="form-row">
        <label for="node-input-position"><i class="fa fa-hashtag"></i> Position</label>
        <input type="text" id="node-input-position" placeholder="Last, first or a number">
        <input type="hidden" id="node-input-positionSourceType">
    </div>
  
    <div><i>Element slot content (can be HTML):</i></div>
    <div aria-label="The source of the slot content update data" class="form-row">
        <label for="node-input-slotSourceProp">Content Source</label>
        <input type="text" id="node-input-slotSourceProp" placeholder="Source data to update elements content">
        <input type="hidden" id="node-input-slotSourcePropType">
    </div>
    <div aria-label="Input content is Markdown rather than HTML?" class="form-row">
        <label for="node-input-slotPropMarkdown">Markdown?</label>
        <input type="checkbox" id="node-input-slotPropMarkdown" style="width: auto;vertical-align: top;">
        <span id="slotPropMarkdown-unchecked" style="font-size:smaller;"> &nbsp; Input can be an HTML string</span>
        <span id="slotPropMarkdown-checked" style="display:none;font-size:smaller;"> &nbsp; Markdown-It library must be loaded in browser</span>
    </div>
    
    <!-- <div style="border:1px solid var(--red-ui-primary-border-color);padding: 0.1rem;"> -->
    <div><i>Element attributes:</i></div>
    <div aria-label="The source of the attribute update data" class="form-row">
        <label for="node-input-attribsSource">Attribs Source</label>
        <input type="text" id="node-input-attribsSource" placeholder="Source data to update elements attributes">
        <input type="hidden" id="node-input-attribsSourceType">
    </div>
    <div aria-label="Additional information" class="form-row form-tips node-help" style="width:89%">
        <p style="font-size: smaller;">
            The attributes source data must be an object containing attribute name keys. e.g.
            <code>{"class": "class1 class2", <br>"style": "color:red; border: 1px solid silver;"}</code>
        </p>    
    </div>

    <hr>
    
    <div aria-label="Default msg topic. Make unique if using uib-cache." class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> Topic</label>
        <input type="text" id="node-input-topic">
    </div>
    <div aria-label="Node name (descriptive only)" class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
    
</div>

</script>


<script type="text/html" data-help-name="uib-tag">

<p>
    Zero-code UI builder. Creates a sing HTML or web component element (tag) from simple input data.<br><br>
    Requires the "new" front-end client library (either the IIFE or ESM version).
</p>
<p>
    Please try out the example in the import library. <a href="./uibuilder/docs/#/nodes/uib-tag" target="_blank">Documentation</a>.
</p>

<h3>Inputs</h3>
<dl class="message-properties">
    <dt>mode <span class="property-type">string</span></dt>
    <dd>
        If the <code>msg.mode</code> option is chosen in settings, this property can be set to either "update" or "delete".
    </dd>

    <dt class="optional">Other <span class="property-type">various</span></dt>
    <dd>
        Other msg properties may be passed into the <i>CSS Selector</i>, <i>Content Source</i> and <i>Attributes Source</i> fields if set in the settings.
    </dd>
</dl>

<h3>Outputs</h3>
<dl class="message-properties">
    <dt>_ui <span class="property-type">object</span></dt>
    <dd>
        The _ui configuration properties that defines the creation of the element.<br>
        Use this in your own flows or in a JSON input for an initial setup of the UI if desired.
        <p>
            Most commonly, simply send to the input of a <code>uibuilder</code> node or a <code>uib-cache</code>
            node. uibuilder will automatically create the desired HTML in the client browser.
        </p>
    </dd>

    <dt>topic <span class="property-type">string</span></dt>
    <dd>
        The input topic.
    </dd>
    <dd>
        When chaining <code>uib-element</code>/<code>uib-update</code> nodes together, make sure that at least the final
        output has a unique topic string so that caching using the <code>uib-cache</code> node is
        easier.
    </dd>
    
</dl>

<h3>Node Settings</h3>
<dl class="message-properties">
    <dt>Mode <span class="property-type">selection</span></dt>
    <dd>
        The mode of operation.
    </dd>
    <dd>
        Must be one of 'update' or 'delete'. Can also be set to <code>msg.mode</code>.
    </dd>

    <dt>CSS Selector <span class="property-type">string</span></dt>
    <dd>
        Required. A <a href="https://developer.mozilla.org/en-US/docs/web/css/css_selectors" target="_blank">CSS selector</a> that the node will update.
    </dd>
    <dd>
        Note that <b>ALL</b> matching elements will be updated/deleted not just the first.
    </dd>

    <dt class="optional">Content Source <span class="property-type">string</span></dt>
    <dd>
        Optional. Text, HTML or Markdown that will replace the slot content of the selected element.
    </dd>
    <dd>
        If specified, the result must be a string.
    </dd>

    <dt class="optional">Markdown? <span class="property-type">boolean</span></dt>
    <dd>
        If set, the <i>Content Source</i> will be treated as Markdown <i>IF</i> the <a href="https://markdown-it.github.io/" target="_blank">Markdown-IT</a> library is loaded into the client web page.
    </dd>

    <dt class="optional">Attribs Source <span class="property-type">object</span></dt>
    <dd>
        Optional. An object containing attribute-name/value keypairs.
    </dd>
    <dd>
        e.g. <code>{"class":"myclass", "data-foo":"bah"}</code>
    </dd>

    <dt>Topic <span class="property-type">string</span></dt>
    <dd>
        Fixed topic string. Only used if the input <code>msg</code> does not
        contain a <code>topic</code> property.
    </dd>

    <dt class="optional">Name <span class="property-type">string</span></dt>
    <dd>Optional short description shown in the admin interface</dd>
</dl>

<h3>Details</h3>
<p>
    Select the mode of operation (update or delete), provide a CSS Selector that will identify the element(s) to work on.
    If updating, provide updated slot content and/or attributes. Then send the 
    output to a uibuilder node to update/remove the element(s).
</p>
<p>
    Multiple <code>uib-update</code> and <code>uib-element</code> nodes can be chained together for more complex needs.
</p>
<p>
    The resulting output produces the dynamic, configuration-driven, low-code <code>msg._ui</code>
    JSON configuration data used by the uibuilder front-end client library to automatically
    create HTML on your page. So this can be further processed, saved for future use or sent 
    direct to a uibuilder node (via a <code>uib-cache</code> node if desired).
</p>

</script>
</div><div><!-- --- [red-module:node-red-contrib-uibuilder/uib-element] --- -->
<!--
    Copyright (c) 2022-2023 Julian Knight (Totally Information)

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

<link type="text/css" rel="stylesheet" href="./Node-RED _ maindashboard_files/ti-common.css" media="all">
<script src="./Node-RED _ maindashboard_files/ti-common.js"></script>
<script src="./Node-RED _ maindashboard_files/uib-element.js"></script>

<template id="default-template"></template>

<style>
    .custom-combobox {
        position: relative;
        display: inline-block;
        width: 70%;
    }
    .custom-combobox-toggle {
        position: absolute;
        top: 0;
        bottom: 0;
        margin-left: -1px;
        padding: 0;
    }
    .custom-combobox-input {
        margin: 0;
        padding: 5px 10px;
        width: 85% !important;
    }
</style>

<script type="text/html" data-template-name="uib-element">
<div id="ti-edit-panel">

    <div class="form-row func-tabs-row">
        <ul style="min-width: 450px; margin-bottom: 20px;" id="el-tabs"></ul>
    </div>

    <div id="el-tabs-content">

        <div id="el-tab-main" style="display:none">
            <div aria-label="The type of element or component to add to the UI" class="form-row">
                <label for="node-input-elementtype"><i class="fa fa-code"></i> Type</label>
                <input type="text" id="node-input-elementtype" style="width:70%;"></input>
            </div>

            <div id="type-info" aria-label="Type information" class="form-row form-tips node-help" style="width:89%"></div>
            
            <div aria-label="If supplied, must be unique on the page & retrigger of the node will REPLACE the element.&#10;If not supplied, element will always be ADDED to page." class="form-row">
                <label for="node-input-elementid"><i class="fa fa-file-code-o"></i> HTML ID</label>
                <input type="text" id="node-input-elementid" placeholder="Valid unique HTML element id string">
                <input type="hidden" id="node-input-elementIdSourceType">
            </div>
            
            <div aria-label="A CSS selector that uniquely identifies the HTML parent element to attach the new element to.&#10;Must be a non-blank string" class="form-row">
                <label for="node-input-parent"><i class="fa fa-level-up"></i> Parent</label>
                <input type="text" id="node-input-parent" placeholder="CSS Selector">
                <input type="hidden" id="node-input-parentSourceType">
            </div>
            
            <div aria-label="Relative position inside the parent.&#10;'first', 'last' or a number.&#10;Ignored if no HTML ID provided." class="form-row">
                <label for="node-input-position"><i class="fa fa-hashtag"></i> Position</label>
                <input type="text" id="node-input-position" placeholder="Last, first or a number">
                <input type="hidden" id="node-input-positionSourceType">
            </div>
                        
            <div aria-label="The core data content to process." class="form-row">
                <label for="node-input-data"><i class="fa fa-database"></i> Data</label>
                <input type="text" id="node-input-data" placeholder="">
                <input type="hidden" id="node-input-dataSourceType">
            </div>

            <div aria-label="Optional heading. Leave blank for no heading." class="form-row">
                <label for="node-input-heading"><i class="fa fa-header"></i> Heading</label>
                <select id="node-input-headingLevel" style="width:3.7em;">
                    <option value="h2">H2</option>
                    <option value="h3">H3</option>
                    <option value="h4">H4</option>
                    <option value="h5">H5</option>
                    <option value="h6">H6</option>
                </select>
                <input type="text" id="node-input-heading" placeholder="Optional heading">
                <input type="hidden" id="node-input-headingSourceType">
            </div>

            <div aria-label="Will pass msg.payload through to the output.&#10;When not checked (default), payload is not passed.&#10;If checked, the front-end library will trigger the onMsg event handler." class="form-row">
                <input type="checkbox" id="node-input-passthrough" style="display: inline-block; width: auto; vertical-align: top;">
                <label for="node-input-passthrough" style="width: 90%;">Pass <code>msg.payload</code> to output?</label>
            </div>
            
            <hr>
            
            <div aria-label="Default msg topic. Make unique if using uib-cache." class="form-row">
                <label for="node-input-topic"><i class="fa fa-tasks"></i> Topic</label>
                <input type="text" id="node-input-topic">
            </div>
            <div aria-label="Node name (descriptive only)" class="form-row">
                <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
                <input type="text" id="node-input-name">
            </div>
            
            <div aria-label="Additional information" class="form-row form-tips node-help" style="width:89%">
                <p>
                    Outputs a uibuilder <code>_ui</code> configuration object.
                </p>
                <p>
                    Each output element is wrapped in a containing <code>&lt;div></code> tag
                    (except for the add table/list rows and the title element). It is that
                    tag that has the <code>id</code> on it.
                </p>
                <p>
                    Send the output to a uibuilder main node and the resulting page(s) will have some
                    new UI elements added dynamically without the need for any coding. Use the default
                    "Blank" template to get a simple web page that will "just work". However, any of the 
                    templates should easily accept the output of this node without coding needed.
                </p>
                <p>
                    The output of the node can be further processed for more complex requirements. uib-element
                    nodes can also be chained together, simply use a change or function node to replace the
                    <code>msg.payload</code> in readiness for the next <code>uib-element</code> node. Leave
                    the <code>msg._ui</code> property as-is and the next <code>uib-element</code> node will 
                    add to it.
                </p>
                <p>
                    <b>NOTE:</b> Does <i>not</i> work with the old <code>uibuilderfe</code> client library.
                </p>    
            </div>
        </div>

        <div id="el-tab-conf" style="display:none"><!-- Content loaded when tab changes --></div>
    </div>
    
</div>

</script>


<script type="text/html" data-help-name="uib-element">

<p>
    Zero-code UI builder. Creates HTML elements from simple input data.<br>
    Outputs <code>msg._ui</code> standard configuration data.
</p>
<p>
    Please try out the examples in the import library. <a href="./uibuilder/docs/#/nodes/uib-element" target="_blank">Documentation</a>.
</p>

<h3>Inputs</h3>
<dl class="message-properties">
    <dt>payload <span class="property-type">array | object</span></dt>
    <dd>
        The string, array or object that defines the output.<br>
        Each element type has its own input data definition.<br>
        See the info box for each type.<br>
        Other inputs can be used instead, see settings.
    </dd>

    <dt class="optional">mode <span class="property-type">string</span></dt>
    <dd>Optionally, set to "remove" which will remove the element from the UI. Requires that the HTML ID is set.</dd>
    <dd>Payload is not needed in this case, it will be ignored.</dd>
    <dd>Otherwise not needed.</dd>

    <dt class="optional">topic <span class="property-type">string</span></dt>
    <dd>Optionally, the MQTT topic to use. Takes preference over the topic defined in settings.</dd>

    <dt class="optional">other <span class="property-type">various</span></dt>
    <dd>
        Other properties can be used for the various other settings in the node if desired.
    </dd>
</dl>

<h3>Outputs</h3>
<dl class="message-properties">
    <dt>_ui <span class="property-type">object</span></dt>
    <dd>
        The _ui configuration properties that defines the creation of the element.<br>
        Use this in your own flows or in a JSON input for an initial setup of the UI if desired.
        <p>
            Most commonly, simply send to the input of a <code>uibuilder</code> node or a <code>uib-cache</code>
            node. uibuilder will automatically create the desired HTML in the client browser.
        </p>
    </dd>

    <dt>topic <span class="property-type">string</span></dt>
    <dd>
        The input topic.
        <p>
            When chaining <code>uib-element</code>/<code>uib-update</code> nodes together, make sure that at least the final
            output has a unique topic string so that caching using the <code>uib-cache</code> node is
            easier.
        </p>
    </dd>
</dl>
<p>
    Note that other inputs are <b>not</b> carried forward to the output.
</p>

<h3>Node Settings</h3>
<dl class="message-properties">
    <dt>Type <span class="property-type">selection</span></dt>
    <dd>
        What kind of element or component to create?
    </dd>
    <dd>
        Each selection will show an information box
        that explains what is created and what input data is needed.
    </dd>

    <dt>Parent <span class="property-type">string</span></dt>
    <dd>
        Required. A <a href="https://developer.mozilla.org/en-US/docs/web/css/css_selectors" target="_blank">CSS selector</a> that the elements will be attached to.
        E.g. "div#more" or just "#more" would attach the element as a child of a DIV tag <code>&lt;div id="more"></code>.<br>
        "p.myclass" would attach the list as a child of a P tag that has a class including <code>myclass</code>.
    </dd>
    <dd>
        The default parent is <code>body</code> tag. (e.g. the end of the UI)
    </dd>
    <dd>
        Most of the uibuilder templates have a pre-defined div with an ID of <code>#more</code> for convenience.
    </dd>

    <dt class="optional">HTML ID <span class="property-type">string</span></dt>
    <dd>
        The HTML element id of the resulting HTML tag.
    </dd>
    <dd>
        If not provided, the element will be hard to update or remove from the UI procedurally.
        (The remove mode of this node would not be usable)
    </dd>
    <dd>Applied to the <b>wrapping <code>&lt;div></code> tag</b> where that applies.</dd>
    <dd>
        ID's must be unique on the page otherwise updates/replacement processing
        will be challenging.
    </dd>

    <div style="margin:8px 8px 2px 13px;border:1px solid var(--red-ui-secondary-border-color);padding:4px;">
        <p>
            <i>NOTE:</i> Pre-define the styles and classes for your UI in a CSS style sheet where possible.
            Use <code>uib-update</code> nodes or front-end code to procedurally change them.
        </p><p>
            Each created element should be easily accessible. Use your browser's
            Developer Tools to select the appropriate element and copy the CSS selector.
        </p>
    </div>

    <dt>Data <span class="property-type">any</span></dt>
    <dd>
        Required. Either a msg or context property containing the core data or .
    </dd>

    <dt>Position <span class="property-type">string</span></dt>
    <dd>
        Required. Position of the resulting UI element relative to the selected <i>Parent</i> element.
    </dd>
    <dd>
        <i>last</i>, <i>first</i>, or a number. Default is <i>last</i>.
    </dd>
    <dd>
        Positions the new element within the parent elements child elements. 
        E.g. Selecting a list as the parent and adding a new list row, selecting 
        <code>first</code> would add the new row at the start of the list.
    </dd>

    <dt class="optional">Heading <span class="property-type">string</span></dt>
    <dd>
        Optional text to use as a heading for the added element.
        Leave blank for no heading.
    </dd>
    <dd>
        Heading level 2 is the default. Levels 2-6 are available.
    </dd>

    <dt class="optional">Passthrough <span class="property-type">boolean</span></dt>
    <dd>
        If checked, pass <code>msg.payload</code> to output. By default, <code>msg.payload</code> is removed.
    </dd>
    <dd>
        Checking this option will also tell the uibuilder client to enable <code>uibuilder.onChange('msg', fn)</code> processing
        which is normally disabled when a msg with a <code>_ui</code> property is received.
    </dd>

    <dt class="optional">Topic <span class="property-type">string</span></dt>
    <dd>
        Optional. Fixed topic string. Only used if the input <code>msg</code> does not
        contain a <code>topic</code> property.
    </dd>

    <dt class="optional">Name <span class="property-type">string</span></dt>
    <dd>Optional short description shown in the admin interface</dd>
</dl>

<h3>Details</h3>
<p>
    Select the type of element to create, parent element and HTML ID. Then send the 
    output to a uibuilder node to create/update/remove the element.
</p>
<p>
    The resulting output produces the dynamic, configuration-driven, low-code <code>msg._ui</code>
    JSON configuration data used by the uibuilder front-end client library to automatically
    create HTML on your page. So this can be further processed, saved for future use or sent 
    direct to a uibuilder node (via a <code>uib-cache</code> node if desired).
</p>
<p>
    You can also easily remove the resulting HTML from your page simply by sending a msg
    containing just <code>msg.mode</code> set to "remove". As long as you have chosen a defined <i>HTML ID</i>.
</p>
<p>
    In standard mode, resending to the same parent/HTML ID will cause the original element to be replaced completely.
</p>
<p>
    To update parts of the resulting UI element, use the <code>uib-update</code> node with an appropriate CSS Selector.
</p>
<p>
    Multiple <code>uib-update</code> and <code>uib-element</code> nodes can be chained together for more complex needs.
</p>


</script>
</div><div><!-- --- [red-module:node-red-contrib-uibuilder/uib-update] --- -->
<!--
    Copyright (c) 2023-2024 Julian Knight (Totally Information)

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

<link type="text/css" rel="stylesheet" href="./Node-RED _ maindashboard_files/ti-common.css" media="all">
<script src="./Node-RED _ maindashboard_files/ti-common.js"></script>
<script src="./Node-RED _ maindashboard_files/uib-update.js"></script>

<script type="text/html" data-template-name="uib-update">
<div id="ti-edit-panel">

    <div aria-label="Choose update (default) or delete mode" class="form-row">
        <label for="node-input-mode">Mode</label>
        <input type="text" id="node-input-mode">
        <input type="hidden" id="node-input-modeSourceType">
    </div>

    <div aria-label="The CSS Selector to find the HTML element to update" class="form-row">
        <label for="node-input-cssSelector"><i class="fa fa-file-code-o"></i> CSS Selector</label>
        <input type="text" id="node-input-cssSelector" placeholder="Defines the element to update">
        <input type="hidden" id="node-input-cssSelectorType">
    </div>
    
    <div><i>Update HTML slot content:</i></div>
    <div aria-label="The source of the slot content update data" class="form-row">
        <label for="node-input-slotSourceProp">Content Source</label>
        <input type="text" id="node-input-slotSourceProp" placeholder="Source data to update elements content">
        <input type="hidden" id="node-input-slotSourcePropType">
    </div>
    <div aria-label="Input content is Markdown rather than HTML?" class="form-row">
        <label for="node-input-slotPropMarkdown">Markdown?</label>
        <input type="checkbox" id="node-input-slotPropMarkdown" style="width: auto;vertical-align: top;">
        <span id="slotPropMarkdown-unchecked" style="font-size:smaller;"> &nbsp; Input can be an HTML string</span>
        <span id="slotPropMarkdown-checked" style="display:none;font-size:smaller;"> &nbsp; Markdown-It library must be loaded in browser</span>
    </div>
    

    <!-- <div style="border:1px solid var(--red-ui-primary-border-color);padding: 0.1rem;"> -->
    <div><i>Update element attributes:</i></div>
    <div aria-label="The source of the attribute update data" class="form-row">
        <label for="node-input-attribsSource">Attribs Source</label>
        <input type="text" id="node-input-attribsSource" placeholder="Source data to update elements attributes">
        <input type="hidden" id="node-input-attribsSourceType">
    </div>
    <div aria-label="Additional information" class="form-row form-tips node-help" style="width:89%">
        <p style="font-size: smaller;">
            The source data must be an object containing attribute name keys. e.g.
            <code>{"class": "myclassname", <br>"style": "color:red; border: 1px solid silver;"}</code>
        </p>    
    </div>

    <hr>
    
    <div aria-label="Default msg topic. Make unique if using uib-cache." class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> Topic</label>
        <input type="text" id="node-input-topic">
    </div>
    <div aria-label="Node name (descriptive only)" class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
    
</div>

</script>


<script type="text/html" data-help-name="uib-update">

<p>
    Zero-code UI updater for <span class="uib-name"><span class="uib-red">UI</span>BUILDER</span>. Updates HTML elements from simple input data.<br><br>
    Requires the "new" front-end client library (either the IIFE or ESM version).
</p>
<p>
    Please try out the example in the import library. <a href="./uibuilder/docs/#/nodes/uib-update" target="_blank">Documentation</a>.
</p>

<h3>Inputs</h3>
<dl class="message-properties">
    <dt>mode <span class="property-type">string</span></dt>
    <dd>
        If the <code>msg.mode</code> option is chosen in settings, this property can be set to either "update" or "delete".
    </dd>

    <dt class="optional">Other <span class="property-type">various</span></dt>
    <dd>
        Other msg properties may be passed into the <i>CSS Selector</i>, <i>Content Source</i> and <i>Attributes Source</i> fields if set in the settings.
    </dd>
</dl>

<h3>Outputs</h3>
<dl class="message-properties">
    <dt>_ui <span class="property-type">object</span></dt>
    <dd>
        The _ui configuration properties that defines the creation of the element.<br>
        Use this in your own flows or in a JSON input for an initial setup of the UI if desired.
        <p>
            Most commonly, simply send to the input of a <code>uibuilder</code> node or a <code>uib-cache</code>
            node. uibuilder will automatically create the desired HTML in the client browser.
        </p>
    </dd>

    <dt>topic <span class="property-type">string</span></dt>
    <dd>
        The input topic.
    </dd>
    <dd>
        When chaining <code>uib-element</code>/<code>uib-update</code> nodes together, make sure that at least the final
        output has a unique topic string so that caching using the <code>uib-cache</code> node is
        easier.
    </dd>
    
</dl>

<h3>Node Settings</h3>
<dl class="message-properties">
    <dt>Mode <span class="property-type">selection</span></dt>
    <dd>
        The mode of operation.
    </dd>
    <dd>
        Must be one of 'update' or 'delete'. Can also be set to <code>msg.mode</code>.
    </dd>

    <dt>CSS Selector <span class="property-type">string</span></dt>
    <dd>
        Required. A <a href="https://developer.mozilla.org/en-US/docs/web/css/css_selectors" target="_blank">CSS selector</a> that the node will update.
    </dd>
    <dd>
        Note that <b>ALL</b> matching elements will be updated/deleted not just the first.
    </dd>

    <dt class="optional">Content Source <span class="property-type">string</span></dt>
    <dd>
        Optional. Text, HTML or Markdown that will replace the slot content of the selected element.
    </dd>
    <dd>
        If specified, the result must be a string.
    </dd>

    <dt class="optional">Markdown? <span class="property-type">boolean</span></dt>
    <dd>
        If set, the <i>Content Source</i> will be treated as Markdown <i>IF</i> the <a href="https://markdown-it.github.io/" target="_blank">Markdown-IT</a> library is loaded into the client web page.
    </dd>

    <dt class="optional">Attribs Source <span class="property-type">object</span></dt>
    <dd>
        Optional. An object containing attribute-name/value keypairs.
    </dd>
    <dd>
        e.g. <code>{"class":"myclass", "data-foo":"bah"}</code>
    </dd>

    <dt>Topic <span class="property-type">string</span></dt>
    <dd>
        Fixed topic string. Only used if the input <code>msg</code> does not
        contain a <code>topic</code> property.
    </dd>

    <dt class="optional">Name <span class="property-type">string</span></dt>
    <dd>Optional short description shown in the admin interface</dd>
</dl>

<h3>Details</h3>
<p>
    Select the mode of operation (update or delete), provide a CSS Selector that will identify the element(s) to work on.
    If updating, provide updated slot content and/or attributes. Then send the 
    output to a uibuilder node to update/remove the element(s).
</p>
<p>
    Multiple <code>uib-update</code> and <code>uib-element</code> nodes can be chained together for more complex needs.
</p>
<p>
    The resulting output produces the dynamic, configuration-driven, low-code <code>msg._ui</code>
    JSON configuration data used by the uibuilder front-end client library to automatically
    create HTML on your page. So this can be further processed, saved for future use or sent 
    direct to a uibuilder node (via a <code>uib-cache</code> node if desired).
</p>

</script>
</div><div><!-- --- [red-module:node-red-contrib-uibuilder/uib-html] --- -->
<!--
    Copyright (c) 2023-2023 Julian Knight (Totally Information)

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

<link type="text/css" rel="stylesheet" href="./Node-RED _ maindashboard_files/ti-common.css" media="all">
<script src="./Node-RED _ maindashboard_files/ti-common.js"></script>

<script type="text/html" data-template-name="uib-html">
<div id="ti-edit-panel">
  
    <div aria-label="Default msg topic. Make unique if using uib-cache." class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> Topic</label>
        <input type="text" id="node-input-topic">
    </div>
    <div aria-label="Node name (descriptive only)" class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>

    <div aria-label="If selected, msg.template or the uibuilder blank template will be used as a wrapper for the output HTML" class="form-row">
        <label for="node-input-useTemplate">Merge HTML Template?</label>
        <input type="checkbox" id="node-input-useTemplate" style="width: auto;vertical-align: top;">
    </div>
    
</div>

</script>



<script type="text/javascript">
    /* eslint-disable strict, sonarjs/no-duplicate-string */
    
    // Isolate this code
    (function () {
        'use strict'
    
        // const mylog = window['uibuilder'].log
    
        /** Module name must match this nodes html file @constant {string} moduleName */
        const moduleName = 'uib-html'
        /** Node's label @constant {string} paletteCategory */
        const nodeLabel = moduleName
        /** Node's palette category @constant {string} paletteCategory */
        const paletteCategory  = window['uibuilder'].paletteCategory
        /** Node's background color @constant {string} paletteColor */
        const paletteColor  = 'var(--uib-node-colour)' // '#E6E0F8'
    
        /** Prep for edit
         * @param {*} node A node instance as seen from the Node-RED Editor
         */
        function onEditPrepare(node) {
            window['tiDoTooltips']('#ti-edit-panel') // Do this at the end
        } // ----- end of onEditPrepare() ----- //
    
        // @ts-ignore
        RED.nodes.registerType(moduleName, {
            category: paletteCategory,
            color: paletteColor,
            defaults: {
                name: { value: '' },
                topic: { value: '' },
                useTemplate: { value: false },
            },
            align: 'left',
            inputs: 1,
            inputLabels: 'uibuilder dynamic UI configuration source data',
            outputs: 1,
            outputLabels: ['HTML payload'],
            icon: 'font-awesome/fa-code',
            paletteLabel: nodeLabel,
            label: function () {
                return this.name || moduleName
            },
    
            /** Prepares the Editor panel */
            oneditprepare: function () { onEditPrepare(this) },
    
        }) // ---- End of registerType() ---- //
    
    }())
    
</script>
<script type="text/html" data-help-name="uib-html">

<p>
    Converts <span class="uib-name"><span class="uib-red">UI</span>BUILDER</span> low-code UI description data into HTML. Send a <code>msg._ui</code> object to the node, 
    the output will be HTML in <code>msg.payload</code>. 
    <a href="../docs/nodes/uib-html" target="_blank">Details</a>.
</p>

<h3>Inputs</h3>
<dl class="message-properties">
    <dt>_ui <span class="property-type">object</span></dt>
    <dd>
        uibuilder low-code UI definition that will be "hydrated" to full HTML
        by this node.
    </dd>

    <dt class="optional">template <span class="property-type">string</span></dt>
    <dd>
        HTML string that will be wrapped around the <code>msg._ui</code> generated
        HTML output if the template option is ticked in the settings.
    </dd>

    <dt class="optional">topic <span class="property-type">string</span></dt>
    <dd>
        Passed through if provided.
    </dd>
</dl>

<h3>Outputs</h3>
<dl class="message-properties">
    <dt>payload <span class="property-type">string</span></dt>
    <dd>
        Display name (only used in the Editor for display).
    </dd>

    <dt>topic <span class="property-type">string</span></dt>
    <dd>
        The input topic.
    </dd>
</dl>

<h3>Node Settings</h3>
<dl class="message-properties">
    <dt class="optional">Name <span class="property-type">string</span></dt>
    <dd>
        Optional short description shown in the admin interface
    </dd>

    <dt>Topic <span class="property-type">string</span></dt>
    <dd>
        Fixed topic string. Only used if the input <code>msg</code> does not
        contain a <code>topic</code> property.
    </dd>

    <dt class="optional">Merge HTML Template? <span class="property-type">boolean</span></dt>
    <dd>
        If selected, the input will be wrapped in an HTML template.
    </dd>
    <dd>
        The template can be provided in msg.template as a string.
        Or, if not provided, the node will add uibuilder's default "blank" template.
    </dd>
</dl>

</script>
</div><div><!-- --- [red-module:node-red-contrib-uibuilder/uib-save] --- -->
<!--
    Copyright (c) 2023-2023 Julian Knight (Totally Information)

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

<link type="text/css" rel="stylesheet" href="./Node-RED _ maindashboard_files/ti-common.css" media="all">
<script src="./Node-RED _ maindashboard_files/ti-common.js"></script>
<script src="./Node-RED _ maindashboard_files/uib-save.js"></script>

<script type="text/html" data-template-name="uib-save">
<div id="ti-edit-panel">
    
    <div aria-label="uibuilder URL to associate with" class="form-row" title="uibuilder URL to associate with">
        <label for="node-input-url"><i class="fa fa-globe"></i> URL</label>
        <select id="node-input-url" style="width:70%">
            <option value="" name="">--choose a uibuilder instance--</option>
        </select>
    </div>
    <hr>
          
    <div aria-label="If set, `msg._uib.pageName` or `msg._ui.pageName` will be used instead of the file name. Folder will be set to the current served folder for the node." class="form-row">
        <label for="node-input-usePageName">
            Use pageName
        </label>
        <input type="checkbox" id="node-input-usePageName" style="display: inline-block; width: auto; vertical-align: top;">
    </div>
    <div aria-label="Folder to save to (relative to node instance root folder). Leave blank to use `msg.folder`. `..` not allowed." class="form-row" id="folder">
        <label for="node-input-folder"><i class="fa fa-folder-open-o"></i> Folder</label>
        <input type="text" id="node-input-folder">
    </div>
    <div aria-label="File name. Leave blank to use `msg.fname`. May have prefixed sub-folders. `..` not allowed." class="form-row" id="fname">
        <label for="node-input-fname"><i class="fa fa-file-code-o"></i> File</label>
        <input type="text" id="node-input-fname">
    </div>

    <div aria-label="If set and sub-folder name(s) do not not exist, they will be created." class="form-row">
        <label for="node-input-createFolder">
            Create Folder?
        </label>
        <input type="checkbox" id="node-input-createFolder" style="display: inline-block; width: auto; vertical-align: top;">
    </div>
    <div aria-label="If set, connected client browser tabs will be automatically reloaded." class="form-row">
        <label for="node-input-reload">
            Reload Clients?
        </label>
        <input type="checkbox" id="node-input-reload" style="display: inline-block; width: auto; vertical-align: top;">
    </div>
    <div aria-label="Character coding for text inputs" class="form-row">
        <label for="node-input-encoding"><i class="fa fa-file-text-o"></i> Encoding</label>
        <input type="text" id="node-input-encoding" value="utf8" disabled>
    </div>
    <div aria-label="New file access mode" class="form-row">
        <label for="node-input-mode"><i class="fa fa-share-square-o"></i> File Mode</label>
        <input type="text" id="node-input-mode" value="0o666" disabled>
    </div>

    <hr>
    <div aria-label="Default msg topic. Make unique if using uib-cache." class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> Topic</label>
        <input type="text" id="node-input-topic">
    </div>
    <div aria-label="Node name (descriptive only)" class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
    
</div>

</script>


<script type="text/html" data-help-name="uib-save">

<p>
    Save a file into a uibuilder instance folder.
</p>
<p>
    <a href="./uibuilder/docs/#/nodes/uib-save" target="_blank">Documentation</a>.
    This node has examples in the Node-RED Import Examples library.
</p>

<h3>Inputs</h3>
<dl class="message-properties">
    <dt>payload <span class="property-type">string|buffer</span></dt>
    <dd>
        REQUIRED. The data to output to the file.
        Use a buffer for binary file types (video, audio, image, etc).
    </dd>

    <dt>folder <span class="property-type">string</span></dt>
    <dd>
        If supplied and the folder setting is blank, will be used as the output folder.
    </dd>
    <dd>
        Folder name is <b>ALWAYS</b> relative to the node's instance root folder.
        Folder traversal outside of that is not permitted.
    </dd>

    <dt>fname <span class="property-type">string</span></dt>
    <dd>
        If supplied and the file name setting is blank, will be used as the output file name.
    </dd>
    <dd>
        This may contain prefixed sub-folders but cannot use <code>..</code> to prevent folder traversal.
    </dd>
</dl>

<h3>Node Settings</h3>
<dl class="message-properties">
    <dt>URL <span class="property-type">selection</span></dt>
    <dd>
        Select the existing uibuilder Node instance via its URL setting.
        This cannot be overridden by a msg property at this time.
    </dd>
    <dd>
        Sets the top-most (root) folder that can be written to.
    </dd>

    <dt>Use pageName <span class="property-type">boolean</span></dt>
    <dd>
        If set, either <code>msg._uib.pageName</code> or <code>msg._ui.pageName</code> will be used
        instead of the file name. The uibuilder node's current served folder will be used for the folder.
    </dd>
    <dd>
        This allows easy overwriting of a uibuilder page's file simply by issuing an <code>htmlSend</code> command
        to the front-end and sending the resulting message to this node. See the included examples.
    </dd>
    
    <dt>Folder <span class="property-type">string</span></dt>
    <dd>
        The name of an existing or new folder inside the chosen uibuilder instance root.
    </dd>
    <dd>
        Defaults to <code>src</code>.
    </dd>
    <dd>
        Folder name is <b>ALWAYS</b> relative to the node's instance root folder.
        "<code>..</code>" cannot be included in the path to prevent escaping from the instance root.
    </dd>
    <dd>
        If the folder does not exist, an error is generated unless the "Create Folder" flag is ticked.
    </dd>
    <dd>
        <code>msg.folder</code> overrides this as long as this is left blank.
    </dd>

    <dt>File <span class="property-type">string</span></dt>
    <dd>
        The name of an existing or new file inside the chosen uibuilder instance root and folder.
    </dd>
    <dd>
        If the file does not exist, it will be created. Otherwise it is silently overwritten.
    </dd>
    <dd>
        Neither "<code>/</code>" or "<code>\</code>" can be included in the file name. The name must be valid for the OS you are using.
    </dd>
    <dd>
        <code>msg.fname</code> will be used if this is left blank.
    </dd>
    <dd>
        This may contain prefixed sub-folders but cannot use <code>..</code> to prevent folder traversal.
    </dd>

    <dt>Create Folder? <span class="property-type">boolean</span></dt>
    <dd>
        If set and the given folder name does not exist inside the instance root folder,
        the new folder will be automatically created.
    </dd>
    
    <dt>Reload? <span class="property-type">boolean</span></dt>
    <dd>
        If ticked, any client browser tabs connected to the selected uibuilder node will be reloaded.
        This may be useful when auto-changing static resource files (e.g. <code>index.html</code>).
        It is mostly useful when testing. Use with caution on a live system.
    </dd>
    
    <dt>Encoding <span class="property-type">string</span></dt>
    <dd>
        Not usable. Future enhancement.
    </dd>
    <dd>
        The optional string encoding to be used when the input data is a string.
        It defaults to Node.js's <code>utf8</code>.
        See Node.js documentation for what can be provided here.
    </dd>

    <dt>Mode <span class="property-type">integer</span></dt>
    <dd>
        Not usable. Future enhancement.
    </dd>
    <dd>
        The optional file output mode. Defaults to <code>0o666</code>
        See Node.js documentation for what can be provided here.
    </dd>
    <dd>
        This only impacts newly created files. It is ignored when overwriting existing files.
    </dd>
    <dd>
        On Windows, only the write permission can be set.
    </dd>

    
    <dt>Topic <span class="property-type">string</span></dt>
    <dd>
        Standard optional topic name.
    </dd>

    <dt>Name <span class="property-type">string</span></dt>
    <dd>
        Standard optional name. Has no impact other than on the Editor display.
    </dd>
</dl>

</script>
</div><div><!-- --- [red-module:node-red-contrib-uibuilder/uib-sender] --- -->
<link type="text/css" rel="stylesheet" href="./Node-RED _ maindashboard_files/ti-common.css" media="all"><script src="./Node-RED _ maindashboard_files/ti-common.js"></script><script type="text/javascript">/* eslint-disable sonarjs/no-duplicate-string */
/* eslint-disable strict */

// Isolate this code
(function () {
    'use strict'

    const uibuilder = window['uibuilder']
    const mylog = uibuilder.log

    /** Module name must match this nodes html file @constant {string} moduleName */
    const moduleName  = 'uib-sender'
    /** Node's label @constant {string} paletteCategory */
    const nodeLabel  = 'uib-sender'
    /** Node's palette category @constant {string} paletteCategory */
    const paletteCategory  = uibuilder.paletteCategory
    /** Node's background color @constant {string} paletteColor */
    const paletteColor  = 'var(--uib-node-colour)' // '#E6E0F8'

    /** Copy of all deployed uibuilder node instances */
    let uibInstances

    /** Get all of the current uibuilder URL's */
    function getUrls() {
        uibInstances = uibuilder.getDeployedUrls()
        Object.keys(uibInstances).forEach( (key, i, arr) => {
            $('#node-input-url').append($('<option>', {
                value: uibInstances[key],
                text: uibInstances[key],
                'data-id': key,
            }))
        })
        // $.ajax({
        //     type: 'GET',
        //     async: false,
        //     dataType: 'json',
        //     url: './uibuilder/admin/dummy',
        //     data: {
        //         'cmd': 'listinstances',
        //     },
        //     success: function(instances) {
        //         console.log('>> Instances >>', instances, Object.entries(instances) )

        //         uibInstances = instances

        //         Object.keys(instances).forEach( (key, i, arr) => {
        //             $('#node-input-url').append($('<option>', {
        //                 value: instances[key],
        //                 text: instances[key],
        //                 'data-id': key,
        //             }))
        //         })

        //     }
        // })
    } // ---- end of getUrls ---- //

    /** Prep for edit
     * @param {*} node A node instance as seen from the Node-RED Editor
     */
    function onEditPrepare(node) {
        mylog('uib-sender onEditPrepare ', node)

        // initial checkbox states
        if (!node.passthrough) node.passthrough = false
        $('#node-input-passthrough')
            // Initial setting
            .prop('checked', node.passthrough)
            // If the setting changes, change the number of output ports
            .on('change', function passthroughChange() {
                if ( $(this).prop('checked') === true ) {
                    node.outputs = 1
                    $('#node-input-return').prop('checked', false)
                } else if ( $('#node-input-return').prop('checked') === false ) {
                    node.outputs = 0
                }
            })
        if (!node.return) node.return = false
        $('#node-input-return')
            // Initial setting
            .prop('checked', node.return)
            // If the setting changes, change the number of output ports
            .on('change', function returnChange() {
                if ( $(this).prop('checked') === true ) {
                    node.outputs = 1
                    $('#node-input-passthrough').prop('checked', false)
                } else if ( $('#node-input-passthrough').prop('checked') === false ) {
                    node.outputs = 0
                }
            })

        // Deal with the url
        getUrls()

        if ( node.uibId in uibInstances ) {
            // console.log( 'uibuilder node ID is known', node.url, node.uibId)
            // We know the ID, always look up the latest name
            const chkUrl = uibInstances[node.uibId]
            if (chkUrl !== node.url) { // The url for this node changed so force a re-deploy
                RED.nodes.dirty(true)
                node.changed = true
            }
            node.url = uibInstances[node.uibId]
        } else if ( Object.values(uibInstances).includes(node.url) ) {
            // console.log( 'We didnt know the id but we found the url', node.url, node.uibId, Object.keys(uibInstances)[Object.values(uibInstances).indexOf(node.url)])
            // We didn't know the ID but we know the last url so set the ID - always force a redeploy in this case
            node.uibId = uibInstances[Object.keys(uibInstances)[Object.values(uibInstances).indexOf(node.url)]]
            RED.nodes.dirty(true)
            node.changed = true
        } else {
            // console.log( 'Neither id nor url found', node.url, node.uibId)
            node.valid = false
        }

        $('#node-input-url')
            .on('change', function() {
                node.uibId = Object.keys(uibInstances)[Object.values(uibInstances).indexOf(this.value)]
                // console.log('>> URL Change >>', this.value, node.uibId, Object.keys(uibInstances)[Object.values(uibInstances).indexOf(this.value)])
            })

        if ( node.url && node.url.length > 0 ) {
            $(`#node-input-url option[value="${node.url}"]`).prop('selected', true)
            $('#node-input-url').val(node.url)
        }

        window['tiDoTooltips']('#ti-edit-panel') // Do this at the end
    } // ----- end of onEditPrepare() ----- //

    /** When node type is added to the palette
     * Which happens on load of the Editor
     * @param {*} node -
     */
    function onPaletteAdd(node) {
        // console.log('uib-sender onPaletteAdd ', node)
    } // ---- End of onPaletteAdd ---- //

    // @ts-ignore
    RED.nodes.registerType(moduleName, {
        category: paletteCategory,
        color: paletteColor,
        defaults: {
            url: { value: '', required: true },
            uibId: { value: '' }, // ID of selected uibuilder instance
            name: { value: '' },
            topic: { value: '' },
            passthrough: { value: false },
            return: { value: false },
            outputs: { value: 0 },
        },
        align: 'right',
        inputs: 1,
        inputLabels: 'Msg with topic property',
        outputs: 0,
        outputLabels: ['Input msg with node ID added'],
        icon: 'link-out.svg',
        paletteLabel: nodeLabel,
        label: function () { return this.name || this.url || nodeLabel },

        oneditprepare: function() { onEditPrepare(this) },

        /** When this node is added to the palette - happens on (re)load of Editor as well */
        onpaletteadd: function() { onPaletteAdd(this) },

    }) // ---- End of registerType() ---- //

}())</script><script type="text/html" data-template-name="uib-sender"><div id="ti-edit-panel">

    <div aria-label="uibuilder URL to associate with" class="form-row" title="uibuilder URL to associate with">
        <label for="node-input-url"><i class="fa fa-globe"></i> URL</label>
        <select id="node-input-url">
            <option value="" name="">--choose a uibuilder instance--</option>
        </select>
    </div>

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
    <div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> Topic</label>
        <input type="text" id="node-input-topic">
    </div>

    <div class="form-row">
        <input type="checkbox" id="node-input-passthrough" style="display:inline-block; width:15px; vertical-align:baseline;">
        <label for="node-input-passthrough" style="width: 90%;">Pass input msg to output?</label>
    </div>

    <div class="form-row">
        <input type="checkbox" id="node-input-return" style="display:inline-block; width:15px; vertical-align:baseline;">
        <label for="node-input-return" style="width: 90%;">Allow return messages?</label>
    </div>

</div></script><script type="text/html" data-help-name="uib-sender"><p>
    An easy method of sending messages to your uibuilder front-end from anywhere in your flows 
    and a method of easily getting a response back again.
</p>
<p>
    See <a href="./uibuilder/techdocs/#/sender-node" target="_blank">Documentation: Using the sender node</a> for more detail.
</p>

<h3>Inputs</h3>
<dl class="message-properties">
    <dt class="optional">payload <span class="property-type">string | buffer</span></dt>
    <dd> Optionally, the payload of the message to send to all connected client browser tabs. </dd>

    <dt class="optional">topic <span class="property-type">string</span></dt>
    <dd> Optionally, the MQTT topic to use. Takes preference over the topic defined in settings.</dd>
</dl>

<h3>Outputs</h3>
<p>
    If <code>Pass input msg to output?</code> is set, the input message is sent to the output.
</p>
<p>
    If <code>Allow return messages?</code> is set, any message send from the matching uibuilder front-end app
    and containing the right <code>_uib.originator</code> property is sent to the output.
</p>

<h3>Node Settings</h3>
<dl class="message-properties">
    <dt>URL <span class="property-type">string (dropdown)</span></dt>
    <dd>An existing uibuilder node.</dd>

    <dt>Name <span class="property-type">string</span></dt>
    <dd>A short description shown in the admin interface.</dd>

    <dt>Topic <span class="property-type">string</span></dt>
    <dd>A topic name to use if the incoming msg does not contain one.</dd>

    <dt>Pass input msg to output? <span class="property-type">boolean</span></dt>
    <dd>
        If selected, an output port will appear and any input msg will be also delivered to the output.
        This allows you to use the node in-line with a flow.
    </dd>

    <dt>Allow return messages? <span class="property-type">boolean</span></dt>
    <dd>
        If selected, an output port will appear.
        This allows you to get return messages back from your uibuilder front-end app.
        When returning a message, include the <code>_uib.originator</code> property with a value of
        the sender node's node ID. You can get that by sending a message through the sender node.
    </dd>
</dl></script>
</div><div><!-- --- [red-module:node-red-contrib-uibuilder/uib-list] --- -->
<!--
    Copyright (c) 2017-2023 Julian Knight (Totally Information)

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

<link type="text/css" rel="stylesheet" href="./Node-RED _ maindashboard_files/ti-common.css" media="all">
<script src="./Node-RED _ maindashboard_files/ti-common.js"></script>

<script type="text/html" data-template-name="uib-list">
<div id="ti-edit-panel">
        
    <div style="border:3px solid red;margin:10px;padding:10px;width:70%;text-align: center;background-color: hsla(13, 76%, 80%, 0.2);">
        <b>THIS NODE IS NOW DEPRECATED.</b><br>PLEASE SWITCH TO USING THE <code>uib-element</code> node instead.
    </div>

    <div aria-label="Note: only works with new library" class="form-row" style="max-width: 450px">
        <b>NOTE:</b> This node only works if you are using the new <i>ES Module</i> version of the uibuilder front-end
        client library. It does not work with the previous <code>uibuilderfe</code> library.
    </div>

    <div aria-label="uibuilder URL to associate with" class="form-row" title="uibuilder URL to associate with">
        <label for="node-input-url"><i class="fa fa-globe"></i> URL</label>
        <input type="text" id="node-input-url" style="width:70%;"></input>
    </div>

    <div aria-label="List element id" class="form-row" title="The HMTL element id to apply to the created list">
        <label for="node-input-elementid"><i class="fa fa-file-code-o"></i> List ID</label>
        <input type="text" id="node-input-elementid" placeholder="Must be a valid HTML element id">
    </div>

    <div aria-label="List type" class="form-row" title="The type of list to create">
        <label for="node-input-elementtype"><i class="fa fa-list"></i> Type</label>
        <input type="text" id="node-input-elementtype" style="width:70%;"></input>
    </div>

    <div aria-label="Parent CSS Selector" class="form-row" title="A CSS selector that uniquely identifies the HTML parent element to attach the new list to">
        <label for="node-input-parent"><i class="fa fa-level-up"></i> Parent</label>
        <input type="text" id="node-input-parent" placeholder="Optional. CSS Selector">
    </div>

    <div aria-label="Outout definition object instead of sending" class="form-row" title="Outputs the configuration instead of sending it to the front-end">
        <input type="checkbox" id="node-input-passthrough" style="display:inline-block; width:15px; vertical-align:baseline;">
        <label for="node-input-passthrough" style="width: 90%;">Output instead of send?</label>
    </div>

    <div aria-label="Only replay cache if client as actually new" title="A new client comes from a page-load, not a reconnection" class="form-row">
        <input type="checkbox" id="node-input-cacheOn" style="display: inline-block; width: auto; vertical-align: top;" checked>
        <label for="node-input-cacheOn" style="width: 90%;">Use the cache?</label>
    </div>
    <div aria-label="Select which context store and variable to use" class="form-row">
        <label for="node-input-storeName" style="width:25%"><i class="fa fa-database"></i> Store</label>
        <label for="node-input-storeContext" style="width:25%"><i class="fa fa-database"></i> Type</label>
        <label for="node-input-varName" style="width:41%"><i class="fa fa-tag"></i> Variable Name</label><br>
        <input type="text" id="node-input-storeName" style="width:25%"></input>
        <input type="text" id="node-input-storeContext" style="width:25%"></input>
        <input type="text" id="node-input-varName" value="uib_cache" title="Can only change if Type is not 'Node'" placeholder="REQD: Context variable name" style="width:41%">
    </div>
    <div aria-label="Only replay cache if client as actually new" title="A new client comes from a page-load, not a reconnection" class="form-row">
        <input type="checkbox" id="node-input-newcache" style="display: inline-block; width: auto; vertical-align: top;" checked>
        <label for="node-input-newcache" style="width: 90%;">Only replay cache when client is really new</label>
    </div>

    <hr>

    <div aria-label="Node Name" class="form-row" title="Node Name (descriptive only)">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>

    <div aria-label="Information" class="form-row form-tips node-help" style="width:89%">
        <p>
            With no <code>msg.mode</code> set, sending another message will 
            automatically remove and replace the list.
        </p>
        <!-- <p>
            In order to <b>update</b> an existing list rather than replacing it,
            make sure to set <code>msg.mode</code> to "update". In that case,
            Whatever you send will be added to the list instead of replacing it.
        </p> -->
        <p>
            To <b>remove</b> an existing list, set <code>msg.mode</code> to "remove".
            This will also clear the cache.
        </p>
        <p>
            If node status is "Data Registered", when a new client connects to uibuilder,
            it will immediately be sent a copy of the data so that all connected clients
            have the same display.
        </p>
        <p>
            If you need to do more complex tasks such as update specific entries in the list,
            set the node to just output the configuration and then use the documentation to
            tweak it accordingly.
        </p>
    </div>

</div>

</script>



<script type="text/javascript">
    /* eslint-disable strict */
    
    // ! DEPRECATING - REMOVE IN NEXT MAJOR RELEASE
    
    // Isolate this code
    (function () {
        'use strict'
    
        /** Module name must match this nodes html file @constant {string} moduleName */
        const moduleName  = 'uib-list'
        /** Node's label @constant {string} paletteCategory */
        const nodeLabel  = moduleName
        /** Node's palette category @constant {string} paletteCategory */
        const paletteCategory  = 'uibuilder'
        /** Node's background color @constant {string} paletteColor */
        const paletteColor  = '#F6E0F8' // '#E6E0F8'
    
        /** Get all of the current uibuilder URL's */
        function getUrls() {
            $.ajax({
                type: 'GET',
                async: false,
                dataType: 'json',
                url: './uibuilder/admin/dummy',
                data: {
                    'cmd': 'listinstances',
                },
                success: function(instances) {
                    const urls = []
                    Object.keys(instances).forEach( (val, i, arr) => {
                        urls.push({ value: instances[val], label: instances[val] })
                        // $('#node-input-url').append($('<option>', {
                        //     value: instances[val],
                        //     text: instances[val],
                        // }))
                    })
    
                    $('#node-input-url').typedInput({
                        types: [
                            {
                                value: 'urls',
                                options: urls,
                            }
                        ]
                    })
                }
            })
    
        } // ---- end of getUrls ---- //
    
        /** Populate the store dropdown */
        function populateUseStoreDropdown() {
            const storeNames = []
    
            RED.settings.context.stores.forEach( store => {
                storeNames.push({ value: store, label: store })
            })
    
            $('#node-input-storeName').typedInput({
                types: [
                    {
                        value: 'storeNames',
                        options: storeNames,
                    }
                ]
            })
        }
    
        /** Prep for edit
         * @param {*} node A node instance as seen from the Node-RED Editor
         */
        function onEditPrepare(node) {
            // initial checkbox states
            if (!node.passthrough) node.passthrough = false
            $('#node-input-passthrough')
                // Initial setting
                .prop('checked', node.passthrough)
                // If the setting changes, change the number of output ports
                .on('change', function passthroughChange() {
                    if ( $(this).prop('checked') === true ) {
                        node.outputs = 1
                    } else {
                        node.outputs = 0
                    }
                })
    
            $('#node-input-elementtype').typedInput({
                types: [
                    {
                        value: 'elementType',
                        options: [
                            // @ts-expect-error
                            { value: 'ul', label: 'Unordered (ul)' },
                            // @ts-expect-error
                            { value: 'ol', label: 'Ordered (ol)' },
                            // @ts-expect-error
                            { value: 'dl', label: 'Definition (dl)' },
                        ]
                    }
                ]
            })
    
            // One-day maybe, request put in, doesn't currently work since context isn't an option
            // $('#node-input-store').typedInput({
            //     type: 'str',
            //     default: 'node',
            //     types: ['context', 'flow', 'global'],
            //     typeField: '#node-input-store-type'
            // })
            $('#node-input-storeContext').typedInput({
                type: 'contextType',
                types: [
                    {
                        value: 'contextType',
                        options: [
                            // @ts-expect-error
                            { value: 'context', label: 'Node' },
                            // @ts-expect-error
                            { value: 'flow', label: 'Flow' },
                            // @ts-expect-error
                            { value: 'global', label: 'Global' },
                        ]
                    }
                ]
            })
    
            $('#node-input-storeContext').on('change',  function() {
                if ( $(this).val() === 'context' ) {
                    $('#node-input-varName').val('uib_list').prop( 'disabled', true )
                } else {
                    $('#node-input-varName').val(`uib_list_${node.id}`).prop( 'disabled', false )
                }
            })
    
            // Set up context store select drop-down
            populateUseStoreDropdown()
    
            // Deal with the url
            getUrls()
            if ( node.url && node.url.length > 0 ) {
                $(`#node-input-url option[value="${node.url}"]`).prop('selected', true)
                $('#node-input-url').val(node.url)
            }
    
            // If caching turned off, grey out settings
            $('#node-input-cacheOn').on('change',  function() {
                if (this.checked === true) {
                    $('#node-input-storeName').typedInput('enable')
                    $('#node-input-storeContext').typedInput('enable')
                    if ($('#node-input-storeContext').val() !== 'context')
                        $('#node-input-varName').prop('disabled', false)
                    $('#node-input-newcache').prop('disabled', false)
                } else {
                    $('#node-input-storeName').typedInput('disable')
                    $('#node-input-storeContext').typedInput('disable')
                    $('#node-input-varName').prop('disabled', true)
                    $('#node-input-newcache').prop('disabled', true)
                }
            })
    
        } // ----- end of onEditPrepare() ----- //
    
        // @ts-ignore
        RED.nodes.registerType(moduleName, {
            category: paletteCategory,
            color: paletteColor,
            defaults: {
                url: { value: '', required: true },
                elementid: { value: '', required: true },
                elementtype: { value: '', required: true },
                parent: { value: '' },
                passthrough: { value: false },
                outputs: { value: 0 },
                name: { value: '' },
                // Caching
                cacheOn: { value: true },
                storeName: { value: 'default', required: true },
                storeContext: { value: 'context' },
                varName: { value: 'uib_list', required: true },
                newcache: { value: true },
            },
            align: 'right',
            inputs: 1,
            inputLabels: '',
            outputs: 0,
            outputLabels: ['List configuration'],
            icon: 'font-awesome/fa-list',
            paletteLabel: nodeLabel,
            label: function () {
                return `<${this.url}>${this.parent ? `${this.parent}.` : ''}${this.elementid || this.name || moduleName} [${this.elementtype}]`
            },
    
            /** Prepares the Editor panel */
            oneditprepare: function() { onEditPrepare(this) },
    
            /** Runs before save (Actually when Done button pressed) - oneditsave */
            /** Runs before cancel - oneditcancel */
            /** Handle window resizing for the editor - oneditresize */
            /** Show notification warning before allowing delete - oneditdelete */
    
        }) // ---- End of registerType() ---- //
    
    }())
    
</script>
<script type="text/html" data-help-name="uib-list">

<p>
    <b>DEPRECATING: Will be removed in a future release. Use the <code>uib-element</code> node instead</b>. Node demonstrating a way of building a ui element from a node.<br>
    <b>This node requires the "new" front-end client library</b> (either the IIFE or ESM version).
</p>
<p>
    Please try out the example in the import library.
</p>

<h3>Inputs</h3>
<dl class="message-properties">
    <dt>payload <span class="property-type">array | object</span></dt>
    <dd>
        The array or object that defines the output list.<br>
        A simple array of strings can be used for UL/OL lists. An array of key/value objects is needed for DL lists.
    </dd>

    <dt class="optional">mode <span class="property-type">string</span></dt>
    <dd> Optionally, set to "remove" which will remove the list from the UI. Payload is not needed in this case, it will be ignored.</dd>

    <dt class="optional">topic <span class="property-type">string</span></dt>
    <dd> Optionally, the MQTT topic to use. Takes preference over the topic defined in settings.</dd>
</dl>

<h3>Outputs</h3>
<ol class="node-ports">

    <li>List Configuration (Optional output)
        <dl class="message-properties">
            <dt>_uib <span class="property-type">object</span></dt>
            <dd>
                <code>msg._uib.originator</code> contains the node id of the originating uib-list node.
            </dd>

            <dt>_ui <span class="property-type">object</span></dt>
            <dd>
                The _ui configuration properties that defines the creation of the list.<br>
                Use this in your own flows or in a JSON input for an initial setup of the UI if desired.
            </dd>

            <dt>topic <span class="property-type">string</span></dt>
            <dd>
                The input topic.
            </dd>
    </li>

</ol>

<h3>Node Settings</h3>
<dl class="message-properties">
    <dt>URL <span class="property-type">selection</span></dt>
    <dd>The uibuilder instance to connect to.</dd>

    <dt>List ID <span class="property-type">string</span></dt>
    <dd>
        The HTML element id of the resulting list tag.<br>
        This is required otherwise later updates and removals cannot happen.
    </dd>

    <dt>Type <span class="property-type">selection</span></dt>
    <dd>
        What kind of list to create?<br>
        <ul>
            <li>UL: Unordered list (bullets)</li>
            <li>OL: Ordered list (numbered)</li>
            <li>
                DL: Definition list (Term/Definition). This type needs to receive at least key/value objects.
                The key will be used as the term and the value as the definition.
            </li>
        </ul>
    </dd>

    <dt>Parent <span class="property-type">string</span></dt>
    <dd>
        A CSS selector that the new list will be attached to.
        E.g. "div#myid" or just "#myid" would attach the list as a child of a DIV tag with an id of <code>myid</code>.<br>
        "p.myclass" would attach the list as a child of a P tag that has a class including <code>myclass</code>.
        <p>
            If a parent is not specified, the list will be added as a new child of the <code>body</code> tag. (e.g. the end of the UI)
        </p>
    </dd>

    <dt>Output instead of send <span class="property-type">string</span></dt>
    <dd>
        By default, output is sent to the linked uibuilder node and therefore to any connected clients.<br>
        Selecting this flag, an output port is added to the node. The output contains the standard msg._ui object.
        You can use that in your own flows or loaded JSON configuration. In that case, the msg is not forwarded to clients.
    </dd>

    <dt>Name <span class="property-type">string</span></dt>
    <dd>A short description shown in the admin interface</dd>
</dl>

<h3>Details</h3>
<p>
    You define the type of list and the parent uibuilder node and then send a payload to the node to create/update the list.
</p>
<p>
    In addition to sending a simple array, you can send an object. The objects keys will be prefixed onto the values in the list display. 
    Nested objects will be flattened into comma-separated text.
</p>
<p>
    To empty the cache and remove from the connected clients, send a msg containing a <code>mode</code> property set to "remove".
</p>

</script>
</div><div><!-- --- [red-module:node-red-contrib-viseo-mustache/node-mustache] --- -->
<script type="text/javascript">
    RED.nodes.registerType('node-mustache', {
        category: '🛠️_tools',
        color: '#3FADB5',
        defaults: {
            name: { value: ""},
            input: { value: ""},
            inputType: { value: "msg" },
            dataType: { value: "msg"},
            output: { value: ""},
            outputType: { value: "msg" },
        },
        inputs:  1,
        outputs: 1,
        icon: "template.png",
        align: "left",
        paletteLabel: "Mustache",
        label: function() { return this.name || 'Mustache'; },
        oneditprepare: function() {
            $("#node-input-input").typedInput({
                typeField: "#node-input-inputType",
                types: ["msg", "global"]
            });

            $("#node-input-output").typedInput({
                typeField: "#node-input-outputType",
                types: ["msg", "global"]
            });

        },
        oneditsave: function() {

        }
    });
</script>

<script type="text/x-red" data-template-name="node-mustache">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
    <hr/>
    <div class="form-row">
        <label for="node-input-input"><i class="fa fa-brackets-curly"></i> Template</label>
        <input type="text" id="node-input-input">
        <input type="hidden" id="node-input-inputType">
    </div>
    <div class="form-row">
        <label for="node-input-dataType"><i class="fa fa-database"></i> Data from</label>
        <select id="node-input-dataType">
            <option value="msg">msg</option>
            <option value="global">global</option>
        </select>
    </div>
    <hr/>
    <div class="form-row">
        <label for="node-input-output"><i class="fa fa-sign-out"></i> Output</label>
        <input type="text" id="node-input-output">
        <input type="hidden" id="node-input-outputType">
    </div>
    
</script>


<script type="text/x-red" data-help-name="node-mustache">
   <p>Uses input as template for mustache. The input value must use the mustache syntax.</p>

    <h3>Details</h3>
    <p>Chose the <i>Scopes</i> for input, output and data.</p>
    <p>Scopes</p>
    <dl class="message-properties">
        <dt>Global</dt>
        <dd>The Node-RED global context.</dd>
        <dt>Msg</dt>
        <dd>The current message context.</dd>
    </dl>

    <h3>References</h3>
    <ul>
        <li><a href="https://github.com/NGRP/node-red-contrib-viseo/">VISEO BotMaker</a> - the nodes github repository</li>
    </ul>
</script>
</div><div><!-- --- [red-module:node-red-contrib-web-worldmap/worldmap] --- -->
<script type="text/html" data-template-name="worldmap">
<div class="form-row">
    <label for="node-input-name"><i class="fa fa-file"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="name">
</div>
<div class="form-row">
    <table border="0" width="96%">
    <tr><td width="100px"><i class="fa fa-globe"></i> Start<td>Latitude</td><td>Longitude</td><td width="60px">Zoom</td></tr>
    <tr><td>&nbsp;</td>
    <td><input type="text" id="node-input-lat" style="width:90px;"></td>
    <td><input type="text" id="node-input-lon" style="width:90px;"></td>
    <td><input type="text" id="node-input-zoom" style="width:60px;" placeholder="1 - 18"></td>
    </tr>
    </table>
</div>
<div class="form-row">
    <label for="node-input-maplist"><i class="fa fa-list"></i> Map list</label>
    <input type="text" id="node-input-maplist" placeholder="List of Maps">
</div>
<div class="form-row">
    <label for="node-input-layer"><i class="fa fa-map"></i> Base map</label>
    <input type="text" id="node-input-layer" placeholder="Initial Map">
</div>
<div class="form-row" id="customMap">
    <label for="node-input-mapname">&nbsp;&nbsp;&nbsp;Map name</label>
    <input type="text" id="node-input-mapname" placeholder="name for Layer Menu"><br/>
    <label for="node-input-mapurl">&nbsp;&nbsp;&nbsp;Map URL</label>
    <input type="text" id="node-input-mapurl" placeholder="URL"><br/>
    <label for="node-input-mapopt">&nbsp;&nbsp;&nbsp;Map options</label>
    <input type="text" id="node-input-mapopt" placeholder="options (Leaflet JSON string)"><br/>
    <label for="node-input-mapwms">&nbsp;&nbsp;&nbsp;</label>
    <input type="checkbox" id="node-input-mapwms" style="display:inline-block; width:20px; vertical-align:baseline;">
    Map server uses WMS
</div>
<div class="form-row">
    <label for="node-input-overlist"><i class="fa fa-map-o"></i> Overlays</label>
    <input type="text" id="node-input-overlist" placeholder="Initial Overlays">
</div>
<div class="form-row">
    <label for="node-input-cluster"><i class="fa fa-dot-circle-o"></i>Cluster when</label>
    zoom level is less than <input type="text" id="node-input-cluster" placeholder="0 (0,off - 19)" style="width:100px;">
</div>
<div class="form-row">
    <label for="node-input-maxage"><i class="fa fa-clock-o"></i> Max age</label>
    Remove markers after <input type="text" id="node-input-maxage" placeholder="600" style="width:67px;"> seconds
</div>
<div class="form-row">
    <label for="node-input-usermenu"><i class="fa fa-user"></i> User menu</label>
    <select id="node-input-usermenu" style="width:70px;">
        <option value="show">Show</option>
        <option value="hide">Hide</option>
    </select>
    <i class="fa fa-bars" style="margin-left:53px;"></i> Layer menu
    <select id="node-input-layers" style="width:70px;">
        <option value="show">Show</option>
        <option value="hide">Hide</option>
    </select>
</div>
<div class="form-row">
    <label for="node-input-panlock"><i class="fa fa-lock"></i> Lock map</label>
    <select id="node-input-panlock" style="width:70px;">
        <option value="false">False</option>
        <option value="true">True</option>
    </select>
    <i class="fa fa-lock" style="margin-left:54px;"></i> Lock zoom
    <select id="node-input-zoomlock" style="width:70px;">
        <option value="false">False</option>
        <option value="true">True</option>
    </select>
</div>
<div class="form-row">
    <label for="node-input-panit"><i class="fa fa-arrows-alt"></i> Auto-pan</label>
    <select id="node-input-panit" style="width:80px;">
        <option value="true">Enable</option>
        <option value="false">Disable</option>
    </select>
    <i class="fa fa-hand-o-right" style="margin-left:43px;"></i> Right click
    <select id="node-input-hiderightclick" style="width:80px;">
        <option value="false">Enable</option>
        <option value="true">Disable</option>
    </select>
</div>
<div class="form-row">
    <label for="node-input-coords"><i class="fa fa-compass"></i> Co-ordinates</label>
    <select id="node-input-coords" style="width:101px;">
        <option value="none">Not shown</option>
        <option value="deg">Degrees</option>
        <option value="dms">D.M.S</option>
        <option value="utm">UTM</option>
        <option value="mgrs">MGRS</option>
        <option value="qth">QTH/Maidenhead</option>
    </select>
    <i class="fa fa-th" style="margin-left:22px;"></i> Graticule
    <select id="node-input-showgrid" style="width:101px;">
        <option value="false">Not shown</option>
        <option value="true">Visible</option>
    </select>
</div>
<div class="form-row">
	<label for="node-input-showruler"><i class="fa fa-window-minimize"></i> Ruler</label>
    <select id="node-input-showruler" style="width:101px;">
        <option value="false">Not shown</option>
        <option value="true">Visible</option>
    </select>
</div>
<div class="form-row">
    <label for="node-input-path"><i class="fa fa-globe"></i> Web Path</label>
    <input type="text" id="node-input-path" placeholder="worldmap" style="width:30%;">
    <i class="fa fa-hand-paper-o" style="margin-left:22px;"></i> File Drop
    <select id="node-input-allowFileDrop" style="width:80px;">
        <option value="false">Disable</option>
        <option value="true">Enable</option>
    </select>
</div>
<div class="form-tips">Set <i>Cluster when</i> to 0 to disable clustering of points.<br/>
If <i>Web Path</i> is left empty, then by default <code>⌘⇧m</code> - <code>ctrl-shift-m</code> will load the map in a new tab.</div>
</script>




<script type="text/html" data-template-name="ui_worldmap">
<div class="form-row">
    <label for="node-input-name"><i class="fa fa-file"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="name">
</div>
<div class="form-row" id="template-row-group">
    <label for="node-input-group"><i class="fa fa-table"></i> Group</span></label>
    <input type="text" id="node-input-group">
</div>
<div class="form-row" id="template-row-size">
    <label><i class="fa fa-object-group"></i> Size</span></label>
    <input type="hidden" id="node-input-width">
    <input type="hidden" id="node-input-height">
    <button class="editor-button" id="node-input-size"></button>
</div>
<div class="form-row">
    <table border="0" width="96%">
    <tr><td width="100px"><i class="fa fa-globe"></i> Start<td>Latitude</td><td>Longitude</td><td width="60px">Zoom</td></tr>
    <tr><td>&nbsp;</td>
    <td><input type="text" id="node-input-lat" style="width:90px;"></td>
    <td><input type="text" id="node-input-lon" style="width:90px;"></td>
    <td><input type="text" id="node-input-zoom" style="width:60px;" placeholder="1 - 18"></td>
    </tr>
    </table>
</div>
<div class="form-row">
    <label for="node-input-maplist"><i class="fa fa-list"></i> Map list</label>
    <input type="text" id="node-input-maplist" placeholder="List of Maps">
</div>
<div class="form-row" id="node-input-baselayer">
    <label for="node-input-layer"><i class="fa fa-map"></i> Base map</label>
    <input type="text" id="node-input-layer" placeholder="Initial Map">
</div>
<div class="form-row" id="customMap">
    <label for="node-input-mapname">&nbsp;&nbsp;&nbsp;Map name</label>
    <input type="text" id="node-input-mapname" placeholder="name for Layer Menu"><br/>
    <label for="node-input-mapurl">&nbsp;&nbsp;&nbsp;Map URL</label>
    <input type="text" id="node-input-mapurl" placeholder="URL"><br/>
    <label for="node-input-mapopt">&nbsp;&nbsp;&nbsp;Map options</label>
    <input type="text" id="node-input-mapopt" placeholder="options (Leaflet JSON string)"><br/>
    <label for="node-input-mapwms">&nbsp;&nbsp;&nbsp;</label>
    <input type="checkbox" id="node-input-mapwms" style="display:inline-block; width:20px; vertical-align:baseline;">
    Map server uses WMS
</div>
<div class="form-row" id="node-input-overlaylist">
    <label for="node-input-overlist"><i class="fa fa-map-o"></i> Overlays</label>
    <input type="text" id="node-input-overlist" placeholder="Initial Overlays">
</div>
<div class="form-row">
    <label for="node-input-cluster"><i class="fa fa-dot-circle-o"></i>Cluster when</label>
    zoom level is less than <input type="text" id="node-input-cluster" placeholder="0 (0,off - 19)" style="width:100px;">
</div>
<div class="form-row">
    <label for="node-input-maxage"><i class="fa fa-clock-o"></i> Max age</label>
    Remove markers after <input type="text" id="node-input-maxage" placeholder="600" style="width:67px;"> seconds
</div>
<div class="form-row">
    <label for="node-input-usermenu"><i class="fa fa-user"></i> User menu</label>
    <select id="node-input-usermenu" style="width:70px;">
        <option value="show">Show</option>
        <option value="hide">Hide</option>
    </select>
    <i class="fa fa-bars" style="margin-left:53px;"></i> Layer menu
    <select id="node-input-layers" style="width:70px;">
        <option value="show">Show</option>
        <option value="hide">Hide</option>
    </select>
</div>
<div class="form-row">
    <label for="node-input-panlock"><i class="fa fa-lock"></i> Lock map</label>
    <select id="node-input-panlock" style="width:70px;">
        <option value="false">False</option>
        <option value="true">True</option>
    </select>
    <i class="fa fa-lock" style="margin-left:54px;"></i> Lock zoom
    <select id="node-input-zoomlock" style="width:70px;">
        <option value="false">False</option>
        <option value="true">True</option>
    </select>
</div>
<div class="form-row">
    <label for="node-input-panit"><i class="fa fa-arrows-alt"></i> Auto-pan</label>
    <select id="node-input-panit" style="width:80px;">
        <option value="true">Enable</option>
        <option value="false">Disable</option>
    </select>
    <i class="fa fa-hand-o-right" style="margin-left:43px;"></i> Right click
    <select id="node-input-hiderightclick" style="width:80px;">
        <option value="false">Enable</option>
        <option value="true">Disable</option>
    </select>
</div>
<div class="form-row">
    <label for="node-input-coords"><i class="fa fa-compass"></i> Co-ordinates</label>
    <select id="node-input-coords" style="width:101px;">
        <option value="none">Not shown</option>
        <option value="deg">Degrees</option>
        <option value="dms">D.M.S</option>
        <option value="utm">UTM</option>
        <option value="mgrs">MGRS</option>
        <option value="gth">QTH/Maidenhead</option>
    </select>
    <i class="fa fa-th" style="margin-left:22px;"></i> Graticule
    <select id="node-input-showgrid" style="width:101px;">
        <option value="false">Not shown</option>
        <option value="true">Visible</option>
    </select>
</div>
<div class="form-row">
	<label for="node-input-showruler"><i class="fa fa-window-minimize"></i> Ruler</label>
    <select id="node-input-showruler" style="width:101px;">
        <option value="false">Not shown</option>
        <option value="true">Visible</option>
    </select>
</div>
<div class="form-row">
    <label for="node-input-path"><i class="fa fa-globe"></i> Web Path</label>
    <input type="text" id="node-input-path" placeholder="worldmap" style="width:30%;">
    <i class="fa fa-hand-paper-o" style="margin-left:22px;"></i> File Drop
    <select id="node-input-allowFileDrop" style="width:80px;">
        <option value="false">Disable</option>
        <option value="true">Enable</option>
    </select>
</div>
<div class="form-tips">Set <i>Cluster when</i> to 0 to disable clustering of points.<br/>
If <i>Web Path</i> is left empty, then by default <code>⌘⇧m</code> - <code>ctrl-shift-m</code> will load the map in a new tab.</div>
</script>



<script type="text/javascript">
    var mlist = [
        { value: "OSMG", label: "OpenStreetMap Greyscale" },
        { value: "OSMC", label: "OpenStreetMap" },
        { value: "OSMH", label: "OpenStreetMap Humanitarian" },
        { value: "EsriC", label: "ESRI Streetmap" },
        { value: "EsriS", label: "ESRI Satellite" },
        { value: "EsriT", label: "ESRI Topography" },
        { value: "EsriO", label: "ESRI Ocean" },
        { value: "EsriDG", label: "ESRI Dark Grey" },
        { value: "NatGeo", label: "National Geographic" },
        { value: "UKOS", label: "UK OS Opendata" },
        { value: "OpTop", label: "Open Topo Map" },
        { value: "HB", label: "Hike Bike OSM" },
        { value: "AN", label: "Autonavi (Chinese)" },
        { value: "ST", label: "Stamen Terrain" },
        { value: "SW", label: "Stamen Watercolor" }
    ]
    var olist = [
        { value: "DR", label: "Drawing" },
        { value: "CO", label: "Countries" },
        { value: "RA", label: "Rainfall" },
        { value: "DN", label: "Day/Night" },
        { value: "BU", label: "Buildings" },
        { value: "RW", label: "Railways" },
        { value: "SN", label: "Ship Navigation" },
        { value: "AC", label: "Air Corridors" },
        { value: "TL", label: "Place Labels" },
        { value: "HM", label: "Heatmap" }
    ]
    var lnk = document.location.host+RED.settings.httpNodeRoot+"/worldmap";
    lnk = lnk.replace(new RegExp('\/{1,}','g'),'/');
    if (!RED.hasOwnProperty("actions")) {
        RED.keyboard.add("*",/* m */ 77,{ctrl:true, shift:true},function() { window.open(document.location.protocol+"//"+lnk) });
    }
    else {
        RED.actions.add("Show Map",function() { window.open(document.location.protocol+"//"+lnk) });
        RED.keyboard.add("*","ctrl-shift-m","Show Map");
    }
    RED.nodes.registerType('worldmap',{
        category: 'location',
        color:"darksalmon",
        defaults: {
            name: {value:""},
            lat: {value:""},
            lon: {value:""},
            zoom: {value:""},
            layer: {value:""},
            cluster: {value:""},
            maxage: {value:""},
            usermenu: {value:"show"},
            layers: {value:"show"},
            panit: {value:"false"},
            panlock: {value:"false"},
            zoomlock: {value:"false"},
            hiderightclick: {value:"false"},
            coords: {value:"false"},
            showgrid: {value:"false"},
			showruler: {value:"false"},
            allowFileDrop: {value:"false"},
            path: {value:"/worldmap"},
            overlist: {value:"DR,CO,RA,DN"},
            maplist: {value:"OSMG,OSMC,EsriC,EsriS,UKOS"},
            mapname: {value:""},
            mapurl: {value:""},
            mapopt: {value:"", validate:function(v) {try{ v.length===0 || JSON.parse(v); return true;} catch(e) {return false;}}},
            mapwms: {value:false}
        },
        inputs:1,
        outputs:0,
        icon: "white-globe.png",
        align: "right",
        label: function() {
            return this.name||(this.path.charAt(0)==='/'?this.path.substr(1):this.path)||"world map";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        info: function() {
            return 'The map can be found [here]('+RED.settings.httpNodeRoot.slice(0,-1)+this.path+').';
        },
        oneditprepare: function() {
            var mshort;
            if (this.maplist === undefined) {
                $("#node-input-maplist").val("OSMG,OSMC,EsriC,EsriS,EsriT,EsriO,EsriDG,NatGeo,UKOS,OpTop");
                this.maplist = "OSMG,OSMC,EsriC,EsriS,EsriT,EsriO,EsriDG,NatGeo,UKOS,OpTop";
            }
            if (this.overlist === undefined) {
                $("#node-input-overlist").val("DR,CO,RA,DN,HM");
                this.overlist = "DR,CO,RA,DN,HM";
            }
            $("#node-input-maplist").typedInput({type:"mapitem", types:[{
                value: "mapitem",
                multiple: true,
                options: mlist
            }]});
            $("#node-input-layer").typedInput({type:"laye", types:[{
                value: "laye",
                options: mshort
            }]});
            $("#node-input-overlist").typedInput({type:"overlay", types:[{
                value: "overlay",
                multiple: true,
                options: olist
            }]});
            $("#node-input-maplist").on('change', function(event, type, value) {
                mshort = mlist.filter(e => value.indexOf(e.value)!==-1);
                mshort.push({ value:"Custom", label:"Custom Map Provider" });
                $("#node-input-layer").typedInput("types", [{
                    value: "laye",
                    options: mshort
                }]);
            });
            if ($("#node-input-path").val() === undefined) {
                $("#node-input-path").val("worldmap");
                this.path = "worldmap";
            }
            if ($("#node-input-hiderightclick").val() === null) {
                $("#node-input-hiderightclick").val("false");
                this.hiderightclick = "false";
            }
            if ($("#node-input-coords").val() === null) {
                $("#node-input-coords").val("none");
                this.coords = "none";
            }
            $("#node-input-zoom").spinner({min:0, max:18});
            $("#node-input-cluster").spinner({min:0, max:19});
            $("#node-input-layer").on("change",function() {
                if ($("#node-input-layer").val() === "Custom") {
                    $("#customMap").show();
                } else {
                    $("#customMap").hide();
                }
            });
        }
    });

    $.get('-ui-worldmap', function (data) {
        if (data === "true") {
            RED.nodes.registerType('ui_worldmap',{
                category: 'dashboard',
                color: '#38989f',
                defaults: {
                    group: {type: 'ui_group', required:true},
                    order: {value: 0},
                    width: {
                        value: 0,
                        validate: function(v) {
                            var valid = true
                            var width = v||0;
                            var currentGroup = $('#node-input-group').val()|| this.group;
                            var groupNode = RED.nodes.node(currentGroup);
                            valid = !groupNode || +width <= +groupNode.width;
                            $("#node-input-size").toggleClass("input-error",!valid);
                            return valid;
                        }},
                    height: {value: 0},
                    name: {value:""},
                    lat: {value:""},
                    lon: {value:""},
                    zoom: {value:""},
                    layer: {value:""},
                    cluster: {value:""},
                    maxage: {value:""},
                    usermenu: {value:"hide"},
                    layers: {value:"hide"},
                    panit: {value:"false"},
                    panlock: {value:"false"},
                    zoomlock: {value:"false"},
                    hiderightclick: {value:"true"},
                    coords: {value:"false"},
                    showgrid: {value:"false"},
					showruler: {value:"false"},
                    allowFileDrop: {value:"false"},
                    path: {value:"/worldmap"},
                    overlist: {value:"DR,CO,RA,DN,HM"},
                    maplist: {value:"OSMG,OSMC,EsriC,EsriS,EsriT,EsriDG,UKOS"},
                    mapname: {value:""},
                    mapurl: {value:""},
                    mapopt: {value:""},
                    mapwms: {value:false}
                },
                inputs:1,
                outputs:0,
                icon: "white-globe.png",
                align: "right",
                paletteLabel: "worldmap",
                label: function() {
                    return this.name||(this.path.charAt(0)==='/'?this.path.substr(1):this.path)||"world map";
                },
                labelStyle: function() {
                    return this.name?"node_label_italic":"";
                },
                oneditprepare: function() {
                    var mshort;
                    if (this.maplist === undefined) {
                        $("#node-input-maplist").val("OSMG,OSMC,EsriC,EsriS,EsriT,EsriO,EsriDG,NatGeo,UKOS,OpTop");
                        this.maplist = "OSMG,OSMC,EsriC,EsriS,EsriT,EsriO,EsriDG,NatGeo,UKOS,OpTop";
                    }
                    if (this.overlist === undefined) {
                        $("#node-input-overlist").val("DR,CO,RA,DN,HM");
                        this.overlist = "DR,CO,RA,DN,HM";
                    }
                    $("#node-input-maplist").typedInput({type:"mapitem", types:[{
                        value: "mapitem",
                        multiple: true,
                        options: mlist.concat([{ value:"MB3d", label:"Mapbox 3D" }])
                    }]});
                    $("#node-input-layer").typedInput({type:"laye", types:[{
                        value: "laye",
                        options: mshort
                    }]});
                    $("#node-input-overlist").typedInput({type:"overlay", types:[{
                        value: "overlay",
                        multiple: true,
                        options: olist
                    }]});
                    $("#node-input-maplist").on('change', function(event, type, value) {
                        if (value && value.indexOf("MB3d") > -1) {
                            mshort = [{ value:"MB3d", label:"Mapbox 3D" }];
                            $('#node-input-maplist option').prop('selected', false);
                            $("#node-input-maplist").val("MB3d");
                            this.maplist = "MB3d";
                            $("#node-input-baselayer").hide();
                            $("#node-input-overlaylist").hide();
                        }
                        else {
                            $("#node-input-baselayer").show();
                            $("#node-input-overlaylist").show();
                            mshort = mlist.filter(e => value.indexOf(e.value)!==-1);
                            mshort.push({ value:"Custom", label:"Custom Map Provider" });
                        }
                        $("#node-input-layer").typedInput("types", [{
                            value: "laye",
                            options: mshort
                        }]);
                    });
                    $("#node-input-size").elementSizer({
                        width: "#node-input-width",
                        height: "#node-input-height",
                        group: "#node-input-group"
                    });
                    if ($("#node-input-path").val() === undefined) {
                        $("#node-input-path").val("worldmap");
                        this.path = "worldmap";
                    }
                    if ($("#node-input-hiderightclick").val() === null) {
                        $("#node-input-hiderightclick").val("false");
                        this.hiderightclick = "false";
                    }
                    if ($("#node-input-coords").val() === null) {
                        $("#node-input-coords").val("none");
                        this.coords = "none";
                    }
                    $("#node-input-zoom").spinner({min:0, max:18});
                    $("#node-input-cluster").spinner({min:0, max:19});
                    $("#node-input-layer").on("change",function() {
                        if ($("#node-input-layer").val() === "Custom") {
                            $("#customMap").show();
                        } else {
                            $("#customMap").hide();
                        }
                    });
                }
            });
        }
        else {
            console.log("ui_worldmap: Node-RED-Dashboard not found.");
        }
    });
</script>


<script type="text/html" data-template-name="worldmap in">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-file"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="name">
    </div>
    <div class="form-row">
        <label for="node-input-path"><i class="fa fa-globe"></i> Web Path</label>
        <input type="text" id="node-input-path" placeholder="worldmap">
    </div>
    <div class="form-row">
        <label for="node-input-events"><i class="fa fa-sign-out"></i> Events</label>
        <input type="text" id="node-input-events" placeholder="select events">
    </div>
</script>



<script type="text/javascript">
    RED.nodes.registerType('worldmap in',{
        category: 'location',
        color:"darksalmon",
        defaults: {
            name: {value:""},
            path: {value:"/worldmap"},
            events: {value:"connect,disconnect,point,layer,bounds,files,draw,other"}
        },
        inputs:0,
        outputs:1,
        icon: "white-globe.png",
        label: function() {
            return this.name||this.path.substr(1)||"world map";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        info: function() {
            return 'The map can be found [here]('+RED.settings.httpNodeRoot.slice(0,-1)+this.path+').';
        },
        oneditprepare: function() {
            if ($("#node-input-events").val() === "all") {
                $("#node-input-events").val("connect,disconnect,point,layer,bounds,files,draw,other");
            }
            $("#node-input-events").typedInput({type:"event", types:[{
                value: "event",
                multiple: true,
                options: [
                    { value: "connect", label: "Connect"},
                    { value: "disconnect", label: "Disconnect"},
                    { value: "point", label: "Add, move, delete point"},
                    { value: "draw", label: "Add, edit or delete drawing"},
                    { value: "layer", label: "Add, remove layers"},
                    { value: "bounds", label: "Boundary change"},
                    { value: "files", label: "File drop"},
                    { value: "other", label: "All other"}
                ]
            }]});
            $("#node-input-events").on('change', function(event, type, value) {
                this.events = value;
            });
        }
    });
</script>


<script type="text/html" data-template-name="worldmap-tracks">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-file"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="name">
    </div>
    <div class="form-row">
        <label for="node-input-depth"><i class="fa fa-map-marker"></i> Number of</label>
        points in track <input type="text" id="node-input-depth" style="width:50%" placeholder="number - default 20">
    </div>
    <div class="form-row">
        <label for="node-input-layer"><i class="fa fa-map"></i> Track Layer</label>
        <select id="node-input-layer">
            <option value="combined">on marker layer</option>
            <option value="separate">one per marker layer</option>
            <option value="single">single Track layer</option>
        </select>
    </div>
    <div class="form-row">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-smooth" style="display:inline-block; width:auto; vertical-align:top;">
        <label for="node-input-smooth" style="width:70%;">Smooth tracks using bezier curves.</label>
    </div>
</script>



<script type="text/javascript">
    RED.nodes.registerType('worldmap-tracks',{
        category: 'location',
        color:"darksalmon",
        defaults: {
            name: {value:""},
            depth: {value:20},
            layer: {value:"combined"},
            smooth: {value:false}
        },
        inputs:1,
        outputs:1,
        icon: "white-globe.png",
        paletteLabel: "tracks",
        label: function() {
            return this.name||"tracks";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
</script>


<script type="text/html" data-template-name="worldmap-hull">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-file"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="name">
    </div>
    <div class="form-row">
        <label for="node-input-prop"><i class="fa fa-ellipsis-h"></i> Property</label>
        <input type="text" id="node-input-prop" placeholder="payload property to group">
    </div>
</script>



<script type="text/javascript">
    RED.nodes.registerType('worldmap-hull',{
        category: 'location',
        color:"darksalmon",
        defaults: {
            name: {value:""},
            prop: {value:"layer",required:true}
        },
        inputs:1,
        outputs:1,
        icon: "white-globe.png",
        paletteLabel: "convex-hull",
        label: function() {
            return this.name||"convex-hull";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
</script>
<script type="text/html" data-help-name="worldmap">
    <p>Plots "things" on a web map. Needs an internet connection.</p>
    <p>It is possible to instantiate multiple worldmap nodes but each one must be given a unique
        path. Worldmap-in nodes are matched to worldmap nodes by having exactly the same path.
    <p>Shortcut - <code>⌘⇧m</code> - ctrl-shift-m to jump to the default Map (<tt>/worldmap</tt>).</p>
    <p>The minimum <code>msg.payload</code> must contain <code>name</code>, <code>lat</code> and <code>lon</code> properties, e.g.</p>
    <pre>{"name":"Joe", "lat":51, "lon":-1.05}</pre>
    <p><code>name</code> must be a unique identifier.</p>
    <p>Optional properties include</p>
    <ul>
        <li><code>layer</code> : specify a layer on the map to add marker to.</li>
        <li><code>heading</code> : combined with speed, draws a vector.</li>
        <li><code>speed</code> : combined with heading, draws a vector.</li>
        <li><code>accuracy</code> : combined with heading, draws a polygon of possible direction.</li>
        <li><code>icon</code> : <a href="https://fontawesome.com/v4.7.0/icons/" target="_new">font awesome</a> icon name or <a href="https://github.com/dceejay/RedMap/blob/master/emojilist.md" target="_new">:emoji name:</a>, or url of icon image.</li>
        <li><code>iconColor</code> : standard CSS color name or #rrggbb hex value.</li>
        <li><code>SIDC</code> : NATO symbology code (instead of icon).</li>
        <li><code>label</code> : permanent label next to marker, or</li>
        <li><code>tooltip</code> : hover over text for marker. (alternative to label)</li>
        <li><code>bulding</code> : OSMBuildings GeoJSON object.</li>
        <li><code>ttl</code> : time to live of an individual marker before deletion.</li>
        <li><code>photoUrl</code> : adds an image pointed at by the url to the popup box.</li>
        <li><code>videoUrl</code> : adds an mp4 (320x240) pointed at by the url to Popup box</li>
        <li><code>weblink</code> : link to an external web page.</li>
        <li><code>deleted</code> : set to <i>true</i> to remove the named marker. (default false)</li>
    </ul>
    <p>Any other sub-properties of <code>msg.payload</code> will be added to the marker popup text box as extra information.</p>
    <p>Icons of type <i>plane</i>, <i>ship</i>, <i>car</i>, <i>uav</i> or <i>arrow</i> will use built in SVG icons that align to the
    <code>bearing</code> value.</p>
    <p>Font Awesome (<a href="https://fontawesome.com/v4.7.0/icons/" target="_new">fa-icons 4.7</a>) can also be used, as can
    NATO symbology codes (<a href="https://www.spatialillusions.com/unitgenerator-legacy/">SIDC</a>), or <a href="https://github.com/dceejay/RedMap/blob/master/emojilist.md" target="_new">:emoji name:</a>,
    or the url of a small icon image (32x32)</p>
    <p>See the <a href="https://www.npmjs.com/package/node-red-contrib-web-worldmap" target="_new">README</a> for further
    details and examples of icons and commands for drawing <b>lines</b> and <b>areas</b>, and to <b>add layers</b> and
    to <b>control</b> the map remotely, including how to use a local map server.</p>
</script><script type="text/html" data-help-name="ui_worldmap">
    <p>Plots "things" on a map in Node-RED Dashboard. Needs an internet connection.</p>
    <p>It is possible to instantiate multiple worldmap nodes but each one must be given a unique
        path. Worldmap-in nodes are matched to worldmap nodes by having exactly the same path.
    <p>Shortcut - <code>⌘⇧m</code> - ctrl-shift-m to jump to the default Map (<tt>/worldmap</tt>).</p>
    <p>The minimum <code>msg.payload</code> must contain <code>name</code>, <code>lat</code> and <code>lon</code> properties, e.g.</p>
    <pre>{"name":"Joe", "lat":51, "lon":-1.05}</pre>
    <p><code>name</code> must be a unique identifier.</p>
    <p>Optional properties include</p>
    <ul>
        <li><code>layer</code> : specify a layer on the map to add marker to.</li>
        <li><code>speed</code> : combined with bearing, draws a vector.</li>
        <li><code>bearing</code> : combined with speed, draws a vector.</li>
        <li><code>accuracy</code> : combined with bearing, draws a polygon of possible direction.</li>
        <li><code>icon</code> : <a href="https://fontawesome.com/v4.7.0/icons/" target="_new">font awesome</a> icon name or <a href="https://github.com/dceejay/RedMap/blob/master/emojilist.md" target="_new">:emoji name:</a>, or url of icon image.</li>
        <li><code>iconColor</code> : standard CSS color name or #rrggbb hex value.</li>
        <li><code>SIDC</code> : NATO symbology code (instead of icon).</li>
        <li><code>label</code> : permanent label next to marker, or</li>
        <li><code>tooltip</code> : hover over text for marker. (alternative to label)</li>
        <li><code>bulding</code> : OSMBuildings GeoJSON object.</li>
        <li><code>ttl</code> : time to live of an individual marker before deletion.</li>
        <li><code>photoUrl</code> : adds an image pointed at by the url to the popup box.</li>
        <li><code>videoUrl</code> : adds an mp4 (320x240) pointed at by the url to Popup box</li>
        <li><code>weblink</code> : link to an external web page.</li>
        <li><code>deleted</code> : set to <i>true</i> to remove the named marker. (default false)</li>
    </ul>
    <p>Any other sub-properties of <code>msg.payload</code> will be added to the marker popup text box as extra information.</p>
    <p>Icons of type <i>plane</i>, <i>ship</i>, <i>car</i>, <i>uav</i> or <i>arrow</i> will use built in SVG icons that align to the
    <code>bearing</code> value.</p>
    <p>Font Awesome (<a href="https://fontawesome.com/v4.7.0/icons/" target="_new">fa-icons 4.7</a>) can also be used, as can
    NATO symbology codes (<a href="https://www.spatialillusions.com/unitgenerator-legacy/">SIDC</a>), or <a href="https://github.com/dceejay/RedMap/blob/master/emojilist.md" target="_new">:emoji name:</a>,
    or the url of a small icon image (32x32)</p>
    <p>See the <a href="https://www.npmjs.com/package/node-red-contrib-web-worldmap" target="_new">README</a> for further
    details and examples of icons and commands for drawing <b>lines</b> and <b>areas</b>, and to <b>add layers</b> and
    to <b>control</b> the map remotely, including how to use a local map server.</p>
</script><script type="text/html" data-help-name="worldmap in">
    <p>Receives actions from a worldmap web page.</p>
    <p>Actions include
    <ul><li><b>connected</b> - when a new client connects
        <li><b>disconnect</b> - when a client disconnects
        <li><b>click</b> - when a marker is clicked</li>
        <li><b>move</b> - when a marker is dragged/moved</li>
        <li><b>delete</b> - when a point or shape is deleted</li>
        <li><b>point</b> - when a point is added manually using right-click</li>
        <li><b>draw</b> - when a shape is added manually to the drawing layer</li>
        <li><b>drawdelete</b> - when a shape is deleted from the drawing layer</li>
        <li><b>layer</b> - when a base layer is changed</li>
        <li><b>addlayer</b> - when an overlay is added to the map</li>
        <li><b>dellayer</b> - when an overlay is removed from the map</li>
        <li><b>feedback</b> - when a user calls the feedback() function in the browser</li>
    </ul>
    Use the debug node to see the complete payload of the msg returned.</p>
    <p>All actions also include a <code>msg._sessionid</code> property that indicates which client session the
    action came from. Any outgoing msg that includes this property will only go back to that session.</p>
    <p>Further information can be found in the
    <a href="https://github.com/dceejay/RedMap/blob/master/README.md#events-from-the-map" target="_new">Events section</a>
    of the README.</p>
</script><script type="text/html" data-help-name="worldmap-tracks">
    <p>Creates tracks lines based on a specified number of previous locations.</p>
    <p>The number of tracked points can be set per marker by specifying <code>msg.payload.trackpoints</code> as part of the update for a marker.</p>
    <p>You can also specify the msg.payload.color, weight, opacity and dashArray properties for the track if required.</p>
    <p>Holds all the points in memory, so if you have a lot of points held for a
    large depth then memory usage may become excessive.</p>
    <p>To delete a track send a msg.payload containing both the name of the object and
    set deleted to true - for example <code>msg.payload = { "name":"Fred", "deleted":true }</code>.</p>
    <p>This will also delete the point. If you just want to clear the track set the msg.payload to the
    name+"_", for example <code>msg.payload = { "name":"Fred_", "deleted":true }</code></p>
</script><script type="text/html" data-help-name="worldmap-hull">
    <p>Creates a convex-hull polygon around a set of supplied points.</p>
    <p>Points can be made part of the same shape if they have the same <code>msg.payload.layer</code>
    by default - this can be configured to another msg.payload property if desired.</p>
    <p><b>Note</b>: the outgoing msg only contains the polygon to draw, so this node should be wired
    in parallel to other paths going to the worldmap node.</p>
</script>
</div><div><!-- --- [red-module:node-red-dashboard/ui_base] --- -->
<style>
    :root {
        --nr-db-dark-text: #444;
        --nr-db-light-text: #eee;
        --nr-db-disabled-text: #999;
        --nr-db-mid-grey: #7f7f7f;
    }
    .nr-db-sb {
        position: absolute;
        top: 1px;
        bottom: 2px;
        left: 1px;
        right: 1px;
        overflow-y: auto;
        padding: 10px;
    }
    .nr-db-sb .form-row label {
        display: block;
        width: auto;
    }
    .nr-db-sb .form-row input,
    .nr-db-sb .form-row select {
        width: calc(100% - 100px);
        margin-bottom:0;
    }
    .nr-db-sb .compact {
        margin-bottom: 8px !important;
    }
    .nr-db-sb .red-ui-editableList-container {
        padding: 0;
        min-height: 250px;
        height: auto;
    }
    .nr-db-sb-tab-list {
        min-height: 250px;
        height: auto;
    }
    .nr-db-sb-tab-list li {
        padding: 0;
    }
    .nr-db-sb-tab-list-item {
        border-radius: 4px;
        color: var(--red-ui-primary-text-color, var(--nr-db-dark-text));
    }
    .nr-db-sb-list-header {
        cursor: pointer;
        position:relative;
        color: var(--red-ui-header-text-color, var(--nr-db-dark-text));
        padding:3px;
        white-space: nowrap;
    }
    .nr-db-sb-list-header:hover {
        color: var(--red-ui-secondary-text-color-hover, var(--nr-db-dark-text));
    }
    .nr-db-sb-title-hidden {
        text-decoration: line-through;
    }
    .nr-db-sb-title-disabled {
        color: var(--red-ui-secondary-text-color-disabled, var(--nr-db-disabled-text));
    }
    .nr-db-sb-tab-list-header {
        background: var(--red-ui-primary-background, var(--nr-db-light-text));
        padding:5px;
    }
    .nr-db-sb-group-list-header:hover,
    .nr-db-sb-widget-list-header:hover {
        background: var(--red-ui-secondary-background-hover, var(--nr-db-light-text));
    }
    .nr-db-sb-list-chevron {
        width: 15px;
        text-align: center;
        margin: 3px 5px 3px 5px;
    }
    .nr-db-sb-tab-list-item .red-ui-editableList-container {
        border-radius: 0;
        border: none;
        height: auto !important;
        min-height: unset;
    }
    .nr-db-sb-list-handle {
        vertical-align: top;
        opacity: 0;
        cursor: move;
    }
    .nr-db-sb-list-header:hover>.nr-db-sb-list-handle,
    .nr-db-sb-list-header:hover>.nr-db-sb-list-header-button-group {
        opacity: 1;
    }
    .nr-db-sb-list-header-button-group {
        opacity: 0;
    }
    .nr-db-sb-list-handle  {
        color: var(--red-ui-tertiary-text-color, var(--nr-db-light-text));
        padding:5px;
    }
    .nr-db-sb-tab-list-header>.nr-db-sb-list-chevron  {
        margin-left: 0px;
        transition: transform 0.2s ease-in-out;
    }
    .nr-db-sb-group-list-header>.nr-db-sb-list-chevron {
        margin-left: 20px;
        transition: transform 0.2s ease-in-out;
    }
    .nr-db-sb-group-list {
        min-height: 10px;
    }
    .nr-db-sb-group-list li {
        border-bottom-color: var(--red-ui-secondary-border-color, var(--nr-db-light-text));
    }
    .nr-db-sb-group-list>li.ui-sortable-helper {
        border-top: 1px solid var(--red-ui-secondary-border-color, var(--nr-db-light-text));
    }
    .nr-db-sb-group-list>li:last-child {
        border-bottom: none;
    }
    .nr-db-sb-widget-list>li {
        border: none !important;
    }
    .nr-db-sb-group-list>li>.red-ui-editableList-item-handle {
        left: 10px;
    }
    .nr-db-sb-list-button-group {
        position: absolute;
        right: 3px;
        top: 0px;
        z-index: 2;
    }
    .nr-db-sb-list-header-button-group {
        position: absolute;
        right: 3px;
        top: 4px;
    }
    .nr-db-sb-list-header-button {
        margin-left: 5px;
    }
    .nr-db-sb li.ui-sortable-helper {
        opacity: 0.9;
    }
    .nr-db-sb-widget-icon {
        margin-left: 56px;
    }
    .nr-db-sb-icon {
        margin-right: 10px;
    }
    .nr-db-sb-link {
        display: inline-block;
        padding-left: 20px;
    }
    .nr-db-sb-link-name-container .fa-external-link {
      margin-right: 10px;
    }
    .nr-db-sb-link-url {
        font-size: 0.8em;
        color: var(--red-ui-secondary-text-color, var(--nr-db-mid-grey));
    }
    span.nr-db-color-pick-container {
        max-width: 50px;
        border-radius: 3px;
        margin-left: 15px;
    }
    input.nr-db-field-themeColor[type="color"] {
        width: 60px !important;
        padding: 0px;
        height: 20px;
        box-shadow: none;
        position: absolute;
        right: 36px;
        border-radius: 3px !important;
        border: solid 1px var(--red-ui-form-input-border-color, #ccc);
        -webkit-appearance: none;
        font-size: smaller;
        text-align: center;
    }
    input.nr-db-field-themeColor::-webkit-color-swatch {
        border: none;
    }
    .red-ui-tabs {
        margin-bottom: 15px;
    }
    .red-ui-tab.hidden {
        display: none;
    }
    #dashboard-tabs-list li a:hover {
        cursor: pointer;
    }
    #dash-link-button {
        background: none;
        border: none;
        margin-top: 3px;
        display: inline-block;
        margin: 3px 0px 0px 3px;
        height: 32px;
        line-height: 29px;
        max-width: 200px;
        overflow: hidden;
        white-space: nowrap;
        position: relative;
        padding: 0px 7px 0px 7px;
    }
    ul.red-ui-dashboard-theme-styles {
        list-style: none;
    }
    ul.red-ui-dashboard-theme-styles li {
        margin-bottom: 6px;
    }
    .nr-db-resetIcon {
        margin: 3px 6px 0px 6px;
        float: right;
        color: var(--red-ui-secondary-text-color, var(--nr-db-mid-grey));
        opacity: 0.8;
        display: block;
    }
    .nr-db-resetIcon:hover {
        cursor: pointer;
    }
    #nr-db-field-font {
        margin-left: 2em;
        width: calc(100% - 81px);
    }
    .nr-db-theme-label {
        font-weight: bold;
    }
    #custom-theme-library-container .btn-group {
        margin-bottom: 10px;
    }
</style>

<!-- Dashboard layout tool -->
<link rel="stylesheet" href="./Node-RED _ maindashboard_files/gridstack.min.css">
<link rel="stylesheet" href="./Node-RED _ maindashboard_files/gridstack-extra.min.css">
<style>
.grid-stack {
    background-color: var(--red-ui-primary-background, #f8f8f8);
    border: solid 2px var(--red-ui-tertiary-border-color, #C0C0C0);
    margin: auto;
    min-height: 42px;
    display: table-cell;
    background-image: linear-gradient(var(--red-ui-tertiary-border-color, #C0C0C0) 1px, transparent 0),
                      linear-gradient(90deg, var(--red-ui-tertiary-border-color, #C0C0C0) 1px, transparent 0);
    background-size: 40px 43px;
}
.grid-stack>.grid-stack-item>.grid-stack-item-content {
    top: 3px;
    left: 5px;
    right: 5px;
    bottom: 3px;
}
.grid-stack-item-content {
    color: #2c3e50;
    text-align: center;
    background-color: #b0dfe3;
    border-radius: 2px;
    font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;
    white-space: nowrap;
    font-size: 12px;
    opacity: 0.7;
}
.grid-stack-item {
    cursor: move;
}
.nr-dashboard-layout-container-fluid {
  width: 100%;
  padding-right: 0px;
  padding-left: 0px;
  margin-right: 0px;
  margin-left: 0px;
}
.nr-dashboard-layout-row {
  width: 100%;
  display: -ms-flexbox;
  display: flex;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  margin-right: 0px;
  margin-left: 0px;
}
.nr-dashboard-layout-span12 {
  width: 98.4%;
  padding: 2px;
  margin-left: 2px;
}
.nr-dashboard-layout-span6 {
  width: 49.2%;
  padding: 2px;
  margin-left: 2px;
}
.nr-dashboard-layout-span4 {
  width: 32.7%;
  padding: 2px;
  margin-left: 2px;
}
.nr-dashboard-layout-span3 {
  width: 24.3%;
  padding: 2px;
  margin-left: 2px;
}
.nr-dashboard-layout-span2 {
  width: 16.0%;
  padding: 2px;
  margin-left: 2px;
}
.nr-dashboard-layout-resize-disable {
    cursor: pointer;
    float: right;
    position: relative;
    z-index: 90;
    margin-right: 4px;
}
.nr-dashboard-layout-resize-enable {
    cursor: pointer;
    float: right;
    position: relative;
    z-index: 90;
    margin-right: 1px;
}
.grid-stack>.ui-state-disabled {
    opacity: 1;
    background-image: none;
}
.grid-stack>.grid-stack-item>.ui-resizable-handle {
    z-index: 90;
    margin-right: -7px;
}
</style>


<script type="text/javascript">
(function($) {
    var editSaveEventHandler;
    var nodesAddEventHandler;
    var nodesRemoveEventHandler;
    var layoutUpdateEventHandler; // Dashboard layout tool
    var uip = 'ui';
    var attemptedVendorLoad = false;
    var ensureDashboardNode;

    var isTabLockSupported = ((typeof RED.workspaces.isLocked) === "function"); // check for new Node-RED version

    function notifyLocked() {
        RED.notify("Can't change tab with nodes in locked tab");
    }

    // check if specified tab is locked
    function isLockedTab(id) {
        if (!isTabLockSupported) {
            return false;
        }
        return (RED.workspaces.isLocked(id));
    }

    // check if some node in tab placed on locked tab
    function isLocked(id) {
        if (!isTabLockSupported) {
            return false;
        }
        const tab = getTabDataFromNodes(id);
        const groups = tab.groups;
        for (let i = 0; i < groups.length; i++) {
            const group = groups[i];
            const widgets = group.widgets;
            for (let j = 0; j < widgets.length; j++) {
                const widget = RED.nodes.node(widgets[j].id);
                if (RED.workspaces.isLocked(widget.z)) {
                    return true;
                }
            }
        }
        return false;
    }

    var loadTinyColor = function(path) {
        $.ajax({ url: path,
            success: function (data) {
                var jsScript = document.createElement("script");
                jsScript.type = "application/javascript";
                jsScript.src = path;
                document.body.appendChild(jsScript);
                //console.log('Tiny Color Loaded:',path);
            },
            error: function (xhr, ajaxOptions, thrownError) {
                if (xhr.status === 404 && !attemptedVendorLoad) {
                    loadTinyColor('/'+uip+'/vendor/tinycolor2/dist/tinycolor-min.js');
                    attemptedVendorLoad = true;
                }
                //console.log('Tiny Color Failed to load:',path);
            }
        });
    }

    // convert to i18 text
    function c_(x) {
        return RED._("node-red-dashboard/ui_base:ui_base."+x);
    }

    // Try to load dist version first
    // then if fails, load non dist version
    loadTinyColor('ui_base/js/tinycolor-min.js');
    //loadTinyColor('ui_base/tinycolor2/dist/tinycolor-min.js');

    // Dashboard layout tool
    // Load gridstack library
    var loadGsLib = function(path, callback) {
        $.ajax({ url: path,
            success: function (data) {
                var jsScript = document.createElement("script");
                jsScript.type = "application/javascript";
                jsScript.src = path;
                document.body.appendChild(jsScript);
                if (callback) { callback(); }
            },
            error: function (xhr, ajaxOptions, thrownError) {
                // TODO
            }
        });
    };

    loadGsLib('ui_base/gs/gridstack.min.js', function() {
        loadGsLib('ui_base/gs/gridstack.jQueryUI.min.js', null)
    });

    var tabDatas; // Layout editing tab data
    var oldSpacer; // Spacer not needed after editing
    var widthChange; // Group width change
    var widgetResize; // Change widget event
    var widgetDrag; // Drag wiget event

    var MAX_GROUP_WIDTH = 50; // The maximum width is 30

    /////////////////////////////////////////////////////////
    // Get widget under specified tab from node information
    /////////////////////////////////////////////////////////
    function getTabDataFromNodes(tabID) {
        var nodes = RED.nodes.createCompleteNodeSet(false);
        var tab = {};
        // Tab information
        for (var cnt = 0; cnt < nodes.length; cnt++) {
            if (nodes[cnt].id == tabID) {
                if (nodes[cnt].type == "ui_tab" || nodes[cnt].type == "ui_link") {
                    tab = {
                        id: nodes[cnt].id,
                        name: nodes[cnt].name,
                        type: nodes[cnt].type,
                        order: nodes[cnt].order,
                        groups: []
                    };
                    break;
                }
            }
        }
        // Group information
        for (var cnt = 0; cnt < nodes.length; cnt++) {
            if (nodes[cnt].type == "ui_group" && nodes[cnt].tab == tabID) {
                var group = {
                    id: nodes[cnt].id,
                    name: nodes[cnt].name,
                    type: nodes[cnt].type,
                    order: nodes[cnt].order,
                    width: nodes[cnt].width,
                    widgets: []
                };
                tab.groups.push(group);
            }
        }
        // Widget information
        var groupsIdx = {};
        for  (var cnt = 0; cnt < tab.groups.length; cnt++) {
            groupsIdx[tab.groups[cnt].id] = tab.groups[cnt];
        }
        for (var cnt = 0; cnt < nodes.length; cnt++) {
            var group = groupsIdx[nodes[cnt].group];
            if (group != null && (/^ui_/.test(nodes[cnt].type) && nodes[cnt].type !== 'ui_link' && nodes[cnt].type !== 'ui_toast' && nodes[cnt].type !== 'ui_ui_control' && nodes[cnt].type !== 'ui_audio' && nodes[cnt].type !== 'ui_base' && nodes[cnt].type !== 'ui_group' && nodes[cnt].type !== 'ui_tab')) {
                var widget = {
                    id: nodes[cnt].id,
                    type: nodes[cnt].type,
                    order: nodes[cnt].order,
                    width: nodes[cnt].width,
                    height: nodes[cnt].height,
                    auto: nodes[cnt].width == 0 ? true : false
                };
                group.widgets.push(widget);

                if (!isLayoutToolSupported(nodes[cnt].type)) {
                    console.log("LayoutTool warning: Unsupported widget. Widget="+JSON.stringify(widget));
                }
            }
        }
        return tab;
    }

    //////////////////////////////////////////////////
    // Update node information in the edited widget
    ////////////////////////////////////////////////////
    function putTabDataToNodes() {
        // Delete old flow spacer node
        for (var cnt = 0; cnt < oldSpacer.length; cnt++) {
            RED.nodes.remove(oldSpacer[cnt]);
            RED.nodes.dirty(true);
            RED.view.redraw(true);
        }

        var t_groups = tabDatas.groups;
        for (var cnt1 = 0; cnt1 < t_groups.length; cnt1++) {
            var n_group = RED.nodes.node(t_groups[cnt1].id);
            n_group.width = t_groups[cnt1].width;
            var t_widgets = t_groups[cnt1].widgets;
            for (var cnt2 = 0; cnt2 < t_widgets.length; cnt2++) {
                var n_widget = RED.nodes.node(t_widgets[cnt2].id);
                if (n_widget != null) {
                    if (n_widget.group !== n_group.id) {
                        var oldGroupNode = RED.nodes.node(n_widget.group);
                        if (oldGroupNode) {
                            var index = oldGroupNode.users.indexOf(n_widget);
                            oldGroupNode.users.splice(index,1);
                        }
                        n_widget.group = n_group.id;
                        n_group.users.push(n_widget);
                    }
                    n_widget.order = t_widgets[cnt2].order;
                    if (t_widgets[cnt2].auto === true ) {
                        n_widget.width = 0;
                        n_widget.height = 0;
                    } else {
                        n_widget.width = t_widgets[cnt2].width;
                        n_widget.height = t_widgets[cnt2].height;
                    }

                    n_widget.changed = true;
                    n_widget.dirty = true;
                    RED.editor.validateNode(n_widget);
                    RED.events.emit("layout:update",n_widget);
                    RED.nodes.dirty(true);
                    RED.view.redraw(true);
                }
                else {
                    // Add a spacer node
                    if (t_widgets[cnt2].type === 'ui_spacer') {
                        var spaceNode = {
                            _def: RED.nodes.getType("ui_spacer"),
                            type: "ui_spacer",
                            hasUsers: false,
                            users: [],
                            id: RED.nodes.id(),
                            tab: tabDatas.id,
                            group: n_group.id,
                            order: t_widgets[cnt2].order,
                            name: "spacer",
                            width: t_widgets[cnt2].width,
                            height: t_widgets[cnt2].height,
                            z: RED.workspaces.active(),
                            label: function() { return this.name + " " + this.width + "x" + this.height; }
                        };
                        RED.nodes.add(spaceNode);
                        RED.editor.validateNode(spaceNode);
                        RED.nodes.dirty(true);
                        RED.view.redraw(true);
                    }
                }
            };
        }
        RED.sidebar.info.refresh();
    }

    ////////////////////////////////////////
    // Sort by order
    ////////////////////////////////////////
    function compareOrder(a, b) {
        var r = 0;
        if (a.order < b.order) { r = -1; }
        else if (a.order > b.order) { r = 1; }
        return r;
    }

    ////////////////////////////////////////
    // Sort by XY
    ////////////////////////////////////////
    function compareXY(a, b) {
        var r = 0;
        if (a.y < b.y) { r = -1; }
        else if (a.y > b.y) { r = 1; }
        else if (a.x < b.x) { r = -1; }
        else if (a.x > b.x) { r = 1; }
        return r;
    }

    ///////////////////////////////////////////////////////
    // Placeable location search (placed in the upper left)
    ///////////////////////////////////////////////////////
    function search_point(width, height, maxWidth, maxHeight, tbl) {
        for (var y=0; y < maxHeight; y++) {
            for (var x=0; x < maxWidth; x++) {
                if (check_matrix(x, y, width, height, maxWidth, tbl)) {
                    fill_matrix(x, y, width, height, maxWidth, tbl);
                    return  {x:x, y:y};
                }
            }
        }
        return false;
    }
    // Check placement position
    function check_matrix(px, py, width, height, maxWidth, tbl) {
        if (px+width > maxWidth) return false;
        for (var y=py; y < py+height; y++) {
            for (var x=px; x<px+width; x++) {
                if (tbl[maxWidth*y+x]) return false;
            }
        }
        return true;
    }
    // Mark the placement position
    function fill_matrix(px, py, width, height, maxWidth, tbl) {
        for (var y=py; y < py+height; y++) {
            for (var x=px; x < px+width; x++) {
                tbl[maxWidth*y+x] = 1;
            }
        }
    }

    ////////////////////////////////////////////////////
    // Apply edit result to tab information for editing
    ////////////////////////////////////////////////////
    function saveGridDatas() {
        var groups = tabDatas.groups;
        for (var cnt = 0; cnt < groups.length; cnt++) {
            // Get layout editing results
            var gridID = '#grid'+cnt;
            var serializedData = [];
            $(gridID+'.grid-stack > .grid-stack-item:visible').each( function (index) {
                el = $(this);
                var node = el.data('_gridstack_node');
                serializedData.push({
                    id: el[0].dataset.noderedid,
                    type: el[0].dataset.noderedtype,
                    group: groups[cnt].id,
                    width: Number(node.width),
                    height: Number(node.height),
                    x: node.x,
                    y: node.y,
                    auto: (el[0].dataset.noderedsizeauto == 'true') ? true : false
                });
            });

            var width = Number(groups[cnt].width);
            var height = 0;

            // Search group height
            for (var i=0; i < serializedData.length; i++) {
                var wd = serializedData[i];
                if (height < wd.y + wd.height) {
                    height = wd.y + wd.height;
                }
            }

            // Place widget on table
            var tbl = new Array(width * height);
            for (var i = 0; i< tbl.length; i++) {
                tbl[i]=0;
            }
            for (var i = 0; i < serializedData.length; i++) {
                var wd = serializedData[i];
                for (var y = wd.y; y < wd.y+wd.height; y++) {
                    for (var x = wd.x; x < wd.x+wd.width; x++) {
                        tbl[width*y+x]=1;
                    }
                }
            }

            // Add Spacer to Blank
            for (var y = 0; y < height; y++) {
                var spacerAdded = false;
                for (var x = 0; x < width; x++) {
                    if (tbl[width*y+x]===0) {
                        if (!spacerAdded) {
                            // Add 1x1 spacer
                            serializedData.push({
                                x: x,
                                y: y,
                                z: RED.workspaces.active(),
                                width: 1,
                                height: 1,
                                name: 'spacer',
                                type: 'ui_spacer'
                            });
                            spacerAdded = true;
                        } else {
                            // Extend the spacer width by 1
                            serializedData[serializedData.length-1].width += 1;
                        }
                    } else {
                        spacerAdded = false;
                    }
                }
            }

            // Sort Gridstack objects by x, y information
            serializedData.sort(compareXY);

            // Delete x and y elements as information for sorting, and give order
            var order = 0;
            for (i in serializedData) {
                order++;
                delete serializedData[i].x;
                delete serializedData[i].y;
                serializedData[i].order = order;
            }

            // Update widget information in group with edited data
            var group = groups[cnt];
            delete group.widgets;
            group.widgets = serializedData;
        }

        // Save process call
        putTabDataToNodes();
    };

    ////////////////////////////////////////////////////
    // Get default height for automatic settings
    ////////////////////////////////////////////////////
    function getDefaultHeight(nodeID, groupWidth) {
        var redNode = RED.nodes.node(nodeID);
        var height = 1;

        if (redNode.type === 'ui_gauge') {
            if (redNode.gtype === 'gage') {
                height = Math.round(groupWidth/2)+1;
            } else if (redNode.gtype === 'wave') {
                if (groupWidth < 3) {
                    height = 1;
                } else {
                    height = Math.round(groupWidth*0.75);
                }
            } else { // donut or compass
                if (groupWidth < 3) {
                    height = 1;
                } else if (groupWidth < 11) {
                    height = groupWidth - 1;
                } else {
                    height = Math.round(groupWidth*0.95);
                }
            }
        } else if (redNode.type === 'ui_chart') {
            height = Math.floor(groupWidth/2)+1;
        } else if (redNode.type === 'ui_form') {
            // var optNum = redNode.options.length; // Sub widget number
            // if (redNode.label) {
            //     height = optNum + 2; // Label and Button
            // } else {
            //     height = optNum + 1; // Button only
            // }
            height = redNode.rowCount
        } else if (redNode.type === 'ui_lineargauge') {
            if (redNode.unit && redNode.name) {
                height = 5;
            } else {
                height = 4;
            }
        } else if (redNode.type === 'ui_list') {
            height = 5;
        } else if (redNode.type === 'ui_vega') {
            height = 5;
        }
        return height;
    }

    /////////////////////////////
    // Grid width change
    ////////////////////////////
    var changeGroupWidth = function(id) {
        var widthID = '#change-width'+id;
        var gridID = '#grid'+id;
        $(widthID).spinner( {
            min: 1,
            max: MAX_GROUP_WIDTH,
            spin: function(event, ui) {
                // Search current maximum width
                var serializedData = [];
                $(gridID+'.grid-stack > .grid-stack-item:visible').each( function (index) {
                    el = $(this);
                    var node = el.data('_gridstack_node');
                    serializedData.push({
                        width: Number(node.width),
                        x: node.x,
                        auto: (el[0].dataset.noderedsizeauto == 'true') ? true : false
                    });
                });
                var maxWidth = 0;
                for (var i=0; i < serializedData.length; i++) {
                    var wd = serializedData[i];
                    if (wd.auto == false) {
                        if (maxWidth < wd.x + wd.width) {
                            maxWidth = wd.x + wd.width;
                        }
                    }
                }
                var width = ui.value;
                if (width < maxWidth) {
                    width = maxWidth;
                }

                var grid = $(gridID+'.grid-stack').data('gridstack');
                $(gridID+'.grid-stack').css("width", width * 40);
                $(gridID+'.grid-stack').css("background-size", 100/width+"% 43px");
                grid.setColumn(tabDatas.groups[id].width, true);
                grid.setColumn(width, true);
                tabDatas.groups[id].width = width;

                $(gridID+'.grid-stack > .grid-stack-item:visible').each( function(idx, el) {
                    el = $(el);
                    var node = el.data('_gridstack_node');
                    var auto = (el[0].dataset.noderedsizeauto == 'true') ? true : false;
                    var type = el[0].dataset.noderedtype;
                    grid.resizable(el, !auto);
                    if (auto === true) {
                        grid.resize(el, width, getDefaultHeight(node.id, width));
                    }
                });

                if (width !== ui.value) {
                    event.stopPropagation();
                    event.preventDefault();
                }
            }
        });
    };

    //////////////////////////////////
    // Move between groups of widgets
    //////////////////////////////////
    function handleMove(grid) {
        return function(ev, prevWidget, newWidget) {
            var elem = newWidget.el[0];
            if (elem.getAttribute("data-noderedsizeauto") === "true") {
                var id = elem.getAttribute("data-noderedid");
                var width = grid.grid.column;
                var height = getDefaultHeight(id, width);
                grid.move(elem, 0, newWidget.y);
                grid.resize(elem, width, height);

                var en = $(elem).find('.nr-dashboard-layout-resize-enable');
                en.off('click');
                en.on('click',layoutResizeEnable);
                en[0].setAttribute("title",c_("layout.auto"));
            }
            else {
                var ds = $(elem).find('.nr-dashboard-layout-resize-disable');
                ds.off('click');
                ds.on('click',layoutResizeDisable);
                ds[0].setAttribute("title",c_("layout.manual"));
            }
        };
    }

    //////////////////////////////////////////
    // Widget size change (start event)
    //////////////////////////////////////////
    var resizeGroupWidget = function(id) {
        var gridID = '#grid'+id;
        var grid = $(gridID+'.grid-stack').data('gridstack');
        $(gridID+'.grid-stack').on('resizestart', function(event, ui) {
            // Reset group width
            grid.setColumn(tabDatas.groups[id].width, true);
        });
    }

    //////////////////////////////////////////
    // Widget drag (start event)
    //////////////////////////////////////////
    var dragGroupWidget = function(id) {
        var gridID = '#grid'+id;
        var grid = $(gridID+'.grid-stack').data('gridstack');
        $(gridID+'.grid-stack').on('dragstart', function(event, ui) {
            // Reset group width
            grid.setColumn(tabDatas.groups[id].width, true);
        });
    }

    //////////////////////////////////////////
    // Layout resize Disable (Auto:false)
    //////////////////////////////////////////
    var layoutResizeDisable = function(e) {
        var target = $(e.target);
        var el = target.parents('.grid-stack-item:visible');
        var grid = target.parents('.grid-stack').data('gridstack');
        var node = el.data('_gridstack_node');
        var id = Number(target.parents('.grid-stack').attr('id').slice(4));
        var width = Number(tabDatas.groups[id].width);
        var nodeID = el[0].dataset.noderedid;
        var height = getDefaultHeight(nodeID, width);

        grid.move(el, 0, node.y);
        grid.resize(el, width, height);
        grid.resizable(el, false);
        el.find('.nr-dashboard-layout-resize-disable').off('click');
        el.attr({'data-noderedsizeauto':'true'});
        target.removeClass().addClass('fa fa-unlock nr-dashboard-layout-resize-enable');
        el.find('.nr-dashboard-layout-resize-enable')[0].setAttribute("title",c_("layout.auto"));
        el.find('.nr-dashboard-layout-resize-enable').on('click',layoutResizeEnable);
    }

    //////////////////////////////////////////
    // Layout resize Enable (Auto:true)
    //////////////////////////////////////////
    var layoutResizeEnable = function(e) {
        var target = $(e.target);
        var el = target.parents('.grid-stack-item:visible');
        var grid = target.parents('.grid-stack').data('gridstack');

        grid.resizable(el, true);
        el.find('.nr-dashboard-layout-resize-enable').off('click');
        el.attr({'data-noderedsizeauto':'false'});
        target.removeClass().addClass('fa fa-lock nr-dashboard-layout-resize-disable');
        el.find('.nr-dashboard-layout-resize-disable')[0].setAttribute("title",c_("layout.manual"));
        el.find('.nr-dashboard-layout-resize-disable').on('click',layoutResizeDisable);
    }

    //////////////////////////////////////////
    // Check dashboard layout tool supported
    //////////////////////////////////////////
    function isLayoutToolSupported(nodeType) {
        if (nodeType.indexOf("ui_") !== 0) {
            return false;
        }
        else {
            return true;
        }
    }

    RED.nodes.registerType('ui_base', {
            category: 'config',
            defaults: {
                name: {},
                theme: {},
                site: {}
            },
            hasUsers: false,
            paletteLabel: 'Dashboard',
            label: function() { return this.name || 'Node-RED Dashboard'; },
            labelStyle: function() { return this.name ? "node_label_italic" : ""; },
            onpaletteremove: function() {
                RED.sidebar.removeTab("dashboard");
                RED.events.off("editor:save",editSaveEventHandler);
                RED.events.off("nodes:add",nodesAddEventHandler);
                RED.events.off("nodes:remove",nodesRemoveEventHandler);
                RED.events.off("layout:update",layoutUpdateEventHandler); // Dashboard layout tool
            },
            onpaletteadd: function() {
                var globalDashboardNode = null;
                var editor;
                var baseStyles = ['base-color'];
                var configurableStyles = ['page-titlebar-backgroundColor', 'page-backgroundColor', 'page-sidebar-backgroundColor',
                'group-textColor', 'group-borderColor', 'group-backgroundColor',
                'widget-textColor', 'widget-backgroundColor','widget-borderColor'];
                var baseFontName = "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif";
                var aTheme = {primary:"indigo", accents:"blue", warn:"red", background:"grey", palette:"light"};
                // tiny colour implementation
                var colours = {
                    leastReadable: function(base, colours) {
                        var least = tinycolor.readability(base, colours[0]);
                        var leastColor = colours[0];
                        for (var i=1; i<colours.length; i++) {
                            var readability = tinycolor.readability(base, colours[i]);
                            if (readability < least) {
                                least = readability;
                                leastColor = colours[i];
                            }
                        }
                        return leastColor;
                    },
                    whiteGreyMostReadable: function (base) {
                        var rgb = tinycolor(base).toRgb();
                        var level = ((rgb.r*299) + (rgb.g*587) + (rgb.b*114))/1000;
                        var readable = (level >= 128) ? '#111111' : '#eeeeee';
                        return readable;
                    },
                    whiteBlackLeastReadable: function(base) {
                        return this.leastReadable(base, ["#000000", "#ffffff"]);
                    },
                    calculate_page_backgroundColor: function(base) {
                        var pageBackground = "#fafafa";
                        var theme = "light";
                        if (globalDashboardNode && globalDashboardNode.hasOwnProperty("theme") && globalDashboardNode.theme.hasOwnProperty("name")) {
                            theme = globalDashboardNode.theme.name.split('-')[1];
                        }
                        if (theme === "dark") {
                            pageBackground = "#111111";
                        }
                        else if (theme === "custom") {
                            var whiteOrBlack = this.whiteBlackLeastReadable(base);
                            if (whiteOrBlack === "#000000") { pageBackground = "#111111"; }
                        }
                        return pageBackground;
                    },
                    calculate_page_sidebar_backgroundColor: function(base) {
                        if (this.whiteBlackLeastReadable(base) === "#000000") { return "#333333"; }
                        else { return "#ffffff"; }
                    },
                    calculate_page_titlebar_backgroundColor: function(base) {
                        return base;
                    },
                    calculate_group_textColor: function(base) {
                        var groupTextColour = tinycolor(base).lighten(15).toHexString();
                        //if (this.whiteBlackLeastReadable(base) === "#ffffff") { groupTextColour = "#000000"; }
                        return groupTextColour;
                    },
                    calculate_group_backgroundColor: function(base) {
                        var groupBackground = "#ffffff";
                        var theme = "light";
                        if (globalDashboardNode && globalDashboardNode.hasOwnProperty("theme") && globalDashboardNode.theme.hasOwnProperty("name")) {
                            theme = globalDashboardNode.theme.name.split('-')[1];
                        }
                        if (theme === "dark") {
                            groupBackground = "#333333";
                        }
                        else if (theme === "custom") {
                            var whiteOrBlack = this.whiteBlackLeastReadable(base);
                            if (whiteOrBlack === "#000000") { groupBackground = "#333333"; }
                        }
                        return groupBackground;
                    },
                    calculate_group_borderColor: function(base) {
                        var groupBackground = this.calculate_group_backgroundColor(base);
                        return this.leastReadable(groupBackground, ["#ffffff", "#555555"]);
                    },
                    calculate_widget_textColor: function(base) {
                        //most readable against group background
                        var groupBackground = this.calculate_group_backgroundColor(base);
                        return tinycolor.mostReadable(groupBackground, ["#111111", "#eeeeee"]).toHexString();
                    },
                    calculate_widget_backgroundColor: function(base) {
                        //return tinycolor(base).darken(5).toHexString()
                        return tinycolor(base).toHexString();
                    },
                    calculate_widget_borderColor: function(base) {
                        var widgetBorder = "#ffffff";
                        var theme = "light";
                        if (globalDashboardNode && globalDashboardNode.hasOwnProperty("theme") && globalDashboardNode.theme.hasOwnProperty("name")) {
                            theme = globalDashboardNode.theme.name.split('-')[1];
                        }
                        if (theme === "dark") {
                            widgetBorder = "#333333";
                        }
                        else if (theme === "custom") {
                            var whiteOrBlack = this.whiteBlackLeastReadable(base);
                            if (whiteOrBlack === "#000000") { widgetBorder = "#333333"; }
                        }
                        return widgetBorder;
                    },
                    calculate_base_font: function(base) {
                        return baseFontName;
                    }
                }
                var sizes = {
                    sx: 48, // width of <1> grid square
                    sy: 48, // height of <1> grid square
                    gx: 6, // gap between groups
                    gy: 6, // gap between groups
                    cx: 6, // gap between components
                    cy: 6, // gap between components
                    px: 0, // padding of group's cards
                    py: 0  // padding of group's cards
                };

                ensureDashboardNode = function(createMissing) {
                    if (globalDashboardNode !== null) {
                        // Check if it has been deleted beneath us
                        var n = RED.nodes.node(globalDashboardNode.id);
                        if (n === null) { globalDashboardNode = null; }
                    }

                    // Find the old dashboard node
                    if (globalDashboardNode === null) {
                        var bases = [];
                        RED.nodes.eachConfig(function(n) {
                            if (n.type === 'ui_base') { bases.push(n); }
                        });

                        // make sure we only have one ui_base node
                        // at the moment this will just use our existing one - deleting any new base node and theme
                        // at some point we may want to make this an option to select one or the other.
                        while (bases.length > 1) {
                            var n = bases.pop();
                            console.log("Removing ui_base node "+n.id);
                            RED.nodes.remove(n.id);
                            RED.nodes.dirty(true);
                        }

                        if (bases.length === 1) { globalDashboardNode = bases[0]; }

                        // If there is no dashboard node, ensure we create it after
                        // initialising
                        var noDashboardNode = (globalDashboardNode === null);

                        // set up theme state
                        var themeState = {};
                        var baseColor = "#0094CE"
                        for (var i=0; i<baseStyles.length; i++) {
                            themeState[baseStyles[i]] = { default:baseColor, value:baseColor, edited:false };
                        }
                        for (var j = 0; j < configurableStyles.length; j++) {
                            var underscore = configurableStyles[j].split("-").join("_");
                            var colour = colours['calculate_'+underscore](baseColor);
                            themeState[configurableStyles[j]] = {value:colour, edited:false};
                        }
                        themeState["base-font"] = {value:baseFontName};

                        var missingFields = (!globalDashboardNode || !globalDashboardNode.theme || !globalDashboardNode.site || !globalDashboardNode.site.sizes );

                        if (missingFields && createMissing) {
                            var lightTheme = {
                                default: baseColor,
                                baseColor: baseColor,
                                baseFont: baseFontName,
                                edited: false
                            }
                            var darkTheme = {
                                default: "#097479",
                                baseColor: "#097479",
                                baseFont: baseFontName,
                                edited: false
                            }
                            var customTheme = {
                                name: 'Untitled Theme 1',
                                default: "#4B7930",
                                baseColor: "#4B7930",
                                baseFont: baseFontName
                            }
                            var oldThemeName;
                            if (globalDashboardNode && typeof(globalDashboardNode.theme === 'string')) { oldThemeName = globalDashboardNode.theme; }

                            var theme = {
                                name: oldThemeName || "theme-light",
                                lightTheme: lightTheme,
                                darkTheme: darkTheme,
                                customTheme: customTheme,
                                themeState: themeState,
                                angularTheme: aTheme
                            }

                            var site_name = c_("site.title");
                            var site_date_format = c_("site.date-format");
                            var site = { name:site_name, hideToolbar:"false", allowSwipe:"false", lockMenu:"false", allowTempTheme:"true", dateFormat:site_date_format, sizes:sizes };
                            if (globalDashboardNode !== null) {
                                if (typeof globalDashboardNode.site !== "undefined") {
                                    site = {
                                        name: globalDashboardNode.site.name || globalDashboardNode.name,
                                        hideToolbar: globalDashboardNode.site.hideToolbar,
                                        lockMenu: globalDashboardNode.site.lockMenu,
                                        allowSwipe: globalDashboardNode.site.allowSwipe,
                                        allowTempTheme: globalDashboardNode.site.allowTempTheme,
                                        dateFormat: globalDashboardNode.site.dateFormat,
                                        sizes: globalDashboardNode.site.sizes
                                    }
                                }
                                if (globalDashboardNode.theme.hasOwnProperty("angularTheme")) {
                                    aTheme = globalDashboardNode.theme.angularTheme;
                                }
                                else { globalDashboardNode.theme.angularTheme = aTheme; }
                            }

                            if (noDashboardNode) {
                                globalDashboardNode = {
                                    id: RED.nodes.id(),
                                    _def: RED.nodes.getType("ui_base"),
                                    type: "ui_base",
                                    site: site,
                                    theme: theme,
                                    users: []
                                }
                                RED.nodes.add(globalDashboardNode);
                                RED.editor.validateNode(globalDashboardNode);
                            }
                            else {
                                globalDashboardNode["_def"] = RED.nodes.getType("ui_base");
                                globalDashboardNode.site = site;
                                globalDashboardNode.theme = theme;
                                delete globalDashboardNode.name;
                            }
                            $("#nr-db-field-font").val(baseFontName);
                            RED.nodes.dirty(true);
                        }
                    }
                }

                var content = $("<div>").css({"position":"relative","height":"100%"});
                var mainContent = $("<div>",{class:"nr-db-sb"}).appendTo(content);
                var form = $('<form class="dialog-form">').appendTo(mainContent);

                // Dashboard Tabs markup
                var divTab = $('<div class="red-ui-tabs">').appendTo(form);
                var ulDashboardTabs = $('<ul id="dashboard-tabs-list"></ul>').appendTo(divTab);
                var layout_label = c_("label.layout");
                var site_label = c_("label.site");
                var theme_label = c_("label.theme");
                var angular_label = c_("label.angular");
                var liLayoutTab = $('<li class="red-ui-tab" style="width:70px;"><a class="red-ui-tab-label" title="Layout"><span>'+layout_label+'</span></a></li>').appendTo(ulDashboardTabs);
                var liSiteTab = $('<li class="red-ui-tab" style="width:70px;"><a class="red-ui-tab-label" title="Site" style="width:60px;"><span>'+site_label+'</span></a></li>').appendTo(ulDashboardTabs);
                var liThemeTab = $('<li class="red-ui-tab" style="width:70px;"><a class="red-ui-tab-label" title="Theme" style="width:80px;"><span>'+theme_label+'</span></a></li>').appendTo(ulDashboardTabs);
                var liAngularTab = $('<li class="red-ui-tab" style="width:70px;"><a class="red-ui-tab-label" title="Angular" style="width:80px;"><span>'+angular_label+'</span></a></li>').appendTo(ulDashboardTabs);

                // Link out to dashboard
                $.getJSON('uisettings',function(data) {
                    if (data.hasOwnProperty("path")) { uip = data.path; }
                    var lnk = document.location.host+RED.settings.httpNodeRoot+"/"+uip;
                    var re = new RegExp('\/{1,}','g');
                    lnk = lnk.replace(re,'/');
                    if (!RED.hasOwnProperty("actions")) {
                        RED.keyboard.add("*",/* d */ 68,{ctrl:true, shift:true},function() { window.open(document.location.protocol+"//"+lnk, "nr-dashboard") });
                    }
                    else {
                        RED.actions.add("dashboard:show-dashboard",function() { window.open(document.location.protocol+"//"+lnk, "nr-dashboard") });
                        RED.keyboard.add("*","ctrl-shift-d","dashboard:show-dashboard");
                    }
                    $('<span id="dash-link-button" class="editor-button" style="position:absolute; right:0px;"><i class="fa fa-external-link"></i></span>')
                    .click(function(evt) {
                        window.open(document.location.protocol+"//"+lnk);
                        evt.preventDefault();
                    })
                    .appendTo(ulDashboardTabs);
                });

                // Dashboard Tab containers
                var layoutTab = $('<div id="dashboard-layout" style="height:calc(100% - 48px)">').appendTo(form);
                var siteTab = $('<div id="dashboard-site" style="display:none;">').appendTo(form);
                var themeTab = $('<div id="dashboard-theme" style="display:none;">').appendTo(form);
                var angularTab = $('<div id="dashboard-angular" style="display:none;">').appendTo(form);

                ulDashboardTabs.children().first().addClass("active");

                // Tab logic
                var onTabClick = function() {
                    //Toggle tabs
                    ulDashboardTabs.children().removeClass("active");
                    ulDashboardTabs.children().css({"transition": "width 100ms"});
                    $(this).parent().addClass("active");

                    var selectedTab = $(this)[0].title;
                    if (selectedTab === 'Layout') {
                        themeTab.hide();
                        siteTab.hide();
                        angularTab.hide();
                        layoutTab.show();
                    }
                    else if (selectedTab === 'Angular') {
                        themeTab.hide();
                        siteTab.hide();
                        angularTab.show();
                        layoutTab.hide();
                    }
                    else if (selectedTab === 'Theme') {
                        layoutTab.hide();
                        siteTab.hide();
                        angularTab.hide();
                        themeTab.show();
                        if ($("#nr-db-field-theme option:selected").val() === 'theme-custom') { themeSettingsContainer.show(); }
                        else { themeSettingsContainer.hide(); }
                    }
                    else {
                        layoutTab.hide();
                        themeTab.hide();
                        angularTab.hide();
                        siteTab.show();
                    }
                }

                ulDashboardTabs.find("li.red-ui-tab a").on("click",onTabClick)

                // Site Tab
                var divTitle = $('<div>',{class:"form-row compact"}).appendTo(siteTab);
                $('<div>').html('<b>'+c_("label.title")+'</b>').appendTo(divTitle);
                $('<input type="text" id="nr-db-field-title">').val(site_name).css("width","100%")
                .on("change", function() {
                    if (!globalDashboardNode || globalDashboardNode.site.name !== $(this).val()) {
                        //ensureDashboardNode(true);
                        globalDashboardNode.site.name = $(this).val();
                    }
                    RED.nodes.dirty(true);
                })
                .appendTo(divTitle);

                var divHideToolbar = $('<div>',{class:"form-row compact"}).appendTo(siteTab);
                $('<div>').html('<b>'+c_("label.options")+'</b>').appendTo(divHideToolbar);
                $('<select id="nr-db-field-hideToolbar">')
                .css("width","100%")
                .append($('<option>', { value:"false", text:c_("title-bar.show"), selected:true }))
                .append($('<option>', { value:"true", text:c_("title-bar.hide") }))
                .val("false")
                .on("change", function() {
                    if (!globalDashboardNode || globalDashboardNode.site.hideToolbar !== $(this).val()) {
                        //ensureDashboardNode(true);
                        globalDashboardNode.site.hideToolbar = $(this).val();
                    }
                    RED.nodes.dirty(true);
                })
                .appendTo(divHideToolbar);

                var divLockMenu = $('<div>',{class:"form-row compact"}).appendTo(siteTab);
                $('<select id="nr-db-field-lockMenu">')
                .css("width","100%")
                .append($('<option>', { value:"false", text:c_("lock.clicked"), selected:true }))
                .append($('<option>', { value:"true", text:c_("lock.locked") }))
                .append($('<option>', { value:"icon", text:c_("lock.locked-icon") }))
                .val("false")
                .on("change", function() {
                    if (!globalDashboardNode || globalDashboardNode.site.lockMenu !== $(this).val()) {
                        //ensureDashboardNode(true);
                        globalDashboardNode.site.lockMenu = $(this).val();
                    }
                    RED.nodes.dirty(true);
                })
                .appendTo(divLockMenu);

                var divAllowSwipe = $('<div>',{class:"form-row compact"}).appendTo(siteTab);
                $('<select id="nr-db-field-allowSwipe">')
                .css("width","100%")
                .append($('<option>', { value:"false", text:c_("swipe.no-swipe"), selected:true }))
                .append($('<option>', { value:"true", text:c_("swipe.allow-swipe") }))
                .append($('<option>', { value:"mouse", text:c_("swipe.allow-swipe-mouse") }))
                .append($('<option>', { value:"menu", text:c_("swipe.show-menu") }))
                .val("false")
                .on("change", function() {
                    if (!globalDashboardNode || globalDashboardNode.site.allowSwipe !== $(this).val()) {
                        //ensureDashboardNode(true);
                        globalDashboardNode.site.allowSwipe = $(this).val();
                        RED.nodes.dirty(true);
                    }
                })
                .appendTo(divAllowSwipe);

                var divAllowTempTheme = $('<div>',{class:"form-row compact"}).appendTo(siteTab);
                $('<select id="nr-db-field-allowTempTheme">')
                .css("width","100%")
                .append($('<option>', { value:"true", text:c_("temp.allow-theme"), selected:true }))
                .append($('<option>', { value:"false", text:c_("temp.no-theme") }))
                .append($('<option>', { value:"none", text:c_("temp.none") }))
                .val("true")
                .on("change", function() {
                    if (!globalDashboardNode || globalDashboardNode.site.allowTempTheme !== $(this).val()) {
                        //ensureDashboardNode(true);
                        globalDashboardNode.site.allowTempTheme = $(this).val();
                    }
                    if ($('#nr-db-field-allowTempTheme').val() === "none") {
                        ulDashboardTabs.children().eq(2).addClass("hidden");
                        ulDashboardTabs.children().eq(3).removeClass("hidden");
                    }
                    else {
                        ulDashboardTabs.children().eq(2).removeClass("hidden");
                        ulDashboardTabs.children().eq(3).addClass("hidden");
                    }
                    RED.nodes.dirty(true);
                })
                .appendTo(divAllowTempTheme);

                var site_name = c_("site.title");
                var site_date_format = c_("site.date-format");
                var divDateFormat = $('<div>',{class:"form-row"}).appendTo(siteTab);
                $('<div>').html('<b>'+c_("label.date-format")+'</b>')
                .css("width","80%")
                .css("display","inline-block")
                .appendTo(divDateFormat);
                $('<div>').html("<a href='https://momentjs.com/docs/#/displaying/format/' target='_new'><i class='fa fa-info-circle' style='color:var(--red-ui-secondary-text-color, grey);'></i></a>")
                .css("display","inline-block")
                .css("margin-right","6px")
                .css("float","right")
                .appendTo(divDateFormat);
                $('<input type="text" id="nr-db-field-dateFormat">').val(site_date_format).css("width","100%")
                .on("change", function() {
                    if (!globalDashboardNode || globalDashboardNode.site.dateFormat !== $(this).val()) {
                        //ensureDashboardNode(true);
                        globalDashboardNode.site.dateFormat = $(this).val();
                    }
                    RED.nodes.dirty(true);
                })
                .appendTo(divDateFormat);

                var divSetSizes = $('<div>',{class:"form-row"}).appendTo(siteTab);
                $('<span style="width:45%; display:inline-block">').html('<b>'+c_("label.sizes")+'</b>').appendTo(divSetSizes);
                $('<span style="width:25%; display:inline-block; font-size:smaller">').text(c_("label.horizontal")).appendTo(divSetSizes);
                $('<span style="width:20%; display:inline-block; font-size:smaller">').text(c_("label.vertical")).appendTo(divSetSizes);
                $('<i id="sizes-reset" class="fa fa-undo nr-db-resetIcon"></i>')
                .css({opacity:1.0})
                .click(function(e) {
                    $("#nr-db-field-sx").val(sizes.sx); globalDashboardNode.site.sizes.sx = sizes.sx;
                    $("#nr-db-field-sy").val(sizes.sy); globalDashboardNode.site.sizes.sy = sizes.sy;
                    $("#nr-db-field-px").val(sizes.px); globalDashboardNode.site.sizes.px = sizes.px;
                    $("#nr-db-field-py").val(sizes.py); globalDashboardNode.site.sizes.py = sizes.py;
                    $("#nr-db-field-gx").val(sizes.gx); globalDashboardNode.site.sizes.gx = sizes.gx;
                    $("#nr-db-field-gy").val(sizes.gy); globalDashboardNode.site.sizes.gy = sizes.gy;
                    $("#nr-db-field-cx").val(sizes.cx); globalDashboardNode.site.sizes.cx = sizes.cx;
                    $("#nr-db-field-cy").val(sizes.cy); globalDashboardNode.site.sizes.cy = sizes.cy;
                    RED.nodes.dirty(true);
                })
                .appendTo(divSetSizes);

                $('<br/><span style="width:45%; display:inline-block">').text(c_("label.widget-size")).appendTo(divSetSizes);
                $('<input type="number" name="sx" min="24" id="nr-db-field-sx">').val(48).css("width","20%")
                .on("change", function() {
                    //ensureDashboardNode(true);
                    globalDashboardNode.site.sizes.sx=Number($(this).val()); RED.nodes.dirty(true); } )
                .appendTo(divSetSizes);
                $('<span style="width:5%; display:inline-block">').text(' ').appendTo(divSetSizes);
                $('<input type="number" name="sy" min="24" id="nr-db-field-sy">').val(48).css("width","20%")
                .on("change", function() {
                    //ensureDashboardNode(true);
                    globalDashboardNode.site.sizes.sy=Number($(this).val()); RED.nodes.dirty(true); } )
                .appendTo(divSetSizes);

                $('<br/><span style="width:45%; display:inline-block">').text(c_("label.widget-spacing")).appendTo(divSetSizes);
                $('<input type="number" name="cx" min="0" id="nr-db-field-cx">').val(6).css("width","20%")
                .on("change", function() {
                    //ensureDashboardNode(true);
                    globalDashboardNode.site.sizes.cx=Number($(this).val()); RED.nodes.dirty(true); } )
                .appendTo(divSetSizes);
                $('<span style="width:5%; display:inline-block">').text(' ').appendTo(divSetSizes);
                $('<input type="number" name="cy" min="0" id="nr-db-field-cy">').val(6).css("width","20%")
                .on("change", function() {
                    //ensureDashboardNode(true);
                    globalDashboardNode.site.sizes.cy=Number($(this).val()); RED.nodes.dirty(true); } )
                .appendTo(divSetSizes);

                $('<br/><span style="width:45%; display:inline-block">').text(c_("label.group-padding")).appendTo(divSetSizes);
                $('<input type="number" name="px" min="0" id="nr-db-field-px">').val(0).css("width","20%")
                .on("change", function() {
                    //ensureDashboardNode(true);
                    globalDashboardNode.site.sizes.px=Number($(this).val()); RED.nodes.dirty(true); } )
                .appendTo(divSetSizes);
                $('<span style="width:5%; display:inline-block">').text(' ').appendTo(divSetSizes);
                $('<input type="number" name="py" min="0" id="nr-db-field-py">').val(0).css("width","20%")
                .on("change", function() {
                    //ensureDashboardNode(true);
                    globalDashboardNode.site.sizes.py=Number($(this).val()); RED.nodes.dirty(true); } )
                .appendTo(divSetSizes);

                $('<br/><span style="width:45%; display:inline-block">').text(c_("label.group-spacing")).appendTo(divSetSizes);
                $('<input type="number" name="gx" min="0" id="nr-db-field-gx">').val(6).css("width","20%")
                .on("change", function() {
                    //ensureDashboardNode(true);
                    globalDashboardNode.site.sizes.gx=Number($(this).val()); RED.nodes.dirty(true); } )
                .appendTo(divSetSizes);
                $('<span style="width:5%; display:inline-block">').text(' ').appendTo(divSetSizes);
                $('<input type="number" name="gy" min="0" id="nr-db-field-gy">').val(6).css("width","20%")
                .on("change", function() {
                    //ensureDashboardNode(true);
                    globalDashboardNode.site.sizes.gy=Number($(this).val()); RED.nodes.dirty(true); } )
                .appendTo(divSetSizes);

                // Angular Theme Tab
                var changed = function() {
                    ensureDashboardNode(true);
                    globalDashboardNode.theme.angularTheme = aTheme;
                    RED.nodes.dirty(true);
                }

                var angColorList = ["red", "pink", "purple", "deep-purple", "indigo", "blue", "light-blue", "cyan", "teal", "green", "light-green", "lime", "yellow", "amber", "orange", "deep-orange", "brown", "grey", "blue-grey"];
                var angColors = "";
                angColorList.forEach(function(c) { angColors += '<option value="' + c + '">' + c + '</option>'; });

                var divPrimStyle = $('<div>',{class:"form-row"}).appendTo(angularTab);
                $('<span style="width:45%; display:inline-block">')
                    .html('<b>'+c_("style.primary")+'</b>')
                    .appendTo(divPrimStyle);
                $('<i id="ang-reset" class="fa fa-undo nr-db-resetIcon"></i>')
                    .css({opacity:1.0})
                    .click(function(e) {
                        $("#nr-db-field-angPrimary").val("indigo");
                        globalDashboardNode.theme.angularTheme.primary = "indigo";
                        RED.nodes.dirty(true);
                    })
                    .appendTo(divPrimStyle);
                $('<select id="nr-db-field-angPrimary">'+angColors+'</select>')
                    .css("width","100%")
                    .val(aTheme.primary)
                    .on("change", function() { aTheme.primary = $(this).val(); changed(); })
                    .appendTo(divPrimStyle);

                var divAccStyle = $('<div>',{class:"form-row"}).appendTo(angularTab);
                $('<span style="width:45%; display:inline-block">')
                    .html('<b>'+c_("style.accents")+'</b>')
                    .appendTo(divAccStyle);
                $('<i id="ang-reset" class="fa fa-undo nr-db-resetIcon"></i>')
                    .css({opacity:1.0})
                    .click(function(e) {
                        $("#nr-db-field-angAccents").val("blue");
                        globalDashboardNode.theme.angularTheme.accents = "blue";
                        RED.nodes.dirty(true);
                    })
                    .appendTo(divAccStyle);
                $('<select id="nr-db-field-angAccents">'+angColors+'</select>')
                    .css("width","100%")
                    .val(aTheme.accents)
                    .on("change", function() { aTheme.accents = $(this).val(); changed(); })
                    .appendTo(divAccStyle);

                var divWarnStyle = $('<div>',{class:"form-row"}).appendTo(angularTab);
                $('<span style="width:45%; display:inline-block">')
                    .html('<b>'+c_("style.warnings")+'</b>')
                    .appendTo(divWarnStyle);
                $('<i id="ang-reset" class="fa fa-undo nr-db-resetIcon"></i>')
                    .css({opacity:1.0})
                    .click(function(e) {
                        $("#nr-db-field-angWarn").val("red");
                        globalDashboardNode.theme.angularTheme.warn = "red";
                        RED.nodes.dirty(true);
                    })
                    .appendTo(divWarnStyle);
                $('<select id="nr-db-field-angWarn">'+angColors+'</select>')
                    .css("width","100%")
                    .val(aTheme.warn)
                    .on("change", function() { aTheme.warn = $(this).val(); changed(); })
                    .appendTo(divWarnStyle);

                var divBackStyle = $('<div>',{class:"form-row"}).appendTo(angularTab);
                $('<span style="width:45%; display:inline-block">')
                    .html('<b>'+c_("style.background")+'</b>')
                    .appendTo(divBackStyle);
                $('<i id="ang-reset" class="fa fa-undo nr-db-resetIcon"></i>')
                    .css({opacity:1.0})
                    .click(function(e) {
                        $("#nr-db-field-angBackground").val("grey");
                        globalDashboardNode.theme.angularTheme.background = "grey";
                        RED.nodes.dirty(true);
                    })
                    .appendTo(divBackStyle);
                $('<select id="nr-db-field-angBackground">'+angColors+'</select>')
                    .css("width","100%")
                    .val(aTheme.background)
                    .on("change", function() { aTheme.background = $(this).val(); changed(); })
                    .appendTo(divBackStyle);

                var divPalStyle = $('<div>',{class:"form-row"}).appendTo(angularTab);
                $('<span style="width:45%; display:inline-block">')
                    .html('<b>'+c_("style.palette")+'</b>')
                    .appendTo(divPalStyle);
                var lightdark = '<option value="light">' +c_("style.light")+ '</option>';
                lightdark += '<option value="dark">' +c_("style.dark")+ '</option>';
                $('<select id="nr-db-field-angLook">'+lightdark+'</select>')
                    .css("width","100%")
                    .val(aTheme.palette)
                    .on("change", function() { aTheme.palette = $(this).val(); changed(); })
                    .appendTo(divPalStyle);

                // Theme Tab
                // For all customisable styles, generate and apply the css
                var generateColours = function(base) {
                    var theme = globalDashboardNode.theme.name.split('-')[1];
                    if (!globalDashboardNode.theme.themeState.hasOwnProperty["base-font"]) {
                        if (globalDashboardNode.theme[theme+"Theme"].baseFont === "Helvetica Neue") {
                            globalDashboardNode.theme[theme+"Theme"].baseFont = baseFontName;
                        }
                        globalDashboardNode.theme.themeState["base-font"] = {value:globalDashboardNode.theme[theme+"Theme"].baseFont};
                        $("#nr-db-field-font").val(globalDashboardNode.theme[theme+"Theme"].baseFont);
                    }
                    for (var i=0; i<configurableStyles.length; i++) {
                        var styleID = configurableStyles[i];
                        var underscore = styleID.split("-").join("_");
                        if (!globalDashboardNode.theme.themeState.hasOwnProperty(styleID)) {
                            globalDashboardNode.theme.themeState[styleID] = {value:"#fff",edited:false};
                        }
                        if (!globalDashboardNode.theme.themeState[styleID].edited || globalDashboardNode.theme[theme+'Theme'].reset) {
                            var colour = colours['calculate_'+underscore](base);
                            globalDashboardNode.theme.themeState[styleID].value = colour;
                        }
                        setColourPickerColour(styleID, globalDashboardNode.theme.themeState[styleID].value, globalDashboardNode.theme.themeState[styleID].edited);
                    }
                    globalDashboardNode.theme[theme+'Theme'].reset = false;
                }

                var divThemeStyle = $('<div>',{class:"form-row"}).appendTo(themeTab);
                $('<label class="nr-db-theme-label">').text(c_("theme.style")).appendTo(divThemeStyle);
                var themeSelection = $('<select id="nr-db-field-theme">'+
                    '<option value="theme-light">'+c_("style.light")+'</option>'+
                    '<option value="theme-dark">'+c_("style.dark")+'</option>'+
                    '<option value="theme-custom">'+c_("style.custom")+'</option>'+
                    '</select>')
                .css("width","100%")
                .on("change", function() {
                    if (!globalDashboardNode || globalDashboardNode.theme.name !== $(this).val()) {
                        //ensureDashboardNode(true);
                        var theme = globalDashboardNode.theme.name.split('-')[1];
                        var baseColour = globalDashboardNode.theme[theme+'Theme'].baseColor;
                        var baseFont = globalDashboardNode.theme[theme+'Theme'].baseFont;
                        globalDashboardNode.theme.name = $(this).val();
                        theme = globalDashboardNode.theme.name.split('-')[1];
                        if (theme !== "custom") {
                            baseColour = globalDashboardNode.theme[theme+'Theme'].default;
                        }
                        else { baseColour = globalDashboardNode.theme[theme+'Theme'].baseColor; }
                        setColourPickerColour("base-color", baseColour);
                        globalDashboardNode.theme.themeState['base-color'].value = baseColour;
                        globalDashboardNode.theme.themeState['base-color'].default = baseColour;
                        globalDashboardNode.theme.themeState['base-font'] = {value:baseFont};
                        $("#nr-db-field-font").val(baseFont);
                        globalDashboardNode.theme[theme+'Theme'].reset = true;
                        //generate colours for all colour settings from base colour
                        generateColours(baseColour);
                        RED.nodes.dirty(true);
                    }
                    $('#base-color-reset').remove();
                    if ($(this).val() === 'theme-custom') {
                        $("#custom-theme-library-container").show(); //TODO undo this at some point
                        $("#custom-theme-settings").show();
                        //addResetButton('base-color', baseSettingsUl.children());
                    }
                    else {
                        $("#custom-theme-library-container").hide();
                        $("#custom-theme-settings").hide();
                        addLightAndDarkResetButton('base-color', baseSettingsUl.children().first());
                    }
                })
                .appendTo(divThemeStyle);

                var customThemeLibraryContainer = $('<div id="custom-theme-library-container">').appendTo(themeTab);
                $('<label class="nr-db-theme-label">').text(c_("theme.custom-profile")).appendTo(customThemeLibraryContainer);
                $('<input type="text" id="ui-sidebar-name" style="vertical-align:top;" placeholder="profile name (not blank)">')
                .val(c_("theme.custom-profile-name"))
                .on("change", function() {
                    if (!globalDashboardNode || globalDashboardNode.theme.customTheme.name !== $(this).val()) {
                        //ensureDashboardNode(true);
                        globalDashboardNode.theme.customTheme.name = $(this).val();
                        if (editor) {
                            editor.setValue(JSON.stringify({theme:globalDashboardNode.theme.themeState, site:globalDashboardNode.site}),1);
                            RED.nodes.dirty(true);
                        }
                    }
                })
                .keyup(function() {
                    if ($(this).val().length === 0) {
                        $("#custom-theme-library-container div").css("pointer-events","none");
                    }
                    else { $("#custom-theme-library-container div").css("pointer-events","inherit"); }
                })
                .appendTo(customThemeLibraryContainer);
                $('<input type="hidden" id="nr-db-field-format">').appendTo(customThemeLibraryContainer);
                $('<div style="display:none;" class="node-text-editor" id="nr-db-field-format-editor"></div>').appendTo(customThemeLibraryContainer);

                var baseThemeSettingsContainer = $('<div id="base-theme-settings">').appendTo(themeTab);

                var baseSettings = $('<div>',{class:"form-row"}).appendTo(baseThemeSettingsContainer);
                $('<label class="nr-db-theme-label">').text(c_("theme.base-settings")).appendTo(baseSettings);
                var baseSettingsUl = $('<ul id="base-settings-ul" class="red-ui-dashboard-theme-styles"></ul>').appendTo(baseSettings);

                var baseColourItem = $('<li class="red-ui-dashboard-theme-item"><span>'+c_("base.colour")+'</span></li>').appendTo(baseSettingsUl);
                var spanColorContainer = $('<span class="nr-db-color-pick-container"></span>').appendTo(baseColourItem);

                $('<input id="base-color" class="nr-db-field-themeColor" type="color" value="#ffffff"/>')
                .on("change", function() {
                    //ensureDashboardNode(true);
                    var value = $(this).val();
                    var lightThemeMatch = globalDashboardNode.theme.lightTheme.baseColor === value;
                    var darkThemeMatch = globalDashboardNode.theme.darkTheme.baseColor === value;
                    var customThemeMatch = globalDashboardNode.theme.customTheme.baseColor === value;
                    if (!globalDashboardNode || !lightThemeMatch || !darkThemeMatch || !customThemeMatch) {
                        var theme = globalDashboardNode.theme.name.split('-')[1];
                        globalDashboardNode.theme[theme+'Theme'].baseColor = value;
                        if (globalDashboardNode.theme.name === 'theme-light' || globalDashboardNode.theme.name === 'theme-dark') {
                            //for light and dark themes, reset the colours
                            globalDashboardNode.theme[theme+'Theme'].reset = true;
                        }
                        generateColours(value);
                        editor.setValue(JSON.stringify({theme:globalDashboardNode.theme.themeState, site:globalDashboardNode.site}),1);
                        colourPickerChangeHandler($(this).attr('id'), value);
                    }
                })
                .appendTo(spanColorContainer);

                var baseFontItem = $('<li class="red-ui-dashboard-theme-item"><span>'+c_("base.font")+'</span></li>').appendTo(baseSettingsUl);
                var fontSelector = $('<select id="nr-db-field-font">'+
                    '<option value="'+baseFontName+'" style="font-family:'+baseFontName+'">'+c_("font.system")+'</option>'+
                    '<option value="Arial,Arial,Helvetica,sans-serif" style="font-family:Arial,Arial,Helvetica,sans-serif">Arial</option>'+
                    '<option value="Arial Black,Arial Black,Gadget,sans-serif" style="font-family:Arial Black,Arial Black,Gadget,sans-serif">Arial Black</option>'+
                    '<option value="Arial Narrow,Nimbus Sans L,sans-serif" style="font-family:Arial Narrow,Nimbus Sans L,sans-serif">Arial Narrow</option>'+
                    '<option value="Century Gothic,CenturyGothic,AppleGothic,sans-serif" style="font-family:Century Gothic,CenturyGothic,AppleGothic,sans-serif">Century Gothic</option>'+
                    '<option value="Copperplate,Copperplate Gothic Light,fantasy" style="font-family:Copperplate,Copperplate Gothic Light,fantasy;">Copperplate</option>'+
                    '<option value="Courier,monospace" style="font-family:Courier,monospace;">Courier</option>'+
                    '<option value="Georgia,Georgia,serif" style="font-family:Georgia,Georgia,serif">Georgia</option>'+
                    '<option value="Gill Sans,Geneva,sans-serif" style="font-family:Gill Sans,Geneva,sans-serif;">Gill Sans</option>'+
                    //'<option value="Helvetica Neue,Helvetica,sans-serif" style="font-family:Helvetica Neue,Helvetica,sans-serif">Helvetica Neue</option>'+
                    '<option value="Impact,Impact,Charcoal,sans-serif" style="font-family:Impact,Impact,Charcoal,sans-serif">Impact</option>'+
                    '<option value="Lucida Sans Typewriter,Lucida Console,Monaco,monospace" style="font-family:Lucida Console,Monaco,monospace">Lucida Console</option>'+
                    '<option value="Lucida Sans Unicode,Lucida Grande,sans-serif" style="font-family:Lucida Sans Unicode,Lucida Grande,sans-serif">Lucida Sans</option>'+
                    '<option value="Palatino Linotype,Palatino,Book Antiqua,serif" style="font-family:Palatino Linotype,Palatino,Book Antiqua,serif">Palatino Linotype</option>'+
                    '<option value="Tahoma,Geneva,sans-serif" style="font-family:Tahoma,Geneva,sans-serif">Tahoma</optionstyle="font-family:>'+
                    '<option value="Times New Roman,Times,serif" style="font-family:Times New Roman,Times,serif">Times New Roman</option>'+
                    '<option value="Trebuchet MS,Helvetica,sans-serif" style="font-family:Trebuchet MS,Helvetica,sans-serif">Trebuchet MS</option>'+
                    '<option value="Verdana,Verdana,Geneva,sans-serif" style="font-family:Verdana,Verdana,Geneva,sans-serif">Verdana</option>'+
                    '</select>')
                    .on("change", function() {
                        //ensureDashboardNode(true);
                        var theme = globalDashboardNode.theme.name.split('-')[1];
                        globalDashboardNode.theme[theme+'Theme'].baseFont = $(this).val();
                        globalDashboardNode.theme.themeState['base-font'] = {value:$(this).val()};
                        RED.nodes.dirty(true);
                    })
                    .appendTo(baseFontItem);

                var themeSettingsContainer = $('<div id="custom-theme-settings">').appendTo(themeTab);

                // Markup
                // Page styles
                var divPageStyle = $('<div>',{class:"form-row"}).appendTo(themeSettingsContainer);
                $('<label class="nr-db-theme-label">').text(c_("theme.page-settings")).appendTo(divPageStyle);
                var pageStyles = $('<ul class="red-ui-dashboard-theme-styles"></ul>').appendTo(themeSettingsContainer);
                addCustomisableStyle('page-titlebar-backgroundColor', c_("theme.page.title"), pageStyles);
                addCustomisableStyle('page-backgroundColor', c_("theme.page.page"), pageStyles);
                addCustomisableStyle('page-sidebar-backgroundColor', c_("theme.page.side"), pageStyles);

                // Group styles
                var divGroupStyle = $('<div>',{class:"form-row"}).appendTo(themeSettingsContainer);
                $('<label class="nr-db-theme-label">').text(c_("theme.group-settings")).appendTo(divGroupStyle);
                var groupStyles = $('<ul class="red-ui-dashboard-theme-styles"></ul>').appendTo(themeSettingsContainer);
                addCustomisableStyle('group-textColor', c_("theme.group.text"), groupStyles);
                addCustomisableStyle('group-borderColor', c_("theme.group.border"), groupStyles);
                addCustomisableStyle('group-backgroundColor', c_("theme.group.background"), groupStyles);

                // Widget styles
                var divWidgetStyle = $('<div>',{class:"form-row"}).appendTo(themeSettingsContainer);
                $('<label class="nr-db-theme-label">').text(c_("theme.widget-settings")).appendTo(divWidgetStyle);
                var widgetStyles = $('<ul class="red-ui-dashboard-theme-styles"></ul>').appendTo(themeSettingsContainer);
                addCustomisableStyle('widget-textColor', c_("theme.widget.text"), widgetStyles);
                addCustomisableStyle('widget-backgroundColor', c_("theme.widget.colour"), widgetStyles);
                addCustomisableStyle('widget-borderColor', c_("theme.widget.background"), widgetStyles);

                function addCustomisableStyle(id, name, parentUl) {
                    var styleLi = $('<li class="red-ui-dashboard-theme-item"><span>'+name+'</span></li>').appendTo(parentUl);
                    var spanColorContainer = $('<span class="nr-db-color-pick-container"></span>').appendTo(styleLi);
                    $('<input id="'+id+'" class="nr-db-field-themeColor" type="color" value="#ffffff"/>')
                    .on("change", function() {
                        colourPickerChangeHandler($(this).attr('id'), $(this).val());
                    })
                    .appendTo(spanColorContainer);
                    addResetButton(id, styleLi);
                }

                function colourPickerChangeHandler(id, value) {
                    $("#"+id).css("background-color", value);
                    $("#"+id+"-reset").css({opacity:1});
                    globalDashboardNode.theme.themeState[id].edited = true;
                    globalDashboardNode.theme.themeState[id].value = value;
                    if (editor) {
                        editor.setValue(JSON.stringify({theme:globalDashboardNode.theme.themeState, site:globalDashboardNode.site}),1);
                    }
                    RED.nodes.dirty(true);
                }

                function addResetButton(id, parent) {
                    var resetToDefault = $('<i id="'+id+'-reset" class="fa fa-undo nr-db-resetIcon"></i>')
                    .css({opacity:0.2})
                    .click(function(e) { resetClick(e); })
                    .appendTo(parent);
                }

                function addLightAndDarkResetButton(id, parent) {
                    if ($("#" + id + "-reset").length === 0) {
                        var resetToDefault = $('<i id="'+id+'-reset" class="fa fa-undo nr-db-resetIcon"></i>')
                        .css({opacity:1})
                        .click(function(e) { lightAndDarkResetClick(e); })
                        .appendTo(parent);
                        globalDashboardNode.theme[globalDashboardNode.theme.name.split('-')[1] + 'Theme'].edited = true;
                    }
                }

                function lightAndDarkResetClick(e) {
                    var elementID = e.target.id.split('-reset')[0];
                    var key = globalDashboardNode.theme.name.split('-')[1] + 'Theme';
                    //sanity check - light and dark only allow base-color-reset
                    if (elementID === 'base-color') { // && globalDashboardNode.theme[key].edited) {
                        var defaultColor = globalDashboardNode.theme[key].default;
                        globalDashboardNode.theme[key].reset = true;
                        generateColours(defaultColor);
                        setColourPickerColour(elementID, defaultColor);
                        $("#"+elementID+"-reset").css({opacity:0.2});
                        globalDashboardNode.theme.themeState[elementID].value = defaultColor;
                        globalDashboardNode.theme[key].baseColor = defaultColor;
                        globalDashboardNode.theme[key].edited = false;
                        RED.nodes.dirty(true);
                    }
                }

                function resetClick(e) {
                    //take off -reset
                    var elementID = e.target.id.split('-reset')[0];
                    if (globalDashboardNode.theme.themeState[elementID].edited) {
                        var defaultColor = globalDashboardNode.theme.themeState['base-color'].value;
                        var colour;
                        //set colour
                        if (elementID === 'base-color') {
                            colour = defaultColor;
                            generateColours(colour);
                        }
                        else {
                            var underscore = elementID.split('-').join('_');
                            colour = colours['calculate_'+underscore](defaultColor);
                        }
                        setColourPickerColour(elementID, colour);
                        $("#"+elementID+"-reset").css({opacity:0.2});
                        globalDashboardNode.theme.themeState[elementID].edited = false;
                        globalDashboardNode.theme.themeState[elementID].value = colour;
                        RED.nodes.dirty(true);
                    }
                }

                function setColourPickerColour(id, val, ed) {
                    $("#"+id).val(val);
                    $("#"+id).css("background-color", val);
                    //call mostReadableGreyWhite to set text colour
                    var textColor = colours.whiteGreyMostReadable(val);
                    $("#"+id).css("color", textColor);
                    if (ed === true) { $("#"+id+"-reset").css({opacity:1}); }
                    else { $("#"+id+"-reset").css({opacity:0.2}); }
                }

                //Layout Tab
                var divTabs = $('<div>',{class:"form-row",style:"position:relative"}).appendTo(layoutTab);
                $('<label>').html('<b>'+c_("layout.tab-and-link")+'</b>').appendTo(divTabs);

                var buttonGroup = $('<div>',{class:"nr-db-sb-list-button-group"}).appendTo(divTabs);

                //Toggle expand buttons
                $('<a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-angle-double-up"></i></a>')
                .click(function(evt) {
                    tabContainer.find(".nr-db-sb-group-list-container").slideUp().addClass('nr-db-sb-collapsed');
                    tabContainer.find(".nr-db-sb-tab-list-header>.nr-db-sb-list-chevron").css({"transform":"rotate(-90deg)"});
                    evt.preventDefault();
                })
                .appendTo(buttonGroup);
                $('<a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-angle-double-down"></i></a>')
                .click(function(evt) {
                    tabContainer.find(".nr-db-sb-group-list-container").slideDown().removeClass('nr-db-sb-collapsed');
                    tabContainer.find(".nr-db-sb-tab-list-header>.nr-db-sb-list-chevron").css({"transform":""});
                    evt.preventDefault();
                })
                .appendTo(buttonGroup);

                //Add item button
                $('<a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> '+c_("layout.tab")+'</a>')
                .click(function(evt) {
                    tabContainer.editableList('addItem',{type: 'ui_tab'});
                    evt.preventDefault();
                })
                .appendTo(buttonGroup);
                $('<a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> '+c_("layout.link")+'</a>')
                .click(function(evt) {
                    tabContainer.editableList('addItem',{type: 'ui_link'});
                    evt.preventDefault();
                })
                .appendTo(buttonGroup);

                var tabLists = {};
                var groupLists = {};

                // toggle slide tab group content
                var titleToggle = function (id,content,chevron) {
                    return function(evt) {
                        if (content.is(":visible")) {
                            content.slideUp();
                            chevron.css({"transform":"rotate(-90deg)"});
                            content.addClass('nr-db-sb-collapsed');
                            listStates[id] = false;
                        }
                        else {
                            content.slideDown();
                            chevron.css({"transform":""});
                            content.removeClass('nr-db-sb-collapsed');
                            listStates[id] = true;
                        }
                    };
                }

                var addTabOrLinkItem = function(container,i,item) {
                    ensureDashboardNode(true);
                    // create node if needed
                    if (!item.node) {
                        var defaultItem = {
                            'ui_tab': {
                                _def: RED.nodes.getType('ui_tab'),
                                type: 'ui_tab',
                                users: [],
                                icon: 'dashboard',
                                name: 'Tab'
                            },
                            'ui_link': {
                                _def: RED.nodes.getType('ui_link'),
                                type: 'ui_link',
                                users: [],
                                icon: 'open_in_browser',
                                name: 'Link',
                                target: 'newtab'
                            }
                        }
                        item.node = defaultItem[item.type]
                        item.node.id = RED.nodes.id()
                        item.node.order = i+1
                        item.node.name += ' '+item.node.order
                        listElements[item.node.id] = container;
                        if (item.type === 'ui_tab') {
                            item.groups = [];
                        }
                        RED.nodes.add(item.node);
                        RED.editor.validateNode(item.node);
                        RED.history.push({
                            t:'add',
                            nodes:[item.node.id],
                            dirty:RED.nodes.dirty()
                        });
                        RED.nodes.dirty(true);
                    }
                    else if (item.type === undefined) {
                        item.type = item.node.type
                    }

                    listElements[item.node.id] = container;
                    if (RED.nodes.hasOwnProperty('updateConfigNodeUsers')) {
                        RED.nodes.updateConfigNodeUsers(item.node);
                    }

                    // title
                    var titleRow = $('<div>',{class:"nr-db-sb-list-header nr-db-sb-tab-list-header"}).appendTo(container);
                    switch (item.type) {
                        case 'ui_tab': {
                            container.addClass("nr-db-sb-tab-list-item");
                            $('<i class="nr-db-sb-list-handle nr-db-sb-tab-list-handle fa fa-bars"></i>').appendTo(titleRow);
                            var chevron = $('<i class="fa fa-angle-down nr-db-sb-list-chevron">',{style:"width:10px;"}).appendTo(titleRow);
                            var tabicon = "fa-object-group";
                            //var tabicon = item.node.disabled ? "fa-window-close-o" : item.node.hidden ? "fa-eye-slash" : "fa-object-group";
                            $('<i>',{class:"nr-db-sb-icon nr-db-sb-tab-icon fa "+tabicon}).appendTo(titleRow);
                            var tabhide = item.node.hidden ? " nr-db-sb-title-hidden" : "";
                            var tabable = item.node.disabled ? " nr-db-sb-title-disabled" : "";
                            $('<span>',{class:"nr-db-sb-title"+tabhide+tabable}).text(item.node.name||"").appendTo(titleRow);
                            break;
                        }
                        case 'ui_link': {
                            $('<i class="nr-db-sb-list-handle fa fa-bars"></i>').appendTo(titleRow);
                            var title = $('<div class="nr-db-sb-link">').appendTo(titleRow);
                            var nameContainer = $('<div class="nr-db-sb-link-name-container">').appendTo(title);
                            $('<i class="fa fa-external-link"></i>').appendTo(nameContainer);
                            $('<span class="nr-db-sb-link-name">').text(item.node.name||"untitled").appendTo(nameContainer);
                            $('<div class="nr-db-sb-link-url">').text(item.node.link||"http://").appendTo(title);
                            break;
                        }
                    }
                    // buttons
                    var buttonGroup = $('<div>',{class:"nr-db-sb-list-header-button-group",id: item.node.id}).appendTo(titleRow);
                    if (item.type === 'ui_tab') {
                        var addGroupButton = $('<a href="#" class="nr-db-sb-tab-add-group-button editor-button editor-button-small nr-db-sb-list-header-button" ><i class="fa fa-plus"></i> '+c_("layout.group")+'</a>').appendTo(buttonGroup);
                    }
                    var editButton = $('<a href="#" class="nr-db-sb-tab-edit-button editor-button  editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> '+c_("layout.edit")+'</a>').appendTo(buttonGroup);
                    editButton.on('click',function(evt) {
                        if (isLocked(item.node.id)) {
                            evt.stopPropagation();
                            evt.preventDefault();
                            notifyLocked();
                            return;
                        }
                        RED.editor.editConfig("", item.type, item.node.id);
                        evt.stopPropagation();
                        evt.preventDefault();
                    });

                    // Dashboard layout tool
                    if (item.type === 'ui_tab') {
                        var layoutButton = $('<a href="#" class="nr-db-sb-tab-edit-layout-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> '+c_("layout.layout")+'</a>').appendTo(buttonGroup);
                        layoutButton.on('click',function(evt) {
                            if (isLocked(item.node.id)) {
                                evt.stopPropagation();
                                evt.preventDefault();
                                notifyLocked();
                                return;
                            }
                            var editTabName = item.node.name ? item.node.name : item.node.id;
                            var trayOptions = {
                                title: c_("layout.layout-editor") + " : " + editTabName,
                                width: Infinity,
                                buttons: [
                                    {
                                        id: "node-dialog-cancel",
                                        text: RED._("common.label.cancel"),
                                        click: function() {
                                            // clean editor
                                            RED.tray.close();
                                        }
                                    },
                                    {
                                        id: "node-dialog-ok",
                                        text: RED._("common.label.done"),
                                        class: "primary",
                                        click: function() {
                                            // Save data after editing
                                            saveGridDatas();
                                            RED.tray.close();
                                        }
                                    }
                                ],
                                resize: function(dimensions) {},
                                open: function(tray) {
                                    // Get widget of specified tab from node information
                                    tabDatas = getTabDataFromNodes(item.node.id);
                                    // The width that can be handled by Layout is up to MAX_GROUP_WIDTH
                                    // Groups exceeding the maximum width are not supported.
                                    var tmpGroups = tabDatas.groups;
                                    tmpGroups.sort(compareOrder);
                                    var groups = [];
                                    for (var cnt = 0; cnt < tmpGroups.length; cnt++) {
                                        if (tmpGroups[cnt].width <= MAX_GROUP_WIDTH) {
                                            groups.push(tmpGroups[cnt]);
                                        }
                                    }
                                    tabDatas.groups = groups;

                                    var editor = $('<div></div>',{addClass: 'nr-dashboard-layout-container-fluid'});
                                    var row =  $('<div></div>',{addClass: 'nr-dashboard-layout-row'});
                                    var span_num = Math.floor(12 / groups.length); // bootstrap grid 12 splits
                                    span_num = span_num < 2 ? 2 : span_num; // max 6 groups per row
                                    for (var cnt = 0; cnt < groups.length; cnt++) {
                                        if (cnt !=0 && (cnt % 6) == 0) {
                                            editor.append(row);
                                            editor.append('<div><br></div>');
                                            row = $('<div></div>',{addClass: 'nr-dashboard-layout-row'});
                                        }
                                        var span = $('<div></div>',{addClass: 'nr-dashboard-layout-span' + span_num});
                                        var groupName = groups[cnt].name ? groups[cnt].name : groups[cnt].id;
                                        var title = $('<div></div>', {
                                            style: "margin-top:2px; margin-bottom:2px;"
                                        });
                                        var title_group = $('<div></div>', {
                                            title: groupName,
                                            style: "margin-left:4px; margin-right:8px; overflow:hidden;"
                                        }).appendTo(title);
                                        $("<b/>").text(groupName).appendTo(title_group);
                                        var title_width = $('<div></div>', {
                                            style: "text-align:right; margin-right:8px;"
                                        }).appendTo(title);
                                        $("<span/>", {
                                            style: "margin_right: 8px;"
                                        }).text(c_("layout.width")+': ').appendTo(title_width);
                                        var changeWidth = $('<input>', {
                                            id: 'change-width' + cnt,
                                            value: groups[cnt].width,
                                            style: 'width:30px;',
                                            readonly: true,
                                            'node-id': groups[cnt].id,
                                        });
                                        title_width.append(changeWidth);

                                        title.css('white-space','nowrap');
                                        title.css('overflow','hidden');
                                        var gridstack = $('<div></div>', {
                                            id: 'grid'+cnt,
                                            addClass: 'grid-stack'
                                        });
                                        span.append(title);
                                        span.append(gridstack);
                                        row.append(span);
                                    }
                                    if (groups.length != 0) {
                                        editor.append(row);
                                    }

                                    // Show layout editor in tray
                                    var trayBody = tray.find('.red-ui-tray-body, .editor-tray-body');
                                    trayBody.css('overflow','auto');
                                    trayBody.append(editor);

                                    /////////////////////////////////////////
                                    // Editor screen generation
                                    /////////////////////////////////////////
                                    oldSpacer = [];
                                    widthChange = [];
                                    widgetResize = [];
                                    widgetDrag = [];
                                    for (var cnt=0; cnt < groups.length; cnt++) {
                                        // Gridstack.js option
                                        var options = {
                                            acceptWidgets: true,
                                            alwaysShowResizeHandle: true,
                                            cellHeight: 42,
                                            disableOneColumnMode : true,
                                            float: true,
                                            verticalMargin: 1
                                        };
                                        var gridID='#grid' + cnt;
                                        // gridstack generation
                                        $(gridID).gridstack(options);

                                        // Clear the contents of Grid
                                        var grid = $(gridID+'.grid-stack').data('gridstack');
                                        grid.removeAll();
                                        $(gridID).on("dropped", handleMove(grid));

                                        // Set the width of the display area of gridstack
                                        var groupWidth = Number(groups[cnt].width);
                                        $(gridID+'.grid-stack').css("width", groupWidth * 40);
                                        $(gridID+'.grid-stack').css("background-size", 100/groupWidth+"% 43px");
                                        $(gridID+'.grid-stack').attr("node-id", groups[cnt].id);
                                        $(gridID+'.grid-stack').attr("grid-column", groups[cnt].width);
                                        grid.setColumn(groupWidth, true);

                                        // Determination of placement position of widget of Grid
                                        var widgets = groups[cnt].widgets;
                                        widgets.sort(compareOrder);

                                        var tbl = {};
                                        for (var cnt2 = 0; cnt2 < widgets.length; cnt2++) {
                                            // Set default value when there is auto width
                                            if (widgets[cnt2].auto == true) {
                                                widgets[cnt2].width = groupWidth;
                                            // Adjust to the group width
                                            } else if (widgets[cnt2].width > groupWidth) {
                                                widgets[cnt2].width = groupWidth;
                                            }
                                            // Auto support
                                            if (widgets[cnt2].auto === true || widgets[cnt2].type === 'ui_form') {
                                                widgets[cnt2].height = getDefaultHeight(widgets[cnt2].id, groupWidth);
                                            }
                                            // Calculate coordinates to be placed
                                            var point = search_point(Number(widgets[cnt2].width), Number(widgets[cnt2].height), groupWidth, 256, tbl);
                                            if (point) {
                                                widgets[cnt2].x = point.x;
                                                widgets[cnt2].y = point.y;
                                            }
                                        }

                                        var items = GridStackUI.Utils.sort(widgets);
                                        items.forEach(function (node) {
                                            var minHeight = null;
                                            var maxHeight = null;
                                            // ui_form is fixed to height 2
                                            if (node.type === 'ui_form') {
                                                minHeight = node.height;
                                                maxHeight = node.height;
                                            }
                                            if (node.type !== 'ui_spacer') {
                                                var dispNode = RED.nodes.node(node.id);
                                                var dispType = dispNode._def.paletteLabel;
                                                var dispLabel = dispNode._def.label;
                                                try {
                                                    dispLabel = (typeof dispLabel === "function" ? dispLabel.call(dispNode) : dispLabel)||"";
                                                }
                                                catch(err) {
                                                    console.log("Definition error: " + node.type + ".label",err);
                                                    dispLabel = dispType;
                                                }

                                                var item = $('<div></div>', {
                                                    'data-noderedtype': node.type,
                                                    'data-noderedid': node.id,
                                                    'data-nodereddisptype': dispType,
                                                    'data-nodereddisplabel': dispLabel,
                                                    'data-noderedsizeauto': node.auto
                                                });
                                                var itemContent = $('<div></div>', {
                                                    addClass: 'grid-stack-item-content',
                                                    title: dispLabel + ':' + dispType
                                                });

                                                if (node.auto === true) {
                                                    itemContent.append('<i class="fa fa-unlock nr-dashboard-layout-resize-enable" title="'+c_("layout.auto")+'"></i>');
                                                } else {
                                                    itemContent.append('<i class="fa fa-lock nr-dashboard-layout-resize-disable" title="'+c_("layout.manual")+'"></i>');
                                                }
                                                itemContent.append('<b>'+ dispLabel +'</b><br/>'+ dispType);
                                                item.append(itemContent);
                                                grid.addWidget(
                                                    item,
                                                    node.x, node.y, node.width, node.height, false, null, null,
                                                    minHeight, maxHeight, node.id);
                                            } else {
                                                // Record the spacer node ID to be deleted
                                                oldSpacer.push(node.id);
                                            }
                                        });

                                        $(gridID+'.grid-stack > .grid-stack-item:visible').each( function(idx, el) {
                                            el = $(el);
                                            var node = el.data('_gridstack_node');
                                            var auto = (el[0].dataset.noderedsizeauto == 'true') ? true : false;
                                            grid.resizable(el, !auto);
                                        });

                                        // Group width change
                                        widthChange.push(new changeGroupWidth(cnt));
                                        // Resize widget in group (start event)
                                        widgetResize.push(new resizeGroupWidget(cnt));
                                        // Dragging widgets in a group (start event)
                                        widgetDrag.push(new dragGroupWidget(cnt));
                                    }
                                    $('.grid-stack>.grid-stack-item>.grid-stack-item-content>.nr-dashboard-layout-resize-disable').on('click',layoutResizeDisable);
                                    $('.grid-stack>.grid-stack-item>.grid-stack-item-content>.nr-dashboard-layout-resize-enable').on('click',layoutResizeEnable);
                                },
                                close: function() {},
                                show: function() {}
                            };
                            RED.tray.show(trayOptions);
                            evt.stopPropagation();
                            evt.preventDefault();
                        });
                    }

                    if (item.type === 'ui_tab') {
                        var content = $('<div>',{class:"nr-db-sb-group-list-container"}).appendTo(container);

                        // ui_tab group chevron
                        if (listStates.hasOwnProperty(item.node.id) && !listStates[item.node.id]) {
                            content.hide();
                            chevron.css({"transform":"rotate(-90deg)"});
                            content.addClass('nr-db-sb-collapsed');
                            listStates[item.node.id] = false;
                        }
                        else {
                            listStates[item.node.id] = true;
                        }
                        titleRow.click(titleToggle(item.node.id,content,chevron));

                        // ui_tab group list
                        var ol = $('<ol>',{class:"nr-db-sb-group-list"}).appendTo(content).editableList({
                            sortable:".nr-db-sb-group-list-header",
                            addButton: false,
                            height: 'auto',
                            connectWith: ".nr-db-sb-group-list",
                            addItem: function(container,i,group) {
                                if (!group.node) {
                                    group.node = {
                                        id: RED.nodes.id(),
                                        _def: RED.nodes.getType("ui_group"),
                                        type: "ui_group",
                                        users: [],
                                        tab: item.node.id,
                                        order: i+1,
                                        name: "Group "+(i+1),
                                        width: 6,
                                        disp: true
                                    };
                                    listElements[group.node.id] = container;
                                    RED.nodes.add(group.node);
                                    RED.editor.validateNode(group.node);
                                    group.widgets = [];
                                    RED.history.push({
                                        t:'add',
                                        nodes:[group.node.id],
                                        dirty:RED.nodes.dirty()
                                    });
                                    RED.nodes.dirty(true);
                                    if (RED.nodes.hasOwnProperty('updateConfigNodeUsers')) {
                                        RED.nodes.updateConfigNodeUsers(group.node);
                                    }
                                }
                                else {
                                    if (group.node.order === undefined) {
                                        group.node.order = i+1;
                                    }
                                }
                                var groupNode = group.node;
                                elementParents[groupNode] = item.node.id;
                                var titleRow = $('<div>',{class:"nr-db-sb-list-header nr-db-sb-group-list-header"}).appendTo(container);
                                $('<i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i>').appendTo(titleRow);
                                var chevron = $('<i class="fa fa-angle-down nr-db-sb-list-chevron">',{style:"width:10px;"}).appendTo(titleRow);
                                $('<i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i>').appendTo(titleRow);
                                var title = $('<span class="nr-db-sb-title">').text(groupNode.name||groupNode.id||"").appendTo(titleRow);
                                listElements[groupNode.id] = container;
                                var buttonGroup = $('<div>',{class:"nr-db-sb-list-header-button-group",id:groupNode.id}).appendTo(titleRow);
                                var spacerButton = $('<a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> '+c_("layout.spacer")+'</a>').appendTo(buttonGroup);
                                spacerButton.on('click',function(evt) {
                                    if (isLocked(item.node.id)) {
                                        evt.stopPropagation();
                                        evt.preventDefault();
                                        notifyLocked();
                                        return;
                                    }
                                    var spaceNode = {
                                        _def: RED.nodes.getType("ui_spacer"),
                                        type: "ui_spacer",
                                        hasUsers: false,
                                        users: [],
                                        id: RED.nodes.id(),
                                        tab: item.node.name,
                                        group: group.node.id,
                                        order: i+1,
                                        name: "spacer",
                                        width: 1,
                                        height:1,
                                        z: RED.workspaces.active(),
                                        label: function() { return "spacer " + this.width + "x" + this.height; }
                                    };
                                    RED.nodes.add(spaceNode);
                                    RED.editor.validateNode(spaceNode);
                                    RED.history.push({
                                        t:'add',
                                        nodes:[spaceNode.id],
                                        dirty:RED.nodes.dirty()
                                    });
                                    RED.nodes.dirty(true);
                                    RED.view.redraw();
                                    evt.stopPropagation();
                                    evt.preventDefault();
                                });
                                var editButton = $('<a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> '+c_("layout.edit")+'</a>').appendTo(buttonGroup);
                                var content = $('<div>',{class:"nr-db-sb-widget-list-container"}).appendTo(container);
                                if (!listStates.hasOwnProperty(groupNode.id) || !listStates[groupNode.id]) {
                                    content.hide();
                                    chevron.css({"transform":"rotate(-90deg)"});
                                    content.addClass('nr-db-sb-collapsed');
                                    listStates[groupNode.id] = false;
                                }
                                else {
                                    listStates[groupNode.id] = true;
                                }

                                var ol = $('<ol>',{class:"nr-db-sb-widget-list"}).appendTo(content).editableList({
                                    sortable:".nr-db-sb-widget-list-header",
                                    addButton: false,
                                    height: 'auto',
                                    connectWith: ".nr-db-sb-widget-list",
                                    addItem: function(container,i,widgetNode) {
                                        elementParents[widgetNode.id] = groupNode.id;
                                        var titleRow = $('<div>',{class:"nr-db-sb-list-header nr-db-sb-widget-list-header"}).appendTo(container);
                                        $('<i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i>').appendTo(titleRow);
                                        $('<i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i>').click(function(e) { e.preventDefault(); RED.search.show(widgetNode.id); }).appendTo(titleRow);
                                        var l = widgetNode._def.label;
                                        try {
                                            l = (typeof l === "function" ? l.call(widgetNode) : l)||"";
                                        }
                                        catch(err) {
                                            console.log("Definition error: "+d.type+".label",err);
                                            l = d.type;
                                        }
                                        var title = $('<span class="nr-db-sb-title">').text(l).appendTo(titleRow);
                                        listElements[widgetNode.id] = container;
                                        var buttonGroup = $('<div>',{class:"nr-db-sb-list-header-button-group"}).appendTo(titleRow);
                                            var editButton = $('<a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> '+c_("layout.edit")+'</a>').appendTo(buttonGroup);
                                            container.on('mouseover',function() {
                                            widgetNode.highlighted = true;
                                            widgetNode.dirty = true;
                                            RED.view.redraw();
                                        });
                                        container.on('mouseout',function() {
                                            widgetNode.highlighted = false;
                                            widgetNode.dirty = true;
                                            RED.view.redraw();
                                        });
                                        editButton.on('click',function(evt) {
                                            if (isLockedTab(widgetNode.z)) {
                                                evt.stopPropagation();
                                                evt.preventDefault();
                                                notifyLocked();
                                                return;
                                            }
                                            RED.editor.edit(widgetNode);
                                            evt.stopPropagation();
                                            evt.preventDefault();
                                        });
                                    },
                                    sortItems: function(items) {
                                        if (isLocked(item.node.id)) {
                                            $(ol).editableList("cancel");
                                            notifyLocked();
                                            return;
                                        }
                                        var historyEvents = [];
                                        items.each(function(i,el) {
                                            var node = el.data('data');
                                            var hev = {
                                                t:'edit',
                                                node:node,
                                                changes:{
                                                    order:node.order,
                                                    group:node.group
                                                },
                                                dirty:node.dirty,
                                                changed:node.changed
                                            };
                                            historyEvents.push(hev);
                                            var changed = false;
                                            if (node.order !== i+1) {
                                                node.order = i+1;
                                                changed = true;
                                            }
                                            if (node.group !== group.node.id) {
                                                var oldGroupNode = RED.nodes.node(node.group);
                                                if (oldGroupNode) {
                                                    var index = oldGroupNode.users.indexOf(node);
                                                    oldGroupNode.users.splice(index,1);
                                                }
                                                node.group = group.node.id;
                                                group.node.users.push(node);
                                                changed = true;
                                            }
                                            if (changed) {
                                                node.dirty = true;
                                                node.changed = true;
                                            }
                                        })
                                        RED.history.push({
                                            t:'multi',
                                            events: historyEvents
                                        });
                                        RED.nodes.dirty(true);
                                        RED.view.redraw();
                                    }
                                });
                                ol.css("min-height","5px");
                                if (groupNode.id) {
                                    groupLists[groupNode.id] = ol;
                                }
                                titleRow.click(titleToggle(groupNode.id,content,chevron));
                                editButton.on('click',function(evt) {
                                    if (isLocked(item.node.id)) {
                                        evt.stopPropagation();
                                        evt.preventDefault();
                                        notifyLocked();
                                        return;
                                    }
                                    RED.editor.editConfig("", groupNode.type, groupNode.id);
                                    evt.stopPropagation();
                                    evt.preventDefault();
                                });
                                group.widgets.forEach(function(widget) {
                                    ol.editableList('addItem',widget);
                                })
                            },
                            sortItems: function(items) {
                                var historyEvents = [];
                                items.each(function(i,el) {
                                    var groupData = el.data('data');
                                    var node = groupData.node;
                                    var hev = {
                                        t:'edit',
                                        node:node,
                                        changes:{
                                            order:node.order,
                                            tab:node.tab
                                        },
                                        dirty:node.dirty,
                                        changed:node.changed
                                    };
                                    historyEvents.push(hev);
                                    var changed = false;
                                    if (node.order !== i+1) {
                                        node.order = i+1;
                                        changed = true;
                                    }
                                    if (changed) {
                                        node.dirty = true;
                                        node.changed = true;
                                    }
                                    if (node.tab !== item.node.id) {
                                        var oldTabNode = RED.nodes.node(node.tab);
                                        if (oldTabNode) {
                                            var index = oldTabNode.users.indexOf(node);
                                            oldTabNode.users.splice(index,1);
                                        }
                                        node.tab = item.node.id;
                                        item.node.users.push(node);
                                        changed = true;
                                    }
                                })
                                RED.history.push({
                                    t:'multi',
                                    events: historyEvents
                                });
                                RED.nodes.dirty(true);
                                RED.view.redraw();
                            }
                        })
                        tabLists[item.node.id] = ol;

                        addGroupButton.click(function(evt) {
                            if (isLocked(item.node.id)) {
                                evt.stopPropagation();
                                evt.preventDefault();
                                notifyLocked();
                                return;
                            }
                            ol.editableList('addItem',{});
                            evt.stopPropagation();
                            evt.preventDefault();
                        });
                        item.groups.forEach(function(group) {
                            ol.editableList('addItem',group);
                        });
                    }
                }

                var tabContainer = $('<ol>',{class:"nr-db-sb-tab-list"}).appendTo(divTabs).editableList({
                    sortable:".nr-db-sb-tab-list-header",
                    addButton: false,
                    addItem: addTabOrLinkItem,
                    sortItems: function(items) {
                        var historyEvents = [];
                        items.each(function(i,el) {
                            var itemData = el.data('data');
                            var node = itemData.node;
                            var hev = {
                                t:'edit',
                                node:node,
                                changes:{
                                    order:node.order
                                },
                                dirty:node.dirty,
                                changed:node.changed
                            }
                            historyEvents.push(hev);
                            var changed = false;
                            if (node.order !== i+1) {
                                node.order = i+1;
                                changed = true;
                            }
                            if (changed) {
                                node.dirty = true;
                                node.changed = true;
                            }
                        })
                        RED.history.push({
                            t:'multi',
                            events: historyEvents
                        });
                        RED.nodes.dirty(true);
                        RED.view.redraw();
                    }
                });

                var orphanedWidgets = $('<div>',{class:"form-row"}).appendTo(layoutTab);
                $('<span><i class="fa fa-info-circle"></i> There <span id="nr-db-missing-group-count"></span> not in a group. Click <a id="nr-db-add-missing-groups" href="#">here</a> to create the missing groups</span>').appendTo(orphanedWidgets);
                orphanedWidgets.find('a').click(function(event) {
                    var unknownGroups = {};
                    RED.nodes.eachNode(function(node) {
                        if (/^ui_/.test(node.type) && node.type !== 'ui_link' && node.type !== 'ui_toast' && node.type !== 'ui_ui_control') {
                            if (!RED.nodes.node(node.group)) {
                                var g = node.group || "_BLANK_";
                                unknownGroups[g] = unknownGroups[g] || [];
                                unknownGroups[g].push(node);
                            }
                        }
                    });
                    var tab = null;
                    var tabs = tabContainer.editableList('items');
                    tabs.first().each(function(i,el) {
                        var tabData = el.data('data');
                        tab = tabData.node;
                    });

                    var hev = [];
                    if (tab === null) {
                        tab = {
                            id: RED.nodes.id(),
                            _def: RED.nodes.getType("ui_tab"),
                            type: "ui_tab",
                            users: [],
                            order: 0,
                            name: "Tab",
                            icon: "dashboard"
                        };
                        RED.nodes.add(tab);
                        RED.editor.validateNode(tab);
                        hev.push(tab.id);
                    }
                    for (var groupId in unknownGroups) {
                        if (unknownGroups.hasOwnProperty(groupId)) {
                            var groupNode = {
                                id: RED.nodes.id(),
                                _def: RED.nodes.getType("ui_group"),
                                type: "ui_group",
                                users: [],
                                tab: tab.id,
                                order: i+1,
                                name: (groupId==="_BLANK_"?"Group":groupId),
                                width: 6,
                                disp: true
                            };
                            hev.push(groupNode.id);
                            RED.nodes.add(groupNode);
                            RED.editor.validateNode(groupNode);
                            if (RED.nodes.hasOwnProperty('updateConfigNodeUsers')) {
                                RED.nodes.updateConfigNodeUsers(groupNode);
                            }
                            var widgets = unknownGroups[groupId];
                            for (var i=0; i<widgets.length; i++) {
                                widgets[i].group = groupNode.id;
                                widgets[i].changed = true;
                                widgets[i].dirty = true;
                                if (RED.nodes.hasOwnProperty('updateConfigNodeUsers')) {
                                    RED.nodes.updateConfigNodeUsers(widgets[i]);
                                }
                                RED.editor.validateNode(widgets[i]);
                            }
                        }
                    }
                    RED.history.push({
                        t:'add',
                        nodes: hev,
                        dirty:RED.nodes.dirty()
                    });
                    RED.nodes.dirty(true);
                    refresh();
                    refreshOrphanedWidgets();
                    RED.view.redraw();
                    event.preventDefault();
                });

                var listElements = {};
                var dashboard = [];
                var listStates = {};
                var elementParents = {};
                var awaitingGroups = {};
                var awaitingTabs = {};

                function getCurrentList() {
                    var currentList = [];
                    var tabs = tabContainer.editableList('items');
                    var open = false;
                    tabs.each(function(i,el) {
                        var tabData = el.data('data');
                        var tab = [];
                        var groups = el.find('.nr-db-sb-group-list').editableList('items');
                        groups.each(function(j,el) {
                            var group = [];
                            var groupData = el.data('data');
                            var widgets = el.find('.nr-db-sb-widget-list').editableList('items');
                            widgets.each(function(k,el) {
                                var widgetData = el.data('data');
                                group.push(widgetData.id);
                            })
                            tab.push({id:groupData.node.id, widgets:group});
                        });
                        currentList.push({id:tabData.node.id,groups:tab});
                    });
                    return currentList;
                }

                function refreshOrphanedWidgets() {
                    var unknownGroups = {};
                    var count = 0;
                    RED.nodes.eachNode(function(node) {
                        if (/^ui_/.test(node.type) && node.type !== 'ui_link' && node.type !== 'ui_toast' && node.type !== 'ui_ui_control' && (node.type === 'ui_template' && node.templateScope !== 'global')) {
                            if (!RED.nodes.node(node.group)) {
                                var g = node.group || "_BLANK_";
                                unknownGroups[g] = unknownGroups[g] || [];
                                unknownGroups[g].push(node);
                                count++;
                            }
                        }
                    });

                    if (count > 0) {
                        orphanedWidgets.show();
                        $("#nr-db-missing-group-count").text((count===1?"is ":"are ")+count+" widget"+(count === 1?"":"s"))
                    }
                    else {
                        orphanedWidgets.hide();
                    }
                }

                function refresh() {
                    var currentList = getCurrentList();
                    dashboard = [];
                    var tabs = {};
                    var groups = {};
                    var elements = [];
                    var groupElements = {};
                    var tabGroups = {};
                    var groupId;
                    var group;
                    var tabId;
                    var tab;
                    var unknownGroups = 0;
                    // Find all the tabs and groups
                    RED.nodes.eachConfig(function(node) {
                        switch (node.type) {
                            case 'ui_tab':
                            case 'ui_link': {
                                tabs[node.id] = node;
                                //tabContainer.editableList('addItem',node);
                                break;
                            }
                            case 'ui_group': {
                                groups[node.id] = node;
                                break;
                            }
                            case 'ui_spacer': {
                                if (groups.hasOwnProperty(node.group)) {
                                    groupElements[node.group] = groupElements[node.group]||[];
                                    groupElements[node.group].push(node);
                                }
                                break;
                            }
                        }
                    });
                    for (groupId in groups) {
                        if (groups.hasOwnProperty(groupId)) {
                            group = groups[groupId];
                            if (tabs.hasOwnProperty(group.tab)) {
                                // This group belongs to a tab
                                tabGroups[group.tab] = tabGroups[group.tab]||[];
                                tabGroups[group.tab].push(group);
                            }
                            else {
                                unknownGroups++;
                            }
                        }
                    }
                    // Find all ui widgets - list them by their group id
                    RED.nodes.eachNode(function(node) {
                        if (/^ui_/.test(node.type)) {
                            if (groups.hasOwnProperty(node.group)) {
                                groupElements[node.group] = groupElements[node.group]||[];
                                groupElements[node.group].push(node);
                            }
                            else if ((node.type !== 'ui_toast')&&(node.type !== 'ui_ui_control')&&(node.type === 'ui_template' && node.templateScope !== 'global')) {
                                unknownGroups++;
                            }
                        }
                    });
                    if (unknownGroups > 0) {
                        $("#nr-db-missing-group-count").text((unknownGroups===1?"is ":"are ")+unknownGroups+" widget"+(unknownGroups === 1?"":"s"))
                        orphanedWidgets.show();
                    }
                    else {
                        orphanedWidgets.hide();
                    }
                    // Sort each group's array of widgets
                    for (groupId in groupElements) {
                        if (groupElements.hasOwnProperty(groupId)) {
                            group = groupElements[groupId];
                            groupElements[groupId] = group.map(function(v,i) { return {n:v,i:i} }).sort(function(A,B) {
                                if (A.n.order < B.n.order) { return A.n.order!==0?-1:1;}
                                if (A.n.order > B.n.order) { return B.n.order!==0?1:-1;}
                                return A.i - B.i;
                            }).map(function(v) { return v.n})
                        }
                    }
                    // Sort each tabs's array of groups
                    for (tabId in tabGroups) {
                        if (tabGroups.hasOwnProperty(tabId)) {
                            tab = tabGroups[tabId];
                            tabGroups[tabId] = tab.map(function(v,i) { return {n:v,i:i} }).sort(function(A,B) {
                                if (A.n.order < B.n.order) { return -1;}
                                if (A.n.order > B.n.order) { return 1;}
                                return A.i - B.i;
                            }).map(function(v) { return v.n})
                        }
                    }
                    var tabIds = Object.keys(tabs).map(function(v,i) { return {n:tabs[v],i:i} }).sort(function(A,B) {
                        if (A.n.order < B.n.order) { return -1;}
                        if (A.n.order > B.n.order) { return 1;}
                        return A.i - B.i;
                    }).map(function(v) { return v.n.id});
                    tabIds.forEach(function(tabId) {
                        var tab = {node:tabs[tabId],groups:[]};
                        if (tabGroups[tabId]) {
                            tabGroups[tabId].forEach(function(groupNode) {
                                var group = {node:groupNode,widgets:[]};
                                if (groupElements[groupNode.id]) {
                                    group.widgets = groupElements[groupNode.id];
                                }
                                tab.groups.push(group);
                            });
                        }
                        dashboard.push(tab);
                    });
                    var newList = dashboard.map(function(t) {
                        return {
                            id: t.node.id,
                            groups: t.groups.map(function(g) {
                                return {
                                    id: g.node.id,
                                    widgets: g.widgets.map(function(w) {
                                        return w.id;
                                    })
                                }
                            })
                        }
                    });
                    if (JSON.stringify(newList)!=JSON.stringify(currentList)) {
                        listElements = {};
                        groupLists = {};
                        tabLists = {};
                        tabs = {};
                        groups = {};
                        elementParents = {};
                        tabContainer.empty();
                        dashboard.forEach(function(tab) {
                            tabContainer.editableList('addItem',tab);
                        });
                    }
                    //ensureDashboardNode(true);
                    if (globalDashboardNode) {
                        $("#nr-db-field-title").val(globalDashboardNode.site.name);
                        $("#nr-db-field-allowSwipe").val(globalDashboardNode.site.allowSwipe || "false");
                        $("#nr-db-field-allowTempTheme").val(globalDashboardNode.site.allowTempTheme || "true");
                        $("#nr-db-field-hideToolbar").val(globalDashboardNode.site.hideToolbar || "false");
                        $("#nr-db-field-dateFormat").val(globalDashboardNode.site.dateFormat);

                        if (typeof globalDashboardNode.site.sizes !== "object") {
                            globalDashboardNode.site.sizes = sizes;
                        }
                        $("#nr-db-field-sx").val(globalDashboardNode.site.sizes.sx);
                        $("#nr-db-field-sy").val(globalDashboardNode.site.sizes.sy);
                        $("#nr-db-field-px").val(globalDashboardNode.site.sizes.px);
                        $("#nr-db-field-py").val(globalDashboardNode.site.sizes.py);
                        $("#nr-db-field-cx").val(globalDashboardNode.site.sizes.cx);
                        $("#nr-db-field-cy").val(globalDashboardNode.site.sizes.cy);
                        $("#nr-db-field-gx").val(globalDashboardNode.site.sizes.gx);
                        $("#nr-db-field-gy").val(globalDashboardNode.site.sizes.gy);

                        if (typeof globalDashboardNode.theme.angularTheme !== "object") {
                            globalDashboardNode.theme.angularTheme = aTheme;
                        }
                        $("#nr-db-field-angPrimary").val(globalDashboardNode.theme.angularTheme.primary || "indigo");
                        $("#nr-db-field-angAccents").val(globalDashboardNode.theme.angularTheme.accents || "blue");
                        $("#nr-db-field-angWarn").val(globalDashboardNode.theme.angularTheme.warn || "red");
                        $("#nr-db-field-angBackground").val(globalDashboardNode.theme.angularTheme.background || "grey");
                        $("#nr-db-field-angLook").val(globalDashboardNode.theme.angularTheme.palette || "light");

                        $("#nr-db-field-theme").val(globalDashboardNode.theme.name);
                        $("#ui-sidebar-name").val(globalDashboardNode.theme.customTheme.name);
                        if (globalDashboardNode.theme.name === 'theme-custom') {
                            $("#custom-theme-library-container").show();
                            $("#custom-theme-settings").show();
                        }
                        else {
                            $("#custom-theme-library-container").hide();
                            $("#custom-theme-settings").hide();
                        }
                        if ($('#nr-db-field-allowTempTheme').val() === "none") {
                            ulDashboardTabs.children().eq(2).addClass("hidden");
                            ulDashboardTabs.children().eq(3).removeClass("hidden");
                        }
                        else {
                            ulDashboardTabs.children().eq(2).removeClass("hidden");
                            ulDashboardTabs.children().eq(3).addClass("hidden");
                        }

                        //set colour start
                        if (typeof globalDashboardNode.theme.name !== "string") {
                            globalDashboardNode.theme.name = "theme-light";
                        }
                        var currentTheme = globalDashboardNode.theme.name.split("-")[1];
                        var startingValue = globalDashboardNode.theme[currentTheme+"Theme"].baseColor;
                        setColourPickerColour("base-color", startingValue);
                        $("#nr-db-field-font").val(globalDashboardNode.theme[currentTheme+"Theme"].baseFont);
                        generateColours(startingValue);
                        if (globalDashboardNode.theme.name === 'theme-light' || globalDashboardNode.theme.name === 'theme-dark') {
                            addLightAndDarkResetButton('base-color', $('#base-settings-ul').children().first());
                        }

                        if (editor === undefined) {
                            editor = RED.editor.createEditor({
                                id: 'nr-db-field-format-editor',
                                mode: 'ace/mode/javascript',
                                value: JSON.stringify({theme:globalDashboardNode.theme.themeState, site:globalDashboardNode.site})
                            });

                            RED.library.create({
                                url:"themes", // where to get the data from
                                type:"theme", // the type of object the library is for
                                editor: editor, // the field name the main text body goes to
                                mode:"ace/mode/javascript",
                                fields:['name'],
                                elementPrefix:"ui-sidebar-"
                            });
                        }

                        editor.on('input', function() {
                            // Check for any changes on the editor object
                            // i.e. has the theme been customised compared
                            // to what is stored
                            var editorObject = JSON.parse(editor.getValue());

                            //Update theme object if necessary
                            if (JSON.stringify(editorObject.theme) !== JSON.stringify(globalDashboardNode.theme.themeState)) {
                                globalDashboardNode.theme.themeState = editorObject.theme;
                                if ($("#ui-sidebar-name").val() !== globalDashboardNode.theme.customTheme.name) {
                                    globalDashboardNode.theme.customTheme.name = $("#ui-sidebar-name").val();
                                    globalDashboardNode.theme.customTheme.baseColor = globalDashboardNode.theme.themeState["base-color"].value;
                                    setColourPickerColour("base-color", globalDashboardNode.theme.customTheme.baseColor);
                                    generateColours(globalDashboardNode.theme.themeState["base-color"].value);
                                    RED.nodes.dirty(true);
                                }
                            }
                            if (JSON.stringify(aTheme) !== JSON.stringify(globalDashboardNode.theme.angularTheme)) {
                                globalDashboardNode.theme.angularTheme = aTheme;
                            }

                            //Update site object if necessary
                            if (JSON.stringify(editorObject.site) !== JSON.stringify(globalDashboardNode.site)) {
                                globalDashboardNode.site = editorObject.site;
                                $("#nr-db-field-title").val(globalDashboardNode.site.name);
                                $("#nr-db-field-hideToolbar").val(globalDashboardNode.site.hideToolbar);
                                $("#nr-db-field-allowSwipe").val(globalDashboardNode.site.allowSwipe);
                                $("#nr-db-field-allowTempTheme").val(globalDashboardNode.site.allowTempTheme);
                                $("#nr-db-field-dateFormat").val(globalDashboardNode.site.dateFormat);
                                $("#nr-db-field-sx").val(globalDashboardNode.site.sizes.sx);
                                $("#nr-db-field-sy").val(globalDashboardNode.site.sizes.sy);
                                $("#nr-db-field-px").val(globalDashboardNode.site.sizes.px);
                                $("#nr-db-field-py").val(globalDashboardNode.site.sizes.py);
                                $("#nr-db-field-gx").val(globalDashboardNode.site.sizes.gx);
                                $("#nr-db-field-gy").val(globalDashboardNode.site.sizes.gy);
                                $("#nr-db-field-cx").val(globalDashboardNode.site.sizes.cx);
                                $("#nr-db-field-cy").val(globalDashboardNode.site.sizes.cy);
                                RED.nodes.dirty(true);
                            }
                        });
                    }
                    awaitingGroups = {};
                    awaitingTabs = {};
                }

                RED.sidebar.addTab({
                    id: "dashboard",
                    label: c_("label.dashboard"),
                    name: "Dashboard",
                    content: content,
                    closeable: true,
                    pinned: true,
                    iconClass: "fa fa-bar-chart",
                    disableOnEdit: true,
                    onchange: function() { refresh(); }
                });

                editSaveEventHandler = function(node) {
                    if (/^ui_/.test(node.type)) {
                        if (node.type === "ui_tab" || node.type === "ui_group") {
                            if (listElements[node.id]) {
                                // Existing element
                                listElements[node.id].children(".nr-db-sb-list-header").find(".nr-db-sb-title").text(node.name||node.id);
                                if (node.type === "ui_group") {
                                    refresh();
                                }
                                else {
                                    if (node.hidden === true) { listElements[node.id].children(".nr-db-sb-list-header").find(".nr-db-sb-title").addClass('nr-db-sb-title-hidden'); }
                                    else { listElements[node.id].children(".nr-db-sb-list-header").find(".nr-db-sb-title").removeClass('nr-db-sb-title-hidden'); }
                                    if (node.disabled === true) { listElements[node.id].children(".nr-db-sb-list-header").find(".nr-db-sb-title").addClass('nr-db-sb-title-disabled'); }
                                    else { listElements[node.id].children(".nr-db-sb-list-header").find(".nr-db-sb-title").removeClass('nr-db-sb-title-disabled'); }
                                }
                            }
                            else if (node.type === "ui_tab") {
                                // Adding a tab
                                tabContainer.editableList('addItem',{node:node,groups:[]})
                            }
                            else {
                                // Adding a group
                                if (tabLists[node.tab]) {
                                    tabLists[node.tab].editableList('addItem',{node:node,widgets:[]})
                                }
                            }
                        }
                        else if (node.type === "ui_link") {
                            if (listElements[node.id]) {
                                var container = listElements[node.id];
                                container.find(".nr-db-sb-link-name").text(node.name||"untitled");
                                container.find(".nr-db-sb-link-url").text(node.link);
                            }
                        }
                        else {
                            refreshOrphanedWidgets();
                            if (listElements[node.id]) {
                                if (node.group != elementParents[node.id]) {
                                    // Moved to a different group
                                    if (groupLists[elementParents[node.id]]) {
                                        groupLists[elementParents[node.id]].editableList('removeItem',listElements[node.id].data('data'))
                                    }
                                    if (groupLists[node.group]) {
                                        groupLists[node.group].editableList('removeItem',node)
                                        groupLists[node.group].editableList('addItem',node);
                                    }
                                }
                                else {
                                    var l = node._def.label;
                                    try {
                                        l = (typeof l === "function" ? l.call(node) : l)||"";
                                    }
                                    catch(err) {
                                        console.log("Definition error: "+d.type+".label",err);
                                        l = d.type;
                                    }
                                    listElements[node.id].children(".nr-db-sb-list-header").find(".nr-db-sb-title").text(l);
                                }
                            }
                            else {
                                if (groupLists[node.group]) {
                                    if (node.order === 0) { node.order = groupLists[node.group].editableList('length'); }
                                    groupLists[node.group].editableList('addItem',node);
                                }
                            }
                        }
                    }
                };
                RED.events.on("editor:save",editSaveEventHandler);

                // Dashboard layout tool
                layoutUpdateEventHandler = function(node) {
                    if (/^ui_/.test(node.type) && node.type !== 'ui_link' && node.type !== 'ui_toast' && node.type !== 'ui_ui_control' && node.type !== 'ui_audio' && node.type !== 'ui_base' && node.type !== 'ui_group' && node.type !== 'ui_tab') {
                        if (listElements[node.id]) {
                            if (node.group != elementParents[node.id]) {
                                // Moved to a different group
                                if (groupLists[elementParents[node.id]]) {
                                    groupLists[elementParents[node.id]].editableList('removeItem',listElements[node.id].data('data'))
                                }
                                if (groupLists[node.group]) {
                                    groupLists[node.group].editableList('removeItem',node)
                                    groupLists[node.group].editableList('addItem',node);
                                    groupLists[node.group].editableList('sort',function(a,b) {return a.order-b.order;});
                                }
                            }
                            else {
                                groupLists[node.group].editableList('sort',function(a,b) {return a.order-b.order;});
                            }
                        }
                    }
                };
                RED.events.on("layout:update",layoutUpdateEventHandler);

                var pendingAdd = [];
                var pendingAddTimer = null;

                function handlePendingAdds() {
                    var hasTabs = false;
                    var hasGroups = false;
                    pendingAdd.sort(function(A,B) {
                        hasTabs = hasTabs || A.type === "ui_tab" || B.type === "ui_tab";
                        hasGroups = hasGroups || A.type === "ui_group" || B.type === "ui_group";
                        if (A.type === B.type) {
                            return 0;
                        }
                        if (A.type === "ui_tab") {
                            return -1;
                        }
                        else if (B.type === "ui_tab") {
                            return 1;
                        }
                        else if (A.type === "ui_group") {
                            return -1;
                        }
                        else if (B.type === "ui_group") {
                            return 1;
                        }
                        return 0
                    });
                    var updateList = {};
                    for (var i=0; i<pendingAdd.length; i++) {
                        var node = pendingAdd[i];
                        if (listElements[node.id]) {
                            continue;
                        }
                        if (node.type === "ui_tab") {
                            tabContainer.editableList('addItem',{node:node,groups:[]});
                        }
                        else {
                            if (hasTabs) {
                                // We've added some tabs, need to give jquery time to add the lists
                                pendingAdd = pendingAdd.slice(i);
                                pendingAddTimer = setTimeout(handlePendingAdds,50);
                                return;
                            }
                            if (node.type === "ui_group") {
                                if (tabLists[node.tab]) {
                                    tabLists[node.tab].editableList('addItem',{node:node,widgets:[]});
                                }
                            }
                            else {
                                if (hasGroups) {
                                    // We've added some tabs, need to give jquery time to add the lists
                                    pendingAdd = pendingAdd.slice(i);
                                    pendingAddTimer = setTimeout(handlePendingAdds,50);
                                    return;
                                }
                                if (groupLists[node.group]) {
                                    groupLists[node.group].editableList('addItem',node)
                                    if (node.order >= 0) {
                                        updateList[node.group] = true;
                                    }
                                }
                                else {
                                    refreshOrphanedWidgets();
                                }
                            }
                        }
                    }
                    Object.keys(updateList).forEach(function (group) {
                        var list = groupLists[group];
                        if (list) {
                            list.editableList("sort", function(a,b) {return a.order-b.order;});
                        }
                    });
                    pendingAdd = [];
                }

                nodesAddEventHandler = function(node) {
                    if (/^ui_/.test(node.type) && !listElements[node.id]) {
                        pendingAdd.push(node);
                        clearTimeout(pendingAddTimer);
                        pendingAddTimer = setTimeout(handlePendingAdds,100);
                    }
                };
                RED.events.on("nodes:add", nodesAddEventHandler);

                nodesRemoveEventHandler = function(node) {
                    if (/^ui_/.test(node.type)) {
                        if (node.type === "ui_tab" || node.type === "ui_link") {
                            if (listElements[node.id]) {
                                tabContainer.editableList('removeItem',listElements[node.id].data('data'));
                                delete tabLists[node.id];
                            }
                        }
                        else if (node.type === "ui_group") {
                            if (tabLists[node.tab] && listElements[node.id]) {
                                tabLists[node.tab].editableList('removeItem',listElements[node.id].data('data'));
                            }
                            delete groupLists[node.id];
                        }
                        else {
                            if (groupLists[node.group]) {
                                groupLists[node.group].editableList('removeItem',node)
                            }
                        }
                        refreshOrphanedWidgets();
                        delete listElements[node.id];
                    }
                };
                RED.events.on("nodes:remove", nodesRemoveEventHandler);
            }
        });

    $.widget("nodereddashboard.elementSizerByNum", {
        _create: function() {
            var that = this;
            var has_height = this.options.has_height;
            var pos = this.options.pos;
            var c_width = has_height ? '15%' : '6%';
            var container = $('<div>').css({
                position: 'absolute',
                background: 'var(--red-ui-secondary-background, white)',
                padding: '10px 10px 10px 10px',
                border: '1px solid var(--red-ui-primary-border-color, grey)',
                zIndex: '20',
                borderRadius: "4px",
                display:"none",
                width: c_width
            }).appendTo(document.body);
            var box0 = $("<div>").css({
                fontSize: '13px',
                color: 'var(--red-ui-tertiary-text-color, #aaa)',
                float: 'left',
                paddingTop: '1px'
            }).appendTo(container);

            var width = $(this.options.width).val();
            var height = has_height ? $(this.options.height).val() : undefined;
            var max_w = '';
            var groupNode = this.options.groupNode;
            if(groupNode) {
                max_w = 'max="'+groupNode.width+'"';
            }
            width = (width > 0) ? width : 1;
            height = (height > 0) ? height : 1;
            var in0 = $('<input type="number" min="1" '+max_w+'>')
                .css("width", has_height ? "40%" : "100%")
                .val(width)
                .appendTo(box0);
            if(has_height) {
                var pad = $('<span>')
                    .text(" x ")
                    .appendTo(box0);
                var in1 = $('<input type="number" min="1">')
                    .css("width", "40%")
                    .val(height)
                    .appendTo(box0);
            }
            var closeTimer;
            var closeFunc = function() {
                var w = in0.val();
                var h = has_height ? in1.val() : undefined;
                var label = that.options.label;
                label.text(w+(has_height ? (' x '+h) : ''));
                $(that.options.width).val(w).change();
                if(has_height) {
                    $(that.options.height).val(h).change();
                }
                that.destroy();
            };
            container.keypress(function(e) {
                if(e.which === 13) { // pressed ENTER
                    container.fadeOut(100, closeFunc);
                }
            });
            container.on('mouseleave', function(e) {
                closeTimer = setTimeout(function() {
                    container.fadeOut(200, closeFunc);
                }, 100);
            });
            container.on('mouseenter', function(e) {
                clearTimeout(closeTimer);
            });
            container.css({
                top: (pos.top -10)+"px",
                left: (pos.left +10)+"px"
            });
            container.fadeIn(200);
        }
    });

    $.widget( "nodereddashboard.elementSizer", {
        _create: function() {
            var that = this;
            var gridWidth = 6;
            var width = parseInt($(this.options.width).val()||0);
            var height = parseInt(this.options.hasOwnProperty('height')?$(this.options.height).val():"1")||0;
            var hasAuto = (!this.options.hasOwnProperty('auto') || this.options.auto);

            this.element.css({
                minWidth: this.element.height()+4
            });
            var auto_text = c_("auto");
            var sizeLabel = (width === 0 && height === 0)?auto_text:width+(this.options.hasOwnProperty('height')?" x "+height:"");
            this.element.text(sizeLabel).on('mousedown',function(evt) {
                evt.stopPropagation();
                evt.preventDefault();

                var width = parseInt($(that.options.width).val()||0);
                var height = parseInt(that.options.hasOwnProperty('height')?$(that.options.height).val():"1")||0;
                var maxWidth = 0;
                var maxHeight;
                var fixedWidth = false;
                var fixedHeight = false;
                var group = $(that.options.group).val();
                if (group) {
                    var groupNode = RED.nodes.node(group);
                    if (groupNode) {
                        gridWidth = Math.max(6,groupNode.width,+width);
                        maxWidth = groupNode.width || gridWidth;
                        fixedWidth = true;
                    }
                    maxHeight = Math.max(6,+height+1);
                }
                else {
                    gridWidth = Math.max(12,+width);
                    maxWidth = gridWidth;
                    maxHeight = 1;
                    fixedHeight = true;
                }

                var pos = $(this).offset();
                var container = $('<div>').css({
                    position: 'absolute',
                    background: 'var(--red-ui-secondary-background, white)',
                    padding: '5px 10px 10px 10px',
                    border: '1px solid var(--red-ui-primary-border-color, grey)',
                    zIndex: '20',
                    borderRadius: "4px",
                    display:"none"
                }).appendTo(document.body);

                var closeTimer;
                container.on('mouseleave',function(evt) {
                    closeTimer = setTimeout(function() {
                        container.fadeOut(200, function() { $(this).remove(); });
                    },100)
                });
                container.on('mouseenter',function() {
                    clearTimeout(closeTimer);
                })

                var label = $("<div>").css({
                    fontSize: '13px',
                    color: 'var(--red-ui-tertiary-text-color, #aaa)',
                    float: 'left',
                    paddingTop: '1px'
                }).appendTo(container).text((width === 0 && height === 0)?auto_text:(width+(that.options.hasOwnProperty('height')?" x "+height:"")));
                label.hover(function() {
                    $(this).css('text-decoration', 'underline');
                }, function() {
                    $(this).css('text-decoration', 'none');
                });

                label.click(function(e) {
                    var group = $(that.options.group).val();
                    var groupNode = null;
                    if(group) {
                        groupNode = RED.nodes.node(group);
                        if(groupNode === null) {
                            return;
                        }
                    }
                    $(that).elementSizerByNum({
                        width: that.options.width,
                        height: that.options.height,
                        groupNode: groupNode,
                        pos: pos,
                        label: that.element,
                        has_height: that.options.hasOwnProperty('height')
                    });
                    closeTimer = setTimeout(function() {
                        container.fadeOut(200, function() {
                            $(this).remove();
                        });
                    },100)
                });

                var buttonRow = $('<div>',{style:"text-align:right; height:25px;"}).appendTo(container);

                if (hasAuto) {
                    var button = $('<a>',{href:"#",class:"editor-button editor-button-small",style:"margin-bottom:5px"})
                    .text(auto_text)
                    .appendTo(buttonRow)
                    .on('mouseup',function(evt) {
                        that.element.text(auto_text)
                        $(that.options.width).val(0).change();
                        $(that.options.height).val(0).change();
                        evt.preventDefault();
                        container.fadeOut(200, function() { $(this).remove(); });
                    });
                }

                var cellBorder = "1px dashed var(--red-ui-secondary-border-color, lightGray)";
                var cellBorderExisting = "1px solid gray";
                var cellBorderHighlight = "1px dashed var(--red-ui-primary-border-color, black)";
                var rows = [];
                function addRow(i) {
                    var row = $('<div>').css({padding:0,margin:0,height:"25px","box-sizing":"border-box"}).appendTo(container);
                    rows.push(row);
                    cells.push([])
                    for (var j=0; j<gridWidth; j++) {
                        addCell(i,j);
                    }
                }
                function addCell(i,j) {
                    var row = rows[i];
                    var cell = $('<div>').css({
                        display:"inline-block",
                        width: "25px",
                        height: "25px",
                        borderRight: (j===(width-1)&&i<height)?cellBorderExisting:cellBorder,
                        borderBottom: (i===(height-1)&&j<width)?cellBorderExisting:cellBorder,
                        boxSizing: "border-box",
                        cursor:"pointer",
                        background: (j<maxWidth)?"var(--red-ui-secondary-background, #fff)" : "var(--red-ui-node-background-placeholder, #eee)"
                    }).appendTo(row);
                    cells[i].push(cell);
                    if (j===0) {
                        cell.css({borderLeft:((i<=height-1)?cellBorderExisting:cellBorder)});
                    }
                    if (i===0) {
                        cell.css({borderTop:((j<=width-1)?cellBorderExisting:cellBorder)});
                    }
                    if (j<maxWidth) {
                        cell.data("w",j);
                        cell.data("h",i);
                        cell.on("mouseup",function() {
                            that.element.text(($(this).data("w")+1)+(that.options.hasOwnProperty('height')?" x "+($(this).data("h")+1):""))
                            $(that.options.width).val($(this).data("w")+1).change();
                            $(that.options.height).val($(this).data("h")+1).change();
                            container.fadeOut(200, function() { $(this).remove(); });
                        });
                        cell.on("mouseover",function() {
                            var w = $(this).data("w");
                            var h = $(this).data("h");
                            label.text((w+1)+(that.options.hasOwnProperty('height')?" x "+(h+1):""));
                            for (var y = 0; y<maxHeight; y++) {
                                for (var x = 0; x<maxWidth; x++) {
                                    cells[y][x].css({
                                        background: (y<=h && x<=w)?'var(--red-ui-secondary-background-selected, #ddd)' : 'var(--red-ui-secondary-background, #fff)',
                                        borderLeft: (x===0&&y<=h)?cellBorderHighlight:(x===0)?((y<=height-1)?cellBorderExisting:cellBorder):'',
                                        borderTop: (y===0&&x<=w)?cellBorderHighlight:(y===0)?((x<=width-1)?cellBorderExisting:cellBorder):'',
                                        borderRight: (x===w&&y<=h)?cellBorderHighlight:((x===width-1&&y<=height-1)?cellBorderExisting:cellBorder),
                                        borderBottom: (y===h&&x<=w)?cellBorderHighlight:((y===height-1&&x<=width-1)?cellBorderExisting:cellBorder)
                                    })
                                }
                            }
                            if (!fixedHeight && h === maxHeight-1) {
                                addRow(maxHeight++)
                            }
                            if (!fixedWidth && w === maxWidth-1) {
                                maxWidth++;
                                gridWidth++;
                                for (var r=0; r<maxHeight; r++) {
                                    addCell(r,maxWidth-1);
                                }
                            }
                        })
                    }
                }
                var cells = [];
                for (var i=0; i<maxHeight; i++) {
                    addRow(i);
                }
                container.css({
                    top:(pos.top)+"px",
                    left:(pos.left)+"px"
                });
                container.fadeIn(200);
            })
        }
    });
})(jQuery);
</script>

<script type="text/html" data-template-name="ui_base">
    <div class='form-row'>
        This <i>ui_base</i> node is the main node that all<br/>other dashboard widget nodes communicate to.<br/>
        <br/>One instance is required to support the dashboard.<br/>
        <br/>If you have no dashboard you can delete this node.<br/>
        It will be re-created automatically if required.<br/>
    </div>
</script>
<script type="text/html" data-help-name="ui_base">
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_button] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_button',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(176, 223, 227)',
        defaults: {
            name: {value: ''},
            group: {type: 'ui_group', required: true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            passthru: {value: false},
            label: {value: 'button'},
            tooltip: {value: ''},
            color: {value: ''},
            bgcolor: {value: ''},
            className: {value: ''},
            icon: {value: ''},
            payload: {value: '',validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('payloadType'):function(v) { return true})},
            payloadType: { value: 'str'},
            topic:  {value: 'topic', validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('topicType'):function(v) { return true})},
            topicType: {value: 'msg'}
        },
        inputs:1,
        outputs:1,
        outputLabels: function() { if (this.payloadType === "str") {
            return this.payload;
        } else {return this.payloadType; } },
        icon: "ui_button.png",
        paletteLabel: 'button',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || 'button'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            $('#node-input-payload').typedInput({
                default: 'str',
                typeField: $("#node-input-payloadType"),
                types: ['str','num','bool','json','bin','date','flow','global']
            });
            $('#node-input-topic').typedInput({
                default: 'str',
                typeField: $("#node-input-topicType"),
                types: ['str','msg','flow','global']
            });
        }
    });
</script>

<script type="text/html" data-template-name="ui_button">
	<div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> <span data-i18n="ui_button.label.group"></label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui_button.label.size"></label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-icon"><i class="fa fa-picture-o"></i> <span data-i18n="ui_button.label.icon"></label>
        <input type="text" id="node-input-icon" data-i18n="[placeholder]ui_button.label.optionalIcon">
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> <span data-i18n="ui_button.label.label"></label>
        <input type="text" id="node-input-label" data-i18n="[placeholder]ui_button.label.optionalLabel">
    </div>
    <div class="form-row">
        <label for="node-input-tooltip"><i class="fa fa-info-circle"></i> <span data-i18n="ui_button.label.tooltip"></label>
        <input type="text" id="node-input-tooltip" data-i18n="[placeholder]ui_button.label.optionalTooltip">
    </div>
    <div class="form-row">
        <label for="node-input-color"><i class="fa fa-tint"></i> <span data-i18n="ui_button.label.color"></label>
        <input type="text" id="node-input-color" data-i18n="[placeholder]ui_button.label.optionalColor">
    </div>
    <div class="form-row">
        <label for="node-input-bgcolor"><i class="fa fa-tint"></i>  <span data-i18n="ui_button.label.background"></label>
        <input type="text" id="node-input-bgcolor" data-i18n="[placeholder]ui_button.label.optionalBackgroundColor">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-payload"><i class="fa fa-envelope-o"></i> <span data-i18n="ui_button.label.whenClicked"></label>
    </div>
    <div class="form-row">
        <label for="node-input-payload" style="padding-left: 25px; margin-right: -25px"><span data-i18n="ui_button.label.payload"></label>
        <input type="text" id="node-input-payload" style="width:70%">
        <input type="hidden" id="node-input-payloadType">
    </div>
    <div class="form-row">
        <label for="node-input-topic" style="padding-left: 25px; margin-right: -25px"><span data-i18n="ui_button.label.topic"></label>
        <input type="text" id="node-input-topic">
        <input type="hidden" id="node-input-topicType">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> <span data-i18n="ui_button.label.emulateClick"></label>
        <input type="checkbox" id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  <span data-i18n="ui_button.label.className"></label>
        <input type="text" id="node-input-className" data-i18n="[placeholder]ui_button.label.classNamePlaceholder"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
</script>
<script type="text/html" data-help-name="ui_button">
    <p>Adds a button to the user interface.</p>
    <p>Clicking the button generates a message with <code>msg.payload</code> set to the <b>Payload</b> field.
    If no payload is specified, the node id is used.</p>
	<p>The <b>Size</b> defaults to  3 by 1.</p>
    <p>The <b>Icon</b> can be defined, as either a <a href="https://klarsys.github.io/angular-material-icons/" target="_blank">Material Design icon</a>
    <i>(e.g. 'check', 'close')</i> or a <a href="https://fontawesome.com/v4.7.0/icons/" target="_blank">Font Awesome icon</a>
    <i>(e.g. 'fa-fire')</i>, or a <a href="https://github.com/Paul-Reed/weather-icons-lite/blob/master/css_mappings.md">Weather icon</a>.
    You can use the full set of google material icons if you add 'mi-' to the icon name. e.g. 'mi-videogame_asset'.</p>
    <p>The colours of the text and background may be set. They can also be set by a message property by setting
    the field to the name of the property, for example <code>{{background}}</code>.
    You don't need to prepend the <i>msg.</i> part of the property name.</p>
    <p>The label and icon can also be set by a message property by setting
    the field to the name of the property, for example <code>{{topic}}</code> or <code>{{myicon}}</code>.</p>
    <p>If set to pass through mode a message arriving on the input will act like pressing the button.
    The output payload will be as defined in the node configuration.</p>
    <p>The incoming <b>topic</b> field can be used to set the <code>msg.topic</code> property that is output.</p>
    <p>Setting <code>msg.enabled</code> to <code>false</code> will disable the button.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_dropdown] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_dropdown',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(176, 223, 227)',
        defaults: {
            name: {value: ''},
            label: {value: ''},
            tooltip: {value: ''},
            place: {value: 'Select option'},
            group: {type: 'ui_group', required:true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            passthru: {value: true},
            multiple: {value: false},
            options: {value:[{value: '', label : ''}],
                validate:function(v) {
                    var unique = new Set(v.map(function(o) {return o.value;}));
                    return v.length == unique.size;
                }},
            payload: {value: ''},
            topic: {value: 'topic', validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('topicType'):function(v) { return true})},
            topicType: {value: 'msg'},
            className: {value: ''}
        },
        inputs:1,
        outputs:1,
        icon: "ui_dropdown.png",
        paletteLabel: 'dropdown',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || 'dropdown'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            if (this.multiple === undefined) {
                $("#node-input-multiple").prop('checked', false);;
            }
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            var un = new Set(this.options.map(function(o) {return o.value}));
            if (this.options.length == un.size) { $("#valWarning").hide(); }
            else { $("#valWarning").show(); }

            function generateOption(i, option) {
                var container = $('<li/>',{style:"background: var(--red-ui-secondary-background, #fff); margin:0; padding:8px 0px 0px; border-bottom: 1px solid var(--red-ui-form-input-border-color, #ccc);"});
                var row = $('<div/>').appendTo(container);
                var row2 = $('<div/>',{style:"padding-top:5px; padding-left:175px;"}).appendTo(container);
                var row3 = $('<div/>',{style:"padding-top:5px; padding-left:120px;"}).appendTo(container);

                $('<i style="color: var(--red-ui-form-text-color, #eee); cursor:move; margin-left:3px;" class="node-input-option-handle fa fa-bars"></i>').appendTo(row);

                var valueField = $('<input/>',{class:"node-input-option-value",type:"text",style:"margin-left:7px; width:calc(50% - 32px);", placeholder: 'Value',value:option.value}).appendTo(row).typedInput({default:option.type||'str',types:['str','num','bool']});
                var labelField = $('<input/>',{class:"node-input-option-label",type:"text",style:"margin-left:7px; width:calc(50% - 32px);", placeholder: 'Label', value:option.label}).appendTo(row);

                var finalspan = $('<span/>',{style:"float:right; margin-right:8px;"}).appendTo(row);
                var deleteButton = $('<a/>',{href:"#",class:"editor-button editor-button-small", style:"margin-top:7px; margin-left:5px;"}).appendTo(finalspan);
                $('<i/>',{class:"fa fa-remove"}).appendTo(deleteButton);

                deleteButton.click(function() {
                    container.css({"background":"var(--red-ui-secondary-background-inactive, #fee)"});
                    container.fadeOut(300, function() {
                        $(this).remove();
                    });
                });

                $("#node-input-option-container").append(container);
            }

            $("#node-input-add-option").click(function() {
                generateOption($("#node-input-option-container").children().length+1, {});
                $("#node-input-option-container-div").scrollTop($("#node-input-option-container-div").get(0).scrollHeight);
            });

            for (var i=0; i<this.options.length; i++) {
                var option = this.options[i];
                generateOption(i+1,option);
            }

            $( "#node-input-option-container" ).sortable({
                axis: "y",
                handle:".node-input-option-handle",
                cursor: "move"
            });

            $('#node-input-topic').typedInput({
                default: 'str',
                typeField: $("#node-input-topicType"),
                types: ['str','msg','flow','global']
            });
        },
        oneditsave: function() {
            var options = $("#node-input-option-container").children();
            var node = this;
            node.options = [];
            options.each(function(i) {
                var option = $(this);
                var o = {
                    label: option.find(".node-input-option-label").val(),
                    value: option.find(".node-input-option-value").typedInput('value'),
                    type: option.find(".node-input-option-value").typedInput('type')
                };
                if (option.find(".node-input-option-value").typedInput('type') === "num") {
                    o.value = Number(o.value);
                }
                if (option.find(".node-input-option-value").typedInput('type') === "bool") {
                    o.value = (o.value == "true");
                }
                node.options.push(o);
            });
        },
        oneditresize: function() {
        }
    });
</script>

<script type="text/html" data-template-name="ui_dropdown">
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-tag"></i> Label</label>
        <input type="text" id="node-input-label" placeholder="optional label">
    </div>
    <div class="form-row">
        <label for="node-input-tooltip"><i class="fa fa-info-circle"></i> Tooltip</label>
        <input type="text" id="node-input-tooltip" placeholder="optional tooltip">
    </div>
    <div class="form-row">
        <label for="node-input-place"><i class="fa fa-tag"></i> Placeholder</label>
        <input type="text" id="node-input-place" placeholder="optional placeholder">
    </div>
    <div class="form-row node-input-option-container-row" style="margin-bottom: 0px;width: 100%">
        <label for="node-input-width" style="vertical-align:top"><i class="fa fa-list-alt"></i> Options</label>
        <div id="node-input-option-container-div" style="box-sizing:border-box; border-radius:5px; height:257px; padding:5px; border:1px solid var(--red-ui-form-input-border-color, #ccc); overflow-y:scroll; display:inline-block; width:calc(70% + 15px);">
            <span id="valWarning" style="color: var(--red-ui-text-color-error, #910000)"><b>All Values must be unique.</b></span>
            <ol id="node-input-option-container" style="list-style-type:none; margin:0;"></ol>
        </div>
    </div>
    <div class="form-row">
        <a href="#" class="editor-button editor-button-small" id="node-input-add-option" style="margin-top:4px; margin-left:103px;"><i class="fa fa-plus"></i> <span>option</span></a>
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-multiple"><i class="fa fa-th-list"></i> Allow multiple selections from list: </label>
        <input type="checkbox" checked id="node-input-multiple" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> If <code>msg</code> arrives on input, pass through to output: </label>
        <input type="checkbox" checked id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> Topic</label>
        <input type="text" id="node-input-topic" placeholder="optional msg.topic">
        <input type="hidden" id="node-input-topicType">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
</script>
<script type="text/html" data-help-name="ui_dropdown">
    <p>Adds a dropdown select box to the user interface.</p>
    <p>Multiple value / label pairs can be added as required. If the label is not specified the
    value will be used for both.</p>
    <p>The configured value of the selected item will be returned as <code>msg.payload</code>.</p>
    <p>Setting <code>msg.payload</code> to one of the item values will preset the choice in the dropdown.
    If using the multi-select option then the payload should be an array of values.</p>
    <p>Optionally the user search term can deleted if the <code>msg.resetSearch</code> property is present and set to <i>true</i>.</p>
    <p>Optionally the <b>Topic</b> field can be used to set the <code>msg.topic</code> property.</p>
    <p>The Options may be configured by inputting <code>msg.options</code> containing an array.
    If just text then the value will be the same as the label, otherwise you can specify both by
    using an object of <code>"label":"value"</code> pairs :</p>
    <code>[ "Choice 1", "Choice 2", {"Choice 3":"3"} ]</code>
    <p></p>
    <p>If the "Allow multiple selections" output option is enabled - the result will be returned as an array instead of a string.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_switch] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_switch',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(176, 223, 227)',
        defaults: {
            name: {value: ''},
            label: {value: 'switch'},
            tooltip: {value: ''},
            group: {type: 'ui_group', required: true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            passthru: {value: true},
            decouple: {value: "false"},
            topic: {value: 'topic', validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('topicType'):function(v) { return true})},
            topicType: {value: 'msg'},
            style: {value: ''},
            onvalue: {value: true, required:true, validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('onvalueType'):function(v) { return true})},
            onvalueType: {value: 'bool'},
            onicon: {value: '' },
            oncolor: {value: ''},
            offvalue: {value: false, required:true, validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('offvalueType'):function(v) { return true})},
            offvalueType: {value: 'bool'},
            officon: {value: ''},
            offcolor: {value: ''},
            animate: {value: false},
            className: {value: ''}
        },
        inputs:1,
        outputs:1,
        icon: "ui_switch.png",
        paletteLabel: 'switch',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || 'switch'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            $('#node-input-custom-icons').on("change", function() {
                if ($('#node-input-custom-icons').val() === "default") {
                    $(".form-row-custom-icons").hide();
                }
                else {
                    $(".form-row-custom-icons").show();
                }
            });

            if (this.onicon !== "" || this.oncolor !== "" || this.officon !=="" || this.offcolor !== "") {
                $('#node-input-custom-icons').val('custom');
            }
            else {
                $(".form-row-custom-icons").hide();
                $('#node-input-custom-icons').change();
            }

            $('#node-input-onvalue').typedInput({
                default: 'str',
                typeField: $("#node-input-onvalueType"),
                types: ['str','num','bool','json','bin','date','flow','global']
            });

            $('#node-input-offvalue').typedInput({
                default: 'str',
                typeField: $("#node-input-offvalueType"),
                types: ['str','num','bool','json','bin','date','flow','global']
            });

            $('#node-input-topic').typedInput({
                default: 'str',
                typeField: $("#node-input-topicType"),
                types: ['str','msg','flow','global']
            });

            $('#node-input-passthru').on("change", function() {
                if (this.checked) {
                    $('.form-row-decouple').hide();
                    $('#node-input-decouple').val("false");
                }
                else {
                    $('.form-row-decouple').show();
                }
            });
        },
        oneditsave: function() {
            if ($('#node-input-custom-icons').val() === 'default') {
                $('#node-input-onicon').val('');
                $('#node-input-officon').val('');
                $('#node-input-oncolor').val('');
                $('#node-input-offcolor').val('');
            }
        }
    });
</script>

<script type="text/html" data-template-name="ui_switch">
	<div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> Label</label>
        <input type="text" id="node-input-label">
    </div>
    <div class="form-row">
        <label for="node-input-tooltip"><i class="fa fa-info-circle"></i> Tooltip</label>
        <input type="text" id="node-input-tooltip" placeholder="optional tooltip">
    </div>
    <div class="form-row">
        <label for="node-input-custom-icons"><i class="fa fa-picture-o"></i> Icon</label>
        <select id="node-input-custom-icons" style="width:35%">
            <option value="default">Default</option>
            <option value="custom">Custom</option>
        </select>
        <span style="width:auto; padding-left:20px" class="form-row-custom-icons" for="node-input-animate"> Animate
        <input type="checkbox" checked id="node-input-animate" style="display:inline-block; width:auto; vertical-align:baseline;"></span>
    </div>
    <div class="form-row form-row-custom-icons">
        <label for="node-input-onicon" style="text-align:right;"><i class="fa fa-toggle-on"></i> On Icon</label>
        <input type="text" id="node-input-onicon" style="width:120px">
        <label for="node-input-oncolor" style="width:50px; text-align:right;">Colour</label>
        <input type="text" id="node-input-oncolor" style="width:120px">
    </div>
    <div class="form-row form-row-custom-icons">
        <label for="node-input-officon" style="text-align:right;"><i class="fa fa-toggle-off"></i> Off Icon</label>
        <input type="text" id="node-input-officon" style="width:120px">
        <label for="node-input-offcolor" style="width:50px; text-align:right;">Colour</label>
        <input type="text" id="node-input-offcolor" style="width:120px">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> Pass through <code>msg</code> if payload matches valid state: </label>
        <input type="checkbox" checked id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row form-row-decouple">
        <label for="node-input-decouple"><i class="fa fa-toggle-on"></i> Indicator</label>
        <select id="node-input-decouple" style="display: inline-block; vertical-align: middle; width:70%;">
            <option value="false">Switch icon shows state of the output</option>
            <option value="true">Switch icon shows state of the input</option>
        </select>
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-onvalue"><i class="fa fa-envelope-o"></i> When clicked, send:</label>
    </div>
    <div class="form-row">
        <label for="node-input-onvalue" style="padding-left:25px; margin-right:-25px">On Payload</label>
        <input type="text" id="node-input-onvalue" style="width:70%">
        <input type="hidden" id="node-input-onvalueType">
    </div>
    <div class="form-row">
        <label for="node-input-offvalue" style="padding-left:25px; margin-right:-25px">Off Payload</label>
        <input type="text" id="node-input-offvalue" style="width:70%">
        <input type="hidden" id="node-input-offvalueType">
    </div>
    <div class="form-row">
        <label for="node-input-topic" style="padding-left:25px; margin-right:-25px">Topic</label>
        <input type="text" id="node-input-topic">
        <input type="hidden" id="node-input-topicType">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
</script>
<script type="text/html" data-help-name="ui_switch">
    <p>Adds a switch to the user interface.</p>
	<p>Each change in the state of the switch will generate
    a <code>msg.payload</code> with the specified <b>On</b> and <b>Off</b> values.</p>
    <p>The <b>On/Off Color</b> and <b>On/Off Icon</b> are optional fields. If they are all present, the default
    toggle switch will be replaced with the relevant icons and their respective colors.</p>
    <p>The <b>On/Off Icon</b> field can be either a <a href="https://klarsys.github.io/angular-material-icons/" target="_blank">Material Design icon</a>
    <i>(e.g. 'check', 'close')</i> or a <a href="https://fontawesome.com/v4.7.0/icons/" target="_blank">Font Awesome icon</a>
    <i>(e.g. 'fa-fire')</i>, or a <a href="https://github.com/Paul-Reed/weather-icons-lite/blob/master/css_mappings.md">Weather icon</a>.
    You can use the full set of google material icons if you add 'mi-' to the icon name. e.g. 'mi-videogame_asset'.</p>
    <p>In pass through mode the switch state can be updated by an incoming <code>msg.payload</code> with the specified values,
    that must also match the specified type (number, string, etc). When not in passthrough mode then the icon can either
    track the state of the output - or the input msg.payload, in order to provide a closed loop feedback.</p>
    <p>The label can also be set by a message property by setting
    the field to the name of the property, for example <code>{{msg.topic}}</code>.</p>
    <p>If a <b>Topic</b> is specified, it will be added to the output as <code>msg.topic</code>.</p>
    <p>Setting <code>msg.enabled</code> to <code>false</code> will disable the switch widget.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_slider] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_slider',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(176, 223, 227)',
        defaults: {
            name: {value: ''},
            label: {value: 'slider'},
            tooltip: {value: ''},
            group: {type: 'ui_group', required: true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            passthru: {value: true},
            outs: {value: 'all'},
            topic: {value: 'topic', validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('topicType'):function(v) { return true})},
            topicType: {value: 'msg'},
            min: {value: 0, required:true, validate:RED.validators.number()},
            max: {value: 10, required:true, validate:RED.validators.number()},
            step: {value: 1},
            className: {value: ''}
        },
        inputs:1,
        outputs:1,
        outputLabels: function() { return this.min+" - "+this.max; },
        icon: "ui_slider.png",
        paletteLabel: 'slider',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || 'slider'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            $('#node-input-topic').typedInput({
                default: 'str',
                typeField: $("#node-input-topicType"),
                types: ['str','msg','flow','global']
            });
            if (!$("#node-input-outs").val()) { $("#node-input-outs").val("all") }
        }
    });
</script>

<script type="text/html" data-template-name="ui_slider">
	<div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> Label</label>
        <input type="text" id="node-input-label">
    </div>
    <div class="form-row">
        <label for="node-input-tooltip"><i class="fa fa-info-circle"></i> Tooltip</label>
        <input type="text" id="node-input-tooltip" placeholder="optional tooltip">
    </div>
    <div class="form-row">
        <label for="node-input-min"><i class="fa fa-arrows-h"></i> Range</label>
        <span for="node-input-min">min</span>
        <input type="text" id="node-input-min" style="width:60px">
        <span for="not-input-max" style="margin-left:22px;">max</span>
        <input type="text" id="node-input-max" style="width:60px">
        <span for="not-input-step" style="margin-left:22px;">step</span>
        <input type="text" id="node-input-step" style="width:60px">
    </div>
    <div class="form-row">
        <label for="node-input-outs"><i class="fa fa-sign-out"></i> Output</label>
        <select id="node-input-outs" style="width:204px">
            <option value="all">continuously while sliding</option>
            <option value="end">only on release</option>
        </select>
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> If <code>msg</code> arrives on input, pass through to output: </label>
        <input type="checkbox" checked id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-payload"><i class="fa fa-envelope-o"></i> When changed, send:</label>
    </div>
    <div class="form-row">
        <label style="padding-left:25px; margin-right:-25px">Payload</label>
        <label style="width:auto">Current value</label>
    </div>
    <div class="form-row">
        <label for="node-input-topic" style="padding-left:25px; margin-right:-25px">Topic</label>
        <input type="text" id="node-input-topic">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
        <input type="hidden" id="node-input-topicType">
    </div>
</script>
<script type="text/html" data-help-name="ui_slider">
    <p>Adds a slider widget to the user interface.</p>
	<p>The user can change its value between the limits (<b>min</b> and <b>max</b>). Each value change
    will generate a message with the value set as <b>payload</b>.</p>
    <p>A vertical slider can be created by setting the size so that the height is greater than the width.</p>
    <p>The slider can be reversed by setting the min value larger than the max value. e.g. min 100, max 0.</p>
    <p>If a <b>Topic</b> is specified, it will be added as <code>msg.topic</code>.</p>
    <p>An input <code>msg.payload</code> will be converted to a number, and used to preset a value.
    The <b>min</b> value will be used if conversion fails,
    and it will update the user interface. If the value changes, it will also be passed to the output.</p>
    <p>The label can also be set by a message property by setting
    the field to the name of the property, for example <code>{{msg.topic}}</code>.</p>
    <p>Setting <code>msg.enabled</code> to <code>false</code> will disable the slider output.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_numeric] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_numeric',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(176, 223, 227)',
        defaults: {
            name: {value: ''},
            label: {value: 'numeric'},
            tooltip: {value: ''},
            group: {type: 'ui_group', required: true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            wrap: {value: false},
            passthru: {value: true},
            topic: {value: 'topic', validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('topicType'):function(v) { return true})},
            topicType: {value: 'msg'},
            format: {value: '{{value}}'},
            min: {value: 0, required: true, validate: RED.validators.number()},
            max: {value: 10, required: true, validate: RED.validators.number()},
            step: {value: 1},
            className: {value: ''}
        },
        inputs:1,
        outputs:1,
        outputLabels: function() { return this.min+" - "+this.max; },
        icon: "ui_numeric.png",
        paletteLabel: 'numeric',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || 'numeric'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            $('#node-input-topic').typedInput({
                default: 'str',
                typeField: $("#node-input-topicType"),
                types: ['str','msg','flow','global']
            });
        }
    });
</script>

<script type="text/html" data-template-name="ui_numeric">
	<div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> Label</label>
        <input type="text" id="node-input-label">
    </div>
    <div class="form-row">
        <label for="node-input-tooltip"><i class="fa fa-info-circle"></i> Tooltip</label>
        <input type="text" id="node-input-tooltip" placeholder="optional tooltip">
    </div>
    <div class="form-row">
        <label for="node-input-format"><i class="fa fa-i-cursor"></i> Value Format</label>
        <input type="text" id="node-input-format" placeholder="{{value}}">
    </div>
    <div class="form-row">
        <label for="node-input-min"><i class="fa fa-arrows-h"></i> Range</label>
        <span for="node-input-min">min</span>
        <input type="text" id="node-input-min" style="width:60px">
        <span for="not-input-max" style="margin-left:22px;">max</span>
        <input type="text" id="node-input-max" style="width:60px">
        <span for="not-input-step" style="margin-left:22px;">step</span>
        <input type="text" id="node-input-step" style="width:60px">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-wrap"><i class="fa fa-refresh"></i> Wrap value from max to min and min to max.</label>
        <input type="checkbox" id="node-input-wrap" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> If <code>msg</code> arrives on input, pass through to output: </label>
        <input type="checkbox" checked id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-payload"><i class="fa fa-envelope-o"></i> When changed, send:</label>
    </div>
    <div class="form-row">
        <label style="padding-left:25px; margin-right:-25px">Payload</label>
        <label style="width:auto">Current value</label>
    </div>
    <div class="form-row">
        <label for="node-input-topic" style="padding-left:25px; margin-right:-25px">Topic</label>
        <input type="text" id="node-input-topic">
        <input type="hidden" id="node-input-topicType">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
</script>
<script type="text/html" data-help-name="ui_numeric">
    <p>Adds a numeric input widget to the user interface.</p>
	<p>The user can set the value between
    the limits (<b>min</b> and <b>max</b>). Each value change will generate a <code>msg.payload</code>.</p>
    <p>If <b>Topic</b> is specified, it will be added as <code>msg.topic</code>.<p>
    <p>Any input <code>msg.payload</code> will be converted to a number, the <b>min</b> value will be used if conversion fails,
    and it will update the user interface. If the value changes, it will also be passed to the output.</p>
    <p>The <b>Value Format</b> field can be used to change the displayed format. For example, a <b>Value Format</b>
    of <code>{{value}} %</code>
    with a value of <b>23</b> will show <b>23 %</b> on the user interface. The <b>Value Format</b> field can contain
    HTML or Angular filters to format the output (eg: <code>&amp;deg;</code> will show the degree symbol).</p>
    <p>Setting the Value Format field to <code>{{msg.payload}}</code> will make the input field editable so you can type in a number.</p>
    <p>The label can also be set by a message property by setting
    the field to the name of the property, for example <code>{{msg.topic}}</code>.</p>
    <p>Setting <code>msg.enabled</code> to <code>false</code> will disable the widget output.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_text_input] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_text_input',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(176, 223, 227)',
        defaults: {
            name: {value: ''},
            label: {value: ''},
            tooltip: {value: ''},
            group: {type: 'ui_group', required: true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            passthru: {value: true},
            mode: {value: 'text', required: true},
            delay: {value: 300, validate: RED.validators.number()},
            topic: {value: 'topic', validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('topicType'):function(v) { return true})},
            sendOnBlur: {value: true},
	        className: {value: ''},
            topicType: {value: 'msg'}
        },
        inputs:1,
        outputs:1,
        outputLabels: function() { return this.mode; },
        icon: "ui_text.png",
        paletteLabel: 'text input',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || this.mode+' input'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            $('#node-input-topic').typedInput({
                default: 'str',
                typeField: $("#node-input-topicType"),
                types: ['str','msg','flow','global']
            });
        }
    });
</script>

<script type="text/html" data-template-name="ui_text_input">
	<div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> Label</label>
        <input type="text" id="node-input-label">
    </div>
    <div class="form-row">
        <label for="node-input-tooltip"><i class="fa fa-info-circle"></i> Tooltip</label>
        <input type="text" id="node-input-tooltip" placeholder="optional tooltip">
    </div>
    <div class="form-row">
        <label for="node-input-mode"><i class="fa fa-keyboard-o"></i> Mode</label>
        <select style="width:128px" id="node-input-mode">
            <option value="text">text input</option>
            <option value="email">email address</option>
            <option value="password">password</option>
            <option value="number">number</option>
            <option value="tel">telephone input</option>
            <option value="color">color picker</option>
            <option value="time">time picker</option>
            <option value="datetime-local">datetime picker</option>
            <option value="week">week picker</option>
            <option value="month">month picker</option>
            <!-- <option value="date">date picker</option> -->
        </select>
        <label for="node-input-delay" style="text-align:right; width:100px"><i class="fa fa-clock-o"></i> Delay (ms)</label>
        <input type="text" style="width:58px" id="node-input-delay">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> If <code>msg</code> arrives on input, pass through to output: </label>
        <input type="checkbox" checked id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-sendOnBlur">Send value on focus leave: </label>
        <input type="checkbox" checked id="node-input-sendOnBlur" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-payload"><i class="fa fa-envelope-o"></i> When changed, send:</label>
    </div>
    <div class="form-row">
        <label style="padding-left: 25px; margin-right: -25px">Payload</label>
        <label style="width:auto">Current value</label>
    </div>
    <div class="form-row">
        <label for="node-input-topic" style="padding-left: 25px; margin-right: -25px">Topic</label>
        <input type="text" id="node-input-topic">
        <input type="hidden" id="node-input-topicType">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
    <div class="form-tips">Setting <b>Delay</b> to 0 waits for Enter or Tab key, to send input.</span></div>
</script>
<script type="text/html" data-help-name="ui_text_input">
  <p>Adds a text input field to the user interface. Mode can be regular text, email or color picker.</p>
  <p>Any input is sent as <code>msg.payload</code>. If set to ‘pass through mode’ an arriving <code>msg.payload</code>
      will be used if it is different from the existing text in the input field. This allows you to preset
      the text of the input field.</p>
  <p>The <b>Delay</b> <i>(default : 300ms)</i> sets the amount of time in milliseconds before the output is sent.
  Setting to <code>0</code> waits for "Enter" or "Tab" key to send. Enter will send payload but remain in focus.
  Tab will send payload and move to next field. Clicking elsewhere will also send the payload.</p>
  <p>The email mode will color in red if it is not a valid address and will return undefined.</p>
  <p>The time input type returns a number of milliseconds from midnight.</p>
  <p>Not all browsers support the <i>week</i> and <i>month</i> input types, and may return <i>undefined</i>.
  Please test your target browser(s) before use.</p>
  <p>If a <b>Topic</b> is specified, it will be added as <code>msg.topic</code>.</p>
  <p>Setting <code>msg.enabled</code> to <code>false</code> will disable the input.</p>
  <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_date_picker] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_date_picker',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(176, 223, 227)',
        defaults: {
            name: {value: ''},
            label: {value: 'date'},
            group: {type: 'ui_group', required: true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            passthru: {value: true},
            topic: {value: 'topic', validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('topicType'):function(v) { return true})},
            topicType: {value: 'msg'},
            className: {value: ''}
        },
        inputs:1,
        outputs:1,
        outputLabels: ["epoch mS"],
        icon: "ui_date_picker.png",
        paletteLabel: 'date picker',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || 'date picker'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            $('#node-input-topic').typedInput({
                default: 'str',
                typeField: $("#node-input-topicType"),
                types: ['str','msg','flow','global']
            });
        }
    });
</script>

<script type="text/html" data-template-name="ui_date_picker">
	<div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> Label</label>
        <input type="text" id="node-input-label">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> If <code>msg</code> arrives on input, pass through to output: </label>
        <input type="checkbox" checked id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-payload"><i class="fa fa-envelope-o"></i> When changed, send:</label>
    </div>
    <div class="form-row">
        <label style="padding-left:25px; margin-right:-25px">Payload</label>
        <label style="width:auto">Current value</label>
    </div>
    <div class="form-row">
        <label for="node-input-topic" style="padding-left:25px; margin-right:-25px">Topic</label>
        <input type="text" id="node-input-topic">
        <input type="hidden" id="node-input-topicType">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
</script>
<script type="text/html" data-help-name="ui_date_picker">
    <p>Adds a date picker widget to the user interface.</p>
    <p>The date display can be formatted in the Dashboard - Site tab using <a href="https://momentjs.com/docs/#/displaying/">
    moment.js</a> formatting. For example <code>MM/DD/YYYY</code>, <code>Do MMM YYYY</code> or <code>YYYY-MM-DD</code>.</p>
    <p>Setting <code>msg.enabled</code> to <code>false</code> will disable the input.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_colour_picker] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_colour_picker',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(176, 223, 227)',
        defaults: {
            name: {value: ''},
            label: {value: ''},
            group: {type: 'ui_group', required: true},
            format: {value: 'hex'},
            outformat: {value: 'string'},
            showSwatch: {value: true},
            showPicker: {value: false},
            showValue: {value: false},
            showHue: {value: false},
            showAlpha: {value: false},
            showLightness: {value: true},
            square: {value: "false"},
            dynOutput: {value: "false"},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            passthru: {value: true},
            topic: {value: 'topic', validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('topicType'):function(v) { return true})},
            topicType: {value: 'msg'},
            className: {value: ''}
        },
        inputs:1,
        outputs:1,
        outputLabels: function() { return this.format; },
        icon: "ui_colour_picker.png",
        paletteLabel: 'colour picker',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || 'colour picker'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            if (this.square === undefined) {
                this.square = "false";
                $("#node-input-square").val("false");
            }
            $("#node-input-square").on("change", function() {
                if ($("#node-input-square").val() === "false") {
                    $("#node-input-showLightness").prop('checked', true);
                    $("#node-input-showHue").prop('checked', false);
                }
                else {
                    $("#node-input-showLightness").prop('checked', false);
                    $("#node-input-showHue").prop('checked', true);
                }
            });
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            $("#node-input-format").on("change", function() {
                if ($(this).val() === "hex") {
                    $("#node-alpha-control").hide();
                }
                else {
                    $("#node-alpha-control").show();
                }
            });
            $('#node-input-topic').typedInput({
                default: 'str',
                typeField: $("#node-input-topicType"),
                types: ['str','msg','flow','global']
            });
        },
        oneditsave: function() {
            if (!$("#node-input-showPicker").is(':checked') && !$("#node-input-showValue").is(':checked')) {
                $("#node-input-showSwatch").prop('checked', true);
                this.showSwatch = true;
            }
        }
    });
</script>

<script type="text/html" data-template-name="ui_colour_picker">
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> Label</label>
        <input type="text" id="node-input-label">
    </div>
    <div class="form-row">
        <label for="node-input-format"><i class="fa fa-keyboard-o"></i> Format</label>
        <select id="node-input-format" style="width:156px;">
            <option value="hex">hex</option>
            <option value="hex8">hex8</option>
            <option value="hsl">hsl</option>
            <option value="hsv">hsv</option>
            <option value="rgb">rgb</option>
        </select>
        <select id="node-input-square" style="width:130px; margin-left:30px">
            <option value="false">round</option>
            <option value="true">square</option>
        </select>
    </div>
    <div class="form-row">
        <label>&nbsp;</label> Show hue slider : <input type="checkbox" id="node-input-showHue" style="display:inline-block; width:auto; vertical-align:baseline;">
        <br/>
        <label>&nbsp;</label> Show lightness slider : <input type="checkbox" id="node-input-showLightness" style="display:inline-block; width:auto; vertical-align:baseline;">
        <br/>
        <span id="node-alpha-control"><label>&nbsp;</label> Show transparency slider : <input type="checkbox" id="node-input-showAlpha" style="display:inline-block; width:auto; vertical-align:baseline;"></span>
    </div>
    <div class="form-row">
        If width is 4 or greater:<br/>
        <label>&nbsp;</label>
        Always show swatch : <input type="checkbox" checked id="node-input-showSwatch" style="display:inline-block; width:auto; vertical-align:top;">
        <br/>
        <label>&nbsp;</label>
        Always show picker : <input type="checkbox" checked id="node-input-showPicker" style="display:inline-block; width:auto; vertical-align:top;">
        <br/>
        <label>&nbsp;</label>
        Always show value field : <input type="checkbox" checked id="node-input-showValue" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> If <code>msg</code> arrives on input, pass through to output: </label>
        <input type="checkbox" checked id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label for="node-input-dynOutput"><i class="fa fa-envelope-o"></i> Send</label>
        <select id="node-input-dynOutput" style="width:60%">
            <option value="false">one value when released/closed</option>
            <option value="true">multiple values during editing</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-outformat" style="padding-left: 25px; margin-right: -25px">Payload</label>
        <select id="node-input-outformat" style="width:60%">
            <option value="string">current value as a string</option>
            <option value="object">current value as an object</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-topic" style="padding-left: 25px; margin-right: -25px">Topic</label>
        <input type="text" id="node-input-topic" placeholder="optional topic">
        <input type="hidden" id="node-input-topicType">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
</script>
<script type="text/html" data-help-name="ui_colour_picker">
    <p>Adds a colour picker to the dashboard.</p>
    <p>If the group width is 4 or greater then the picker can be set to be visible at all times.</p>
    <p><b>Format</b> can be rgb, hex, hex8, hsv, or hsl. Transparency is supported for all except hex.</p>
    <p>If a <b>Topic</b> is specified, it will be added as <code>msg.topic</code>.</p>
    <p>Setting <code>msg.enabled</code> to <code>false</code> will disable the input.</p>
    <p>If set to ‘pass through mode’ a message arriving on the input will be evaluated for any colour format available
        as Format. If the conversion fails #000000 will be used.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_form] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_form',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(176, 223, 227)',
        defaults: {
            name: {value: ''},
            label: {value: ''},
            group: {type: 'ui_group', required: true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            options: {value:[{value:'', label :'', type:'', required:true}], validate:function(value) {
                    if (value.length ) {
                        for (var i = 0; i < value.length; i++) {
                            if (!value[i].value) {
                                return false;
                            }
                        }
                    }
                    else {
                        return false;
                    }
                    return true;
                }, required:true},
            formValue:{value:{}},
            payload: {value: ''},
            submit: {value: "submit"},
            cancel: {value: "cancel"},
            topic: {value: 'topic', validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('topicType'):function(v) { return true})},
            topicType: {value: 'msg'},
            splitLayout: {value:''},
            className: {value: ''}
        },
        inputs:1,
        outputs:1,
        icon: "ui_form.png",
        paletteLabel: 'form',
        label: function() { return this.name || this.label || 'form'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            if ($("#node-input-submit").val() === null) { $("#node-input-submit").val("submit"); }
            if ($("#node-input-cancel").val() === null) { $("#node-input-cancel").val("cancel"); }
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });

            this.resizeRule = function(option,newWidth) {
                //option.find(".node-input-option-type").width(newWidth);
                //  option.find(".node-input-option-label").width(newWidth);
                //  option.find(".node-input-option-value").width(newWidth);
            }

            function generateOption(i, option) {
                var container = $('<li/>',{style:"margin:0; padding:8px 0px 0px; border-bottom:1px solid var(--red-ui-form-input-border-color, #ccc);"});
                var row = $('<div/>').appendTo(container);
                var row2 = $('<div/>',{style:"padding-top:5px; padding-left:175px;"}).appendTo(container);
                var row3 = $('<div/>',{style:"padding-top:5px; padding-left:120px;"}).appendTo(container);

                $('<i style="cursor:move; margin-left:3px;" class="node-input-option-handle fa fa-bars"></i>').appendTo(row);

                var labelField = $('<input/>',{class:"node-input-option-label", type:"text", style:"margin-left:7px; width:20%;", placeholder: RED._("node-red-dashboard/ui_form:ui_form.label.egName"), value:option.label}).appendTo(row);//.typedInput({default:'str',types:['str', 'num']});
                var valueClass ="node-input-option-value"
                if (!option.value) { valueClass ="node-input-option-value input-error"; }
                var valueField = $('<input/>',{class:valueClass, type:"text", style:"margin-left:7px; width:20%;", placeholder: RED._("node-red-dashboard/ui_form:ui_form.label.egName2"), value:option.value}).appendTo(row);//.typedInput({default:'str',types:['str','num','bool']});
                valueField.keyup(function() {
                    if ($(this).val() && $(this).hasClass('input-error')) {
                        $(this).removeClass('input-error')
                    }
                    else {
                        if (!$(this).val()) {
                            $(this).addClass('input-error')
                        }
                    }

                });
                // var typeField = $('<input/>',{class:"node-input-option-type",type:"text",style:"margin-left: 7px; width: 135px;", placeholder: 'Type', value:option.type}).appendTo(row).typedInput({default:'str',types:['str', 'num']});
                var typeField = $('<select/>',{class:"node-input-option-type",type:"text",style:"margin-left:7px; width:16%"}).appendTo(row);//.typedInput({default:'str',types:['str', 'num']});

                var arr = [
                  {val : "text", text: RED._("node-red-dashboard/ui_form:ui_form.label.text")},
                  {val : "multiline", text: RED._("node-red-dashboard/ui_form:ui_form.label.multiline")},
                  {val : "number", text: RED._("node-red-dashboard/ui_form:ui_form.label.number")},
                  {val : "email", text: RED._("node-red-dashboard/ui_form:ui_form.label.email")},
                  {val : "password", text: RED._("node-red-dashboard/ui_form:ui_form.label.password")},
                  {val : "checkbox", text: RED._("node-red-dashboard/ui_form:ui_form.label.checkbox")},
                  {val : "switch", text: RED._("node-red-dashboard/ui_form:ui_form.label.switch")},
                  {val : "date", text: RED._("node-red-dashboard/ui_form:ui_form.label.date")},
                  {val : "time", text: RED._("node-red-dashboard/ui_form:ui_form.label.time")}
                ];

                //var sel = $('<select>').appendTo('body');
                $(arr).each(function() {
                    var isSelected= false;
                    if (option.type == this.val) {
                        isSelected = true;
                    }
                    typeField.append($("<option>").attr('value',this.val).text(this.text).prop('selected',isSelected));
                });

                //var labelForRequried = $('<span/>',{style:"margin: 10px;"}).text('Required').appendTo(row);
                var requiredContainer= $('<div/>',{style:"display:inline-block; height:34px; width:13%; vertical-align: middle"}).appendTo(row);
                var requiredInnerContainer= $('<div/>',{style:"left:35%; position:relative; width:30px"}).appendTo(requiredContainer);
                var reqRow=$("<label />",{class:"switch",style:"top:10px; width:30px;"}).appendTo(requiredInnerContainer);
                //var required = $('<input/>',{class:"node-input-option-required",style:"margin: 5px;width:19%",type:"checkbox", checked:option.required}).appendTo(row);//labelForRequried);//.typedInput({default:'str',types:['str', 'num']});
                var required = $('<input/>',{class:"node-input-option-required", type:"checkbox", checked:option.required, style:"vertical-align:top;"}).appendTo(reqRow);//labelForRequried);//.typedInput({default:'str',types:['str', 'num']});
                var reqDiv=$("<div />",{class:"slider round"}).appendTo(reqRow);
                var vis = option.rows ? 'visible' : 'hidden';
                var rowsField = $('<input/>',{class:"node-input-option-rows", type:"number", style:"width:10%;", placeholder:'Rows', value:option.rows }).css('visibility',vis).appendTo(row);

                var finalspan = $('<div/>',{style:"display:inline-block; width:5%;"}).appendTo(row);
                var deleteButton = $('<a/>',{href:"#",class:"editor-button", style:"font-size:1.3em; left:45%; position:relative;"}).appendTo(finalspan);
                $('<i/>',{class:"fa fa-trash-o"}).appendTo(deleteButton);

                typeField.change(function(e){
                    if (e.target.value != 'multiline') {
                        rowsField.val(undefined)
                        option.rows = null;
                        rowsField.css('visibility','hidden')
                    } else {
                        rowsField.css('visibility','visible')
                        if (!rowsField[0].value) rowsField[0].value = 3;
                    }

                })

                deleteButton.click(function() {
                    container.find(".node-input-option-value").removeAttr('required')
                    container.css({"background":"var(--red-ui-secondary-background-inactive, #fee)"});
                    container.fadeOut(300, function() {
                        $(this).remove();
                    });
                });

                $("#node-input-option-container").append(container);
            }

            $("#node-input-add-option").click(function() {
                generateOption($("#node-input-option-container").children().length+1, {});
                $("#node-input-option-container-div").scrollTop($("#node-input-option-container-div").get(0).scrollHeight);
            });

            for (var i=0; i<this.options.length; i++) {
                var option = this.options[i];
                generateOption(i+1,option);
            }

            $('#node-input-topic').typedInput({
                default: 'str',
                typeField: $("#node-input-topicType"),
                types: ['str','msg','flow','global']
            });

            $( "#node-input-option-container" ).sortable({
                axis: "y",
                handle:".node-input-option-handle",
                cursor: "move"
            });
        },
        oneditsave: function() {
            var options = $("#node-input-option-container").children();
            var node = this;
            node.options = [];
            node.formValue = {};
            options.each(function(i) {
                var option = $(this);
                var o = {
                    label: option.find(".node-input-option-label").val(),//typedInput('value'),
                    value: option.find(".node-input-option-value").val(),//typedInput('value'),
                    type: option.find(".node-input-option-type").val(),//typedInput('value')
                    required: option.find(".node-input-option-required").is(':checked'),
                    rows: parseInt(option.find(".node-input-option-rows").val())
                };
                // o.value= o.value||o.label||(o.type+"_"+i);
                node.formValue[o.value]= o.type == "checkbox" || o.type == "switch" ? false : "";
                node.options.push(o);
            });
        },
        oneditresize: function() {
            var options = $("#node-input-option-container").children();
            var newWidth = ($("#node-input-option-container").width() - 175)/2;
            var node = this;
            options.each(function(i) {
                node.resizeRule($(this),newWidth);
            });
        }
    });
</script>
<script type="text/html" data-template-name="ui_form">

<style>
.switch {
    position: relative;
    display: inline-block;
    width: 30px;
    height: 18px;
}

.switch input {display:none;}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--red-ui-tertiary-border-color, #ccc);
    -webkit-transition: .4s;
    transition: .4s;
}

.slider:before {
    position: absolute;
    content: "";
    height: 15px;
    width: 15px;
    left: 2px;
    bottom: 2px;
    background-color: var(--red-ui-secondary-background, white);
    -webkit-transition: .4s;
    transition: .4s;
}

input:checked + .slider {
    background-color: #910000;
}

input:focus + .slider {
    box-shadow: 0 0 1px #2196F3;
}

input:checked + .slider:before {
    -webkit-transform: translateX(11px);
    -ms-transform: translateX(11px);
    transform: translateX(11px);
}

/* Rounded sliders */
.slider.round {
    border-radius: 34px;
}

.slider.round:before {
    border-radius: 50%;
}
</style>

    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> <span data-i18n="ui_form.label.group"></label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui_form.label.size"></label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-tag"></i> <span data-i18n="ui_form.label.label"></label>
        <input type="text" id="node-input-label" data-i18n="[placeholder]ui_form.label.optionalLabel">
    </div>
    <div class="form-row node-input-option-container-row" style="margin-bottom:0px; width:100%; min-width:520px">
        <label style="vertical-align:top;"><i class="fa fa-list-alt"></i> <span data-i18n="ui_form.label.formElements"></label>
        <div style="display:inline-block; width:78%; border:1px solid var(--red-ui-form-input-border-color, #ccc); border-radius:5px; box-sizing:border-box;">
          <div class="red-ui-tray-header" style="width:100%; display: inline-block; padding-top:10px; padding-bottom:10px; border-top:0px solid; border-radius:5px 5px 0 0; border-bottom:1px solid var(--red-ui-form-input-border-color, #ccc);">
              <div style="width:94%; display:inline-block; margin-left:27px">
                <div style="width:20%; text-align:center; float:left;" data-i18n="ui_form.label.label"></span></div>
                <div style="width:20%; text-align:center; float:left; margin-left:9px" data-i18n="node-red:common.label.name"></div>
                <div style="margin-left:7px; width:16%; text-align:center; float:left; margin-left:9px" data-i18n="ui_form.label.type"></div>
                <div style="width:16%; text-align:center; float:left;" data-i18n="ui_form.label.required"></div>
                <div style="width:10%; text-align:center; float:left;" data-i18n="ui_form.label.rows"></div>
                <div style="width:12%; text-align:center; float:left;" data-i18n="ui_form.label.remove"></div>
              </div>
          </div>
          <div id="node-input-option-container-div" style=" height: 257px; padding: 5px; overflow-y:scroll;">
            <ol id="node-input-option-container" style=" list-style-type:none; margin: 0;"></ol>
          </div>
        </div>
    </div>
    <div class="form-row">
        <a href="#" class="editor-button editor-button-small" id="node-input-add-option" style="margin-top: 4px; margin-left: 103px;"><i class="fa fa-plus"></i> <span data-i18n="ui_form.label.element"></span></a>
    </div>
    <div class="form-row">
        <label for="node-input-submit"><i class="fa fa-square"></i> <span data-i18n="ui_form.label.buttons"></label>
        <i class="fa fa-thumbs-o-up"></i> <input type="text" id="node-input-submit" data-i18n="[placeholder]ui_form.label.submitButtonText" style="width:35%;">
        <span style="margin-left:16px"><i class="fa fa-thumbs-o-down"></i></span>
        <input type="text" id="node-input-cancel" data-i18n="[placeholder]ui_form.label.cancelButtonText" style="width:35%;">
    </div>
    <div class="form-row">
        <label for="node-input-splitLayout"></label>
        <input type="checkbox" id="node-input-splitLayout" style="display:inline-block; width:auto; vertical-align:top;">
        <span data-i18n="ui_form.label.splitLayout">
    </div>
    <div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> <span data-i18n="ui_form.label.topic"></label>
        <input type="text" id="node-input-topic" data-i18n="[placeholder]ui_form.label.optionalMsgTopic">
        <input type="hidden" id="node-input-topicType">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  <span data-i18n="ui_form.label.className"></label>
        <input type="text" id="node-input-className" data-i18n="[placeholder]ui_form.label.classNamePlaceholder"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
</script>
<script type="text/html" data-help-name="ui_form">
    <p>Adds a form to user interface.</p>
    <p>Helps to collect multiple value from the user on submit button click as an object in <code>msg.payload</code> </p>
    <p>Multiple input elements can be added using add elements button</p>
    <p>Each element contains following components:</p>
    <ul>
        <li> <b>Label</b> : Value that will be the label of the element in the user interface</li>
        <li> <b>Name</b> : Represents the key (variable name) in the <code>msg.payload</code> in which the value of the corresponding element present</li>
        <li> <b>Type</b> : Drop down option to select the type of input element</li>
        <li> <b>Required</b> : On switching on the user has to supply the value before submitting</li>
        <li> <b>Rows</b> : number of UI rows for multiline text input</li>
        <li> <b>Delete</b> : To remove the current element from the form</li>
    </ul>
    <p>Optionally the <b>Topic</b> field can be used to set the <code>msg.topic</code> property.</p>
    <p>The Cancel button can be hidden by setting it's value to be blank "".</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_text] --- -->
<script type="text/javascript">
    const fonts = [
        {
            value: "Arial,Arial,Helvetica,sans-serif",
            name: "Arial" 
        },
        {
            value: "Arial Black,Arial Black,Gadget,sans-serif",
            name: "Arial Black" 
        },
        {
            value: "Arial Narrow,Nimbus Sans L,sans-serif",
            name: "Arial Narrow" 
        },
        {
            value: "Century Gothic,CenturyGothic,AppleGothic,sans-serif",
            name: "Century Gothic" 
        },
        {
            value: "Copperplate,Copperplate Gothic Light,fantasy",
            name: "Copperplate" 
        },
        {
            value: "Courier,monospace",
            name: "Courier" 
        },
        {
            value: "Georgia,Georgia,serif",
            name: "Georgia" 
        },
        {
            value: "Gill Sans,Geneva,sans-serif",
            name: "Gill Sans" 
        },
        {
            value: "Impact,Impact,Charcoal,sans-serif",
            name: "Impact" 
        },
        {
            value: "Lucida Sans Typewriter,Lucida Console,Monaco,monospace", 
            name: "Lucida Console" 
        },
        {
            value: "Lucida Sans Unicode,Lucida Grande,sans-serif",
            name: "Lucida Sans" 
        },
        {
            value: "Palatino Linotype,Palatino,Book Antiqua,serif", 
            name: "Palatino Linotype" 
        },
        {
            value: "Tahoma,Geneva,sans-serif",
            name: "Tahoma" 
        },
        {
            value: "Times New Roman,Times,serif",
            name: "Times New Roman" 
        },
        {
            value: "Trebuchet MS,Helvetica,sans-serif",
            name: "Trebuchet MS" 
        },
        {
            value: "Verdana,Verdana,Geneva,sans-serif",
            name: "Verdana" 
        },
    ];


    RED.nodes.registerType('ui_text',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(119, 198, 204)',
        defaults: {
            group: {type: 'ui_group', required:true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            name: {value: ''},
            label: {value: 'text'},
            format: {value: '{{msg.payload}}'},
            layout: {value:'row-spread'},
            className: {value: ''},

            style: { value: false },
            font: { value: "" },
            fontSize: { value: 16 },
            color: { value: "#000" },
        },
        inputs:1,
        outputs:0,
        align: "right",
        icon: "ui_text.png",
        paletteLabel: 'text',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || 'text'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });

            $(".nr-db-text-layout-"+(this.layout||'row-spread')).addClass('selected');

            [ ".nr-db-text-layout-row-left",".nr-db-text-layout-row-center",".nr-db-text-layout-row-right",
              ".nr-db-text-layout-row-spread",".nr-db-text-layout-col-center"].forEach(function(id) {
                    $(id).click(function(e) {
                        $(".nr-db-text-layout").removeClass('selected');
                        $(this).addClass('selected');
                        $('#node-input-layout').val(id.substring(".nr-db-text-layout-".length));
                        e.preventDefault();
                    })
              });

            const select = $("#node-select-font");
            fonts.forEach((font) => {
                var name = font.name;
                var val = font.value;
                $("<option/>", {
                    value: val,
                }).text(name).appendTo(select);
            });
            $(select).change(() => {
                const val = $("#node-select-font").val();
                $("#node-input-font").val(val);
                $("#node-test-text").css({
                    "font-family": val,
                }); 
            });
            $(select).val(this.font);
            $(select).change();

            $("#node-input-fontSize").spinner({
                min: 1,
                max: 100,
                spin: () => {
                    const val = $("#node-input-fontSize").val();
                    $("#node-test-text").css({
                        "font-size": val +"px",
                    }); 
                }
            });
            if (this.fontSize) {
                $("#node-test-text").css({
                    "font-size": this.fontSize +"px",
                }); 
            }

            $("#node-input-color").change(() => {
                const val = $("#node-input-color").val();
                $("#node-test-text").css({
                    "color": val,
                }); 
            });
            if (this.color) {
                $("#node-test-text").css({
                    "color": this.color
                }); 
            }

            $("#node-input-style").change(() => {
                const val = $("#node-input-style").prop("checked");
                if (val) {
                    $("#node-styles").show();
                }
                else {
                    $("#node-styles").hide();
                }
            });
            $("#node-input-style").change();

        }
    });
</script>

<script type="text/html" data-template-name="ui_text">
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> Label</label>
        <input type="text" id="node-input-label">
    </div>
    <div class="form-row">
        <label for="node-input-format"><i class="fa fa-i-cursor"></i> Value format</label>
        <input type="text" id="node-input-format" placeholder="{{msg.payload}}">
    </div>
    <div class="form-row">
        <label style="vertical-align: top"><i class="fa fa-th-large"></i> Layout</label>
        <div style="display:inline-block">
        <input type="hidden" id="node-input-layout"><input type="hidden" id="node-input-layoutAlign">
        <div>
            <a href="#" class="nr-db-text-layout nr-db-text-layout-row nr-db-text-layout-row-left">
                <span class="nr-db-text-layout-label">label</span>
                <span class="nr-db-text-layout-value">value</span>
                <div class="nr-db-text-layout-checkbox"></div>
            </a>
            <a href="#" class="nr-db-text-layout nr-db-text-layout-row nr-db-text-layout-row-center">
                <span class="nr-db-text-layout-label">label</span>
                <span class="nr-db-text-layout-value">value</span>
                <div class="nr-db-text-layout-checkbox"></div>
            </a>
            <a href="#" class="nr-db-text-layout nr-db-text-layout-row nr-db-text-layout-row-right">
                <span class="nr-db-text-layout-label">label</span>
                <span class="nr-db-text-layout-value">value</span>
                <div class="nr-db-text-layout-checkbox"></div>
            </a>
        </div>
        <div>
            <a href="#" class="nr-db-text-layout nr-db-text-layout-row nr-db-text-layout-row-spread">
                <span class="nr-db-text-layout-label">label</span>
                <span class="nr-db-text-layout-value">value</span>
                <div class="nr-db-text-layout-checkbox"></div>
            </a>
            <a href="#" class="nr-db-text-layout nr-db-text-layout-col nr-db-text-layout-col-center">
                <span class="nr-db-text-layout-label">label</span>
                <span class="nr-db-text-layout-value">value</span>
                <div class="nr-db-text-layout-checkbox"></div>
            </a>
        </div>
        </div>
    </div>

    <div class="form-row">
        <label><i class="fa fa-cog"></i> Style</label>
        <input type="checkbox" id="node-input-style" style="display: inline-block; width: auto; vertical-align: top;"/>
        <label for="node-input-style" style="width: 70%;"> Apply Style</label>
    </div>

    <div id="node-styles">
        <div class="form-row">
            <label for="node-input-font"><i class="fa fa-font"></i>  Font</label>
            <select id="node-select-font">
            </select>
            <input type="hidden" id="node-input-font"/>
        </div>
        <div class="form-row">
            <label for="node-input-fontSize"><i class="fa fa-text-height"></i>  Text Size</label>
            <input id="node-input-fontSize" value="16" style="width: 50px;"/>
        </div>
        <div class="form-row">
            <label for="node-input-color"><i class="fa fa-tint"></i>  Text Color</label>
            <input type="color" id="node-input-color" style="width: 50px;"/>
        </div>
        <div class="form-row">
            <label>&nbsp;</label>
            <input id="node-test-text" value="Enter Sample Here"/ style="width: 280px;">
        </div>
    </div>

    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>


</script>
<style>
    .nr-db-text-layout {
        position:relative;
        display: inline-block;
        width: 90px;
        height: 60px;
        border-radius:3px;
        border:1px solid var(--red-ui-form-input-border-color, #bbb);
        cursor:pointer;
        color: #666;
        margin-right: 10px;
        margin-bottom: 10px;
    }
    .nr-db-text-layout.selected, .nr-db-text-layout:hover {
        border-color: var(--red-ui-form-input-border-selected-color, #333);
        color: var(--red-ui-secondary-text-color-selected, #333);
    }
    .nr-db-text-layout span {
        position: absolute;
    }
    .nr-db-text-layout-value {
        font-weight: bold;
    }
    .nr-db-text-layout-row span { top: 20px; }
    .nr-db-text-layout-row-left .nr-db-text-layout-label { left: 2px; }
    .nr-db-text-layout-row-left .nr-db-text-layout-value { left: 34px; }
    .nr-db-text-layout-row-spread .nr-db-text-layout-label { left: 2px; }
    .nr-db-text-layout-row-spread .nr-db-text-layout-value { right: 2px; }
    .nr-db-text-layout-row-center .nr-db-text-layout-label { left: 11px; }
    .nr-db-text-layout-row-center .nr-db-text-layout-value { right: 11px; }
    .nr-db-text-layout-row-right .nr-db-text-layout-label { right: 40px; }
    .nr-db-text-layout-row-right .nr-db-text-layout-value { right: 2px; }

    .nr-db-text-layout-col span { width: 90px;  text-align: center; left: 0px;}
    .nr-db-text-layout-col-center .nr-db-text-layout-label { top: 12px; }
    .nr-db-text-layout-col-center .nr-db-text-layout-value { top: 26px; }
    .nr-db-text-layout-checkbox {
        display: none;
        width: 10px;
        height: 10px;
        border-radius: 10px;
        border: 1px solid var(--red-ui-primary-border-color, #bbb);
        position: absolute;
        right: -5px;
        top: -5px;
        background: var(--red-ui-secondary-background, #fff);
    }
    .nr-db-text-layout.selected .nr-db-text-layout-checkbox {
        display:inline-block;
        box-shadow: inset 0px 0px 0px 2px #fff;
        background: #333;
        border-color: #333;
    }

</style>
<script type="text/html" data-help-name="ui_text">
    <p>Will display a non-editable text field on the user interface.</p>
    <p>Each received <code>msg.payload</code> will update the text based on the provided <b>Value Format</b>.</p>
    <p>The <b>Value Format</b> field can be used to change the displayed format and can contain valid HTML and
    <a href="https://scotch.io/tutorials/all-about-the-built-in-angularjs-filters" target="_blank">Angular filters</a>.</p>
    <p>For example: <code>{{value | uppercase}} &amp;deg;</code> will uppercase the payload text and add the degree symbol.</p>
    <p>The label can also be set by a message property by setting
    the field to the name of the property, for example <code>{{msg.topic}}</code>.</p>
    <p>The following icon fonts are also available: <a href="https://klarsys.github.io/angular-material-icons/" target="_blank">Material Design icon</a>
        <i>(e.g. 'check', 'close')</i> or a <a href="https://fontawesome.com/v4.7.0/icons/" target="_blank">Font Awesome icon</a>
        <i>(e.g. 'fa-fire')</i>, or a <a href="https://github.com/Paul-Reed/weather-icons-lite/blob/master/css_mappings.md">Weather icon</a>.
        You can use the full set of google material icons if you add 'mi-' to the icon name. e.g. 'mi-videogame_asset'.</p>
    <p>The widget also has a class of <code>nr-dashboard-widget-{the_widget_label_with_underscores}</code> which can be used for additional 
        styling if required. You may need to use the <i>!important</i> flag to override the theme.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_gauge] --- -->
<style>
    input.gauge-color {
        width: 100px;
        text-align: center;
    }
    input.gauge-color::-webkit-color-swatch {
        border: none;
    }
</style>
<script type="text/javascript">
    RED.nodes.registerType('ui_gauge',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(119, 198, 204)',
        defaults: {
            name: {value: ''},
            group: {type: 'ui_group', required: true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v || 0;
                    var currentGroup = $('#node-input-group').val() || this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            gtype: {value: 'gage'},
            title: {value: 'gauge'},
            label: {value: 'units'},
            format: {value: '{{value}}'},
            min: {value: 0, required: true, validate: RED.validators.number()},
            max: {value: 10, required: true, validate: RED.validators.number()},
            colors: {value: ["#00B500","#E6E600","#CA3838"]},
            seg1: {value: ""},
            seg2: {value: ""},
            diff: {value: false},
            className: {value: ''}
        },
        inputs:1,
        outputs:0,
        inputLabels: function() { return this.min+" - "+this.max; },
        align: "right",
        icon: "ui_gauge.png",
        paletteLabel: 'gauge',
        label: function() { return this.name || (~this.title.indexOf("{{") ? null : this.title) || ((this.gtype === "gage") ? "gauge" : this.gtype) || 'gauge'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            var setColour = function(id, value) {
                $(id).val(value);
                $(id).css("background-color", value);
                var rgb = tinycolor(value).toRgb();
                var level = ((rgb.r*299) + (rgb.g*587) + (rgb.b*114))/1000;
                var textColor = (level >= 128) ? '#111111' : '#eeeeee';
                $(id).css("color", textColor);
            }
            $(".gauge-color").on("change", function() {
                setColour("#"+$(this).attr("id"), $(this).val());
            });

            var defaultColors = ['#00B500', '#E6E600', '#CA3838'];

            if (this.colors) {
                for (var i=0; i<this.colors.length; i++) {
                    var value = this.colors[i] || defaultColors[i];
                    setColour("#node-input-color"+(i+1), value);
                }
            }
            else {
                for (var j=0; j<defaultColors.length; j++) {
                    setColour("#node-input-color"+(j+1), defaultColors[j]);
                }
            }
            if (this.gtype === undefined) {
                this.gtype = "gage";
                $("#node-input-gtype").val("gage");
            }
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            $("#node-input-gtype").on("change", function() {
                if (($(this).val() === "compass") || ($(this).val() === "wave")) {
                    $("#ui-gauge-colours").hide();
                    $("#ui-gauge-segments").hide();
                }
                else {
                    $("#ui-gauge-colours").show();
                    $("#ui-gauge-segments").show();
                }
                if ($(this).val() === "gage") {
                    $("#ui-gauge-diff").show();
                }
                else { $("#ui-gauge-diff").hide(); }
            });
            $("#node-input-min").on("change", function() {
                $("#seg-min").text($(this).val());
            });
            $("#node-input-max").on("change", function() {
                $("#seg-max").text($(this).val());
            });
        },
        oneditsave: function() {
            this.colors = [$("#node-input-color1").val(),$("#node-input-color2").val(),$("#node-input-color3").val()];
        }
    });
</script>

<script type="text/html" data-template-name="ui_gauge">
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-gtype"><i class="fa fa-list"></i> Type</label>
        <select id="node-input-gtype" style="width:150px">
            <option value="gage">Gauge</option>
            <option value="donut">Donut</option>
            <option value="compass">Compass</option>
            <option value="wave">Level</option>
        </select>
    </div>
    <div id="ui-gauge-labels">
        <div class="form-row">
            <label for="node-input-title"><i class="fa fa-i-cursor"></i> Label</label>
            <input type="text" id="node-input-title">
        </div>
        <div class="form-row" id="ui-gauge-format">
            <label for="node-input-format"><i class="fa fa-i-cursor"></i> Value format</label>
            <input type="text" id="node-input-format" placeholder="{{value}}">
        </div>
        <div class="form-row" id="ui-gauge-units">
            <label for="node-input-label"><i class="fa fa-i-cursor"></i> Units</label>
            <input type="text" id="node-input-label" placeholder="optional sub-label">
        </div>
    </div>
    <div class="form-row">
        <label for="node-input-min">Range</label>
        <span for="node-input-min">min</span>
        <input type="text" id="node-input-min" style="width:80px">
        <span for="node-input-max" style="margin-left:20px;">max</span>
        <input type="text" id="node-input-max" style="width:80px">
    </div>
    <div class="form-row" id="ui-gauge-colours">
        <label for="node-input-color1">Colour gradient</label>
        <input type="color" id="node-input-color1" class="gauge-color" style="width:100px;"/>
        <input type="color" id="node-input-color2" class="gauge-color" style="width:100px;"/>
        <input type="color" id="node-input-color3" class="gauge-color" style="width:100px;"/>
    </div>
    <div class="form-row" id="ui-gauge-segments">
        <label>Sectors</label>
        <span id="seg-min" style="display:inline-block; width:40px;">0</span>...
        <input type="text" id="node-input-seg1" style="text-align:center; width:87px;" placeholder="optional"> ...
        <input type="text" id="node-input-seg2" style="text-align:center; width:87px;" placeholder="optional"> ...
        <span id="seg-max" style="display:inline-block; width:40px; text-align:right">10</span>
    </div>
    <div class="form-row" id="ui-gauge-diff">
        <label></label> Fill gauge from centre.
        <input type="checkbox" id="node-input-diff" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
</script>
<script type="text/html" data-help-name="ui_gauge">
    <p>Adds a gauge type widget to the user interface.</p>
    <p>The <code>msg.payload</code> is searched for a numeric <i>value</i> and is formatted in accordance with
    the defined <b>Value Format</b>, which can then be formatted using
    <a href="https://docs.angularjs.org/api/ng/filter" target="_blank">Angular filters</a>.</p>
    <p>For example : <code>{{value | number:1}}%</code> will round the value to one decimal place and append a % sign.</p>
    <p>The colours of each of 3 sectors can be specified and the gauge will blend between them.
    The colours should be specified in hex (#rrggbb) format.</p>
    <p>If you specify numbers for the sectors then the colours changes per sector.
    If not specified the colours are blended across the total range.</p>
    <p>The gauge has several modes. Regular gauge, donut, compass and wave.</p>
    <p>The label can also be set by a message property by setting
    the field to the name of the property, for example <code>{{msg.topic}}</code>.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_chart] --- -->
<style>
    input.series-color {
        width: 100px;
        text-align: center;
    }
    input.series-color::-webkit-color-swatch {
        border: none;
    }
</style>
<script type="text/javascript">
    RED.nodes.registerType('ui_chart',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(119, 198, 204)',
        defaults: {
            name: {value: ''},
            group: {type: 'ui_group', required: true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }},
            height: {value: 0},
            label: {value: 'chart'},
            chartType: {value: 'line'},
            legend: {value: 'false'},
            xformat: {value: 'HH:mm:ss'},
            interpolate: {value: 'linear', required:true},
            nodata: {value: ''},
            dot: {value: false},
            ymin: {value: '', validate:function(value) { return value === '' || RED.validators.number(); }},
            ymax: {value: '', validate:function(value) { return value === '' || RED.validators.number(); }},
            removeOlder: {value: 1, validate:RED.validators.number(), required:true},
            removeOlderPoints: {value: '', validate:function(value) { return value === '' || RED.validators.number(); }},
            removeOlderUnit: {value: '3600', required:true},
            cutout: {value: 0},
            useOneColor: {value: false},
            useUTC: {value: false},
            colors: {value: ['#1F77B4', '#AEC7E8', '#FF7F0E', '#2CA02C', '#98DF8A', '#D62728', '#FF9896', '#9467BD', '#C5B0D5']},
            outputs: {value: 1},
            useDifferentColor: {value: false},
            className: {value: ''}
        },
        inputs:1,
        outputs:1,
        inputLabels: function() { return this.chartType; },
        outputLabels: ["chart state"],
        align: "right",
        icon: "ui_chart.png",
        paletteLabel: 'chart',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || 'chart'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            var oldouts = this.outputs;
            if (RED.nodes.filterLinks({source:{id:this.id},sourcePort:1}).length > 0) { this.outputs = 2; }
            else { this.outputs = 1; }
            if (this.outputs !== oldouts) { this.changed = true; }
            if (!$("#node-input-chartType").val()) {
                $("#node-input-chartType").val("line");
            }
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            $("#node-input-chartType").on("change", function() {
                $("#legend-show").hide();
                $("#show-useDifferentColor").hide();
                if ($(this).val() === "horizontalBar") {
                    $("#y-label-show").hide();
                    $("#x-label-show").show();
                }
                else {
                    $("#y-label-show").show();
                    $("#x-label-show").hide();
                }
                if ($(this).val() === "line") {
                    $("#x-axis-show").show();
                    $("#x-axis-label-show").show();
                    $("#interpolate-show").show();
                    $("#legend-show").show();
                    $("#y-axis-show").show();
                    $("#hole-size-show").hide();
                    $("#show-dot-field").show();
                    $("#show-useOneColor").hide();
                }
                else {
                    $("#x-axis-show").hide();
                    $("#x-axis-label-show").hide();
                    $("#interpolate-show").hide();
                    $("#show-dot-field").hide();
                    if (($(this).val() === "bar")||($(this).val() === "horizontalBar")) {
                        $("#show-useOneColor").show();
                        $("#legend-show").show();
                    }
                    else {
                        $("#show-useOneColor").hide();
                    }
                    if ($(this).val() === "pie") {
                        $("#y-axis-show").hide();
                        $("#legend-show").show();
                        $("#hole-size-show").show();
                    }
                    else if ($(this).val() === "polar-area") {
                        $("#y-axis-show").show();
                        $("#legend-show").show();
                        $("#hole-size-show").hide();
                        $("#show-useDifferentColor").show();
                    }
                    else if ($(this).val() === "radar") {
                        $("#y-axis-show").show();
                        $("#legend-show").show();
                        $("#hole-size-show").hide();
                    }
                    else {
                        $("#y-axis-show").show();
                        $("#hole-size-show").hide();
                    }
                }

            });
            var setColour = function(id, value) {
                $(id).val(value);
                $(id).css("background-color", value);
                var rgb = tinycolor(value).toRgb();
                var level = ((rgb.r*299) + (rgb.g*587) + (rgb.b*114))/1000;
                var textColor = (level >= 128) ? '#111111' : '#eeeeee';
                $(id).css("color", textColor);
            }
            $(".series-color").on("change", function() {
                setColour("#"+$(this).attr("id"), $(this).val());
            });
            var oval = $("#node-input-xformat").val();
            if (!oval) { $("#node-input-xformat").val("HH:mm:ss"); }
            var odef = 'custom';
            if (oval === "HH:mm:ss") { odef = oval; }
            if (oval === "HH:mm") { odef = oval; }
            if (oval === "Y-M-D") { odef = oval; }
            if (oval === "D/M") { odef = oval; }
            if (oval === "dd HH:mm") { odef = oval; }
            if (oval === "auto") { odef = oval; }
            var ohms = {value: "HH:mm:ss", label: RED._("node-red-dashboard/ui_chart:ui_chart.label.HHmmss"), hasValue: false};
            var ohm = {value: "HH:mm", label: RED._("node-red-dashboard/ui_chart:ui_chart.label.HHmm"), hasValue: false};
            var oymd = {value: "Y-M-D", label: RED._("node-red-dashboard/ui_chart:ui_chart.label.yearMonthDate"), hasValue: false};
            var odm = {value: "D/M", label: RED._("node-red-dashboard/ui_chart:ui_chart.label.dateMonth"), hasValue: false};
            var oahm = {value: "dd HH:mm", label: RED._("node-red-dashboard/ui_chart:ui_chart.label.dayHHmm"), hasValue: false};
            var ocus = {value: "custom", label: RED._("node-red-dashboard/ui_chart:ui_chart.label.custom"), icon: "red/images/typedInput/az.png"};
            var oaut = {value: "auto", label: RED._("node-red-dashboard/ui_chart:ui_chart.label.automatic"), hasValue: false};
            $("#node-input-xformat").typedInput({
                default: odef,
                types:[ ohms, ohm, oahm, odm, oymd, ocus, oaut ]
            });
            var defaultColors = ['#1F77B4', '#AEC7E8', '#FF7F0E', '#2CA02C', '#98DF8A', '#D62728', '#FF9896', '#9467BD', '#C5B0D5'];

            if (this.colors) {
                for (var i=0; i<this.colors.length; i++) {
                    var value = this.colors[i] || defaultColors[i];
                    setColour("#node-input-color"+(i+1), value);
                }
            }
            else {
                for (var c=0; c<defaultColors.length; c++) {
                    setColour("#node-input-color"+(c+1), defaultColors[c]);
                }
            }

        },
        oneditsave: function() {
            if ($("#node-input-xformat").typedInput('type') !== 'custom') {
                $("#node-input-xformat").val($("#node-input-xformat").typedInput('type'));
            }
            this.colors = [$("#node-input-color1").val(),$("#node-input-color2").val(),$("#node-input-color3").val(),
            $("#node-input-color4").val(),$("#node-input-color5").val(),$("#node-input-color6").val(),
            $("#node-input-color7").val(),$("#node-input-color8").val(),$("#node-input-color9").val()];
        }
    });
</script>

<script type="text/html" data-template-name="ui_chart">
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> <span data-i18n="ui_chart.label.group"></label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui_chart.label.size"></label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> <span data-i18n="ui_chart.label.label"></label>
        <input type="text" id="node-input-label" data-i18n="[placeholder]ui_chart.label.optionalChartTitle">
    </div>
    <div class="form-row">
        <label for="node-input-removeOlder"><i class="fa fa-line-chart"></i> <span data-i18n="ui_chart.label.type"></label>
        <select id="node-input-chartType" style="width:159px; font-family:'FontAwesome','Helvetica Neue', Helvetica, Arial, sans-serif">
            <option value="line" data-i18n="[html]ui_chart.label.lineChart"></option>
            <option value="bar" data-i18n="[html]ui_chart.label.barChart"></option>
            <option value="horizontalBar" data-i18n="[html]ui_chart.label.barChartH"></option>
            <option value="pie" data-i18n="[html]ui_chart.label.pieChart"></option>
            <option value="polar-area" data-i18n="[html]ui_chart.label.polarAreaChart"></option>
            <option value="radar" data-i18n="[html]ui_chart.label.radarChart"></option>
        </select>
        <div id="show-dot-field" style="display:inline-block;">
            <input type="checkbox" id="node-input-dot" style="display:inline-block; width:auto; vertical-align:baseline; margin-left:40px; margin-right:5px;"><span data-i18n="ui_chart.label.enlargePoints">
        </div>
    </div>
    <div class="form-row" id="x-axis-show">
        <label for="node-input-removeOlder" data-i18n="ui_chart.label.xAxis"></label>
        <label for="node-input-removeOlder" style="width:auto" data-i18n="ui_chart.label.last"></label>
        <input type="text" id="node-input-removeOlder" style="width:50px;">
        <select id="node-input-removeOlderUnit" style="width:80px;">
            <option value="1" data-i18n="ui_chart.label.seconds"></option>
            <option value="60" data-i18n="ui_chart.label.minutes"></option>
            <option value="3600" data-i18n="ui_chart.label.hours"></option>
            <option value="86400" data-i18n="ui_chart.label.days"></option>
            <option value="604800" data-i18n="ui_chart.label.weeks"></option>
        </select>
        <label for="node-input-removeOlderPoints" style="width:auto; margin-left:10px; margin-right:10px;" data-i18n="ui_chart.label.or"></label>
        <input type="text" id="node-input-removeOlderPoints" style="width:60px;" placeholder="1000">
        <span style="margin-left:5px;" data-i18n="ui_chart.label.points"></span>
    </div>
    <div class="form-row" id="x-axis-label-show">
        <label for="node-input-xformat" data-i18n="ui_chart.label.xAxisLabel"></label>
        <input type="text" id="node-input-xformat" style="width:250px;">
        <input type="checkbox" id="node-input-useUTC" style="display:inline-block; width:auto; vertical-align:baseline; margin-left:8px; margin-right:4px;"> <span data-i18n="ui_chart.label.asUTC"></span>
    </div>
    <div class="form-row" id="y-axis-show">
        <label id="y-label-show" for="node-input-ymin" data-i18n="ui_chart.label.yAxis"></label>
        <label id="x-label-show" for="node-input-ymin" data-i18n="ui_chart.label.xAxis"></label>
        <label for="node-input-ymin" style="width:auto" data-i18n="ui_chart.label.min"></label>
        <input type="text" id="node-input-ymin" style="width:92px">
        <label for="node-input-ymax" style="width:auto; margin-left:20px;" data-i18n="ui_chart.label.max"></label>
        <input type="text" id="node-input-ymax" style="width:92px">
    </div>
    <div class="form-row" id="legend-show">
        <label for="node-input-legend" data-i18n="ui_chart.label.legend"></label>
        <select id="node-input-legend" style="width:120px;">
            <option value="false" data-i18n="ui_chart.label.none"></option>
            <option value="true" data-i18n="ui_chart.label.show"></option>
        </select>
        <span id="interpolate-show">&nbsp;&nbsp;&nbsp;&nbsp;<span data-i18n="ui_chart.label.interpolate"></span>
            <select id="node-input-interpolate" style="width:120px;">
                <option value="linear" data-i18n="ui_chart.label.linear"></option>
                <option value="step" data-i18n="ui_chart.label.step"></option>
                <option value="bezier" data-i18n="ui_chart.label.bezier"></option>
                <option value="cubic" data-i18n="ui_chart.label.cubic"></option>
                <option value="monotone" data-i18n="ui_chart.label.cubicMono"></option>
            </select>
        </span>
        <span id="hole-size-show">&nbsp;&nbsp;&nbsp;&nbsp;<span data-i18n="ui_chart.label.cutout"></span>
            <input type="text" id="node-input-cutout" style="width:35px"> %
        </span>
    </div>
    <div id="show-useOneColor" style="display:none; height:24px;">
        <input type="checkbox" id="node-input-useOneColor" style="display:inline-block; width:auto; vertical-align:baseline; margin-left:105px; margin-right:5px;"><span data-i18n="ui_chart.label.useFirstColourForAllBars"></span>
    </div>
    <div class="form-row" id="ui-chart-colours">
        <label for="node-input-color1" data-i18n="ui_chart.label.seriesColours"></label>
        <input type="color" id="node-input-color1" class="series-color" style="width:100px;"/>
        <input type="color" id="node-input-color2" class="series-color" style="width:100px;"/>
        <input type="color" id="node-input-color3" class="series-color" style="width:100px;"/>
        <div style="margin-top:5px; margin-left:104px;">
            <input type="color" id="node-input-color4" class="series-color" style="width:100px;"/>
            <input type="color" id="node-input-color5" class="series-color" style="width:100px;"/>
            <input type="color" id="node-input-color6" class="series-color" style="width:100px;"/>
        </div>
        <div style="margin-top:5px; margin-left:104px;">
            <input type="color" id="node-input-color7" class="series-color" style="width:100px;"/>
            <input type="color" id="node-input-color8" class="series-color" style="width:100px;"/>
            <input type="color" id="node-input-color9" class="series-color" style="width:100px;"/>
        </div>
    </div>
    <div id="show-useDifferentColor" class="form-row">
         <label></label>
         <input type="checkbox" id="node-input-useDifferentColor" style="display:inline-block; width:auto; vertical-align:top;">
             <span data-i18n="ui_chart.label.useDifferentColor"></span>
         </input>
    </div>
    <div class="form-row">
        <label for="node-input-nodata" data-i18n="ui_chart.label.blankLabel"></label>
        <input type="text" id="node-input-nodata" data-i18n="[placeholder]ui_chart.label.displayThisTextBeforeValidDataArrives">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  <span data-i18n="ui_chart.label.className"></span></label>
        <input type="text" id="node-input-className" data-i18n="[placeholder]ui_chart.label.classNamePlaceholder"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
</script>
<script type="text/html" data-help-name="ui_chart">
    <p>Plots the input values on a chart. This can either be a time based line chart, a bar chart (vertical or horizontal),
    or a pie chart.</p>
    <p>Each input <code>msg.payload</code> value will be converted to a number. If the
    conversion fails, the message is ignored.</p>
    <p>Minimum and Maximum <b>Y</b> axis values are optional. The graph will auto-scale to any values received.</p>
    <p>Multiple series can be shown on the same chart by using a different <code>msg.topic</code>
    value on each input message. Multiple bars of the same series can be shown by using the <code>msg.label</code> property.</p>
    <p>The <b>X</b> axis defines a time window or a maximum number of points to display. Older data will be automatically removed from the graph.
    The axis labels can be formatted using a <a href="https://momentjs.com/docs/#/displaying/format/" target="_blank">
    Moment.js time formatted</a> string.</p>
    <p>Inputting a <code>msg.payload</code> containing a blank array <code>[]</code> will clear the chart.</p>
    <p>See <b><a href="https://github.com/node-red/node-red-dashboard/blob/master/Charts.md" target="_new">this information</a></b>
    for how to pre-format data to be passed in as a complete chart.</p>
    <p>The <b>Blank label</b> field can be used to display some text before any valid data is received.</p>
    <p>The label can also be set by a message property by setting
    the field to the name of the property, for example <code>{{msg.topic}}</code>.</p>
    <p>The node output contains an array of the chart state that can be persisted if needed. This can be passed
    into the chart node to re-display the persisted data.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_audio] --- -->


<script type="text/javascript">
(function() {
    var myvoice = 0;
    var voices;
    RED.nodes.registerType('ui_audio',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        paletteLabel: 'audio out',
        color: 'rgb(119, 198, 204)',
        defaults: {
            name: {value:""},
            group: {type: 'ui_group', required: true},
            voice: {value:""},
            always: {value:""}
        },
        inputs:1,
        outputs:0,
        icon: "feed.png",
        align: "right",
        label: function() { return this.name||"audio out"; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        onpaletteadd: function() {
            if ('speechSynthesis' in window) { voices = window.speechSynthesis.getVoices(); }
        },
        oneditprepare: function() {
            if ('speechSynthesis' in window) {
                voices = window.speechSynthesis.getVoices();
                for (i = 0; i < voices.length ; i++) {
                    //console.log(i,voices[i].name,voices[i].lang,voices[i].voiceURI,voices[i].default);
                    var option = document.createElement('option');
                    option.textContent = i + " : " + voices[i].name + ' (' + voices[i].lang + ')';
                    if (voices[i].default) { option.textContent += ' -- DEFAULT'; }
                    option.setAttribute('value', voices[i].voiceURI);
                    document.getElementById("node-input-voice").appendChild(option);
                }
                $('#node-input-voice').val(this.voice || 0);
            }
            else {
                $('#voice-input-row').hide();
            }

            $("#node-input-voice").on("change", function() {
                myvoice = this.voice = $("#node-input-voice").val();
            });
        }
    });
})();
</script>

<script type="text/html" data-template-name="ui_audio">
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row" id="voice-input-row">
        <label for="node-input-voice"><i class="fa fa-language"></i> TTS Voice</label>
        <select id="node-input-voice" style="width:70%"></select>
    </div>
    <div class="form-row">
        <label for="node-input-always"></label>
        <input type="checkbox" checked id="node-input-always" style="display:inline-block; width:auto; vertical-align:top;">
        Play audio when window not in focus.
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>
<script type="text/html" data-help-name="ui_audio">
    <p>Plays audio or text to speech (TTS) in the dashboard.</p>
    <p>To work the dashboard web page must be open.</p>
    <p>Expects <code>msg.payload</code> to contain a buffer of a <b>wav</b> or <b>mp3</b> file.</p>
    <p>If your browser has native support for Text-to-Speech then a <code>msg.payload</code>
    can also be a <b>string</b> to be read aloud.</p>
    <p>Optionally setting <code>msg.level</code> from 0 to 100 will change the volume from 0 to 100%. Default is 100%.
    In audio mode you can go up to 300, but you may get distortion.</p>
    <p>When a <code>msg.reset</code> is available with value <code>true</code>, then playback of the current audio fragment will be stopped.</p>
    <p>The <b>node status</b> reflects the current playback status:
    <ul>
        <li><b>started:</b> the audio fragment playback has been started.</li>
        <li><b>reset:</b> the audio fragment playback has been reset (i.e. stopped before completed).</li>
    </ul>
    As soon as the audio fragment playback is completed, the node status will be cleared automatically.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_toast] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_toast', {
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(119, 198, 204)',
        defaults: {
            position: {value: 'top right'},
            displayTime: {value: '3'},
            highlight: {value: ''},
            sendall: {value: true},
            outputs: {value: 0},
            ok: {value: 'OK', required: true},
            cancel: {value: ''},
            raw: {value: false},
            className: {value: ''},
            topic: {value: ''},
            name: {value: ''}
        },
        inputs:1,
        outputs:0,
        align: "right",
        icon: "ui_toast.png",
        paletteLabel: 'notification',
        label: function() { return this.name || (this.position==="prompt" ? "show dialog" : (this.position==="dialog" ? "show dialog" : "show notification")); },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-position").on("change", function() {
                if ($("#node-input-position option:selected").val() === 'dialog') {
                    $("#node-toast-displaytime").hide();
                    $("#node-toast-highlightcolor").hide();
                    $("#node-toast-sendall").hide();
                    $("#node-dialog-displayok").show();
                    $("#node-dialog-displaycancel").show();
                    $("#node-dialog-topic").show();
                }
                else if ($("#node-input-position option:selected").val() === 'prompt') {
                    $("#node-toast-displaytime").hide();
                    $("#node-toast-highlightcolor").hide();
                    $("#node-toast-sendall").hide();
                    $("#node-dialog-displayok").show();
                    $("#node-dialog-displaycancel").show();
                    $("#node-dialog-topic").show();
                    if (typeof $("#node-input-cancel").val() !== "string" || $("#node-input-cancel").val() === "" ) {
                        $("#node-input-cancel").val("Cancel");
                    }
                }
                else {
                    $("#node-toast-displaytime").show();
                    $("#node-toast-highlightcolor").show();
                    $("#node-toast-sendall").show();
                    $("#node-dialog-displayok").hide();
                    $("#node-dialog-displaycancel").hide();
                    $("#node-dialog-topic").show();
                }
            });
        },
        oneditsave: function() {
            if ($("#node-input-position option:selected").val() === 'dialog') { this.outputs = 1; }
            else if ($("#node-input-position option:selected").val() === 'prompt') { this.outputs = 1; }
            else { this.outputs = 0; }
        }
    });
</script>

<script type="text/html" data-template-name="ui_toast">
    <div class="form-row">
        <label for="node-input-position"><i class="fa fa-th-large"></i> Layout</label>
        <select type="text" id="node-input-position" style="display:inline-block; width:70%; vertical-align:baseline;">
            <option value="top right">Top Right</option>
            <option value="bottom right">Bottom Right</option>
            <option value="top left">Top Left</option>
            <option value="bottom left">Bottom Left</option>
            <option value="dialog">OK / Cancel Dialog</option>
            <option value="prompt">OK / Cancel Dialog with Input</option>
        </select>
    </div>
    <div class="form-row" id="node-toast-displaytime">
        <label for="node-input-displayTime"><i class="fa fa-clock-o"></i> Timeout (S)</label>
        <input type="text" id="node-input-displayTime" placeholder="[msg.timeout]">
    </div>
    <div class="form-row" id="node-toast-highlightcolor">
        <label for="node-input-highlight"><i class="fa fa-square-o"></i> Border</label>
        <input type="text" id="node-input-highlight" placeholder="(optional) border highlight colour">
    </div>
    <div class="form-row" id="node-toast-sendtoall">
        <label style="width:auto" for="node-input-sendall"><i class="fa fa-arrow-right"></i> Send to all browser sessions. </label>
        <input type="checkbox" checked id="node-input-sendall" style="display:inline-block; width:auto; vertical-align:baseline;">
    </div>
    <div class="form-row" id="node-dialog-displayok">
        <label for="node-input-ok"><i class="fa fa-check"></i> Default action label</label>
        <input type="text" id="node-input-ok" placeholder="label for OK button">
    </div>
    <div class="form-row" id="node-dialog-displaycancel">
        <label for="node-input-cancel"><i class="fa fa-times"></i> Secondary action label</label>
        <input type="text" id="node-input-cancel" placeholder="(optional label for Cancel button)">
    </div>
    <div class="form-row" id="node-toast-raw">
        <label style="width:auto" for="node-input-raw"><i class="fa fa-exclamation-triangle"></i> Accept raw HTML/JavaScript input in msg.payload to format popup.</label>
        <input type="checkbox" id="node-input-raw" style="display:inline-block; width:auto; vertical-align:baseline;">
    </div>
    <div class="form-row" id="node-dialog-className">
        <label for="node-input-className"><i class="fa fa-code"></i> Class</label>
        <input type="text" id="node-input-className" placeholder="[msg.className]">
    </div>
    <div class="form-row" id="node-dialog-topic">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> Topic</label>
        <input type="text" id="node-input-topic" placeholder="[msg.topic]">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-tips"><b>Note</b>: checking <i>Accept raw HTML/JavaScript</i> can allow injection of code.
    Ensure the input comes from trusted sources.</span></div>
</script>
<script type="text/html" data-help-name="ui_toast">
    <p>Shows <code>msg.payload</code> as a popup notification or OK / Cancel dialog
    message on the user interface.</p>
    <p>If a <code>msg.topic</code> is available it will be used as the title.</p>
    <p>If you do not set an optional border highlight colour, then it can be set dynamically by <code>msg.highlight</code>.</p>
    <p>You may also configure the position and duration of the toast notifications. If you leave the timeout blank
    it can be set by <code>msg.timeout</code>. This does not apply to OK/Cancel dialogs.
    <p>The dialog returns a <code>msg.payload</code> string of whatever you configure
    the button label(s) to be. The second (cancel) button is optional, as is the return
    value of <code>msg.topic</code>.</p>
    <p>If you select 'OK, Cancel and Input' mode then <code>msg.payload</code> will contain
    any text input by the user, rather than the OK button text.</p>
    <p>The OK and Cancel button labels can be replaced by using <code>msg.ok</code> and <code>msg.cancel</code></p>
    <p>Sending a blank payload will remove any active dialog without sending any data.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent element. This way you can style the card and the elements inside it with custom CSS.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_ui_control] --- -->
<script type="text/javascript">
(function () {
    // convert to i18 text
    function c_(x) {
        return RED._("node-red-dashboard/ui_ui_control:ui_ui_control."+x);
    }

    RED.nodes.registerType('ui_ui_control', {
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb( 63, 173, 181)',
        defaults: {
            name: {value:""},
            events: {value:"all"}
        },
        inputs:1,
        outputs:1,
        align: "right",
        icon: "ui_link.png",
        paletteLabel: 'ui control',
        label: function() { return this.name || "ui control"; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        outputLabels: function() { return this.events; },
        oneditprepare: function() {
            var node = this;
            var sel = $("#node-input-events");
            for (var name of ["all", "change", "connect"]) {
                var text = c_("events."+name);
                $("<option/>").val(name).text(text).appendTo(sel);
            }
            $(sel).val(node.events);
        },
    });
})();
</script>

<script type="text/html" data-template-name="ui_ui_control">
    <div class="form-row">
        <label for="node-input-events"><i class="fa fa-sign-out"></i> <span data-i18n="ui_ui_control.label.output"></span></label>
        <select id="node-input-events" style="width:70%;">
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="ui_ui_control.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]ui_ui_control.placeholder.name">
    </div>
</script>
<script type="text/html" data-help-name="ui_ui_control">
    <p>Allows dynamic control of the Dashboard.</p>
    <p>The default function is to change the currently displayed tab. <code>msg.payload</code>
    should either be an object of the form <code>{"tab":"my_tab_name"}</code>, or just be the <b>tab name</b>
    or <b>numeric index</b> (from 0) of the tab or link to be displayed.</p>
    <p>Sending a blank tab name "" will refresh the current page.
    You can also send "+1" for next tab and "-1" for previous tab.</p>
    <p>Dashboard pages (i.e. "tabs") can be controlled by sending a <code>msg.payload</code> object with the format
    <pre>{"tabs": {"hide": "tab_name_to_hide", "disable": ["secret_tab", "unused_stuff"]}}</pre>.
    There are 2 toggle states available: <b>show</b>/<b>hide</b> and <b>enable</b>/<b>disable</b></p>
    <p>Visibility of individual groups of widgets can controlled by a payload like
    <pre>{"group": {"hide": ["tab_name_group_name_with_underscores"], "show": ["reveal_another_group"], "focus": true}}</pre>
    where <b>focus</b> is optional and will cause the screen to scroll to show that group if required. 
    You can also use properties `open` and `close` to set the state of a group that can be controlled by the user. The group
    names are the IDs of the groups and are typically formed from the <i>tab name</i> plus <i>group name</i> joined with
    underscores replacing all spaces.</p>
    <p>When any browser client connects or loses connection, changes tab, or expands or collapses a group this node will emit a <code>msg</code> containing:</p>
    <ul>
    <li><code>payload</code> - <i>connect</i>, <i>lost</i>, <i>change</i>, or <i>group</i>.
    <li><code>socketid</code> - the ID of the socket (this will change every time the browser reloads the page).
    <li><code>socketip</code> - the ip address from where the connection originated.
    <li><code>tab</code> - the number of the tab. (only for 'change' event).
    <li><code>name</code> - the name of the tab. (only for 'change' event).
    <li><code>group</code> - the name of the group. (only for 'group' event).
    <li><code>open</code> - the state of the group. (only for 'group' event).
    </ul>
    <p>Optional - report only connect events - useful to use to trigger a resend of data to a new client without needing to filter out other events.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_template] --- -->
<script type="text/javascript">
    // convert to i18 text
    function c_(x) {
        return RED._("node-red-dashboard/ui_template:ui_template."+x);
    }

    RED.nodes.registerType('ui_template',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb( 63, 173, 181)',
        defaults: {
            group: {type: 'ui_group', required:false},
            name: {value: ''},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var valid = true
                    if (this.templateScope !== 'global') {
                        var width = v||0;
                        var currentGroup = $('#node-input-group').val()||this.group;
                        var groupNode = RED.nodes.node(currentGroup);
                        valid = !groupNode || +width <= +groupNode.width;
                        $("#node-input-size").toggleClass("input-error",!valid);
                    }
                    return valid;
                }},
            height: {value: 0},
            format: {value: '<div ng-bind-html="msg.payload"></div>'},
            storeOutMessages: {value: true},
            fwdInMessages: {value: true},
            resendOnRefresh: {value: true},
            templateScope: {value: 'local'},
            className: {value: ''}
        },
        inputs:1,
        outputs:1,
        icon: "ui_template.png",
        paletteLabel: 'template',
        label: function() { return this.name || 'template'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            if (RED.editor.hasOwnProperty("editText") && typeof RED.editor.editText === "function") {
                $("#node-template-expand-editor").show();
            }
            else {
                $("#node-template-expand-editor").hide();
            }
            var that = this;
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });

            if (typeof this.storeOutMessages === 'undefined') {
                this.storeOutMessages = true;
                $('#node-input-storeOutMessages').prop('checked', true);
            }

            if (typeof this.fwdInMessages === 'undefined') {
                this.fwdInMessages = true;
                $('#node-input-fwdInMessages').prop('checked', true);
            }

            if (typeof this.templateScope === 'undefined') {
                this.templateScope = 'local';
                $('#node-input-templateScope').val(this.templateScope);
            }

            $('#node-input-templateScope').on('change', function() {
                if ($('#node-input-templateScope').val() === 'global') {
                    $('#template-row-group, #template-row-size, #template-pass-store, #template-row-class').hide();
                    that._def.defaults.group.required = false;
                }
                else {
                    $('#template-row-group, #template-row-size, #template-pass-store, #template-row-class').show();
                    that._def.defaults.group.required = true;
                }

                var rows = $("#dialog-form>div:not(.node-text-editor-row)");
                var height = $("#dialog-form").height();
                for (var i=0; i<rows.size(); i++) {
                    height = height - $(rows[i]).outerHeight(true);
                }
                if ($('#node-input-templateScope').val() === "global") { height += 240; }
                var editorRow = $("#dialog-form>div.node-text-editor-row");
                height -= (parseInt(editorRow.css("marginTop")) + parseInt(editorRow.css("marginBottom")));
                $(".node-text-editor").css("height",height+"px");
                if (this.editor) { this.editor.resize(); }
            })

            this.editor = RED.editor.createEditor({
                id: 'node-input-format-editor',
                mode: 'ace/mode/html',
                value: $("#node-input-format").val()
            });

            RED.library.create({
                url:"uitemplates", // where to get the data from
                type:"ui_template", // the type of object the library is for
                editor:this.editor, // the field name the main text body goes to
                mode:"ace/mode/html",
                fields:['name']
            });

            this.editor.focus();

            RED.popover.tooltip($("#node-template-expand-editor"),c_("label.expand"));

            $("#node-template-expand-editor").on("click", function(e) {
                e.preventDefault();
                var value = that.editor.getValue();
                RED.editor.editText({
                    mode: 'html',
                    value: value,
                    width: "Infinity",
                    cursor: that.editor.getCursorPosition(),
                    complete: function(v,cursor) {
                        that.editor.setValue(v, -1);
                        that.editor.gotoLine(cursor.row+1,cursor.column,false);
                        setTimeout(function() { that.editor.focus(); },300);
                    }
                })
            })
        },
        oneditsave: function() {
            var annot = this.editor.getSession().getAnnotations();
            this.noerr = 0;
            $("#node-input-noerr").val(0);
            for (var k=0; k < annot.length; k++) {
                if (annot[k].type === "error") {
                    $("#node-input-noerr").val(annot.length);
                    this.noerr = annot.length;
                }
            }
            $("#node-input-format").val(this.editor.getValue());
            this.editor.destroy();
            delete this.editor;
        },
        oneditcancel: function() {
            this.editor.destroy();
            delete this.editor;
        },
        oneditresize: function(size) {
            var rows = $("#dialog-form>div:not(.node-text-editor-row)");
            var height = $("#dialog-form").height();
            for (var i=0; i<rows.size(); i++) {
                height = height - $(rows[i]).outerHeight(true);
            }
            if ($('#node-input-templateScope').val() === "global") { height += 232; }
            var editorRow = $("#dialog-form>div.node-text-editor-row");
            height -= (parseInt(editorRow.css("marginTop")) + parseInt(editorRow.css("marginBottom")));
            $(".node-text-editor").css("height",height+"px");
            this.editor.resize();
        }
    });
</script>

<script type="text/html" data-template-name="ui_template">
    <div class="form-row">
        <label for="node-input-format"><span data-i18n="ui_template.label.type"></span></label>
        <select style="width:76%" id="node-input-templateScope">
            <option value="local" data-i18n="ui_template.label.local"></option>
            <option value="global" data-i18n="ui_template.label.global"></option>
        </select>
    </div>
	<div class="form-row" id="template-row-group">
        <label for="node-input-group"><i class="fa fa-table"></i> <span data-i18n="ui_template.label.group"></span></label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row" id="template-row-size">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui_template.label.size"></span></label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row" id="template-row-class">
        <label for="node-input-className"><i class="fa fa-code"></i>  <span data-i18n="ui_template.label.className"></label>
        <input type="text" id="node-input-className" data-i18n="[placeholder]ui_template.label.classNamePlaceholder"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <div style="display:inline-block; width:calc(100% - 105px)">
            <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
        </div>
    </div>
    <div class="form-row" style="margin-bottom:0px;">
        <label for="node-input-format"><i class="fa fa-copy"></i> <span data-i18n="ui_template.label.template"></span></label>
        <input type="hidden" id="node-input-format">
        <button id="node-template-expand-editor" class="red-ui-button red-ui-button-small" style="float:right"><i class="fa fa-expand"></i></button>
    </div>
    <div class="form-row node-text-editor-row">
        <div style="height:250px; min-height:100px" class="node-text-editor" id="node-input-format-editor" ></div>
    </div>
    <div id="template-pass-store">
        <div class="form-row" style="margin-bottom:0px;">
            <input type="checkbox" id="node-input-fwdInMessages" style="display:inline-block; margin-left:8px; width:auto; vertical-align:top;">
            <label for="node-input-fwdInMessages" style="width:70%;"> <span data-i18n="ui_template.label.pass-through"></span></label>
        </div>
        <div class="form-row" style="margin-bottom:0px;">
            <input type="checkbox" id="node-input-storeOutMessages" style="display:inline-block; margin-left:8px; width:auto; vertical-align:top;">
            <label for="node-input-storeOutMessages" style="width:70%;"> <span data-i18n="ui_template.label.store-state"></span></label>
        </div>
        <div class="form-row" style="margin-bottom:0px;">
            <input type="checkbox" id="node-input-resendOnRefresh" style="display:inline-block; margin-left:8px; width:auto; vertical-align:top;">
            <label for="node-input-resendOnRefresh" style="width:70%;"> <span data-i18n="ui_template.label.resend"></span></label>
        </div>
    </div>
</script>
<script type="text/html" data-help-name="ui_template">
    <p>The template widget can contain any valid html and Angular/Angular-Material directives.</p>
    <p>This node can be used to create a dynamic user interface element that changes its appearance
    based on the input message and can send back messages to Node-RED.</p>
    <p><b>For example:</b><br>
    <pre style="font-size:smaller;">&lt;div layout=&quot;row&quot; layout-align=&quot;space-between&quot;&gt;
  &lt;p&gt;The number is&lt;/p&gt;
  &lt;font color=&quot;{{((msg.payload || 0) % 2 === 0) ? 'green' : 'red'}}&quot;&gt;
    {{(msg.payload || 0) % 2 === 0 ? 'even' : 'odd'}}
  &lt;/font&gt;
&lt;/div&gt;</pre>
    Will display if the number received as <code>msg.payload</code> is even or odd. It will also
    change the color of the text to green if the number is even or red if odd.<br/>
    The next example shows how to set a unique id for your template, pick up the default theme colour,
    and watch for any incoming message.</p>
    <pre style="font-size:smaller;">
&lt;div id="{{'my_'+$id}}" style="{{'color:'+theme.base_color}}"&gt;Some text&lt;/div&gt;
&lt;script&gt;
(function(scope) {
  scope.$watch('msg', function(msg) {
    if (msg) {
      // Do something when msg arrives
      $("#my_"+scope.$id).html(msg.payload);
    }
  });
})(scope);
&lt;/script&gt;</pre>
    <p>Templates made in this way can be copied and remain independent of each other.</p>
    <p><b>Sending a message:</b><br>
    <pre style="font-size:smaller;">
&lt;script&gt;
var value = "hello world";
// or overwrite value in your callback function ...
this.scope.action = function() { return value; }
&lt;/script&gt;
&lt;md-button ng-click=&quot;send({payload:action()})&quot;&gt;
    Click me to send a hello world
&lt;/md-button&gt;</pre>
    Will display a button that when clicked will send a message with the payload <code>'Hello world'</code>.</p>
    <p><b>Using <code>msg.template</code>:</b><br>
    You can also define the template content via <code>msg.template</code>, so you can use external files for example.<br>
    Template will be reloaded on input if it has changed.<br>
    Code written in the Template field will be ignored when <code>msg.template</code> is present.</p>
    <p>The following icon fonts are available: <a href="https://klarsys.github.io/angular-material-icons/" target="_blank">Material Design icon</a>
    <i>(e.g. 'check', 'close')</i> or a <a href="https://fontawesome.com/v4.7.0/icons/" target="_blank">Font Awesome icon</a>
    <i>(e.g. 'fa-fire')</i>, or a <a href="https://github.com/Paul-Reed/weather-icons-lite/blob/master/css_mappings.md">Weather icon</a>.
    You can use the full set of Google material icons if you add 'mi-' to the icon name. e.g. 'mi-videogame_asset'.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_link] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_link',{
        category: 'config',
        color: 'rgb( 63, 173, 181)',
        defaults: {
            name: {value: 'Google'},
            link: {value: 'https://www.google.com'},
            icon: {value: 'open_in_browser'},
            target: {value: 'newtab', validate :function() { return true; }},
            order: {value: 0},
            className: {value: ''}
        },
        inputs:0,
        outputs:0,
        hasUsers: false,
        align: "right",
        icon: "ui_link.png",
        paletteLabel: 'link',
        label: function() { return this.name || 'link'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            document.getElementById('node-config-input-target-opentab').checked = (this.target === 'newtab');
            document.getElementById('node-config-input-target-openiframe').checked = (this.target === 'iframe');
            document.getElementById('node-config-input-target-openthis').checked = (this.target === 'thistab');
        },
        oneditsave : function () {
            var t = 'iframe';
            if (document.getElementById('node-config-input-target-opentab').checked) { t = 'newtab'; }
            if (document.getElementById('node-config-input-target-openthis').checked) { t = 'thistab'; }
            this.target = t;
        },
        onadd: function() {
            //console.log("PING");
        }
    });
</script>

<script type="text/html" data-template-name="ui_link">
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="ui_link.label.name"></span></label>
        <input type="text" id="node-config-input-name">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  <span data-i18n="ui_link.label.className"></label>
        <input type="text" id="node-input-className" data-i18n="[placeholder]ui_link.label.classNamePlaceholder"/>
    </div>
    <div class="form-row">
        <label for="node-config-input-link"><i class="fa fa-link"></i> <span data-i18n="ui_link.label.link"></span></label>
        <input type="text" id="node-config-input-link">
    </div>
    <div class="form-row">
        <label for="node-config-input-icon"><i class="fa fa-image"></i> <span data-i18n="ui_link.label.icon"></span></label>
        <input type="text" id="node-config-input-icon">
    </div>
    <div class="form-row">
        <label><i class="fa fa-link"></i> <span data-i18n="ui_link.label.open-in"></span></label>
        <input type="radio" id="node-config-input-target-opentab" name="open-link-method" style="width:20px; margin-top:0px; margin-bottom:5px" checked>
        <label for="node-config-input-target-opentab" data-i18n="ui_link.label.new-tab"></label><br/>
        <input type="radio" id="node-config-input-target-openthis" name="open-link-method" style="width:20px; margin-left:104px; margin-top:0px; margin-bottom:5px">
        <label for="node-config-input-target-openthis" data-i18n="ui_link.label.this-tab"></label><br/>
        <input type="radio" id="node-config-input-target-openiframe" name="open-link-method" style="width:20px; margin-left:104px; margin-top:0px; margin-bottom:5px">
        <label for="node-config-input-target-openiframe" data-i18n="ui_link.label.iframe"></label>
    </div>
    <div class="form-tips" data-i18n="[html]ui_link.tip"></div>
</script>
<script type="text/html" data-help-name="ui_link">
    <p>The <b>Icon</b> can be defined, as either a <a href="https://klarsys.github.io/angular-material-icons/" target="_blank">Material Design icon</a>
    <i>(e.g. 'check', 'close')</i> or a <a href="https://fontawesome.com/v4.7.0/icons/" target="_blank">Font Awesome icon</a>
    <i>(e.g. 'fa-fire')</i>, or a <a href="https://github.com/Paul-Reed/weather-icons-lite/blob/master/css_mappings.md">Weather icon</a>.
    You can use the full set of google material icons if you add 'mi-' to the icon name. e.g. 'mi-videogame_asset'.</p>
    <p>The <b>Open in</b> field controls whether the link opens in a <i>New Tab</i>, or if the link is opened within an <i>iframe</i> on the same page. Some sites, including Google, do not allow the rendering of their page inside an iframe. If you select the <i>iframe</i> option and the site does not show, this is simply because that site forbids the use of it inside an iframe.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_tab] --- -->
<script type="text/javascript">
    // convert to i18 text
    function c_ui_tab(x) {
        return RED._("node-red-dashboard/ui_tab:ui_tab."+x);
    }

    RED.nodes.registerType('ui_tab',{
        category: 'config',
        defaults: {
            name: {value: c_ui_tab("label.home")},
            icon: {value: 'dashboard'},
            order: {value: 0},
            disabled: {value: false},
            hidden: {value: false}
        },
        paletteLabel: 'dashboard tab',
        label: function() { return this.name || c_ui_tab("label.tab"); },
        sort: function(A,B) {
            return A.order - B.order;
        },
        oneditprepare: function() {
            $("#node-config-input-disabled-btn").on("click", function(e) {
                var i = $(this).find("i");
                var active = i.hasClass("fa-toggle-on");
                var newCls = "fa fa-toggle-" + (active ? "off" : "on");
                i.attr("class", newCls);
                $("#node-config-input-disabled").prop('checked',active);

                var newTxt = c_ui_tab(active ? "label.disabled" : "label.enabled");
                $("#node-config-input-disabled-label").text(newTxt);

                var info = $("#node-config-input-disabled-info");
                var done = active ? info.show() : info.hide();
            });
            if (this.disabled) {
                $("#node-config-input-disabled-btn").click();
            }
            else {
                $("#node-config-input-disabled-label").text(c_ui_tab("label.enabled"));
            }

            $("#node-config-input-hidden-btn").on("click", function(e) {
                var i = $(this).find("i");
                var active = i.hasClass("fa-toggle-on");
                var newCls = "fa fa-toggle-" + (active ? "off" : "on");
                i.attr("class", newCls);
                $("#node-config-input-hidden").prop('checked',active);

                var newTxt = c_ui_tab(active ? "label.hidden" : "label.visible");
                $("#node-config-input-hidden-label").text(newTxt);

                var info = $("#node-config-input-hidden-info");
                var done = active ? info.show() : info.hide();
            });
            if (this.hidden) {
                $("#node-config-input-hidden-btn").click();
            }
            else {
                $("#node-config-input-hidden-label").text(c_ui_tab("label.visible"));
            }
        },
        oneditsave: function() {
            this.disabled = $("#node-config-input-disabled").prop("checked");
            this.hidden = $("#node-config-input-hidden").prop("checked");
        }
    });
</script>

<script type="text/html" data-template-name="ui_tab">
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="ui_tab.label.name"></span></label>
        <input type="text" id="node-config-input-name">
    </div>
    <div class="form-row">
        <label for="node-config-input-icon"><i class="fa fa-file-image-o"></i> <span data-i18n="ui_tab.label.icon"></span></label>
        <input type="text" id="node-config-input-icon">
    </div>
    <div class="form-row">
        <label for="node-config-input-disabled-btn"><i class="fa fa-ban"></i> <span data-i18n="ui_tab.label.state"></span></label>
        <button id="node-config-input-disabled-btn" class="editor-button" style="width:100px; margin-right:6px;"><i class="fa fa-toggle-on"></i> <span id="node-config-input-disabled-label"></span></button>
        <input type="checkbox" id="node-config-input-disabled" style="display:none;"/>
        <span id="node-config-input-disabled-info" data-i18n="[html]ui_tab.info.disabled" style="display:none;"></span>
    </div>
    <div class="form-row">
        <label for="node-config-input-hidden-btn"><i class="fa fa-eye-slash"></i> <span data-i18n="ui_tab.label.navmenu"></span></label>
        <button id="node-config-input-hidden-btn" class="editor-button" style="width:100px; margin-right:6px;"><i class="fa fa-toggle-on"></i> <span id="node-config-input-hidden-label"></span></button>
        <input type="checkbox" id="node-config-input-hidden" style="display:none;"/>
        <span id="node-config-input-hidden-info" data-i18n="[html]ui_tab.info.hidden" style="display:none;"></span>
    </div>
    <div class="form-tips" data-i18n="[html]ui_tab.tip"></div>
</script>
<script type="text/html" data-help-name="ui_tab">
    <p>Tab configuration for Dashboard</p>
    <p><b>Disabled</b> pages are not included in the Dashboard app, and are therefore not functional.
       The tab name still appears in the Navigation Menu (unless it is also hidden).
    </p>
    <p><b>Hidden</b> pages are not listed in the Left-hand Navigation Menu.
       However, they are still active in the Dashboard, and can be shown by using a `ui_control` msg.
    </p>
    <p>The <b>Icon</b> field can be either a <a href="https://klarsys.github.io/angular-material-icons/" target="_blank">Material Design icon</a>
    <i>(e.g. 'check', 'close')</i> or a <a href="https://fontawesome.com/v4.7.0/icons/" target="_blank">Font Awesome icon</a>
    <i>(e.g. 'fa-fire')</i>, or a <a href="https://github.com/Paul-Reed/weather-icons-lite/blob/master/css_mappings.md">Weather icon</a>.
    You can use the full set of google material icons if you add 'mi-' to the icon name. e.g. 'mi-videogame_asset'.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_group] --- -->
<script type="text/javascript">
    // convert to i18 text
    function c_ui_group(x) {
        return RED._("node-red-dashboard/ui_group:ui_group."+x);
    }

    RED.nodes.registerType('ui_group',{
        category: 'config',
        defaults: {
            name: {value: c_ui_group("label.default")},
            tab: {type:"ui_tab", required: true },
            order: {value: 0},
            disp: {value: true},
            width: {value: 6},
            collapse: {value: false},
            disabled: {value: false},
            hidden: {value: false},
            className: {value: ''},
        },
        sort: function(A,B) {
            if (A.tab !== B.tab) {
                var tabA = RED.nodes.node(A.tab);
                var tabB = RED.nodes.node(B.tab);
                if (!tabA && tabB) {
                    return -1;
                }
                else if (tabA && !tabB) {
                    return 1;
                }
                else {
                    return tabA.order - tabB.order;
                }
            }
            return A.order - B.order;
        },
        paletteLabel: 'dashboard group',
        label: function() {
            var tabNode = RED.nodes.node(this.tab);
            if (tabNode) {
                return "["+(tabNode.name||c_ui_group("label.tab"))+"] " + (this.name || c_ui_group("label.group"));
            }
            return "["+c_ui_group("label.unassigned")+"] " + (this.name || c_ui_group("label.group"));
        },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-size").elementSizer({
                width: "#node-config-input-width",
                auto: false
            });
            $("#node-config-input-disp").on("change", function() {
                if ($("#node-config-input-disp").is(":checked")) {
                    $("#group-collapse-flag").show();
                }
                else {
                    $("#group-collapse-flag").hide();
                    $("#node-config-input-collapse").prop("checked",false);
                }
            });
        }
    });
</script>

<script type="text/html" data-template-name="ui_group">
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="ui_group.label.name"></span></label>
        <input type="text" id="node-config-input-name">
    </div>
    <div class="form-row">
        <label for="node-config-input-tab"><i class="fa fa-table"></i> <span data-i18n="ui_group.label.tab"></span></label>
        <input type="text" id="node-config-input-tab">
    </div>
    <div class="form-row">
        <label for="node-config-input-className"><i class="fa fa-code"></i>  <span data-i18n="ui_group.label.className"></label>
        <input type="text" id="node-config-input-className" data-i18n="[placeholder]ui_group.label.classNamePlaceholder"/>
    </div>
    <div class="form-row">
        <label for="node-config-input-width"><i class="fa fa-arrows-h"></i> <span data-i18n="ui_group.label.width"></span></label>
        <input type="hidden" id="node-config-input-width">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <input style="margin:8px 0 10px 102px; width:20px;" type="checkbox" checked id="node-config-input-disp"> <label style="width:auto" for="node-config-input-disp"><span data-i18n="ui_group.display-name"></span></label>
    </div>
    <div class="form-row" id="group-collapse-flag">
        <input style="margin:8px 0 10px 102px; width:20px;" type="checkbox" id="node-config-input-collapse"> <label style="width:auto" for="node-config-input-collapse"><span data-i18n="ui_group.collapse-name"></span></label>
    </div>
</script>
<script type="text/html" data-help-name="ui_group">
    <p>Group</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_spacer] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_spacer', {
        category: 'config',
        color: '#D4F0F8',
        defaults: {
            name: {value: "spacer"},
            group: {type: 'ui_group', required:true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            className: {value: ''}
        },
        z: RED.workspaces.active(),
        inputs:0,
        outputs:0,
        hasUsers: false,
        icon: "ui_spacer.png",
        paletteLabel: 'spacer',
        label: function() { return this.name + " " + this.width + "x" + this.height; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
        },
        oneditsave: function() {
            this.width = $("#node-input-width").val();
            this.height = $("#node-input-height").val();
        }
    });
</script>

<script type="text/html" data-template-name="ui_spacer">
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>
</script>
<script type="text/html" data-help-name="ui_spacer">
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-node-pi-gpio/rpi-gpio] --- -->
<style>
    .rpi-gpio-pinTable {
        color: #555;
        width: 340px;
        display: inline-table;
        font-size: 13px;
        height: 380px;
        min-height: 380px;
        max-height: 380px;
    }
    .rpi-gpio-pinTable input[type="radio"] {
        width: auto;
        margin: 3px 2px;
        vertical-align: top;
    }
    .rpi-gpio-pinTable label {
        width: auto;
        margin: 0;
        display: block;
    }
    .rpi-gpio-pinTable .pinTableBody {
        width: 340px;
        display: table-row-group;
        line-height: 12px;
    }
    .rpi-gpio-pinTable .pinTableRow {
        width: 340px;
        display: table-row;
        height: 20px;
    }
    .rpi-gpio-pinTable .pinTableCellL {
        width: 170px;
        height: 20px;
        display: table-cell;
        text-align: right;
        padding-right: 4px;
        vertical-align: middle;
        border: 1px solid #444;
    }
    .rpi-gpio-pinTable .pinTableCellL label {
        width: 170px;
    }
    .rpi-gpio-pinTable .pinTableCellR {
        width: 170px;
        height: 22px;
        display: table-cell;
        text-align: left;
        padding-left: 4px;
        vertical-align: middle;
        border: 1px solid #000;
    }
    .rpi-gpio-pinTable .pinTableCellR label {
        width: 170px;
    }
    .rpi-gpio-pinTable .pinColorPower {
        background-color:#FECBCE;
    }
    .rpi-gpio-pinTable .pinColorGround {
        background-color:#DDDDDD;
    }
    .rpi-gpio-pinTable .pinColorGPIO {
        background-color:#BFEBBF;
    }
    .rpi-gpio-pinTable .pinColorDual {
        background-color:#D0E6F4;
    }
    .rpi-gpio-pinTable .pinColorSD {
        background-color:#FFFDD0;
    }
</style>
<script type="text/html" data-template-name="rpi-gpio in">

    <div class="form-row" style="min-width: 540px">
		<label><i class="fa fa-circle"></i> <span data-i18n="rpi-gpio.pinname"></span></label>
        <div class="rpi-gpio-pinTable">
            <div class="pinTableBody" id="pinform">
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorPower"><label>3.3V Power - 1 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorPower"><label><input disabled type="radio" name="pins" value=""> 2 - 5V Power</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-3">SDA1 - GPIO02 - 3 <input id="pinTable-pin-3" type="radio" name="pins" value="2"></label></div>
                    <div class="pinTableCellR pinColorPower"><label><input disabled type="radio" name="pins" value=""> 4 - 5V Power</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-5">SCL1 - GPIO03 - 5 <input id="pinTable-pin-5" type="radio" name="pins" value="3"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 6 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-7">GPIO04 - 7 <input id="pinTable-pin-7" type="radio" name="pins" value="4"></label></div>
                    <div class="pinTableCellR pinColorDual"><label for="pinTable-pin-8"><input id="pinTable-pin-8" type="radio" name="pins" value="14"> 8 - GPIO14 - TxD</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGround"><label>Ground - 9 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorDual"><label for="pinTable-pin-10"><input id="pinTable-pin-10" type="radio" name="pins" value="15"> 10 - GPIO15 - RxD</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-11">GPIO17 - 11 <input id="pinTable-pin-11" type="radio" name="pins" value="17"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-12"><input id="pinTable-pin-12" type="radio" name="pins" value="18"> 12 - GPIO18</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-13">GPIO27 - 13 <input id="pinTable-pin-13" type="radio" name="pins" value="27"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 14 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-15">GPIO22 - 15 <input id="pinTable-pin-15" type="radio" name="pins" value="22"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-16"><input id="pinTable-pin-16" type="radio" name="pins" value="23"> 16 - GPIO23</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorPower"><label>3.3V Power - 17 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-18"><input id="pinTable-pin-18" type="radio" name="pins" value="24"> 18 - GPIO24</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-19">MOSI - GPIO10 - 19 <input id="pinTable-pin-19" type="radio" name="pins" value="10"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 20 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-21">MISO - GPIO09 - 21 <input id="pinTable-pin-21" type="radio" name="pins" value="9"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-22"><input id="pinTable-pin-22" type="radio" name="pins" value="25"> 22 - GPIO25</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-23">SCLK - GPIO11 - 23 <input id="pinTable-pin-23" type="radio" name="pins" value="11"></label></div>
                    <div class="pinTableCellR pinColorDual"><label for="pinTable-pin-24"><input id="pinTable-pin-24" type="radio" name="pins" value="8"> 24 - GPIO8 - CE0</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGround"><label>Ground - 25 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorDual"><label for="pinTable-pin-26"><input id="pinTable-pin-26" type="radio" name="pins" value="7"> 26 - GPIO7 - CE1</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorSD"><label>SD - 27 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorSD"><label><input disabled type="radio" name="pins" value=""> 28 - SC</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-29">GPIO05 - 29 <input id="pinTable-pin-29" type="radio" name="pins" value="5"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 30 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-31">GPIO06 - 31 <input id="pinTable-pin-31" type="radio" name="pins" value="6"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-32"><input id="pinTable-pin-32" type="radio" name="pins" value="12"> 32 - GPIO12</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-33">GPIO13 - 33 <input id="pinTable-pin-33" type="radio" name="pins" value="13"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 34 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-35">GPIO19 - 35 <input id="pinTable-pin-35" type="radio" name="pins" value="19"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-36"><input id="pinTable-pin-36" type="radio" name="pins" value="16"> 36 - GPIO16</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-37">GPIO26 - 37 <input id="pinTable-pin-37" type="radio" name="pins" value="26"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-38"><input id="pinTable-pin-38" type="radio" name="pins" value="20"> 38 - GPIO20</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGround"><label>Ground - 39 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-40"><input id="pinTable-pin-40" type="radio" name="pins" value="21"> 40 - GPIO21</label></div>
                </div>
            </div>
        </div>
    </div>
    <div class="form-row">
        <label>&nbsp;&nbsp;&nbsp;&nbsp;BCM GPIO</label>
        <input type="text" id="node-input-pin" style="width: 352px">
    </div>
    <div class="form-row">
        <label for="node-input-intype"><i class="fa fa-level-up"></i> <span data-i18n="rpi-gpio.label.resistor"></span></label>
        <select type="text" id="node-input-intype" style="width:100px;">
        <option value="tri" data-i18n="rpi-gpio.resistor.none"></option>
        <option value="up" data-i18n="rpi-gpio.resistor.pullup"></option>
        <option value="down" data-i18n="rpi-gpio.resistor.pulldown"></option>
        </select>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-i18n="rpi-gpio.label.debounce"></span>
        <input type="text" id="node-input-debounce" style="width:47px; text-align:right"/>&nbsp;mS
    </div>
    <div class="form-row">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-read" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-read" style="width:70%;"><span data-i18n="rpi-gpio.label.readinitial"></span></label>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-tips" id="pin-tip"><span data-i18n="[html]rpi-gpio.tip.pin"></span></div>
    <div class="form-tips"><span data-i18n="[html]rpi-gpio.tip.in"></span></div>
</script>

<script type="text/javascript">
    var bcm2pin = {
        "2":"3", "3":"5", "4":"7", "14":"8", "15":"10", "17":"11", "18":"12", "27":"13", "22":"15",
        "23":"16", "24":"18", "10":"19", "9":"21", "25":"22", "11":"23", "8":"24", "7":"26",
        "5":"29", "6":"31", "12":"32", "13":"33", "19":"35", "16":"36", "26":"37", "20":"38", "21":"40"
    };
    var pin2bcm = { '3':'2', '5':'3', '7':'4', '8':'14', '10':'15', '11':'17', '12':'18', '13':'27',
        '15':'22', '16':'23', '18':'24', '19':'10', '21':'9', '22':'25', '23':'11', '24':'8', '26':'7',
        '29':'5', '31':'6', '32':'12', '33':'13', '35':'19', '36':'16', '37':'26', '38':'20', '40':'21'
    }
    var pinsInUse = {};

    var isEnvVar = function (value) {
        var re = /^\${([0-9a-zA-Z_]+)}$/;
        var match = value.match(re);
        return Boolean(match);
    };
    var isInt = function (value) {
        return parseInt(value).toString() === value.trim();
    };
    var uncheckAll = function() {
        for (var i=0; i< validPinValues.length; i++) {
            $("#pinform input[value="+validPinValues[i]+"]").prop('checked', false);
        }
    }
    var validatePin = function (value) {
        return isEnvVar(value) || (isInt(value) && value>=0 && value<=45);
    };
    RED.nodes.registerType('rpi-gpio in',{
        category: 'Raspberry Pi',
        color:"#c6dbef",
        defaults: {
            name: { value:"" },
            pin: { value:"",required:true,validate:validatePin },
            intype: { value:"tri" },
            debounce: { value:"25" },
            read: { value:false },
            bcm: { value:true }
        },
        inputs:0,
        outputs:1,
        icon: "rpi.png",
        info: function() {
            if ( Object.keys(pinsInUse).length !== 0 ) {
                return "**Pins in use** : "+Object.keys(pinsInUse);
            }
            else { return ""; }
        },
        label: function() {
            if (!this.bcm) { this.pin = pin2bcm[this.pin]; this.bcm = true; }
            var p = bcm2pin[this.pin];
            var suf = "";
            if (this.intype === "up") { suf = " ↑"}
            if (this.intype === "down") { suf = " ↓"}
            return this.name || (p ? "PIN: "+p+suf : "GPIO: "+this.pin+suf) ;
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        outputLabels: function() { return "GPIO"+this.pin; },
        oneditprepare: function() {
            var pinnow = this.pin;
            var pintip = this._("rpi-gpio.tip.pin");
            var pinname = this._("rpi-gpio.pinname");
            var alreadyuse = this._("rpi-gpio.alreadyuse");
            var alreadyset = this._("rpi-gpio.alreadyset");

            $.getJSON('rpi-pins/'+this.id,function(data) {
                pinsInUse = data || {};
                $('#pin-tip').html(pintip + Object.keys(data));
            });

            for (var i=0; i< validPinValues.length; i++) {
                $("#pinform input[value="+validPinValues[i]+"]").on("change", function (evt) {
                    $("#node-input-pin").val(evt.currentTarget.value);
                    $("#node-input-pin").removeClass("input-error");
                });
            }
            $("#node-input-pin").on("change", function() {
                var pinnew = $("#node-input-pin").val();
                if (pinnew && isInt(pinnew) && validPinValues.includes(pinnew)) {
                    $("#pinform input[value="+pinnew+"]").prop('checked', true);
                } else {
                    uncheckAll();
                }
                if ((pinnew) && (pinnew !== pinnow)) {
                    if (pinsInUse.hasOwnProperty(pinnew)) {
                        RED.notify(pinname+" "+pinnew+" "+alreadyuse,"warn");
                    }
                    pinnow = pinnew;
                }
            });
            $("#node-input-intype").on("change", function() {
                var newtype = $("#node-input-intype").val();
                if ((pinsInUse.hasOwnProperty(pinnow)) && (pinsInUse[pinnow] !== newtype)) {
                    RED.notify(pinname+" "+pinnow+" "+alreadyset+" "+pinsInUse[pinnow],"error");
                }
            });
            $('#pinform input').on('change', function() {
                this.pin = $("#pinform input[type='radio']:checked").val();
                $("#node-input-pin").val(this.pin);
            });
        }
    });
</script>

<script type="text/html" data-template-name="rpi-gpio out">
    <div class="form-row" style="min-width: 540px">
        <label><i class="fa fa-circle"></i> <span data-i18n="rpi-gpio.pinname"></span></label>
        <div class="rpi-gpio-pinTable">
            <div class="pinTableBody" id="pinform">
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorPower"><label>3.3V Power - 1 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorPower"><label><input disabled type="radio" name="pins" value=""> 2 - 5V Power</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-3">SDA1 - GPIO02 - 3 <input id="pinTable-pin-3" type="radio" name="pins" value="2"></label></div>
                    <div class="pinTableCellR pinColorPower"><label><input disabled type="radio" name="pins" value=""> 4 - 5V Power</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-5">SCL1 - GPIO03 - 5 <input id="pinTable-pin-5" type="radio" name="pins" value="3"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 6 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-7">GPIO04 - 7 <input id="pinTable-pin-7" type="radio" name="pins" value="4"></label></div>
                    <div class="pinTableCellR pinColorDual"><label for="pinTable-pin-8"><input id="pinTable-pin-8" type="radio" name="pins" value="14"> 8 - GPIO14 - TxD</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGround"><label>Ground - 9 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorDual"><label for="pinTable-pin-10"><input id="pinTable-pin-10" type="radio" name="pins" value="15"> 10 - GPIO15 - RxD</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-11">GPIO17 - 11 <input id="pinTable-pin-11" type="radio" name="pins" value="17"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-12"><input id="pinTable-pin-12" type="radio" name="pins" value="18"> 12 - GPIO18</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-13">GPIO27 - 13 <input id="pinTable-pin-13" type="radio" name="pins" value="27"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 14 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-15">GPIO22 - 15 <input id="pinTable-pin-15" type="radio" name="pins" value="22"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-16"><input id="pinTable-pin-16" type="radio" name="pins" value="23"> 16 - GPIO23</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorPower"><label>3.3V Power - 17 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-18"><input id="pinTable-pin-18" type="radio" name="pins" value="24"> 18 - GPIO24</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-19">MOSI - GPIO10 - 19 <input id="pinTable-pin-19" type="radio" name="pins" value="10"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 20 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-21">MISO - GPIO09 - 21 <input id="pinTable-pin-21" type="radio" name="pins" value="9"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-22"><input id="pinTable-pin-22" type="radio" name="pins" value="25"> 22 - GPIO25</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-23">SCLK - GPIO11 - 23 <input id="pinTable-pin-23" type="radio" name="pins" value="11"></label></div>
                    <div class="pinTableCellR pinColorDual"><label for="pinTable-pin-24"><input id="pinTable-pin-24" type="radio" name="pins" value="8"> 24 - GPIO8 - CE0</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGround"><label>Ground - 25 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorDual"><label for="pinTable-pin-26"><input id="pinTable-pin-26" type="radio" name="pins" value="7"> 26 - GPIO7 - CE1</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorSD"><label>SD - 27 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorSD"><label><input disabled type="radio" name="pins" value=""> 28 - SC</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-29">GPIO05 - 29 <input id="pinTable-pin-29" type="radio" name="pins" value="5"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 30 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-31">GPIO06 - 31 <input id="pinTable-pin-31" type="radio" name="pins" value="6"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-32"><input id="pinTable-pin-32" type="radio" name="pins" value="12"> 32 - GPIO12</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-33">GPIO13 - 33 <input id="pinTable-pin-33" type="radio" name="pins" value="13"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 34 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-35">GPIO19 - 35 <input id="pinTable-pin-35" type="radio" name="pins" value="19"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-36"><input id="pinTable-pin-36" type="radio" name="pins" value="16"> 36 - GPIO16</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-37">GPIO26 - 37 <input id="pinTable-pin-37" type="radio" name="pins" value="26"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-38"><input id="pinTable-pin-38" type="radio" name="pins" value="20"> 38 - GPIO20</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGround"><label>Ground - 39 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-40"><input id="pinTable-pin-40" type="radio" name="pins" value="21"> 40 - GPIO21</label></div>
                </div>
            </div>
        </div>
    </div>
    <div class="form-row">
        <label>&nbsp;&nbsp;&nbsp;&nbsp;BCM GPIO</label>
        <input type="text" id="node-input-pin" style="width: 352px">
    </div>
    <div class="form-row" id="node-set-pwm">
        <label>&nbsp;&nbsp;&nbsp;&nbsp;<span data-i18n="rpi-gpio.label.type"></span></label>
        <select id="node-input-out" style="width: 250px;">
            <option value="out" data-i18n="rpi-gpio.digout"></option>
            <option value="pwm" data-i18n="rpi-gpio.pwmout"></option>
        </select>
    </div>
    <div class="form-row" id="node-set-tick">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-set" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-set" style="width: 70%;"><span data-i18n="rpi-gpio.label.initpin"></span></label>
    </div>
    <div class="form-row" id="node-set-state">
        <label for="node-input-level">&nbsp;</label>
        <select id="node-input-level" style="width: 250px;">
            <option value="0" data-i18n="rpi-gpio.initpin0"></option>
            <option value="1" data-i18n="rpi-gpio.initpin1"></option>
        </select>
    </div>
    <div class="form-row" id="node-set-freq">
        <label for="node-input-freq"> <span data-i18n="rpi-gpio.label.freq"></span></label>
        <input type="text" id="node-input-freq" placeholder="100"> Hz
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-tips" id="pin-tip"><span data-i18n="[html]rpi-gpio.tip.pin"></span></div>
    <div class="form-tips" id="dig-tip"><span data-i18n="[html]rpi-gpio.tip.dig"></span></div>
    <div class="form-tips" id="pwm-tip"><span data-i18n="[html]rpi-gpio.tip.pwm"></span></div>
</script>

<script type="text/javascript">
    var bcm2pin = {
        "2":"3", "3":"5", "4":"7", "14":"8", "15":"10", "17":"11", "18":"12", "27":"13", "22":"15",
        "23":"16", "24":"18", "10":"19", "9":"21", "25":"22", "11":"23", "8":"24", "7":"26",
        "5":"29", "6":"31", "12":"32", "13":"33", "19":"35", "16":"36", "26":"37", "20":"38", "21":"40"
    };
    var pin2bcm = { '3':'2', '5':'3', '7':'4', '8':'14', '10':'15', '11':'17', '12':'18', '13':'27',
        '15':'22', '16':'23', '18':'24', '19':'10', '21':'9', '22':'25', '23':'11', '24':'8', '26':'7',
        '29':'5', '31':'6', '32':'12', '33':'13', '35':'19', '36':'16', '37':'26', '38':'20', '40':'21'
    }
    var pinsInUse = {};
    var validPinValues = Object.values(bcm2pin);
    var isEnvVar = function (value) {
        var re = /^\${([0-9a-zA-Z_]+)}$/;
        var match = value.match(re);
        return Boolean(match);
    };
    var isInt = function (value) {
        return parseInt(value).toString() === value.trim();
    };
    var uncheckAll = function() {
        for (var i=0; i< validPinValues.length; i++) {
            $("#pinform input[value="+validPinValues[i]+"]").prop('checked', false);
        }
    }
    var validatePin = function (value) {
        return isEnvVar(value) || (isInt(value) && value>=0 && value<=45);
    };
    RED.nodes.registerType('rpi-gpio out',{
        category: 'Raspberry Pi',
        color:"#c6dbef",
        defaults: {
            name: { value:"" },
            pin: { value:"",required:true,validate:validatePin },
            set: { value:"" },
            level: { value:"0" },
            freq: { value:""},
            out: { value:"out" },
            bcm: { value:true }
        },
        inputs:1,
        outputs:0,
        icon: "rpi.png",
        info: function() {
            if ( Object.keys(pinsInUse).length !== 0 ) {
                return "**Pins in use** : "+Object.keys(pinsInUse);
            }
            else { return ""; }
        },
        align: "right",
        label: function() {
            if (!this.bcm) { this.pin = pin2bcm[this.pin]; this.bcm = true; }
            var p = bcm2pin[this.pin];
            var t = p ? "PIN: "+p : "GPIO: "+this.pin;
            if (this.out === "pwm") { return this.name || "PWM: "+p; }
            else if (this.out === "ser") { return this.name || "Servo: "+p; }
            else {
                var suf = "";
                if (this.set == true) { suf = (this.level === "1") ? " ¹" : " ₀"; }
                return this.name|| t + suf ;
            }
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        inputLabels: function() { return "GPIO"+this.pin; },
        oneditprepare: function() {
            var pinnow = this.pin;
            var pintip = this._("rpi-gpio.tip.pin");
            var pinname = this._("rpi-gpio.pinname");
            var alreadyuse = this._("rpi-gpio.alreadyuse");
            var alreadyset = this._("rpi-gpio.alreadyset");
            if (!$("#node-input-out").val()) { $("#node-input-out").val("out"); }

            $.getJSON('rpi-pins/'+this.id,function(data) {
                pinsInUse = data || {};
                $('#pin-tip').html(pintip + Object.keys(data));
            });

            for (var i=0; i< validPinValues.length; i++) {
                $("#pinform input[value="+validPinValues[i]+"]").on("change", function (evt) {
                    $("#node-input-pin").val(evt.currentTarget.value);
                    $("#node-input-pin").removeClass("input-error");
                });
            }
            $("#node-input-pin").on("change", function() {
                var pinnew = $("#node-input-pin").val();
                if (pinnew && isInt(pinnew) && validPinValues.includes(pinnew)) {
                    $("#pinform input[value="+pinnew+"]").prop('checked', true);
                } else {
                    uncheckAll();
                }
                if ((pinnew) && (pinnew !== pinnow)) {
                    if (pinsInUse.hasOwnProperty(pinnew)) {
                        RED.notify(pinname+" "+pinnew+" "+alreadyuse,"warn");
                    }
                    pinnow = pinnew;
                }
            });

            $("#node-input-out").on("change", function() {
                var newtype = $("#node-input-out").val();
                if ((pinsInUse.hasOwnProperty(pinnow)) && (pinsInUse[pinnow] !== newtype)) {
                    RED.notify(pinname+" "+pinnow+" "+alreadyset+" "+pinsInUse[pinnow],"error");
                }
            });

            var hidestate = function () {
                if ($("#node-input-out").val() === "pwm") {
                    $('#node-set-tick').hide();
                    $('#node-set-state').hide();
                    $('#node-input-set').prop('checked', false);
                    $("#dig-tip").hide();
                    $("#pwm-tip").show();
                    $('#node-set-freq').show();
                }
                else {
                    $('#node-set-tick').show();
                    $("#dig-tip").show();
                    $("#pwm-tip").hide();
                    $('#node-set-freq').hide();
                }
            };
            $("#node-input-out").on("change", function () { hidestate(); });
            hidestate();

            var setstate = function () {
                if ($('#node-input-set').is(":checked")) {
                    $("#node-set-state").show();
                } else {
                    $("#node-set-state").hide();
                }
            };
            $("#node-input-set").on("change", function () { setstate(); });
            setstate();

            $('#pinform input').on('change', function() {
                this.pin = $("#pinform input[type='radio']:checked").val();
                $("#node-input-pin").val(this.pin);
            });
        }
    });
</script>

<script type="text/html" data-template-name="rpi-mouse">
    <div class="form-row">
        <label for="node-input-butt"><i class="fa fa-circle"></i> <span data-i18n="rpi-gpio.label.button"></span></label>
        <select type="text" id="node-input-butt" style="width: 250px;">
            <option value="1" data-i18n="rpi-gpio.left"></option>
            <option value="2" data-i18n="rpi-gpio.right"></option>
            <option value="4" data-i18n="rpi-gpio.middle"></option>
            <option value="7" data-i18n="rpi-gpio.any"></option>
         </select>
    </div>
    <br/>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('rpi-mouse',{
        category: 'Raspberry Pi',
        color:"#c6dbef",
        defaults: {
            name: { value:"" },
            butt: { value:"1",required:true }
        },
        inputs:0,
        outputs:1,
        icon: "rpi.png",
        label: function() {
            var na = this._("rpi-gpio.label.pimouse");
            if (this.butt === "1") { na += " "+this._("rpi-gpio.label.left"); }
            if (this.butt === "2") { na += " "+this._("rpi-gpio.label.right"); }
            if (this.butt === "4") { na += " "+this._("rpi-gpio.label.middle"); }
            return this.name||na;
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
</script>

<script type="text/html" data-template-name="rpi-keyboard">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('rpi-keyboard',{
        category: 'Raspberry Pi',
        color:"#c6dbef",
        defaults: {
            name: { value:"" }
        },
        inputs:0,
        outputs:1,
        icon: "rpi.png",
        label: function() {
            return this.name || this._("rpi-gpio.label.pikeyboard");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
</script>

<script type="text/html" data-help-name="rpi-gpio in">
    <p>Raspberry Pi input node. Generates a <code>msg.payload</code> with either a
    0 or 1 depending on the state of the input pin.</p>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">number</span></dt>
        <dd>the payload will be a 1 or a 0.</dd>
        <dt>topic <span class="property-type">string</span></dt>
        <dd>the topic will be set to <code>gpio/{the bcm spio number}</code>.</dd>
    </dl>
    <h3>Details</h3>
    <p>You may also enable the input pullup resistor or the pulldown resistor.</p>
    <p>Requires the RPi.GPIO python library version 0.5.10 (or better) in order to work.</p>
</script>

<script type="text/html" data-help-name="rpi-gpio out">
    <p>Raspberry Pi output node. Can be used in Digital or PWM modes.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">number | string | boolean</span></dt>
    </dl>
    <h3>Details</h3>
    <p>Digital mode - expects a <code>msg.payload</code> with either a 0 or 1 (or true or false),
    and will set the selected physical pin high or low depending on the value passed in.</p>
    <p>The initial value of the pin at deploy time can also be set to 0 or 1.</p>
    <p>PWM mode - expects an input value of a number 0 - 100. It can be floating point.</p>
    <p>PWM mode can be used to drive a servo using input values between 10 and 20 only,
    but will accept floating point values.
    The GPIO2 pin is best for this as it uses hardware to do the PWM. For better servo support
    consider the alternative node-red-node-pi-gpiod node.</p>
    <p>Requires the RPi.GPIO python library version 0.5.10 (or better) in order to work.</p>
</script>

<script type="text/html" data-help-name="rpi-mouse">
    <p>Raspberry Pi mouse button node. Requires a USB mouse.</p>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">number</span></dt>
        <dd>1 or 0 when the selected mouse button is pressed and released.</dd>
        <dt>button <span class="property-type">number</span></dt>
        <dd>1, 2, 4 corresponding to left, right and middle buttons, so you
        can work out which button or combination was pressed.</dd>
        <dt>topic <span class="property-type">string</span></dt>
        <dd>set to <code>pi/mouse</code></dd>
    </dl>
</script>

<script type="text/html" data-help-name="rpi-keyboard">
    <p>Raspberry Pi keyboard handling node. Requires a USB keyboard.</p>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">number</span></dt>
        <dd>contains the keycode value</dd>
        <dt>action <span class="property-type">string</span></dt>
        <dd>set to "up", "down", or "repeat"</dd>
        <dt>topic <span class="property-type">string</span></dt>
        <dd>set to <code>pi/key</code></dd>
    </dl>
</script>

</div><div><!-- --- [red-module:node-red-node-ping/ping] --- -->

<script type="text/html" data-template-name="ping">
    <div class="form-row" id="div-node-input-host">
        <label for="node-input-host"><i class="fa fa-dot-circle-o"></i> <span data-i18n="ping.label.target"></span></label>
        <input type="text" id="node-input-host" placeholder="192.168.0.1, www.google.com">
    </div>
    <div class="form-row">
        <label for="node-protocol"><i class="fa fa-gear"></i> <span data-i18n="ping.label.protocol"></label>
        <select type="text" id="node-input-protocol" style="width: 70%">
            <option value="Automatic" data-i18n="ping.label.protocol_option.auto"></option>
            <option value="IPv4" data-i18n="ping.label.protocol_option.ipv4"></option>
            <option value="IPv6" data-i18n="ping.label.protocol_option.ipv6"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-mode"><i class="fa fa-wrench"></i> <span data-i18n="ping.label.mode"></label>
        <select type="text" id="node-input-mode" style="width: 70%">
            <option value="timed" data-i18n="ping.label.mode_option.timed"></option>
            <option value="triggered" data-i18n="ping.label.mode_option.triggered"></option>
        </select>
    </div>
    <div class="form-row" id="div-node-input-timer">
        <label for="node-input-timer"><i class="fa fa-repeat"></i> <span data-i18n="ping.label.ping"></label>
        <input type="text" id="node-input-timer" placeholder="20">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-tips" id="node-ping-tip"><span data-i18n="ping.label.tip"></span></div>
</script>

<script type="text/javascript">

var timerParameterValidator = function(node,v){
        var mode = getMode(node)
        if(mode === "triggered"){
            return true;
        }
        if(v == ""){
            return false;
        }
        return RED.validators.number()(v);
    }
    var hostParameterValidator = function(node,v){
        var mode = getMode(node)
        if(mode === "triggered"){
            return true;
        }
        return v != ""
    }
    var getMode = function(node){
        if(node){
            return node.mode
        } else {
            let $mode = $( "#node-input-mode" );
            return $mode.val();
        }
    }

    RED.nodes.registerType("ping",{
        category: "network-input",
        color:"#fdf0c2",
        defaults: {
            protocol: {value:"Automatic"},
            mode: {value:"timed"},
            name: {value:""},
            host: {value:"", validate: function(v){
                    return hostParameterValidator(this,v) ;
                }
            },
            timer: {value:"20", validate: function(v){
                    return timerParameterValidator(this,v) ;
                }
            },
            inputs: {value:0}
        },
        inputs:0,
        outputs:1,
        icon: "alert.png",
        paletteLabel: function() {
            return this._("ping.ping");
        },
        label: function() {
            let lbl = this.name||this.host||this._("ping.ping");
            if (lbl.split(',').length > 1){
                lbl = this._("ping.ping");
            }
            return lbl;
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function () {
            let node = this;
            let $timer = $("#div-node-input-timer");
            let $tip = $("#node-ping-tip");
            $("#node-input-mode").val(node.mode);
            let $mode = $( "#node-input-mode" );
            function updateControlsVisibility(){
                node.mode = $mode.val();
                switch (node.mode) {
                    case "triggered":
                        node.inputs = 1;
                        node._def.inputs = 1
                        $timer.hide();
                        $tip.show();
                        break;
                    default:
                        node.inputs = 0;
                        node._def.inputs = 0;
                        $timer.show();
                        $tip.hide();
                        break;
                }
            }
            $mode.change(updateControlsVisibility);
            updateControlsVisibility();
        }
    });
</script>
<script type="text/html" data-help-name="ping">
    <p>Pings a machine and returns the trip time in mS as <code>msg.payload</code>.</p>
    <h3>Output</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">number</span></dt>
        <dd> the trip time in mS, or boolean <i>false</i> if no response.</dd>
        <dt>topic <span class="property-type">string</span></dt>
        <dd> the target host or ip address.</dd>
        <dt>[ping] <span class="property-type">object</span></dt>
        <dd> an object containing <code>host</code> and any other properties sent in the array object.<br>
            <b>Note</b>: This object is only appended when using triggered mode and an array for input payload. It is
            intended for advanced users and permits scenarios where you need additional properties to be tagged into your result for use downstream.</dd>
    </dl>
    <h3>Details</h3>
    <p>Returns <b>false</b> if no response received, or if the host is unresolveable.</p>
    <p>Default ping is every 20 seconds but can be configured.</p>

    <h4>Protocol...</h4>
    <ul>
        <li><b>Automatic</b><br>
            <P>Will use any Protocol, IPv4 or IPv6, to reach host; based on your operating system network settings</P>
        </li>
        <li><b>IPv4</b><br>
            <P>Forces use of IPv4 to reach host. Will fail if no route availibe</P>
        </li>
        <li><b>IPv6</b><br>
            <P>Forces use of IPv6 to reach host. Will fail if no route availibe</P>
        </li>
    </ul>

    <h4>Mode...</h4>
    <ul>
        <li><b>Timed</b><br>
            <P>In Timed mode, the fields <code>Target</code> and <code>Ping (S)</code> must be populated.</P>
            <p>Target must be a CSV list of hosts / IPs e.g. <code>"192.168.0.1"</code> or <code>"192.168.0.1, www.google.com"</code></p>
            <p>Ping (S) is the number of seconds between pings</p>
        </li>
        <li><b>Triggered</b><br>
            <p>In Triggered mode, you must connect an input wire and pass a <code>msg</code> in to trigger the ping operation.</p>
            <p>If <code>Target</code> is populated, this will be used as the host/ip. The Target must be is a CSV list of
                hosts / IPs e.g. <code>"192.168.0.1"</code> or <code>"192.168.0.1, www.google.com"</code></p>

            <p>If Target is left empty, you can pass a CSV string or an array of hosts in <code>msg.payload</code>.
                <ul>
                    <li><b>string</b> - a CSV list of hosts / IPs e.g. <code>"192.168.0.1"</code> or <code>"192.168.0.1, www.google.com"</code> </li>
                    <li><b>array</b> - an array of hosts as strings or objects. <b>Note</b>: The object must contain at minimum <code>.host</code>.
                        Optionally, you can add a <code>timeout</code> property between 1000 & 30000 (default is 5000 / 5 seconds).
                        Additionally, you can add whatever other properties you wish to this object and when the ping result is returned, it will
                        be passed to the next node in <code>msg.ping</code> for use downstream</li>
                    <li>Example array payload input: <pre>[
    "192.168.0.99",
    {
        "host":"192.168.0.1",
        "name":"The router"
    },
    {
        "host":"myapiserver.com",
        "name":"external API",
        "timeout": 20000,
        "support":"support@myapiserver.com"
    }
]</pre>         </li>
                </ul>
            </p>
        </li>
    </ul>
    <p><b>Note</b>: if running inside Ubuntu Snap you will need to manually start the network-observe interface.
        <code>snap connect node-red:network-observe</code>.</p>
</script>

</div><div><!-- --- [red-module:node-red-node-serialport/serialport] --- -->

<script type="text/html" data-template-name="serial in">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row node-input-serial">
        <label for="node-input-serial"><i class="fa fa-random"></i> <span data-i18n="serial.label.serialport"></span></label>
        <input type="text" id="node-input-serial">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('serial in',{
        category: 'network',
        defaults: {
            name: {name:""},
            serial: {type:"serial-port",required:true}
        },
        color:"BurlyWood",
        inputs:0,
        outputs:1,
        icon: "serial.png",
        label: function() {
            var serialNode = RED.nodes.node(this.serial);
            return this.name||(serialNode?serialNode.label().split(":")[0]:this._("serial.label.serial"));
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        outputLabels: function() { return RED.nodes.node(this.serial).bin === "bin" ? "buffer" : "string"; }
    });
</script>

<script type="text/html" data-template-name="serial out">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row node-input-serial">
        <label for="node-input-serial"><i class="fa fa-random"></i> <span data-i18n="serial.label.serialport"></span></label>
        <input type="text" id="node-input-serial">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('serial out',{
        category: 'network',
        defaults: {
            name: {name:""},
            serial: {type:"serial-port",required:true}
        },
        color:"BurlyWood",
        inputs:1,
        outputs:0,
        icon: "serial.png",
        align: "right",
        label: function() {
            var serialNode = RED.nodes.node(this.serial);
            return this.name||(serialNode?serialNode.label().split(":")[0]:this._("serial.label.serial"));
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
</script>

<script type="text/html" data-template-name="serial request">
    <div class="form-row">
        <label for="node-inputoutput-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row node-input-serial">
        <label for="node-input-serial"><i class="fa fa-random"></i> <span data-i18n="serial.label.serialport"></span></label>
        <input type="text" id="node-input-serial">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('serial request',{
        category: 'network',
        defaults: {
            name: {name:""},
            serial: {type:"serial-port",required:true}
        },
        color:"BurlyWood",
        inputs:1,
        outputs:1,
        icon: "serial.png",
        align: "left",
        label: function() {
            var serialNode = RED.nodes.node(this.serial);
            return this.name||(serialNode?serialNode.label().split(":")[0]:this._("serial.label.serial"));
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        outputLabels: function() { return RED.nodes.node(this.serial).bin === "bin" ? "buffer" : "string"; }
    });
</script>

<script type="text/html" data-template-name="serial-port">
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-config-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-config-input-serialport"><i class="fa fa-random"></i> <span data-i18n="serial.label.serialport"></span></label>
        <input type="text" id="node-config-input-serialport" style="width:66%;" data-i18n="[placeholder]serial.placeholder.serialport">
        <a id="node-config-lookup-serial" class="red-ui-button"><i id="node-config-lookup-serial-icon" class="fa fa-search"></i></a>
    </div>
    <div class="form-row" style="margin-bottom:8px;">
        <table width="100%">
        <tr style="line-height:10px;">
            <td width="90px" style="font-size:14px;"><i class="fa fa-wrench"></i> <span data-i18n="serial.label.settings"></span></td>
            <td width="110px" data-i18n="serial.label.baudrate"></td>
            <td width="70px" data-i18n="serial.label.databits"></td>
            <td width="80px" data-i18n="serial.label.parity"></td>
            <td width="70px" data-i18n="serial.label.stopbits"></td>
        </tr>
        <tr>
        <td>&nbsp;</td>
        <td>
            <input type="text" id="node-config-input-serialbaud" style="width:92%; height:30px;">
        </td>
        <td><select type="text" id="node-config-input-databits" style="width:90%; height:30px;">
            <option value="8">8</option>
            <option value="7">7</option>
            <option value="6">6</option>
            <option value="5">5</option>
        </select></td>
        <td><select type="text" id="node-config-input-parity" style="width:90%; height:30px;">
            <option value="none" data-i18n="serial.parity.none"></option>
            <option value="even" data-i18n="serial.parity.even"></option>
            <option value="mark" data-i18n="serial.parity.mark"></option>
            <option value="odd" data-i18n="serial.parity.odd"></option>
            <option value="space" data-i18n="serial.parity.space"></option>
        </select></td>
        <td><select type="text" id="node-config-input-stopbits" style="width:60px; height:30px;">
            <option value="2">2</option>
            <option value="1">1</option>
        </select></td>
        </tr></table>
    </div>
    <div class="form-row" style="margin-bottom:0px;">
        <table width="100%">
            <tr style="line-height:10px;">
                <td style="width:90px;">&nbsp;</td>
                <td>DTR</td>
                <td>RTS</td>
                <td>CTS</td>
                <td>DSR</td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td><select type="text" id="node-config-input-dtr" style="width:72px; height:30px;">
                    <option value="none" data-i18n="serial.linestates.none"></option>
                    <option value="high" data-i18n="serial.linestates.high"></option>
                    <option value="low" data-i18n="serial.linestates.low"></option>
                </select></td>
                <td><select type="text" id="node-config-input-rts" style="width:72px; height:30px;">
                    <option value="none" data-i18n="serial.linestates.none"></option>
                    <option value="high" data-i18n="serial.linestates.high"></option>
                    <option value="low" data-i18n="serial.linestates.low"></option>
                </select></td>
                <td><select type="text" id="node-config-input-cts" style="width:72px; height:30px;">
                    <option value="none" data-i18n="serial.linestates.none"></option>
                    <option value="high" data-i18n="serial.linestates.high"></option>
                    <option value="low" data-i18n="serial.linestates.low"></option>
                </select></td>
                <td><select type="text" id="node-config-input-dsr" style="width:72px; height:30px;">
                    <option value="none" data-i18n="serial.linestates.none"></option>
                    <option value="high" data-i18n="serial.linestates.high"></option>
                    <option value="low" data-i18n="serial.linestates.low"></option>
                </select></td>
            </tr>
        </table>
    </div>
    <div class="form-row" style="margin-top:12px; margin-bottom:0;">
        <label><i class="fa fa-sign-in"></i> <span data-i18n="serial.label.input"></span></label>
    </div>
    <div class="form-row" style="padding-left:18px; margin-bottom:4px;">
        <span data-i18n="serial.label.start"></span>
        <input type="text" id="node-config-input-waitfor" style="width:50px; height:28px; text-decoration:grey dotted underline;">
        <span data-i18n="serial.label.startor"></span>
    </div>
    <div class="form-row" style="padding-left:18px; margin-bottom:4px;">
        <span data-i18n="serial.label.split"></span>
        <select type="text" id="node-config-input-out" style="margin-left:11px; width:200px;">
            <option value="char" data-i18n="serial.split.character"></option>
            <option value="time" data-i18n="serial.split.timeout"></option>
            <option value="interbyte" data-i18n="serial.split.silent"></option>
            <option value="count" data-i18n="serial.split.lengths"></option>
        </select>
        <input type="text" id="node-config-input-newline" style="width:50px;">
        <span id="node-units"></span>
    </div>
    <div class="form-row" style="padding-left:18px; margin-bottom:4px;">
        <span data-i18n="serial.label.deliver"></span>
        <select type="text" id="node-config-input-bin" style="margin-left:5px; width:150px;">
            <option value="false" data-i18n="serial.output.ascii"></option>
            <option value="bin" data-i18n="serial.output.binary"></option>
        </select>
    </div>
    <div id="node-config-addchar">
        <div class="form-row" style="margin-top:16px; margin-bottom:0;">
            <label><i class="fa fa-sign-out"></i> <span data-i18n="serial.label.output"></span></label>
        </div>
        <div class="form-row" style="padding-left:18px; margin-bottom:4px;">
            <label style="width:auto;" for="node-config-input-addchar"><span data-i18n="serial.addsplit"></span></label>
            <input type="text" id="node-config-input-addchar" style="width:50px; height:28px; text-decoration:grey dotted underline;">
        </div>
    </div>
    <div id="node-config-req">
        <div class="form-row" style="margin-top:16px; margin-bottom:0;">
            <label><i class="fa fa-exchange"></i> <span data-i18n="serial.label.request"></span></label>
        </div>
        <div class="form-row" style="padding-left:18px; margin-bottom:18px;">
            <span data-i18n="serial.label.responsetimeout"></span>
            <input type="text" id="node-config-input-responsetimeout" style="width:60px; height:28px;">
            <span data-i18n="serial.label.ms"></span>
        </div>
    </div>
    <div class="form-tips" id="tip-waitfor" hidden><span data-i18n="serial.tip.waitfor"></span></div>
    <div class="form-tips" id="tip-addchar" hidden><span data-i18n="serial.tip.addchar"></span></div>
    <div class="form-tips" id="tip-responsetimeout" hidden><span data-i18n="serial.tip.responsetimeout"></span></div>
    <div class="form-tips" id="tip-split"><span data-i18n="serial.tip.split"></span></div>
    <div class="form-tips" id="tip-timeout" hidden><span data-i18n="serial.tip.timeout"></span></div>
    <div class="form-tips" id="tip-silent" hidden><span data-i18n="serial.tip.silent"></span></div>
    <div class="form-tips" id="tip-count" hidden><span data-i18n="serial.tip.count"></span></div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('serial-port',{
        category: 'config',
        defaults: {
            name: {value:""},
            serialport: {value:"",required:true},
            serialbaud: {value:"57600",required:true,validate:RED.validators.number()},
            databits: {value:8,required:true},
            parity: {value:"none",required:true},
            stopbits: {value:1,required:true},
            waitfor: {value:""},
            dtr: {value:"none"},
            rts: {value:"none"},
            cts: {value:"none"},
            dsr: {value:"none"},
            newline: {value:"\\n"},
            bin: {value:"false"},
            out: {value:"char"},
            addchar: {value:""},
            responsetimeout: {value: 10000}
        },
        label: function() {
            this.serialbaud = this.serialbaud || 57600;
            this.databits = this.databits || 8;
            this.parity = this.parity || this._("serial.label.none");
            this.stopbits = this.stopbits || 1;
            return this.name||(this.serialport+":"+this.serialbaud+"-"+this.databits+this.parity.charAt(0).toUpperCase()+this.stopbits);
        },
        oneditprepare: function() {
            var previous = null;
            var blist = [
                {value:"230400",label:"230400",hasValue:false},
                {value:"115200",label:"115200",hasValue:false},
                {value:"57600",label:"57600",hasValue:false},
                {value:"38400",label:"38400",hasValue:false},
                {value:"19200",label:"19200",hasValue:false},
                {value:"9600",label:"9600",hasValue:false},
                {value:"4800",label:"4800",hasValue:false},
                {value:"2400",label:"2400",hasValue:false},
                {value:"1200",label:"1200",hasValue:false},
                {value:"600",label:"600",hasValue:false},
                {value:"300",label:"300",hasValue:false},
                {label:"other",value:"other",icon:"red/images/typedInput/09.png",validate:/^[0-9]*$/}
            ];

            var serialbaudType = "custom";
            for (var i in blist) {
                if (this.serialbaud == blist[i].value) {
                    serialbaudType = this.serialbaud;
                }
            }

            $("#node-config-input-serialbaud").typedInput({
                default: this.serialbaud,
                types:blist
            });

            $("#node-config-input-out").on('focus', function () { previous = this.value; }).change(function() {
                if (previous == null) { previous = $("#node-config-input-out").val(); }
                if ($("#node-config-input-out").val() == "char") {
                    if (previous != "char") { $("#node-config-input-newline").val("\\n"); }
                    $("#node-units").text("");
                    // $("#node-config-addchar").show();
                    $("#tip-split").show();
                    $("#tip-timeout").hide();
                    $("#tip-silent").hide();
                    $("#tip-count").hide();
                }
                else if ($("#node-config-input-out").val() == "time") {
                    if (previous != "time") { $("#node-config-input-newline").val("0"); }
                    $("#node-units").text("ms");
                    // $("#node-config-addchar").hide();
                    // $("#node-config-input-addchar").val("false");
                    $("#tip-split").hide();
                    $("#tip-timeout").show();
                    $("#tip-silent").hide();
                    $("#tip-count").hide();
                }
                else if ($("#node-config-input-out").val() == "interbyte") {
                    if (previous != "interbyte") { $("#node-config-input-newline").val("0"); }
                    $("#node-units").text("ms");
                    // $("#node-config-addchar").hide();
                    // $("#node-config-input-addchar").val("false");
                    $("#tip-split").hide();
                    $("#tip-timeout").hide();
                    $("#tip-silent").show();
                    $("#tip-count").hide();
                }
                else {
                    if (previous != "count") { $("#node-config-input-newline").val(""); }
                    $("#node-units").text("chars");
                    // $("#node-config-addchar").hide();
                    // $("#node-config-input-addchar").val("false");
                    $("#tip-split").hide();
                    $("#tip-timeout").hide();
                    $("#tip-silent").hide();
                    $("#tip-count").show();
                }
            });

            $("#node-config-input-responsetimeout").on('focus', function () { $("#tip-responsetimeout").show(); });
            $("#node-config-input-responsetimeout").on('blur', function () { $("#tip-responsetimeout").hide(); });
            $("#node-config-input-waitfor").on('focus', function () { $("#tip-waitfor").show(); });
            $("#node-config-input-waitfor").on('blur', function () { $("#tip-waitfor").hide(); });
            $("#node-config-input-addchar").on('focus', function () { $("#tip-addchar").show(); });
            $("#node-config-input-addchar").on('blur', function () { $("#tip-addchar").hide(); });

            try {
                $("#node-config-input-serialport").autocomplete( "destroy" );
            } catch(err) {
            }
            $("#node-config-lookup-serial").click(function() {
                $("#node-config-lookup-serial").addClass('disabled');
                $.getJSON('serialports',function(data) {
                    $("#node-config-lookup-serial").removeClass('disabled');
                    var ports = data || [];
                    $("#node-config-input-serialport").autocomplete({
                        source:ports,
                        minLength:0,
                        close: function( event, ui ) {
                            $("#node-config-input-serialport").autocomplete( "destroy" );
                        }
                    }).autocomplete("search","");
                });
            });
        },
        oneditsave: function() {
            var mytype = $("#node-config-input-serialbaud").typedInput('type');
            if (mytype !== "other") {
                $("#node-config-input-serialbaud").typedInput('value',mytype);
            }
            this.serialbaud = $("#node-config-input-serialbaud").typedInput('value');
        }
    });
</script>

<script type="text/html" data-template-name="serial control">
    <div class="form-row">
        <label for="node-inputoutput-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row node-input-serial">
        <label for="node-input-serial"><i class="fa fa-random"></i> <span data-i18n="serial.label.serialport"></span></label>
        <input type="text" id="node-input-serial">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('serial control',{
        category: 'network',
        defaults: {
            name: {name:""},
            serial: {type:"serial-port",required:true}
        },
        color:"BurlyWood",
        inputs:1,
        outputs:1,
        icon: "serial.png",
        align: "left",
        label: function() {
            var serialNode = RED.nodes.node(this.serial);
            return this.name||(serialNode?serialNode.label().split(":")[0]:this._("serial.label.serial"));
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        outputLabels: function() { return RED.nodes.node(this.serial).bin === "bin" ? "buffer" : "string"; }
    });
</script>
<script type="text/html" data-help-name="serial in">
    <p>Reads data from a local serial port.</p>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string | buffer</span></dt>
        <dd>received data via the serial port</dd>
        <dt>port <span class="property-type">string</span></dt>
        <dd>name of the serial port</dd>
    </dl>
    <p>The node can either
        <ul>
            <li>wait for a "split" character (default \n).
                Also accepts escaped shortcut (e.g. \n) or hex notation (0x0d).</li>
            <li>wait for a timeout in milliseconds from the first character received.</li>
            <li>wait for a silence time in milliseconds after the last character received.</li>
            <li>wait to fill a fixed sized buffer.</li>
        </ul>
    </p>
    <p>It then outputs <code>msg.payload</code> as either a UTF-8 ASCII string or a binary buffer object.</p>
    <p><code>msg.port</code> is set to the name of the port selected.</p>
    <p>If no split character is specified, or a timeout or buffer size of 0,
       then a stream of single characters is sent -
       again either as ASCII chars or size 1 binary buffers.</p>
</script>

<script type="text/html" data-help-name="serial out">
    <p>Send data via a local serial port.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string | buffer</span></dt>
        <dd>data to be sent via the serial port</dd>
        <dt class="optional">baudrate <span class="property-type">string</span></dt>
        <dd>baudrate of the serial port (optional)</dd>
    </dl>
    <p>Only the <code>msg.payload</code> is sent.</p>
    <p>Optionally the baudrate can be changed using <code>msg.baudrate</code>.</p>
    <p>Optionally the new line character used to split the input
       can be appended to every message sent out to the serial port.</p>
    <p>Binary payloads can be sent by using a buffer object.</p>
</script>

<script type="text/html" data-help-name="serial request">
    <p>Provides a connection to a request/response serial port.</p>
    <p>This node behaves as a tightly coupled combination of <code>serial in</code> and <code>serial out</code> nodes,
       with which it shares the configuration.</p>
    <p>Send the request message in <code>msg.payload</code> as you would do with a <code>serial out</code> node.
       The message will be forwarded to the serial port following a strict FIFO (First In, First Out) queue,
       waiting for a single response before transmitting the next request.
       Once a response is received (with the same logic of a <code>serial in</code> node), or after a timeout occurs,
       a message is sent to the output (see Outputs below),
       with <code>msg.payload</code> containing the received response (or missing in case if timeout) and
       all other properties are preserved.</p>
    <p>For consistency with the <code>serial in</code> node, <code>msg.port</code> is set to the name of the port selected.</p>
    <h3>Inputs</h3>
    <ul>
        <li><code>msg.timeout</code> is the timeout (in ms) after which the incoming message is propagated
            to the output with <code>msg.status</code> set to <code>"ERR_TIMEOUT"</code> and missing payload.
            If not present, the default value is 10000 (10s).</li>
        <li><code>msg.count</code> if set this will override the configured number of characters
            as long as it is less than the number configured.</li>
        <li><code>msg.waitfor</code> must be a single character, escape code, or hex code.
            If set, the node will wait until it matches that character in the stream and then start the output.</li>
        <li>Optionally the baudrate can be changed using <code>msg.baudrate</code></li>
    </ul>
    <h3>Outputs</h3>
    <ul>
        <li><code>msg.payload</code> is the response. If no response occured, this property is removed.</li>
        <li><code>msg.status</code> is <code>"OK"</code> in case a response is received,
            or <code>"ERR_TIMEOUT"</code> if a timeout occurs.</li>
        <li>Any other property coming from the input will be preserved.</li>
    </ul>
</script>

<script type="text/html" data-help-name="serial-port">
    <p>Configuration options for a local serial port.</p>
    <p>The search button should return a list of available serial ports to choose from,
       or you can type in the location if known.</p>
    <p>The DTR, RTS, CTS and DSR switches can be used to permanently pull the corresponding flow control pin high or low,
       e.g. in order to power devices via those pins.</p>
    <p>The node can optionally wait until it matches a pre-defined character.</p>
    <p>The serial data reception can either
        <ul>
            <li>wait for a "split" character (default \n). Also accepts escaped shortcut (e.g. \n) or hex notation (0x0d).</li>
            <li>wait for a timeout in milliseconds from the first character received.</li>
            <li>wait for a silence time in milliseconds after the last character received.</li>
            <li>wait to fill a fixed sized buffer.</li>
        </ul>
    </p>
    <p>It then outputs the received data as either a UTF-8 ASCII string or a binary buffer object.</p>
    <p>If no split character is specified, or a timeout or buffer size of 0, then a stream of single characters is sent -
       again either as ASCII chars or size 1 binary buffers.</p>
    <p>Optionally the new line character used to split the input
       can be appended to every message sent out to the serial port.</p>
</script>

<script type="text/html" data-help-name="serial control">
    <p>Stops, starts the serial communication and changes the serial port configuration.</p>

    <p>This node provides the ability to:</p>
    <ul>
        <li>stop the communication and release the serial port.</li>
        <li>reopen the port and restart the communications.</li>
        <li>change the serial port and the configuration dynamically.</li>
        <li>query the serial port configuration.</li>
    </ul>

    <h3>Inputs</h3>
        <p>In order to control the communication, just send <b>msg.payload</b> containing.</p>
        <pre>
{
    "serialport": "/dev/ttyUSB0",
    "serialbaud": 115200,
    "databits": 8,
    "parity": "none",
    "stopbits": 1,
    "enabled": true
}
        </pre>

        <p>The following optional parameters will change the configuration only if they are present.</p>
        <p>Any combination of them can be passed to change/control the serial communication</p>
        <ul>
            <li> serialport </li>
            <li> serialbaud </li>
            <li> databits </li>
            <li> parity </li>
            <li> stopbits </li>
            <li> dtr </li>
            <li> rts </li>
            <li> cts </li>
            <li> dsr </li>
            <li> enabled </li>
        </ul>
        <p>If the <code>enabled</code> property is not present, it will default to <code>true</code>.</p>
        <p>
            <code>{"enabled":true}</code> or <code>{"enabled":false}</code> will start or stop the communication.</p>
            <p>If <code>enabled</code> is passed along with other parameters, the configuration will be changed and the
                port will be either started or remain stopped, ready to be started later depending on its value.</p>

    <h3>Outputs</h3>
    <p><code>msg.payload</code> containing the serial port configuration.</p>
</script>
</div><div><!-- --- [red-module:node-red-node-smooth/smooth] --- -->

<script type="text/x-red" data-template-name="smooth">
    <div class="form-row">
        <label for="node-input-property"><i class="fa fa-ellipsis-h"></i> <span data-i18n="node-red:common.label.property"></span></label>
        <input type="text" id="node-input-property" style="width:70%;"/>
    </div>
    <div class="form-row">
        <label for="node-input-action"><i class="fa fa-bolt"></i> Action</label>
        <select id="node-input-action" style="width:60%; margin-right:5px;">
            <option value="max">Return the maximum value seen</option>
            <option value="min">Return the minimum value seen</option>
            <option value="mean">Return the mean value</option>
            <option value="sd">Return the standard deviation</option>
            <option value="low">Perform low pass filter</option>
            <option value="high">Perform high pass filter</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-count">&nbsp;</label>
        <span id="node-over">over the most recent </span>
        <input type="text" id="node-input-count" placeholder="10" style="width:50px;"/>
        <span id="node-over2"> values</span>
    </div>
    <div class="form-row">
        <label for="node-input-round">(optionally)</label>
        round to <input type="text" id="node-input-round" placeholder="ignore" style="width:50px;"/> decimal places
    </div>
    <div class="form-row">
    <label for="node-input-mult">Treat</label>
        <select id="node-input-mult" style="width:60%; margin-right:5px;">
            <option value="single">All msg as one stream.</option>
            <option value="multi">Different msg.topic as individual streams.</option>
        </select>
    </div>
    <div class="form-row" id="row-input-reduce">
        <label for="node-input-reduce"><i class="fa fa-compress"></i> Reduce</label>
        <input type="checkbox" id="node-input-reduce" style="display:inline-block; width:20px; vertical-align:baseline;">
        only emit one message per most recent N values
    </div>
    <br/>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-tips" id="node-tip">Tip: This node ONLY works with numbers.</div>
</script>



<script type="text/javascript">
    RED.nodes.registerType('smooth', {
        color: "#E2D96E",
        category: 'function',
        defaults: {
            name: {value:""},
            property: {value:"payload",required:true},
            action: {value:"mean"},
            count: {value:"10",required:true,validate:RED.validators.number()},
            round: {value:""},
            mult: {value:"single"},
            reduce: {value:false}
        },
        inputs: 1,
        outputs: 1,
        icon: "smooth.png",
        label: function() {
            return this.name || "smooth";
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        },
        outputLabels: function() { return this.reduce === true ? (this.action+" of "+this.count) : (this.action); },
        oneditprepare: function() {
            if (this.property === undefined) {
                $("#node-input-property").val("payload");
            }
            $("#node-input-property").typedInput({default:'msg',types:['msg']});
            $("#node-input-count").spinner({
                min:1
            });
            $("#node-input-round").spinner({
            });
            $("#node-input-action").change( function() {
                var a = $("#node-input-action").val();
                if ((a === "high") ||  ( a === "low" )) {
                    $("#node-over").html("with a smoothing factor of ");
                    $("#node-over2").html("");
                    $("#row-input-reduce").hide();
                }
                else {
                    $("#node-over").html("over the most recent ");
                    $("#node-over2").html(" values");
                    $("#row-input-reduce").show();
                }
            });
            $("#node-input-action").change();
            if ($("#node-input-round").val() === "true") {
                $("#node-input-round").val(0);
            }
        }
    });
</script>
<script type="text/x-red" data-help-name="smooth">
    <p>A simple node to provide various functions across several previous values, including max, min, mean, high and low pass filters.</p>
    <p>Messages arriving with different <code>msg.topic</code> can be treated as separate streams if so configured.</p>
    <p>Max, Min and Mean work over a specified number of previous values.</p>
    <p>The High and Low pass filters use a smoothing factor. The higher the number the more the smoothing. E.g. a value of 10 is similar to an &alpha; of 0.1. It is analagous to an RC time constant - but there is no time component to this as the time is based on events arriving.</p>
    <p>Enabling the Reduce option causes the node to only emit one message per N values (available for the Max, Min and Mean functions). E.g. if set to Mean over 10 values, there will only be one outgoing message per 10 incoming ones.</p>
    <p>If <code>msg.reset</code> is received (with any value), all the counters and intermediate values are reset to an initial state.</p>
    <p><b>Note:</b> This only operates on <b>numbers</b>. Anything else will try to be made into a number and rejected if that fails.</p>
</script>
</div><div><!-- --- [red-module:node-red-node-sqlite/sqlite] --- -->
<script type="text/html" data-template-name="sqlitedb">
    <div class="form-row">
        <label for="node-config-input-db"><i class="fa fa-database"></i> <span data-i18n="sqlite.label.database"></label>
        <input type="text" id="node-config-input-db" placeholder="/tmp/sqlite">
    </div>
    <div class="form-row">
        <label for="node-config-input-mode" data-i18n="sqlite.label.mode"></label>
        <select id="node-config-input-mode" style="width:70%">
            <option value="RWC" data-i18n="sqlite.label.readWriteCreate"></option>
            <option value="RW" data-i18n="sqlite.label.readWrite"></option>
            <option value="RO" data-i18n="sqlite.label.readOnly"></option>
        </select>
    </div>
    <div class="form-tips" data-i18n="[html]sqlite.tips.memoryDb"></div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('sqlitedb',{
        category: 'config',
        defaults: {
            db: {value:"", required:true},
            mode: {value:"RWC"}
        },
        label: function() {
            return this.db;
        }
    });
</script>

<script type="text/html" data-template-name="sqlite">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-mydb"><i class="fa fa-database"></i> <span data-i18n="sqlite.label.database"></label>
        <input type="text" id="node-input-mydb">
    </div>
    <div class="form-row">
        <label for=""><i class="fa fa-code"></i> <span data-i18n="sqlite.label.sqlQuery"></label>
        <select id="node-input-sqlquery">
            <option value="msg.topic" data-i18n="sqlite.label.viaMsgTopic"></option>
            <option value="fixed" data-i18n="sqlite.label.fixedStatement"></option>
            <option value="prepared" data-i18n="sqlite.label.preparedStatement"></option>
            <option value="batch" data-i18n="sqlite.label.batchWithoutResponse"></option>
        </select>
    </div>
    <div class="form-row" style="margin-bottom: 0px;">
        <label for="" style="width: unset;" id="node-input-sqllabel"><i class="fa fa-code"></i> <span data-i18n="sqlite.label.sqlStatement"></label>
    </div>
    <div>
        <input type="hidden" id="node-input-sql" autofocus="autofocus">
    </div>
    <div class="form-row node-text-editor-row">
        <div style="height: 250px; min-height:150px;" class="node-text-editor" id="node-input-sql-editor" ></div>
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('sqlite',{
        category: 'storage-input',
        color:"#e97b00",
        defaults: {
            mydb: {type:"sqlitedb",required:true},
            sqlquery: {value:"msg.topic",required:true},
            sql: {value:""},
            name: {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "sqlite.png",
        label: function() {
            var dbNode = RED.nodes.node(this.mydb);
            return this.name||(dbNode?dbNode.label():"sqlite");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var ace = this;
            this.editor = RED.editor.createEditor({
                id: 'node-input-sql-editor',
                mode: 'ace/mode/sql',
                value: $("#node-input-sql").val(),
                globals: {
                    msg:true,
                    context:true,
                    RED: true,
                    util: true,
                    flow: true,
                    global: true,
                    console: true,
                    Buffer: true,
                    setTimeout: true,
                    clearTimeout: true,
                    setInterval: true,
                    clearInterval: true
                }
            });

            $("#node-input-sqlquery").change(function() {
                if ($("#node-input-sqlquery").val() == "msg.topic" || $("#node-input-sqlquery").val() == "batch"){
                    $("#node-input-sqllabel").hide();
                    $("#node-input-sql-editor").hide();
                }
                else{
                    $("#node-input-sqllabel").show();
                    $("#node-input-sql-editor").show();
                    ace.editor.renderer.updateFull();
                }
            });
            $("#node-input-sqlquery").change();
        },
        oneditsave: function() {
            $("#node-input-sql").val(this.editor.getValue());
            this.editor.destroy();
            delete this.editor;
        },
        oneditresize: function(size) {
            var rows = $("#dialog-form>div:not(.node-text-editor-row)");
            var height = $("#dialog-form").height();
            for (var i=0; i<rows.size(); i++) {
                height -= $(rows[i]).outerHeight(true);
            }
            var editorRow = $("#dialog-form>div.node-text-editor-row");
            height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));
            $("#dialog-form .node-text-editor").css("height",height+"px");
            this.editor.resize();
        }
    });
</script>
<script type="text/html" data-help-name="sqlite">
    <p>Allows access to a SQLite database.</p>
    <p>SQL Query sets how the query is passed to the node.</p>
    <p>SQL Query <i>Via msg.topic</i> and <i>Fixed Statement</i> uses the <b>db.all</b> operation against the configured database. This does allow INSERTS, UPDATES and DELETES.
    By its very nature it is SQL injection... so <i>be careful out there...</i></p>
    <p>SQL Type <i>Prepared Statement</i> also uses <b>db.all</b> but sanitizes parameters passed, eliminating the possibility of SQL injection.</p>
    <p>SQL Type <i>Batch without response</i> uses <b>db.exec</b> which runs all SQL statements in the provided string. No result rows are returned.</p>
    <p>When using <i>Via msg.topic</i> or <i>Batch without response</i> <code>msg.topic</code> must hold the <i>query</i> for the database.</p>
    <p>When using <i>Via msg.topic</i>, parameters can be passed in the query using a <code>msg.payload</code> array. Ex:<br />
    <code>msg.topic = `INSERT INTO user_table (name, surname) VALUES ($name, $surname)`<br />
    msg.payload = ["John", "Smith"]<br />
    return msg;</code><br />
    <p>When using Normal or Prepared Statement, the <i>query</i> must be entered in the node config.</p>
    <p>Pass in the parameters as an object in <code>msg.params</code> for Prepared Statement. Ex:<br />
    <code>msg.params = {<br />
    &nbsp;&nbsp;&nbsp;&nbsp;$id:1,<br />
    &nbsp;&nbsp;&nbsp;&nbsp;$name:"John Doe"<br />
    }</code><br />
    Parameter object names must match parameters set up in the Prepared Statement. If you get the error <code>SQLITE_RANGE: bind or column index out of range</code>
    be sure to include $ on the parameter object key.<br />
    The SQL query for the example above could be: <code>insert into user_table (user_id, user) VALUES ($id, $name);</code></p>
    <p>Using any SQL Query, the result is returned in <code>msg.payload</code></p>
    <p>Typically the returned payload will be an array of the result rows, (or an error).</p>
    <p>You can load SQLite extensions by inputting a <code>msg.extension</code> property containing the full
    path and filename.</p>
    <p>The reconnect timeout in milliseconds can be changed by adding a line to <b>settings.js</b>
    <pre>sqliteReconnectTime: 20000,</pre></p>
</script>

<script type="text/html" data-help-name="sqlitedb">
    <p>The default directory for the database file is the user's home directory through which the Node-RED process was started. You can specify absolute path to change it.</p>
</script>

</div><div><!-- --- [red-module:node-red-node-ui-iframe/ui_iframe] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="ui_iframe">
    <div class="form-row" id="template-row-group">
        <label for="node-input-group"><i class="fa fa-table"></i> <span data-i18n="ui_iframe.label.group"></span></label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row" id="template-row-size">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui_iframe.label.size"></span></label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-url"><i class="fa fa-external-link"></i> <span data-i18n="ui_iframe.label.url"></span></label>
        <input type="text" id="node-input-url">
    </div>
    <div class="form-row">
        <label for="node-input-origin"><i class="fa fa-external-link"></i> <span data-i18n="ui_iframe.label.origin"></span></label>
        <input type="text" id="node-input-origin">
    </div>
    <div class="form-row">
        <label><i class="fa fa-compress"></i> <span data-i18n="ui_iframe.label.scale"></span></label>
        <input id="node-input-scale" value="100" style="width: 50px;"></input>
        <span>%</span>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="ui_iframe.label.name"></span></label>
        <input type="text" id="node-input-name">
    </div>
</script>

<script type="text/javascript">
    function mk_conf(NAME) {

        var ICON = "icon.png";

        var conf = {
            category: 'dashboard',
            color: 'rgb( 63, 173, 181)',
            defaults: {
                group: {type: 'ui_group', required:true},
                name: {value: ''},
                order: {value: 0},
                width: {
                    value: 0,
                    validate: function(v) {
                        var valid = true
                        var width = v||0;
                        var currentGroup = $('#node-input-group').val()|| this.group;
                        var groupNode = RED.nodes.node(currentGroup);
                        valid = !groupNode || +width <= +groupNode.width;
                        $("#node-input-size").toggleClass("input-error",!valid);
                        return valid;
                    }},
                height: {value: 0},
                url: {valuie: ""},
                origin: {value: "*"},
                scale: {value: 100}
            },
            inputs:1,
            outputs:1,
            icon: ICON,
            align: "right",
            paletteLabel: NAME,
            label: function() { return this.name || NAME; },
            oneditprepare: function() {
                $("#node-input-size").elementSizer({
                    width: "#node-input-width",
                    height: "#node-input-height",
                    group: "#node-input-group"
                });
                $("#node-input-scale").spinner({
                    min:20,
                    max:200
                });
                var scale = $("#node-input-scale").val();
                if (!scale || (scale === "")) {
                    $("#node-input-scale").val(100);
                }
            },
            oneditsave: function() {
            },
            oneditresize: function(size) {
            }
        };
        return conf;
    };

    RED.nodes.registerType("ui_iframe", mk_conf("iframe"));
</script>
<script type="text/html" data-help-name="ui_iframe">
    <p>Node-RED widget node for embedding a Web page</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object</span></dt>
        <dd>Data sent to embedded Web page using Web messaging API</dd>
    </dl>
    <dl class="message-properties">
        <dt>url<span class="property-type">object</span></dt>
        <dd>URL of target Web page</dd>
    </dl>
    <dl class="message-properties">
        <dt>scale<span class="property-type">number</span></dt>
        <dd>Scaling value of target Web page</dd>
    </dl>

    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object</span></dt>
        <dd>Received data from embedded Web page using Web messaging API</dd>
    </dl>

    <h3>Details</h3>
    <p>UI widget for embedding a Web page using IFrame.</p>
    <p>URL setting item or <code>url</code> property of an input message specifies
    the URL of embedded web page on Node-RED dashboard</p>
    <p>The displayed page can be scaled with the specified value.</p>
    <p>Origin setting item specifies CORS origin of message for sending
  message.  Default value of the origin is '<code>*</code>' (no limitation).</p>
</script></div></div><div id="red-ui-full-shade" class="hide" style="display: none;"></div><div id="red-ui-notifications"><div id="red-ui-notification-2" class="red-ui-notification red-ui-notification-warning" style="" hidden=""><p>Node-RED must be restarted to enable upgraded modules</p><div style="margin-top: 20px;" class="ui-dialog-buttonset"><button>Close</button></div></div></div><div id="red-ui-drop-target"><div data-i18n="[append]workspace.dropFlowHere"><i class="fa fa-download"></i><br>Drop the flow here</div></div><div id="red-ui-image-drop-target" style="display: none;"><div data-i18n="[append]workspace.dropImageHere"><i class="fa fa-download"></i><br>Drop the image here</div></div><span class="red-ui-palette-label" style="position: absolute; top: -1000px;">sqlite</span><span class="red-ui-flow-node-label" style="position: absolute; top: -1000px;">eventlog-read</span></div>
<script src="./Node-RED _ maindashboard_files/vendor.js"></script>
<script src="./Node-RED _ maindashboard_files/monaco-bootstrap.js"></script><script src="./Node-RED _ maindashboard_files/editor.js"></script>
<script src="./Node-RED _ maindashboard_files/red.min.js"></script>
<script src="./Node-RED _ maindashboard_files/main.min.js"></script>




<div tabindex="-1" role="dialog" class="ui-dialog red-ui-editor-dialog ui-widget ui-widget-content ui-front ui-dialog-buttons ui-draggable" aria-describedby="red-ui-library-dialog-save" aria-labelledby="ui-id-1" style="display: none;"><div class="ui-dialog-titlebar ui-corner-all ui-widget-header ui-helper-clearfix ui-draggable-handle"><span id="ui-id-1" class="ui-dialog-title">Save to Library...</span><button type="button" class="ui-button ui-corner-all ui-widget ui-button-icon-only ui-dialog-titlebar-close hide" title="Close"><span class="ui-button-icon ui-icon ui-icon-closethick"></span><span class="ui-button-icon-space"> </span>Close</button></div><div id="red-ui-library-dialog-save" class="hide ui-dialog-content ui-widget-content" style="display: block;"><form class="form-horizontal"><div class="red-ui-library-dialog-box" style="height: 400px; position:relative; "><div id="red-ui-library-dialog-save-browser"><div class="red-ui-library-browser"><div class="red-ui-treeList" tabindex="0" style="width: 100%; height: 100%;"><div class="red-ui-treeList-container"><div class="red-ui-editableList" style="inset: 0px; position: absolute;"><div class="red-ui-editableList-border red-ui-editableList-container" style="inset: 0px; position: absolute; max-height: none; overflow-y: auto;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="position: static; inset: auto; height: auto;"></ol></div></div></div></div></div></div><div class="form-row"><label data-i18n="clipboard.export.exportAs">Export as</label><input id="red-ui-library-dialog-save-filename" type="text"></div></div></form></div><div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"><div class="ui-dialog-buttonset"><button type="button" class="ui-button ui-corner-all ui-widget">Cancel</button><button type="button" id="red-ui-library-dialog-save-button" class="primary ui-button ui-corner-all ui-widget">Save</button></div></div></div><div tabindex="-1" role="dialog" class="ui-dialog red-ui-editor-dialog ui-widget ui-widget-content ui-front ui-dialog-buttons ui-draggable" aria-describedby="red-ui-library-dialog-load" aria-labelledby="ui-id-2" style="display: none;"><div class="ui-dialog-titlebar ui-corner-all ui-widget-header ui-helper-clearfix ui-draggable-handle"><span id="ui-id-2" class="ui-dialog-title">&nbsp;</span><button type="button" class="ui-button ui-corner-all ui-widget ui-button-icon-only ui-dialog-titlebar-close hide" title="Close"><span class="ui-button-icon ui-icon ui-icon-closethick"></span><span class="ui-button-icon-space"> </span>Close</button></div><div id="red-ui-library-dialog-load" class="hide ui-dialog-content ui-widget-content" style="display: block;"><form class="form-horizontal"><div class="red-ui-library-dialog-box" style="height: 400px; position:relative; "><div id="red-ui-library-dialog-load-panes" class="red-ui-panels red-ui-panels-horizontal"><div class="red-ui-panel" id="red-ui-library-dialog-load-browser"><div class="red-ui-library-browser"><div class="red-ui-treeList" tabindex="0" style="width: 100%; height: 100%;"><div class="red-ui-treeList-container"><div class="red-ui-editableList" style="inset: 0px; position: absolute;"><div class="red-ui-editableList-border red-ui-editableList-container" style="inset: 0px; position: absolute; max-height: none; overflow-y: auto;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="position: static; inset: auto; height: auto;"></ol></div></div></div></div></div></div><div class="red-ui-panels-separator ui-draggable ui-draggable-handle" style="position: relative;"></div><div class="red-ui-panel"><div id="red-ui-library-dialog-load-preview" class="red-ui-panels"><div class="red-ui-panel" id="red-ui-library-dialog-load-preview-text" style="position:relative; height: 50%; overflow-y: hidden;"></div><div class="red-ui-panels-separator ui-draggable ui-draggable-handle" style="position: relative;"></div><div class="red-ui-panel" id="red-ui-library-dialog-load-preview-details"><table id="red-ui-library-dialog-load-preview-details-table" class="red-ui-info-table"></table></div></div></div></div></div></form></div><div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"><div class="ui-dialog-buttonset"><button type="button" class="ui-button ui-corner-all ui-widget">Cancel</button><button type="button" class="primary ui-button ui-corner-all ui-widget">Load</button></div></div></div><div class="red-ui-editor-dialog red-ui-popover-panel" style="display: none;"><ul class="red-ui-menu red-ui-menu-compact"><li><a href="http://localhost:1880/#">Configuration nodes</a></li><li><a href="http://localhost:1880/#">Unused configuration nodes</a></li><li><a href="http://localhost:1880/#">Modified nodes and flows</a></li><li><a href="http://localhost:1880/#">Invalid nodes</a></li><li><a href="http://localhost:1880/#">Unknown nodes</a></li><li><a href="http://localhost:1880/#">Unused subflows</a></li><li><a href="http://localhost:1880/#">Hidden flows</a></li><li><a href="http://localhost:1880/#">Current flow</a></li></ul></div><div tabindex="-1" role="dialog" class="ui-dialog red-ui-editor-dialog ui-widget ui-widget-content ui-front ui-dialog-buttons ui-draggable" aria-describedby="red-ui-clipboard-dialog" aria-labelledby="ui-id-3" style="display: none;"><div class="ui-dialog-titlebar ui-corner-all ui-widget-header ui-helper-clearfix ui-draggable-handle"><span id="ui-id-3" class="ui-dialog-title">&nbsp;</span><button type="button" class="ui-button ui-corner-all ui-widget ui-button-icon-only ui-dialog-titlebar-close hide" title="Close"><span class="ui-button-icon ui-icon ui-icon-closethick"></span><span class="ui-button-icon-space"> </span>Close</button></div><div id="red-ui-clipboard-dialog" class="hide ui-dialog-content ui-widget-content" style="display: block;"><form class="dialog-form form-horizontal"></form></div><div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"><div class="ui-dialog-buttonset"><button type="button" id="red-ui-clipboard-dialog-cancel" class="ui-button ui-corner-all ui-widget">Cancel</button><button type="button" id="red-ui-clipboard-dialog-download" class="primary ui-button ui-corner-all ui-widget">Download</button><button type="button" id="red-ui-clipboard-dialog-export" class="primary ui-button ui-corner-all ui-widget">Copy to clipboard</button><button type="button" id="red-ui-clipboard-dialog-ok" class="primary ui-button ui-corner-all ui-widget">Import</button><button type="button" id="red-ui-clipboard-dialog-import-conflict" class="primary ui-button ui-corner-all ui-widget">Import selected</button></div></div></div><script type="application/javascript" src="./Node-RED _ maindashboard_files/tinycolor-min.js"></script><script type="application/javascript" src="./Node-RED _ maindashboard_files/gridstack.min.js"></script><div class="monaco-aria-container"><div class="monaco-alert" role="alert" aria-atomic="true"></div><div class="monaco-alert" role="alert" aria-atomic="true"></div><div class="monaco-status" role="complementary" aria-live="polite" aria-atomic="true"></div><div class="monaco-status" role="complementary" aria-live="polite" aria-atomic="true"></div></div><script type="application/javascript" src="./Node-RED _ maindashboard_files/gridstack.jQueryUI.min.js"></script><ul class="red-ui-menu red-ui-menu-dropdown pull-right" style="position: absolute; top: 68.868px; left: 1864.79px; display: none;"><li><a id="red-ui-tabs-menu-option-info" tabindex="-1" href="http://localhost:1880/#"><i class="fa fa-info"></i> <span class="red-ui-menu-label"><span>Information</span></span></a></li><li><a id="red-ui-tabs-menu-option-help" tabindex="-1" href="http://localhost:1880/#"><i class="fa fa-book"></i> <span class="red-ui-menu-label"><span>Help</span></span></a></li><li><a id="red-ui-tabs-menu-option-debug" tabindex="-1" href="http://localhost:1880/#"><i class="fa fa-bug"></i> <span class="red-ui-menu-label"><span>Debug messages</span></span></a></li><li><a id="red-ui-tabs-menu-option-config" tabindex="-1" href="http://localhost:1880/#"><i class="fa fa-cog"></i> <span class="red-ui-menu-label"><span>Configuration nodes</span></span></a></li><li><a id="red-ui-tabs-menu-option-context" tabindex="-1" href="http://localhost:1880/#"><i class="fa fa-database"></i> <span class="red-ui-menu-label"><span>Context Data</span></span></a></li><li><a id="red-ui-tabs-menu-option-dashboard-2.0" tabindex="-1" href="http://localhost:1880/#"><i class="fa fa-bar-chart"></i> <span class="red-ui-menu-label"><span>Dashboard 2.0</span></span></a></li><li><a id="red-ui-tabs-menu-option-dashboard" tabindex="-1" href="http://localhost:1880/#"><i class="fa fa-bar-chart"></i> <span class="red-ui-menu-label"><span>Dashboard</span></span></a></li></ul></body></html>